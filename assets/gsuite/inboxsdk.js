/*!
 * InboxSDK
 * https://www.inboxsdk.com/
 *
 * The use of InboxSDK is governed by the Terms of Services located at
 * https://www.inboxsdk.com/terms


 *  __    __            _     _          _                _                      ___                 _ _ ___
 * / / /\ \ \__ _ _ __ | |_  | |_ ___   | |__   __ _  ___| | __   ___  _ __     / _ \_ __ ___   __ _(_) / _ \
 * \ \/  \/ / _` | '_ \| __| | __/ _ \  | '_ \ / _` |/ __| |/ /  / _ \| '_ \   / /_\/ '_ ` _ \ / _` | | \// /
 *  \  /\  / (_| | | | | |_  | || (_) | | | | | (_| | (__|   <  | (_) | | | | / /_\\| | | | | | (_| | | | \/
 *   \/  \/ \__,_|_| |_|\__|  \__\___/  |_| |_|\__,_|\___|_|\_\  \___/|_| |_| \____/|_| |_| |_|\__,_|_|_| ()
 *
 * Like complex reverse engineering? Want to make Gmail and Inbox a hackable platform?
 *
 * Join us at: www.streak.com/careers?source=sdk
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).InboxSDK=e()}}((function(){var e;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,n){t.exports=function(e,t){return t.get?t.get.call(e):t.value},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,n){t.exports=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],7:[function(e,t,n){t.exports=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],8:[function(e,t,n){var r=e("./classApplyDescriptorGet.js"),i=e("./classExtractFieldDescriptor.js");t.exports=function(e,t){var n=i(e,t,"get");return r(e,n)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./classApplyDescriptorGet.js":4,"./classExtractFieldDescriptor.js":7}],9:[function(e,t,n){var r=e("./classApplyDescriptorSet.js"),i=e("./classExtractFieldDescriptor.js");t.exports=function(e,t,n){var o=i(e,t,"set");return r(e,o,n),n},t.exports.__esModule=!0,t.exports.default=t.exports},{"./classApplyDescriptorSet.js":5,"./classExtractFieldDescriptor.js":7}],10:[function(e,t,n){var r=e("./toPropertyKey.js");function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}t.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":26}],11:[function(e,t,n){var r=e("./toPropertyKey.js");t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":26}],12:[function(e,t,n){function r(){return t.exports=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],13:[function(e,t,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],14:[function(e,t,n){var r=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":23}],15:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],16:[function(e,t,n){var r=e("./typeof.js").default;function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}t.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":27}],17:[function(e,t,n){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],18:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],19:[function(e,t,n){var r=e("./defineProperty.js");t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach((function(t){r(e,t,n[t])}))}return e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./defineProperty.js":11}],20:[function(e,t,n){var r=e("./objectWithoutPropertiesLoose.js");t.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},t.exports.__esModule=!0,t.exports.default=t.exports},{"./objectWithoutPropertiesLoose.js":21}],21:[function(e,t,n){t.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},t.exports.__esModule=!0,t.exports.default=t.exports},{}],22:[function(e,t,n){var r=e("./typeof.js").default,i=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":3,"./typeof.js":27}],23:[function(e,t,n){function r(e,n){return t.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e,n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],24:[function(e,t,n){var r=e("./arrayWithHoles.js"),i=e("./iterableToArrayLimit.js"),o=e("./unsupportedIterableToArray.js"),a=e("./nonIterableRest.js");t.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithHoles.js":2,"./iterableToArrayLimit.js":17,"./nonIterableRest.js":18,"./unsupportedIterableToArray.js":28}],25:[function(e,t,n){var r=e("./typeof.js").default;t.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":27}],26:[function(e,t,n){var r=e("./typeof.js").default,i=e("./toPrimitive.js");t.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":25,"./typeof.js":27}],27:[function(e,t,n){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],28:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],29:[function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n._62To10=n._36To10=n._32To10=n._16To10=n._8To10=n._2To10=n._10To62=n._10To36=n._10To32=n._10To16=n._10To8=n._10To2=n.convertBase=void 0;var i=r(e("decimal.js"));i.default.set({precision:1e9}),i.default.set({toExpPos:9e15});var o=function(e,t,n){var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if("number"!=typeof e&&"string"!=typeof e||"number"==typeof e&&!isFinite(e))throw new Error("First augument must be a number or string.");if("number"==typeof e&&(e=e.toString()),"number"!=typeof t&&"string"!=typeof t)throw new Error("Second augument must be a number or string.");if("number"==typeof t){if(!Number.isInteger(t))throw new Error("Second augument must be integer.");if(!(2<=t&&t<=62))throw new Error("Second augument must be between 2 and 62.");t=r.substr(0,t)}if(t.length<=1)throw new Error("Second augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");if(t.length!==new Set(t).size)throw new Error("Second augument must not contain the same characters.");if(!new RegExp("^["+t+"]+$").test(e))throw new Error("First augument must consist of second augument.");if("number"!=typeof n&&"string"!=typeof n)throw new Error("Third augument must be a number or string.");if("number"==typeof n){if(!Number.isInteger(n))throw new Error("Third augument must be integer.");if(!(2<=n&&n<=62))throw new Error("Third augument must be between 2 and 62.");n=r.substr(0,n)}if(n.length<=1)throw new Error("Third augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");if(n.length!==new Set(n).size)throw new Error("Third augument must not contain the same characters.");var o=function(e,t){for(var n={},r=0;r<t.length;r++)n[t.substr(r,1)]=new i.default(r);var o=new i.default(t.length),a=new i.default(0);for(r=0;r<e.length;r++){var s=n[e.substr(-1*(r+1),1)],l=i.default.pow(o,r),u=s.times(l);a=a.plus(u)}return a.toString()}(e,t);return function(e,t){for(var n=[],r=new i.default(e),o=new i.default(t.length);!r.isZero();){var a=r.mod(o).toNumber();r=r.dividedToIntegerBy(o),n.unshift(t.substr(a,1))}return 0===n.length&&n.unshift("0"),n.join("")}(o,n)};n.convertBase=o;n._10To2=function(e){return o(e,10,2)};n._10To8=function(e){return o(e,10,8)};n._10To16=function(e){return o(e,10,16)};n._10To32=function(e){return o(e,10,32)};n._10To36=function(e){return o(e,10,36)};n._10To62=function(e){return o(e,10,62)};n._2To10=function(e){return o(e,2,10)};n._8To10=function(e){return o(e,8,10)};n._16To10=function(e){return o(e,16,10)};n._32To10=function(e){return o(e,32,10)};n._36To10=function(e){return o(e,36,10)};n._62To10=function(e){return o(e,62,10)}},{"decimal.js":134}],30:[function(e,t,n){t.exports=function(e,t){var n="number"==typeof e,r="number"==typeof t;n&&!r?(t=e,e=0):n||r||(e=0,t=0);var i=(t|=0)-(e|=0);if(i<0)throw new Error("array length must be positive");for(var o=new Array(i),a=0,s=e;a<i;a++,s++)o[a]=s;return o}},{}],31:[function(e,t,n){"use strict";var r=e("./raw"),i=[],o=[],a=r.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function s(e){var t;(t=i.length?i.pop():new l).task=e,r(t)}function l(){this.task=null}t.exports=s,l.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(o.push(e),a())}finally{this.task=null,i[i.length]=this}}},{"./raw":32}],32:[function(e,t,n){(function(e){(function(){"use strict";function n(e){i.length||(r(),!0),i[i.length]=e}t.exports=n;var r,i=[],o=0,a=1024;function s(){for(;o<i.length;){var e=o;if(o+=1,i[e].call(),o>a){for(var t=0,n=i.length-o;t<n;t++)i[t]=i[t+o];i.length-=o,o=0}}i.length=0,o=0,!1}var l,u,c,d=void 0!==e?e:self,f=d.MutationObserver||d.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof f?(l=1,u=new f(s),c=document.createTextNode(""),u.observe(c,{characterData:!0}),r=function(){l=-l,c.data=l}):r=p(s),n.requestFlush=r,n.makeRequestCallFromTimer=p}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){(function(n){(function(){"use strict";var r=e("object-assign");
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function o(e){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=e("util/"),s=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function d(e){return!o(e)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=t.exports=g,p=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(a.isFunction(e)){if(u)return e.name;var t=e.toString().match(p);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function _(e){if(u||!a.isFunction(e))return a.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function b(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function g(e,t){e||b(e,!0,t,"==",f.ok)}function v(e,t,n,r){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=y(e),o=y(t);if(i&&!o||!i&&o)return!1;if(i)return v(e=l.call(e),t=l.call(t),n);var s,u,c=k(e),d=k(t);if(c.length!==d.length)return!1;for(c.sort(),d.sort(),u=c.length-1;u>=0;u--)if(c[u]!==d[u])return!1;for(u=c.length-1;u>=0;u--)if(!v(e[s=c[u]],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function E(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&b(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&i&&!n;if((!e&&a.isError(i)&&o&&w(i,n)||s)&&b(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(_(e.actual),128)+" "+e.operator+" "+m(_(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=h(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(f.AssertionError,Error),f.fail=b,f.ok=g,f.equal=function(e,t,n){e!=t&&b(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&b(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){v(e,t,!1)||b(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){v(e,t,!0)||b(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){v(e,t,!1)&&b(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){v(t,n,!0)&&b(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&b(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&b(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){E(!0,e,t,n)},f.doesNotThrow=function(e,t,n){E(!1,e,t,n)},f.ifError=function(e){if(e)throw e},f.strict=r((function e(t,n){t||b(t,!0,n,"==",e)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var k=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":365,"util/":458}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Array(2*e.length-1);t[0]=e[0];for(var n=0,r=arguments.length<=1?0:arguments.length-1;n<r;n++){var o=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];t[2*n+1]=o&&Object.prototype.hasOwnProperty.call(o,"__html")?o.__html:(0,i.default)(o),t[2*n+2]=e[n+1]}return t.join("")};var r,i=(r=e("lodash/escape"))&&r.__esModule?r:{default:r};t.exports=n.default,t.exports.default=n.default},{"lodash/escape":312}],35:[function(e,t,n){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":91}],36:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":92}],37:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":93}],38:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":94}],39:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],40:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("../core-js/object/define-property"),o=(r=i)&&r.__esModule?r:{default:r};n.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":37}],41:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("../core-js/object/assign"),o=(r=i)&&r.__esModule?r:{default:r};n.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},{"../core-js/object/assign":36}],42:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,l=n-i;s<l;s+=a)o.push(c(e,s,s+a>l?l:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],43:[function(t,n,r){!function(t){"use strict";var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,a=Math.floor,s="[BigNumber Error] ",l=s+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,d=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,h=1e9;function m(e){var t=0|e;return e>0||e===t?t:t-1}function _(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=c-t.length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function b(e,t){var n,r,i=e.c,o=t.c,a=e.s,s=t.s,l=e.e,u=t.e;if(!a||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=l==u,!i||!o)return r?0:!i^n?1:-1;if(!r)return l>u^n?1:-1;for(s=(l=i.length)<(u=o.length)?l:u,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return l==u?0:l>u^n?1:-1}function g(e,t,n,r){if(e<t||e>n||e!==a(e))throw Error(s+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return m(e.e/c)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var n,r,E,k,x,S,C,I,A,D,T=H.prototype={constructor:H,toString:null,valueOf:null},M=new H(1),O=20,P=4,R=-7,L=21,j=-1e7,N=1e7,V=!1,B=1,q=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz";function H(e,t){var n,o,s,u,f,p,h,m,_=this;if(!(_ instanceof H))return new H(e,t);if(null==t){if(e&&!0===e._isBigNumber)return _.s=e.s,void(!e.c||e.e>N?_.c=_.e=null:e.e<j?_.c=[_.e=0]:(_.e=e.e,_.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(_.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,f=e;f>=10;f/=10,u++);return void(u>N?_.c=_.e=null:(_.e=u,_.c=[e]))}m=String(e)}else{if(!i.test(m=String(e)))return E(_,m,p);_.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(u=m.indexOf("."))>-1&&(m=m.replace(".","")),(f=m.search(/e/i))>0?(u<0&&(u=f),u+=+m.slice(f+1),m=m.substring(0,f)):u<0&&(u=m.length)}else{if(g(t,2,F.length,"Base"),10==t)return G(_=new H(e),O+_.e+1,P);if(m=String(e),p="number"==typeof e){if(0*e!=0)return E(_,m,p,t);if(_.s=1/e<0?(m=m.slice(1),-1):1,H.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else _.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(n=F.slice(0,t),u=f=0,h=m.length;f<h;f++)if(n.indexOf(o=m.charAt(f))<0){if("."==o){if(f>u){u=h;continue}}else if(!s&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){s=!0,f=-1,u=0;continue}return E(_,String(e),p,t)}p=!1,(u=(m=r(m,t,10,_.s)).indexOf("."))>-1?m=m.replace(".",""):u=m.length}for(f=0;48===m.charCodeAt(f);f++);for(h=m.length;48===m.charCodeAt(--h););if(m=m.slice(f,++h)){if(h-=f,p&&H.DEBUG&&h>15&&(e>d||e!==a(e)))throw Error(l+_.s*e);if((u=u-f-1)>N)_.c=_.e=null;else if(u<j)_.c=[_.e=0];else{if(_.e=u,_.c=[],f=(u+1)%c,u<0&&(f+=c),f<h){for(f&&_.c.push(+m.slice(0,f)),h-=c;f<h;)_.c.push(+m.slice(f,f+=c));f=c-(m=m.slice(f)).length}else f-=h;for(;f--;m+="0");_.c.push(+m)}}else _.c=[_.e=0]}function z(e,t,n,r){var i,o,a,s,l;if(null==n?n=P:g(n,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)l=_(e.c),l=1==r||2==r&&(a<=R||a>=L)?y(l,a):w(l,a,"0");else if(o=(e=G(new H(e),t,n)).e,s=(l=_(e.c)).length,1==r||2==r&&(t<=o||o<=R)){for(;s<t;l+="0",s++);l=y(l,o)}else if(t-=a,l=w(l,o,"0"),o+1>s){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-s)>0)for(o+1==s&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function W(e,t){for(var n,r=1,i=new H(e[0]);r<e.length;r++){if(!(n=new H(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function $(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*c-1)>N?e.c=e.e=null:n<j?e.c=[e.e=0]:(e.e=n,e.c=t),e}function G(e,t,n,r){var i,s,l,d,p,h,m,_=e.c,b=f;if(_){e:{for(i=1,d=_[0];d>=10;d/=10,i++);if((s=t-i)<0)s+=c,l=t,m=(p=_[h=0])/b[i-l-1]%10|0;else if((h=o((s+1)/c))>=_.length){if(!r)break e;for(;_.length<=h;_.push(0));p=m=0,i=1,l=(s%=c)-c+1}else{for(p=d=_[h],i=1;d>=10;d/=10,i++);m=(l=(s%=c)-c+i)<0?0:p/b[i-l-1]%10|0}if(r=r||t<0||null!=_[h+1]||(l<0?p:p%b[i-l-1]),r=n<4?(m||r)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(s>0?l>0?p/b[i-l]:0:_[h-1])%10&1||n==(e.s<0?8:7)),t<1||!_[0])return _.length=0,r?(t-=e.e+1,_[0]=b[(c-t%c)%c],e.e=-t||0):_[0]=e.e=0,e;if(0==s?(_.length=h,d=1,h--):(_.length=h+1,d=b[c-s],_[h]=l>0?a(p/b[i-l]%b[l])*d:0),r)for(;;){if(0==h){for(s=1,l=_[0];l>=10;l/=10,s++);for(l=_[0]+=d,d=1;l>=10;l/=10,d++);s!=d&&(e.e++,_[0]==u&&(_[0]=1));break}if(_[h]+=d,_[h]!=u)break;_[h--]=0,d=1}for(s=_.length;0===_[--s];_.pop());}e.e>N?e.c=e.e=null:e.e<j&&(e.c=[e.e=0])}return e}function K(e){var t,n=e.e;return null===n?e.toString():(t=_(e.c),t=n<=R||n>=L?y(t,n):w(t,n,"0"),e.s<0?"-"+t:t)}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(n=e[t],0,h,t),O=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(n=e[t],0,8,t),P=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(g(n[0],-h,0,t),g(n[1],0,h,t),R=n[0],L=n[1]):(g(n,-h,h,t),R=-(L=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)g(n[0],-h,-1,t),g(n[1],1,h,t),j=n[0],N=n[1];else{if(g(n,-h,h,t),!n)throw Error(s+t+" cannot be zero: "+n);j=-(N=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(s+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw V=!n,Error(s+"crypto unavailable");V=n}else V=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(n=e[t],0,9,t),B=n),e.hasOwnProperty(t="POW_PRECISION")&&(g(n=e[t],0,h,t),q=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(s+t+" not an object: "+n);U=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(s+t+" invalid: "+n);F=n}}return{DECIMAL_PLACES:O,ROUNDING_MODE:P,EXPONENTIAL_AT:[R,L],RANGE:[j,N],CRYPTO:V,MODULO_MODE:B,POW_PRECISION:q,FORMAT:U,ALPHABET:F}},H.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!H.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-h&&i<=h&&i===a(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=u||n!==a(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(s+"Invalid BigNumber: "+e)},H.maximum=H.max=function(){return W(arguments,T.lt)},H.minimum=H.min=function(){return W(arguments,T.gt)},H.random=(k=9007199254740992,x=Math.random()*k&2097151?function(){return a(Math.random()*k)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,l,u=0,d=[],p=new H(M);if(null==e?e=O:g(e,0,h),i=o(e/c),V)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[u]=n[0],t[u+1]=n[1]):(d.push(l%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw V=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(d.push(l%1e14),u+=7);u=i/7}if(!V)for(;u<i;)(l=x())<9e15&&(d[u++]=l%1e14);for(i=d[--u],e%=c,i&&e&&(l=f[c-e],d[u]=a(i/l)*l);0===d[u];d.pop(),u--);if(u<0)d=[r=0];else{for(r=-1;0===d[0];d.splice(0,1),r-=c);for(u=1,l=d[0];l>=10;l/=10,u++);u<c&&(r-=c-u)}return p.e=r,p.c=d,p}),H.sum=function(){for(var e=1,t=arguments,n=new H(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var i,o,a=[0],s=0,l=e.length;s<l;){for(o=a.length;o--;a[o]*=t);for(a[0]+=r.indexOf(e.charAt(s++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,o,a,s){var l,u,c,d,f,p,h,m,b=r.indexOf("."),g=O,v=P;for(b>=0&&(d=q,q=0,r=r.replace(".",""),p=(m=new H(i)).pow(r.length-b),q=d,m.c=t(w(_(p.c),p.e,"0"),10,o,e),m.e=m.c.length),c=d=(h=t(r,i,o,s?(l=F,e):(l=e,F))).length;0==h[--d];h.pop());if(!h[0])return l.charAt(0);if(b<0?--c:(p.c=h,p.e=c,p.s=a,h=(p=n(p,m,g,v,o)).c,f=p.r,c=p.e),b=h[u=c+g+1],d=o/2,f=f||u<0||null!=h[u+1],f=v<4?(null!=b||f)&&(0==v||v==(p.s<0?3:2)):b>d||b==d&&(4==v||f||6==v&&1&h[u-1]||v==(p.s<0?8:7)),u<1||!h[0])r=f?w(l.charAt(1),-g,l.charAt(0)):l.charAt(0);else{if(h.length=u,f)for(--o;++h[--u]>o;)h[u]=0,u||(++c,h=[1].concat(h));for(d=h.length;!h[--d];);for(b=0,r="";b<=d;r+=l.charAt(h[b++]));r=w(r,c,l.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,i,o,a,s=0,l=e.length,u=t%p,c=t/p|0;for(e=e.slice();l--;)s=((i=u*(o=e[l]%p)+(r=c*o+(a=e[l]/p|0)*u)%p*p+s)/n|0)+(r/p|0)+c*a,e[l]=i%n;return s&&(e=[s].concat(e)),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,o,s,l){var d,f,p,h,_,b,g,v,y,w,E,k,x,S,C,I,A,D=r.s==i.s?1:-1,T=r.c,M=i.c;if(!(T&&T[0]&&M&&M[0]))return new H(r.s&&i.s&&(T?!M||T[0]!=M[0]:M)?T&&0==T[0]||!M?0*D:D/0:NaN);for(y=(v=new H(D)).c=[],D=o+(f=r.e-i.e)+1,l||(l=u,f=m(r.e/c)-m(i.e/c),D=D/c|0),p=0;M[p]==(T[p]||0);p++);if(M[p]>(T[p]||0)&&f--,D<0)y.push(1),h=!0;else{for(S=T.length,I=M.length,p=0,D+=2,(_=a(l/(M[0]+1)))>1&&(M=e(M,_,l),T=e(T,_,l),I=M.length,S=T.length),x=I,E=(w=T.slice(0,I)).length;E<I;w[E++]=0);A=M.slice(),A=[0].concat(A),C=M[0],M[1]>=l/2&&C++;do{if(_=0,(d=t(M,w,I,E))<0){if(k=w[0],I!=E&&(k=k*l+(w[1]||0)),(_=a(k/C))>1)for(_>=l&&(_=l-1),g=(b=e(M,_,l)).length,E=w.length;1==t(b,w,g,E);)_--,n(b,I<g?A:M,g,l),g=b.length,d=1;else 0==_&&(d=_=1),g=(b=M.slice()).length;if(g<E&&(b=[0].concat(b)),n(w,b,E,l),E=w.length,-1==d)for(;t(M,w,I,E)<1;)_++,n(w,I<E?A:M,E,l),E=w.length}else 0===d&&(_++,w=[0]);y[p++]=_,w[0]?w[E++]=T[x]||0:(w=[T[x]],E=1)}while((x++<S||null!=w[0])&&D--);h=null!=w[0],y[0]||y.splice(0,1)}if(l==u){for(p=1,D=y[0];D>=10;D/=10,p++);G(v,o+(v.e=p+f*c-1)+1,s,h)}else v.e=f,v.r=+h;return v}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,C=/^([^.]+)\.$/,I=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,D=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,n,r){var i,o=n?t:t.replace(D,"");if(A.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(S,(function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t})),r&&(i=r,o=o.replace(C,"$1").replace(I,"0.$1")),t!=o))return new H(o,i);if(H.DEBUG)throw Error(s+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},T.absoluteValue=T.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},T.comparedTo=function(e,t){return b(this,new H(e,t))},T.decimalPlaces=T.dp=function(e,t){var n,r,i,o=this;if(null!=e)return g(e,0,h),null==t?t=P:g(t,0,8),G(new H(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=((i=n.length-1)-m(this.e/c))*c,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},T.dividedBy=T.div=function(e,t){return n(this,new H(e,t),O,P)},T.dividedToIntegerBy=T.idiv=function(e,t){return n(this,new H(e,t),0,1)},T.exponentiatedBy=T.pow=function(e,t){var n,r,i,l,u,d,f,p,h=this;if((e=new H(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+K(e));if(null!=t&&(t=new H(t)),u=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return p=new H(Math.pow(+K(h),u?2-v(e):+K(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(r=!d&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||u&&h.c[1]>=24e7:h.c[0]<8e13||u&&h.c[0]<=9999975e7)))return l=h.s<0&&v(e)?-0:0,h.e>-1&&(l=1/l),new H(d?1/l:l);q&&(l=o(q/c+2))}for(u?(n=new H(.5),d&&(e.s=1),f=v(e)):f=(i=Math.abs(+K(e)))%2,p=new H(M);;){if(f){if(!(p=p.times(h)).c)break;l?p.c.length>l&&(p.c.length=l):r&&(p=p.mod(t))}if(i){if(0===(i=a(i/2)))break;f=i%2}else if(G(e=e.times(n),e.e+1,1),e.e>14)f=v(e);else{if(0===(i=+K(e)))break;f=i%2}h=h.times(h),l?h.c&&h.c.length>l&&(h.c.length=l):r&&(h=h.mod(t))}return r?p:(d&&(p=M.div(p)),t?p.mod(t):l?G(p,q,P,undefined):p)},T.integerValue=function(e){var t=new H(this);return null==e?e=P:g(e,0,8),G(t,t.e+1,e)},T.isEqualTo=T.eq=function(e,t){return 0===b(this,new H(e,t))},T.isFinite=function(){return!!this.c},T.isGreaterThan=T.gt=function(e,t){return b(this,new H(e,t))>0},T.isGreaterThanOrEqualTo=T.gte=function(e,t){return 1===(t=b(this,new H(e,t)))||0===t},T.isInteger=function(){return!!this.c&&m(this.e/c)>this.c.length-2},T.isLessThan=T.lt=function(e,t){return b(this,new H(e,t))<0},T.isLessThanOrEqualTo=T.lte=function(e,t){return-1===(t=b(this,new H(e,t)))||0===t},T.isNaN=function(){return!this.s},T.isNegative=function(){return this.s<0},T.isPositive=function(){return this.s>0},T.isZero=function(){return!!this.c&&0==this.c[0]},T.minus=function(e,t){var n,r,i,o,a=this,s=a.s;if(t=(e=new H(e,t)).s,!s||!t)return new H(NaN);if(s!=t)return e.s=-t,a.plus(e);var l=a.e/c,d=e.e/c,f=a.c,p=e.c;if(!l||!d){if(!f||!p)return f?(e.s=-t,e):new H(p?a:NaN);if(!f[0]||!p[0])return p[0]?(e.s=-t,e):new H(f[0]?a:3==P?-0:0)}if(l=m(l),d=m(d),f=f.slice(),s=l-d){for((o=s<0)?(s=-s,i=f):(d=l,i=p),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(r=(o=(s=f.length)<(t=p.length))?s:t,s=t=0;t<r;t++)if(f[t]!=p[t]){o=f[t]<p[t];break}if(o&&(i=f,f=p,p=i,e.s=-e.s),(t=(r=p.length)-(n=f.length))>0)for(;t--;f[n++]=0);for(t=u-1;r>s;){if(f[--r]<p[r]){for(n=r;n&&!f[--n];f[n]=t);--f[n],f[r]+=u}f[r]-=p[r]}for(;0==f[0];f.splice(0,1),--d);return f[0]?$(e,f,d):(e.s=3==P?-1:1,e.c=[e.e=0],e)},T.modulo=T.mod=function(e,t){var r,i,o=this;return e=new H(e,t),!o.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||o.c&&!o.c[0]?new H(o):(9==B?(i=e.s,e.s=1,r=n(o,e,0,3),e.s=i,r.s*=i):r=n(o,e,0,B),(e=o.minus(r.times(e))).c[0]||1!=B||(e.s=o.s),e)},T.multipliedBy=T.times=function(e,t){var n,r,i,o,a,s,l,d,f,h,_,b,g,v,y,w=this,E=w.c,k=(e=new H(e,t)).c;if(!(E&&k&&E[0]&&k[0]))return!w.s||!e.s||E&&!E[0]&&!k||k&&!k[0]&&!E?e.c=e.e=e.s=null:(e.s*=w.s,E&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=m(w.e/c)+m(e.e/c),e.s*=w.s,(l=E.length)<(h=k.length)&&(g=E,E=k,k=g,i=l,l=h,h=i),i=l+h,g=[];i--;g.push(0));for(v=u,y=p,i=h;--i>=0;){for(n=0,_=k[i]%y,b=k[i]/y|0,o=i+(a=l);o>i;)n=((d=_*(d=E[--a]%y)+(s=b*d+(f=E[a]/y|0)*_)%y*y+g[o]+n)/v|0)+(s/y|0)+b*f,g[o--]=d%v;g[o]=n}return n?++r:g.splice(0,1),$(e,g,r)},T.negated=function(){var e=new H(this);return e.s=-e.s||null,e},T.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,r.minus(e);var o=r.e/c,a=e.e/c,s=r.c,l=e.c;if(!o||!a){if(!s||!l)return new H(i/0);if(!s[0]||!l[0])return l[0]?e:new H(s[0]?r:0*i)}if(o=m(o),a=m(a),s=s.slice(),i=o-a){for(i>0?(a=o,n=l):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(t=l.length)<0&&(n=l,l=s,s=n,t=i),i=0;t;)i=(s[--t]=s[t]+l[t]+i)/u|0,s[t]=u===s[t]?0:s[t]%u;return i&&(s=[i].concat(s),++a),$(e,s,a)},T.precision=T.sd=function(e,t){var n,r,i,o=this;if(null!=e&&e!==!!e)return g(e,1,h),null==t?t=P:g(t,0,8),G(new H(o),e,t);if(!(n=o.c))return null;if(r=(i=n.length-1)*c+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},T.shiftedBy=function(e){return g(e,-d,d),this.times("1e"+e)},T.squareRoot=T.sqrt=function(){var e,t,r,i,o,a=this,s=a.c,l=a.s,u=a.e,c=O+4,d=new H("0.5");if(1!==l||!s||!s[0])return new H(!l||l<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(l=Math.sqrt(+K(a)))||l==1/0?(((t=_(s)).length+u)%2==0&&(t+="0"),l=Math.sqrt(+t),u=m((u+1)/2)-(u<0||u%2),r=new H(t=l==1/0?"5e"+u:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new H(l+""),r.c[0])for((l=(u=r.e)+c)<3&&(l=0);;)if(o=r,r=d.times(o.plus(n(a,o,c,1))),_(o.c).slice(0,l)===(t=_(r.c)).slice(0,l)){if(r.e<u&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(r,r.e+O+2,1),e=!r.times(r).eq(a));break}if(!i&&(G(o,o.e+O+2,0),o.times(o).eq(a))){r=o;break}c+=4,l+=4,i=1}return G(r,r.e+O+1,P,e)},T.toExponential=function(e,t){return null!=e&&(g(e,0,h),e++),z(this,e,t,1)},T.toFixed=function(e,t){return null!=e&&(g(e,0,h),e=e+this.e+1),z(this,e,t)},T.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=U;else if("object"!=typeof n)throw Error(s+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var o,a=r.split("."),l=+n.groupSize,u=+n.secondaryGroupSize,c=n.groupSeparator||"",d=a[0],f=a[1],p=i.s<0,h=p?d.slice(1):d,m=h.length;if(u&&(o=l,l=u,u=o,m-=o),l>0&&m>0){for(o=m%l||l,d=h.substr(0,o);o<m;o+=l)d+=c+h.substr(o,l);u>0&&(d+=c+h.slice(o)),p&&(d="-"+d)}r=f?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):d}return(n.prefix||"")+r+(n.suffix||"")},T.toFraction=function(e){var t,r,i,o,a,l,u,d,p,h,m,b,g=this,v=g.c;if(null!=e&&(!(u=new H(e)).isInteger()&&(u.c||1!==u.s)||u.lt(M)))throw Error(s+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+K(u));if(!v)return new H(g);for(t=new H(M),p=r=new H(M),i=d=new H(M),b=_(v),a=t.e=b.length-g.e-1,t.c[0]=f[(l=a%c)<0?c+l:l],e=!e||u.comparedTo(t)>0?a>0?t:p:u,l=N,N=1/0,u=new H(b),d.c[0]=0;h=n(u,t,0,1),1!=(o=r.plus(h.times(i))).comparedTo(e);)r=i,i=o,p=d.plus(h.times(o=p)),d=o,t=u.minus(h.times(o=t)),u=o;return o=n(e.minus(r),i,0,1),d=d.plus(o.times(p)),r=r.plus(o.times(i)),d.s=p.s=g.s,m=n(p,i,a*=2,P).minus(g).abs().comparedTo(n(d,r,a,P).minus(g).abs())<1?[p,i]:[d,r],N=l,m},T.toNumber=function(){return+K(this)},T.toPrecision=function(e,t){return null!=e&&g(e,1,h),z(this,e,t,2)},T.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=R||o>=L?y(_(n.c),o):w(_(n.c),o,"0"):10===e?t=w(_((n=G(new H(n),O+o+1,P)).c),n.e,"0"):(g(e,2,F.length,"Base"),t=r(w(_(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},T.valueOf=T.toJSON=function(){return K(this)},T._isBigNumber=!0,null!=t&&H.set(t),H}(),r.default=r.BigNumber=r,"function"==typeof e&&e.amd?e((function(){return r})):void 0!==n&&n.exports?n.exports=r:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=r)}(this)},{}],44:[function(e,t,n){(function(r){(function(){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/slicedToArray")),a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),u=i(e("lodash/throttle")),c=i(e("lodash/sortBy")),d=function(){function e(t){var n=this,i=t.key,s=t.getAfromB,d=t.getBfromA,f=t.storage,p=t.saveThrottle,h=t.maxLimit,m=t.maxAge;(0,a.default)(this,e),(0,l.default)(this,"_key",void 0),(0,l.default)(this,"_getAfromB",void 0),(0,l.default)(this,"_getBfromA",void 0),(0,l.default)(this,"_storage",void 0),(0,l.default)(this,"_aToTimestamp",new Map),(0,l.default)(this,"_aToB",new Map),(0,l.default)(this,"_bToA",new Map),(0,l.default)(this,"_aToBpromise",new Map),(0,l.default)(this,"_bToApromise",new Map),(0,l.default)(this,"_saveCache",void 0),this._key=i,this._getBfromA=d,this._getAfromB=s,this._storage=f||(r.localStorage?r.localStorage:null),null==p&&(p=3e3),null==h&&(h=1e3),null==m&&(m=31536e6);var _=h,b=m;this._saveCache=(0,u.default)((function(){var e=n._storage;if(e){n._loadCache();var t=Date.now()-b,r={version:2,ids:[]};n._aToB.forEach((function(e,i){var o=n._aToTimestamp.get(i);null!=o&&o>t&&r.ids.push([i,e,o])})),r.ids.length>_&&(r.ids=(0,c.default)(r.ids,(function(e){return(0,o.default)(e,3)[2]})).slice(-_)),e.setItem(n._key,JSON.stringify(r))}}),p,{leading:!1}),this._loadCache()}return(0,s.default)(e,[{key:"_loadCache",value:function(){var e=this._storage;if(e)try{var t=JSON.parse(e.getItem(this._key)||"null");if(!t||2!==t.version)return;var n=!0,r=!1,i=void 0;try{for(var a,s=t.ids[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=(0,o.default)(l,3),c=u[0],d=u[1],f=u[2];this._aToTimestamp.set(c,f),this._aToB.set(c,d),this._bToA.set(d,c)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}catch(e){console.error("failed to load BiMapCache from storage",e)}}},{key:"_rememberPair",value:function(e,t){this._aToTimestamp.set(e,Date.now()),this._aToB.set(e,t),this._bToA.set(t,e),this._saveCache()}},{key:"_update",value:function(e){this._aToTimestamp.set(e,Date.now()),this._saveCache()}},{key:"getBfromA",value:function(e){var t=this,n=this._aToB.get(e);if(n)return this._update(e),Promise.resolve(n);var r=this._aToBpromise.get(e);if(r)return r;var i=this._getBfromA(e);return this._aToBpromise.set(e,i),i.then((function(n){i===t._aToBpromise.get(e)&&(t._aToBpromise.delete(e),t._rememberPair(e,n))}),(function(){i===t._aToBpromise.get(e)&&t._aToBpromise.delete(e)})),i}},{key:"getAfromB",value:function(e){var t=this,n=this._bToA.get(e);if(n)return this._update(n),Promise.resolve(n);var r=this._bToApromise.get(e);if(r)return r;var i=this._getAfromB(e);return this._bToApromise.set(e,i),i.then((function(n){i===t._bToApromise.get(e)&&(t._bToApromise.delete(e),t._rememberPair(n,e))}),(function(){i===t._bToApromise.get(e)&&t._bToApromise.delete(e)})),i}},{key:"removeAfromCache",value:function(e){if(this._aToBpromise.delete(e),this._aToB.has(e)){var t=this._aToB.get(e);this._aToB.delete(e),this._bToA.delete(t),this._saveCache()}}},{key:"removeBfromCache",value:function(e){if(this._bToApromise.delete(e),this._bToA.has(e)){var t=this._bToA.get(e);this._aToB.delete(t),this._bToA.delete(e),this._saveCache()}}}]),e}();n.default=d,t.exports=n.default,t.exports.default=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/slicedToArray":24,"lodash/sortBy":349,"lodash/throttle":353}],45:[function(e,t,n){(function(e){(function(){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];t.exports=function(){for(var t=[],r=0;r<n.length;r++)"function"==typeof e[n[r]]&&(t[t.length]=n[r]);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){(function(t){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=e("base64-js"),r=e("ieee754");n.Buffer=a,n.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=a.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|d(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||U(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return l(e),o(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return r?-1:N(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),U(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(U(s))return a;e[n+a]=s}return a}function g(e,t,n,r){return B(N(t,e.length-n),e,n,r)}function v(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return v(e,t,n,r)}function w(e,t,n,r){return B(V(t),e,n,r)}function E(e,t,n,r){return B(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(q(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(q(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(q(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),l=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),d=0;d<l;++d)if(u[d]!==c[d]){o=u[d],s=c[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return g(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j(e[o]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,i,o){return t=+t,n>>>=0,o||O(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function R(e,t,n,i,o){return t=+t,n>>>=0,o||O(e,0,n,8),r.write(e,t,n,i,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=a.prototype,r},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var L=/[^+/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":42,buffer:46,ieee754:149}],47:[function(e,t,n){"use strict";var r=e("get-intrinsic")("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length")}catch(e){r=null}t.exports=r},{"get-intrinsic":48}],48:[function(e,t,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,d=e("has-symbols")(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"==typeof Uint8Array?r:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},_=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=f(i.prototype))}return m[t]=n,n},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=e("function-bind"),v=e("has"),y=g.call(Function.call,Array.prototype.concat),w=g.call(Function.apply,Array.prototype.splice),E=g.call(Function.call,String.prototype.replace),k=g.call(Function.call,String.prototype.slice),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,C=function(e){var t=k(e,0,1),n=k(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(e,x,(function(e,t,n,i){r[r.length]=n?E(i,S,"$1"):t||e})),r},I=function(e,t){var n,r=e;if(v(b,r)&&(r="%"+(n=b[r])[0]+"%"),v(m,r)){var o=m[r];if(o===p&&(o=_(r)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var n=C(e),r=n.length>0?n[0]:"",o=I("%"+r+"%",t),s=o.name,u=o.value,c=!1,d=o.alias;d&&(r=d[0],w(n,y([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var h=n[f],_=k(h,0,1),b=k(h,-1);if(('"'===_||"'"===_||"`"===_||'"'===b||"'"===b||"`"===b)&&_!==b)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&p||(c=!0),v(m,s="%"+(r+="."+h)+"%"))u=m[s];else if(null!=u){if(!(h in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&f+1>=n.length){var g=l(u,h);u=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:u[h]}else p=v(u,h),u=u[h];p&&!c&&(m[s]=u)}}return u}},{"function-bind":145,has:148,"has-symbols":146}],49:[function(e,t,n){(function(n){(function(){"use strict";var r=e("foreach"),i=e("available-typed-arrays"),o=e("call-bind/callBound"),a=o("Object.prototype.toString"),s=e("has-symbols")()&&"symbol"==typeof Symbol.toStringTag,l=i(),u=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},c=o("String.prototype.slice"),d={},f=e("es-abstract/helpers/getOwnPropertyDescriptor"),p=Object.getPrototypeOf;s&&f&&p&&r(l,(function(e){var t=new n[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=p(t),i=f(r,Symbol.toStringTag);if(!i){var o=p(r);i=f(o,Symbol.toStringTag)}d[e]=i.get}));t.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s){var t=c(a(e),8,-1);return u(l,t)>-1}return!!f&&function(e){var t=!1;return r(d,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":45,"call-bind/callBound":53,"es-abstract/helpers/getOwnPropertyDescriptor":47,foreach:143,"has-symbols":146}],50:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],51:[function(e,t,n){"use strict";var r=e("is-arguments"),i=e("is-generator-function"),o=e("which-typed-array"),a=e("is-typed-array");function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=s(Object.prototype.toString),d=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(l)var h=s(BigInt.prototype.valueOf);if(u)var m=s(Symbol.prototype.valueOf);function _(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function b(e){return"[object Map]"===c(e)}function g(e){return"[object Set]"===c(e)}function v(e){return"[object WeakMap]"===c(e)}function y(e){return"[object WeakSet]"===c(e)}function w(e){return"[object ArrayBuffer]"===c(e)}function E(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function k(e){return"[object DataView]"===c(e)}function x(e){return"undefined"!=typeof DataView&&(k.working?k(e):e instanceof DataView)}n.isArgumentsObject=r,n.isGeneratorFunction=i,n.isTypedArray=a,n.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},n.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||x(e)},n.isUint8Array=function(e){return"Uint8Array"===o(e)},n.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},n.isUint16Array=function(e){return"Uint16Array"===o(e)},n.isUint32Array=function(e){return"Uint32Array"===o(e)},n.isInt8Array=function(e){return"Int8Array"===o(e)},n.isInt16Array=function(e){return"Int16Array"===o(e)},n.isInt32Array=function(e){return"Int32Array"===o(e)},n.isFloat32Array=function(e){return"Float32Array"===o(e)},n.isFloat64Array=function(e){return"Float64Array"===o(e)},n.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},n.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},b.working="undefined"!=typeof Map&&b(new Map),n.isMap=function(e){return"undefined"!=typeof Map&&(b.working?b(e):e instanceof Map)},g.working="undefined"!=typeof Set&&g(new Set),n.isSet=function(e){return"undefined"!=typeof Set&&(g.working?g(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),n.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},y.working="undefined"!=typeof WeakSet&&y(new WeakSet),n.isWeakSet=function(e){return y(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),n.isArrayBuffer=E,k.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),n.isDataView=x;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(e){return"[object SharedArrayBuffer]"===c(e)}function I(e){return void 0!==S&&(void 0===C.working&&(C.working=C(new S)),C.working?C(e):e instanceof S)}function A(e){return _(e,d)}function D(e){return _(e,f)}function T(e){return _(e,p)}function M(e){return l&&_(e,h)}function O(e){return u&&_(e,m)}n.isSharedArrayBuffer=I,n.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},n.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},n.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},n.isGeneratorObject=function(e){return"[object Generator]"===c(e)},n.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},n.isNumberObject=A,n.isStringObject=D,n.isBooleanObject=T,n.isBigIntObject=M,n.isSymbolObject=O,n.isBoxedPrimitive=function(e){return A(e)||D(e)||T(e)||M(e)||O(e)},n.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(E(e)||I(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(n,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},{"is-arguments":154,"is-generator-function":155,"is-typed-array":49,"which-typed-array":459}],52:[function(e,t,n){(function(t){(function(){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;n.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<o;s=r[++n])_(s)||!w(s)?a+=" "+s:a+=" "+l(s);return a},n.deprecate=function(e,r){if(void 0!==t&&!0===t.noDeprecation)return e;if(void 0===t)return function(){return n.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var o={},a=/^$/;if(t.env.NODE_DEBUG){var s=t.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function l(e,t){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),d(r,e,r.depth)}function u(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function c(e,t){return e}function d(e,t,r){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return g(i)||(i=d(e,i,r)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}(e,t);if(o)return o;var a=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),k(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(t);if(0===a.length){if(x(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return f(t)}var u,c="",w=!1,S=["{","}"];(h(t)&&(w=!0,S=["[","]"]),x(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return y(t)&&(c=" "+RegExp.prototype.toString.call(t)),E(t)&&(c=" "+Date.prototype.toUTCString.call(t)),k(t)&&(c=" "+f(t)),0!==a.length||w&&0!=t.length?r<0?y(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=w?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)A(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))})),o}(e,t,r,s,a):a.map((function(n){return p(e,t,r,s,n,w)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,c,S)):S[0]+c+S[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),A(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=_(n)?d(e,l.value,null):d(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function _(e){return null===e}function b(e){return"number"==typeof e}function g(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==typeof e&&null!==e}function E(e){return w(e)&&"[object Date]"===S(e)}function k(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function x(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(a.test(e)){var r=t.pid;o[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},n.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.types=e("./support/types"),n.isArray=h,n.isBoolean=m,n.isNull=_,n.isNullOrUndefined=function(e){return null==e},n.isNumber=b,n.isString=g,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=v,n.isRegExp=y,n.types.isRegExp=y,n.isObject=w,n.isDate=E,n.types.isDate=E,n.isError=k,n.types.isNativeError=k,n.isFunction=x,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":"),[e.getDate(),I[e.getMonth()],t].join(" ")),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var D="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}n.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(D&&e[D]){var t;if("function"!=typeof(t=e[D]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),D&&Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},n.promisify.custom=D,n.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(a.bind(null,null,e))}),(function(e){t.nextTick(T.bind(null,e,a))}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":50,"./support/types":51,_process:398,inherits:152}],53:[function(e,t,n){"use strict";var r=e("get-intrinsic"),i=e("./"),o=i(r("String.prototype.indexOf"));t.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},{"./":54,"get-intrinsic":55}],54:[function(e,t,n){"use strict";var r=e("function-bind"),i=e("get-intrinsic"),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}t.exports=function(e){var t=s(r,a,arguments);l&&u&&(l(t,"length").configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))}));return t};var d=function(){return s(r,o,arguments)};u?u(t.exports,"apply",{value:d}):t.exports.apply=d},{"function-bind":145,"get-intrinsic":55}],55:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"function-bind":145,has:148,"has-symbols":146}],56:[function(t,n,r){
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var a=r.apply(null,i);a&&e.push(a)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var s in i)t.call(i,s)&&i[s]&&e.push(s);else e.push(i.toString())}}return e.join(" ")}void 0!==n&&n.exports?(r.default=r,n.exports=r):"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],(function(){return r})):window.classNames=r}()},{}],57:[function(e,t,n){(function(r){(function(){"use strict";n.__esModule=!0,n.default=function(e,t){if(s)return s.call(e,t);var n=e;do{if((0,o.default)(n,t))return n;n=n.parentNode}while(n&&n!==r.document);return null};var i,o=(i=e("matches-selector-ng"))&&i.__esModule?i:{default:i};var a=r.Element&&r.Element.prototype,s=a&&a.closest;t.exports=n.default,t.exports.default=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"matches-selector-ng":364}],58:[function(e,t,n){"use strict";t.exports=function(e,t){var n=this,r=n.constructor;return n.callbacks={},n.activeSequences=[],n.resetTimer,n.ignoreNextKeyup=!1,n.ignoreNextKeypress=!1,n.nextExpectedAction=!1,n.element=e,n.addEvents(t),r.instances.push(n),n},t.exports.prototype.bind=e("./prototype/bind"),t.exports.prototype.bindMultiple=e("./prototype/bindMultiple"),t.exports.prototype.trigger=e("./prototype/trigger"),t.exports.prototype.reset=e("./prototype/reset.js"),t.exports.prototype.stopCallback=e("./prototype/stopCallback"),t.exports.prototype.handleKey=e("./prototype/handleKey"),t.exports.prototype.addEvents=e("./prototype/addEvents"),t.exports.prototype.bindSingle=e("./prototype/bindSingle"),t.exports.prototype.getKeyInfo=e("./prototype/getKeyInfo"),t.exports.prototype.pickBestAction=e("./prototype/pickBestAction"),t.exports.prototype.getReverseMap=e("./prototype/getReverseMap"),t.exports.prototype.getMatches=e("./prototype/getMatches"),t.exports.prototype.resetSequences=e("./prototype/resetSequences"),t.exports.prototype.fireCallback=e("./prototype/fireCallback"),t.exports.prototype.bindSequence=e("./prototype/bindSequence"),t.exports.prototype.resetSequenceTimer=e("./prototype/resetSequenceTimer"),t.exports.instances=[],t.exports.reset=e("./reset"),t.exports.REVERSE_MAP=null},{"./prototype/addEvents":59,"./prototype/bind":60,"./prototype/bindMultiple":61,"./prototype/bindSequence":62,"./prototype/bindSingle":63,"./prototype/fireCallback":64,"./prototype/getKeyInfo":65,"./prototype/getMatches":66,"./prototype/getReverseMap":67,"./prototype/handleKey":68,"./prototype/pickBestAction":71,"./prototype/reset.js":72,"./prototype/resetSequenceTimer":73,"./prototype/resetSequences":74,"./prototype/stopCallback":75,"./prototype/trigger":76,"./reset":77}],59:[function(e,t,n){"use strict";t.exports=function(t){var n,r,i,o=this.element;r=e("./handleKeyEvent"),(n=e("../../helpers/addEvent"))(o,"keypress",i=r.bind(this),t),n(o,"keydown",i,t),n(o,"keyup",i,t)}},{"../../helpers/addEvent":78,"./handleKeyEvent":69}],60:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,n)}},{}],61:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r=[],i=0;i<e.length;++i)r.push(this.bindSingle(e[i],t,n));return function(){for(var e=0;e<r.length;e++)r[e]()}}},{}],62:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=this;function a(e){return function(){return o.nextExpectedAction=e,++r.currentLevel,o.resetSequenceTimer(),!0}}function s(n){var a;o.fireCallback(r,n,t),"keyup"!==i&&(a=e("../../helpers/characterFromEvent"),o.ignoreNextKeyup=a(n)),setTimeout((function(){o.resetSequences()}),10)}r.currentLevel=0;for(var l=[],u=0;u<n.length;++u){var c=u+1===n.length?s:a(i||o.getKeyInfo(n[u+1]).action);l.push(o.bindSingle(n[u],c,i,t,u,r))}return function(){for(var e=0;e<l.length;e++)l[e]()}}},{"../../helpers/characterFromEvent":79}],63:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o){var a,s=this,l=(e=e.replace(/\s+/g," ")).split(" ");if(l.length>1)return s.bindSequence(e,l,t,n);a=s.getKeyInfo(e,n),s.callbacks[a.key]=s.callbacks[a.key]||{sequences:[],singles:[]};var u=s.callbacks[a.key][r?"sequences":"singles"],c={callback:t,originalCallback:o||t,modifiers:a.modifiers,action:a.action,seq:r,level:i,combo:e};return u.push(c),function(){var e=u.indexOf(c);u.splice(e,1)}}},{}],64:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){if(this.stopCallback(n,n.target||n.srcElement,r,i))return!0;var o=t(n,r);return!1===o&&(e("../../helpers/preventDefault")(n),e("../../helpers/stopPropagation")(n)),o}},{"../../helpers/preventDefault":83,"../../helpers/stopPropagation":88}],65:[function(e,t,n){"use strict";t.exports=function(t,n){var r,i,o,a,s,l,u=[];for(r=e("../../helpers/keysFromString")(t),a=e("../../helpers/special-aliases"),s=e("../../helpers/shift-map"),l=e("../../helpers/isModifier"),o=0;o<r.length;++o)a[i=r[o]]&&(i=a[i]),n&&"keypress"!==n&&s[i]&&(i=s[i],u.push("shift")),l(i)&&u.push(i);return{key:i,modifiers:u,action:n=this.pickBestAction(i,u,n)}}},{"../../helpers/isModifier":81,"../../helpers/keysFromString":82,"../../helpers/shift-map":84,"../../helpers/special-aliases":85}],66:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s,l,u,c=this,d=[],f=r.type;if(!c.callbacks[t])return[];l=e("../../helpers/isModifier"),"keyup"===f&&l(t)&&(n=[t]);var p=c.callbacks[t].sequences.reverse().concat(c.callbacks[t].singles.reverse());for(c.callbacks[t].sequences.reverse(),c.callbacks[t].singles.reverse(),s=0;s<p.length;++s){var h=p[s];!i&&h.seq&&h.originalCallback.currentLevel!==h.level||f===h.action&&(u=e("./modifiersMatch"),("keypress"===f&&!r.metaKey&&!r.ctrlKey||u(n,h.modifiers))&&d.push(h))}return d}},{"../../helpers/isModifier":81,"./modifiersMatch":70}],67:[function(e,t,n){"use strict";t.exports=function(){var t,n=this.constructor;if(!n.REVERSE_MAP)for(var r in n.REVERSE_MAP={},t=e("../../helpers/special-keys-map"))r>95&&r<112||t.hasOwnProperty(r)&&(n.REVERSE_MAP[t[r]]=r);return n.REVERSE_MAP}},{"../../helpers/special-keys-map":87}],68:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i,o,a,s,l=this,u=[],c=0,d=!1;for(i=l.getMatches(t,n,r),o=0;o<i.length;++o)i[o].seq&&(c=Math.max(c,i[o].level));for(o=0;o<i.length;++o)if(i[o].seq){if(i[o].level!==c)continue;if(d=!0,u.push(i[o].originalCallback),!l.fireCallback(i[o].callback,r,i[o].combo,i[o].seq)){u=[];break}}else d||l.fireCallback(i[o].callback,r,i[o].combo);s="keypress"===r.type&&l.ignoreNextKeypress,a=e("../../helpers/isModifier"),r.type!==l.nextExpectedAction||a(t)||s||l.resetSequences(u),l.ignoreNextKeypress=d&&"keydown"===r.type}},{"../../helpers/isModifier":81}],69:[function(e,t,n){"use strict";t.exports=function(t){var n,r=this;"number"!=typeof t.which&&(t.which=t.keyCode);var i=e("../../helpers/characterFromEvent")(t);i&&("keyup"!==t.type||r.ignoreNextKeyup!==i?(n=e("../../helpers/eventModifiers"),r.handleKey(i,n(t),t)):r.ignoreNextKeyup=!1)}},{"../../helpers/characterFromEvent":79,"../../helpers/eventModifiers":80}],70:[function(e,t,n){"use strict";t.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},{}],71:[function(e,t,n){"use strict";t.exports=function(e,t,n){return n||(n=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===n&&t.length&&(n="keydown"),n}},{}],72:[function(e,t,n){"use strict";t.exports=function(){return this.callbacks={},this.directMap={},this}},{}],73:[function(e,t,n){"use strict";t.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout((function(){e.resetSequences()}),1e3)}},{}],74:[function(e,t,n){"use strict";t.exports=function(e){for(var t in e=e||[],this.callbacks)for(var n=this.callbacks[t].sequences,r=0;r<n.length;r++)-1===e.indexOf(n[r].originalCallback)&&(n[r].originalCallback.currentLevel=0);this.nextExpectedAction=e.length>0}},{}],75:[function(e,t,n){"use strict";t.exports=function(e,t){return!((" "+t.className+" ").indexOf(" combokeys ")>-1)&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)}},{}],76:[function(e,t,n){"use strict";t.exports=function(e,t){}},{}],77:[function(e,t,n){"use strict";t.exports=function(){this.instances.forEach((function(e){e.reset()}))}},{}],78:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}},{}],79:[function(e,t,n){"use strict";t.exports=function(t){var n,r;if(n=e("./special-keys-map"),r=e("./special-characters-map"),"keypress"===t.type){var i=String.fromCharCode(t.which);return t.shiftKey||(i=i.toLowerCase()),i}return n[t.which]?n[t.which]:r[t.which]?r[t.which]:String.fromCharCode(t.which).toLowerCase()}},{"./special-characters-map":86,"./special-keys-map":87}],80:[function(e,t,n){"use strict";t.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},{}],81:[function(e,t,n){"use strict";t.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},{}],82:[function(e,t,n){"use strict";t.exports=function(e){return"+"===e?["+"]:e.split("+")}},{}],83:[function(e,t,n){"use strict";t.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},{}],84:[function(e,t,n){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},{}],85:[function(e,t,n){"use strict";t.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},{}],86:[function(e,t,n){"use strict";t.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},{}],87:[function(e,t,n){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var r=1;r<20;++r)t.exports[111+r]="f"+r;for(r=0;r<=9;++r)t.exports[r+96]=r},{}],88:[function(e,t,n){"use strict";t.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},{}],89:[function(e,t,n){"use strict";t.exports=e("./Combokeys")},{"./Combokeys":58}],90:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){for(var r=a(e),l=a(t),u={all:n.buffer||0,top:n.topBuffer||0,bottom:n.bottomBuffer||0,left:n.leftBuffer||0,right:n.rightBuffer||0},c=Array.isArray(n.position)?n.position:[n.position].filter(Boolean),d=Array.isArray(n.hAlign)?n.hAlign:[n.hAlign].filter(Boolean),f=Array.isArray(n.vAlign)?n.vAlign:[n.vAlign].filter(Boolean),p=c.length>0&&n.forcePosition?c:(0,o.default)(c.concat(["top","bottom","left","right"])),h=d.length>0&&n.forceHAlign?d:(0,o.default)(d.concat(["center","left","right"])),m=f.length>0&&n.forceVAlign?f:(0,o.default)(f.concat(["center","top","bottom"])),_=(0,i.default)(p.map((function(e){return"cover"===e?(0,i.default)(h.map((function(t){return m.map((function(n){return{position:e,hAlign:t,vAlign:n}}))}))):"top"===e||"bottom"===e?h.map((function(t){return{position:e,hAlign:t,vAlign:"center"}})):m.map((function(t){return{position:e,hAlign:"center",vAlign:t}}))}))),b=null,g=0;g<_.length;g++){var v=_[g],y=s(r,l,v,u),w=y.top,E=y.left;if(w-u.all-u.top>=0&&E-u.all-u.left>=0&&w+r.height+u.all+u.bottom<=window.innerHeight&&E+r.width+u.all+u.right<=window.innerWidth){b={choice:v,coord:y};break}}if(!b){var k={position:c[0]||"top",hAlign:d[0]||"center",vAlign:f[0]||"center"};b={choice:k,coord:s(r,l,k,u)}}return e.style.top="".concat(b.coord.top,"px"),e.style.left="".concat(b.coord.left,"px"),b.choice};var i=r(e("lodash/flatten")),o=r(e("lodash/uniq"));function a(e){var t=e.getBoundingClientRect();return"width"in t||(t=Object.assign({width:t.right-t.left,height:t.bottom-t.top},t)),t}function s(e,t,n,r){var i=n.position,o=n.hAlign,a=n.vAlign,s=0,l=0;if("cover"===i){switch(o){case"center":l=Math.round((t.left+t.right-e.width)/2);break;case"left":l=Math.floor(t.left);break;case"right":l=Math.ceil(t.right-e.width);break;default:throw new Error("Should not happen")}switch(a){case"center":s=Math.round((t.top+t.bottom-e.height)/2);break;case"top":s=Math.floor(t.top);break;case"bottom":s=Math.ceil(t.bottom-e.height);break;default:throw new Error("Should not happen")}}else if("top"===i||"bottom"===i){switch(i){case"top":s=Math.floor(t.top-e.height-r.all-r.bottom);break;case"bottom":s=Math.ceil(t.bottom+r.all+r.top);break;default:throw new Error("Should not happen")}switch(o){case"center":l=Math.round((t.left+t.right-e.width)/2);break;case"left":l=Math.round(t.left);break;case"right":l=Math.round(t.right-e.width);break;default:throw new Error("Should not happen")}}else{switch(i){case"left":l=Math.floor(t.left-e.width-r.all-r.right);break;case"right":l=Math.ceil(t.right+r.all+r.left);break;default:throw new Error("Should not happen")}switch(a){case"center":s=Math.round((t.top+t.bottom-e.height)/2);break;case"top":s=Math.round(t.top);break;case"bottom":s=Math.round(t.bottom-e.height);break;default:throw new Error("Should not happen")}}return{top:s,left:l}}t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/flatten":318,"lodash/uniq":358}],91:[function(e,t,n){var r=e("../../modules/_core"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(e){return i.stringify.apply(i,arguments)}},{"../../modules/_core":99}],92:[function(e,t,n){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":99,"../../modules/es6.object.assign":131}],93:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":99,"../../modules/es6.object.define-property":132}],94:[function(e,t,n){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":99,"../../modules/es6.object.keys":133}],95:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],96:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":112}],97:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_to-length"),o=e("./_to-absolute-index");t.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":124,"./_to-iobject":126,"./_to-length":127}],98:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],99:[function(e,t,n){var r=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},{}],100:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":95}],101:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],102:[function(e,t,n){t.exports=!e("./_fails")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},{"./_fails":106}],103:[function(e,t,n){var r=e("./_is-object"),i=e("./_global").document,o=r(i)&&r(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":107,"./_is-object":112}],104:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],105:[function(e,t,n){var r=e("./_global"),i=e("./_core"),o=e("./_ctx"),a=e("./_hide"),s=e("./_has"),l="prototype",u=function(e,t,n){var c,d,f,p=e&u.F,h=e&u.G,m=e&u.S,_=e&u.P,b=e&u.B,g=e&u.W,v=h?i:i[t]||(i[t]={}),y=v[l],w=h?r:m?r[t]:(r[t]||{})[l];for(c in h&&(n=t),n)(d=!p&&w&&void 0!==w[c])&&s(v,c)||(f=d?w[c]:n[c],v[c]=h&&"function"!=typeof w[c]?n[c]:b&&d?o(f,r):g&&w[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[l]=e[l],t}(f):_&&"function"==typeof f?o(Function.call,f):f,_&&((v.virtual||(v.virtual={}))[c]=f,e&u.R&&y&&!y[c]&&a(y,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":99,"./_ctx":100,"./_global":107,"./_has":108,"./_hide":109}],106:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],107:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],108:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],109:[function(e,t,n){var r=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":102,"./_object-dp":115,"./_property-desc":121}],110:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")((function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a}))},{"./_descriptors":102,"./_dom-create":103,"./_fails":106}],111:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":98}],112:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],113:[function(e,t,n){t.exports=!0},{}],114:[function(e,t,n){"use strict";var r=e("./_descriptors"),i=e("./_object-keys"),o=e("./_object-gops"),a=e("./_object-pie"),s=e("./_to-object"),l=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,c=1,d=o.f,f=a.f;u>c;)for(var p,h=l(arguments[c++]),m=d?i(h).concat(d(h)):i(h),_=m.length,b=0;_>b;)p=m[b++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:u},{"./_descriptors":102,"./_fails":106,"./_iobject":111,"./_object-gops":116,"./_object-keys":118,"./_object-pie":119,"./_to-object":128}],115:[function(e,t,n){var r=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":96,"./_descriptors":102,"./_ie8-dom-define":110,"./_to-primitive":129}],116:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],117:[function(e,t,n){var r=e("./_has"),i=e("./_to-iobject"),o=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},{"./_array-includes":97,"./_has":108,"./_shared-key":122,"./_to-iobject":126}],118:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,i)}},{"./_enum-bug-keys":104,"./_object-keys-internal":117}],119:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],120:[function(e,t,n){var r=e("./_export"),i=e("./_core"),o=e("./_fails");t.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},{"./_core":99,"./_export":105,"./_fails":106}],121:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],122:[function(e,t,n){var r=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return r[e]||(r[e]=i(e))}},{"./_shared":123,"./_uid":130}],123:[function(e,t,n){var r=e("./_core"),i=e("./_global"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:e("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":99,"./_global":107,"./_library":113}],124:[function(e,t,n){var r=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},{"./_to-integer":125}],125:[function(e,t,n){var r=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},{}],126:[function(e,t,n){var r=e("./_iobject"),i=e("./_defined");t.exports=function(e){return r(i(e))}},{"./_defined":101,"./_iobject":111}],127:[function(e,t,n){var r=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(r(e),9007199254740991):0}},{"./_to-integer":125}],128:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":101}],129:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":112}],130:[function(e,t,n){var r=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+i).toString(36))}},{}],131:[function(e,t,n){var r=e("./_export");r(r.S+r.F,"Object",{assign:e("./_object-assign")})},{"./_export":105,"./_object-assign":114}],132:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":102,"./_export":105,"./_object-dp":115}],133:[function(e,t,n){var r=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",(function(){return function(e){return i(r(e))}}))},{"./_object-keys":118,"./_object-sap":120,"./_to-object":128}],134:[function(t,n,r){!function(t){"use strict";var r,i,o,a,s=9e15,l=1e9,u="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},p=!0,h="[DecimalError] ",m=h+"Invalid argument: ",_=h+"Precision limit exceeded",b=h+"crypto unavailable",g=Math.floor,v=Math.pow,y=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,E=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,k=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=1e7,S=7,C=c.length-1,I=d.length-1,A={name:"[object Decimal]"};function D(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)r=e[t]+"",(n=S-r.length)&&(o+=q(n)),o+=r;a=e[t],(n=S-(r=a+"").length)&&(o+=q(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function T(e,t,n){if(e!==~~e||e<t||e>n)throw Error(m+e)}function M(e,t,n,r){var i,o,a,s;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=S,i=0):(i=Math.ceil((t+1)/S),t%=S),o=v(10,S-t),s=e[i]%o|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(e[i+1]/o/100|0)==v(10,t-2)-1||(s==o/2||0==s)&&0==(e[i+1]/o/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(e[i+1]/o/1e3|0)==v(10,t-3)-1,a}function O(e,t,n){for(var r,i,o=[0],a=0,s=e.length;a<s;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=u.indexOf(e.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}A.absoluteValue=A.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),R(e)},A.ceil=function(){return R(new this.constructor(this),this.e+1,2)},A.comparedTo=A.cmp=function(e){var t,n,r,i,o=this,a=o.d,s=(e=new o.constructor(e)).d,l=o.s,u=e.s;if(!a||!s)return l&&u?l!==u?l:a===s?0:!a^l<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==e.e)return o.e>e.e^l<0?1:-1;for(t=0,n=(r=a.length)<(i=s.length)?r:i;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},A.cosine=A.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+S,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?r=(1/Y(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10");e.precision+=n,t=J(e,1,t.times(r),new e(1));for(var o=n;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,Q(r,n)),r.precision=e,r.rounding=t,R(2==a||3==a?n.neg():n,e,t,!0)):new r(1):new r(NaN)},A.cubeRoot=A.cbrt=function(){var e,t,n,r,i,o,a,s,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(p=!1,(o=c.s*v(c.s*c,1/3))&&Math.abs(o)!=1/0?r=new d(o.toString()):(n=D(c.d),(o=((e=c.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=v(n,1/3),e=g((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),a=(e=d.precision)+3;;)if(u=(l=(s=r).times(s).times(s)).plus(c),r=P(u.plus(c).times(s),u.plus(l),a+2,1),D(s.d).slice(0,a)===(n=D(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(R(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(R(s,e+1,0),s.times(s).times(s).eq(c))){r=s;break}a+=4,i=1}return p=!0,R(r,e,d.rounding,t)},A.decimalPlaces=A.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-g(this.e/S))*S,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},A.dividedBy=A.div=function(e){return P(this,new this.constructor(e))},A.dividedToIntegerBy=A.divToInt=function(e){var t=this.constructor;return R(P(this,new t(e),0,1,1),t.precision,t.rounding)},A.equals=A.eq=function(e){return 0===this.cmp(e)},A.floor=function(){return R(new this.constructor(this),this.e+1,3)},A.greaterThan=A.gt=function(e){return this.cmp(e)>0},A.greaterThanOrEqualTo=A.gte=function(e){var t=this.cmp(e);return 1==t||0===t},A.hyperbolicCosine=A.cosh=function(){var e,t,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?t=(1/Y(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=J(a,1,o.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=o.times(o),o=s.minus(l.times(c.minus(l.times(c))));return R(o,a.precision=n,a.rounding=r,!0)},A.hyperbolicSine=A.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=J(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=J(o,2,i=i.times(1/Y(5,e)),i,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);e--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=t,o.rounding=n,R(i,t,n,!0)},A.hyperbolicTangent=A.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,P(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},A.inverseCosine=A.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?V(n,i,o):new n(0):new n(NaN):t.isZero()?V(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=V(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},A.inverseHyperbolicCosine=A.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,p=!1,n=n.times(n).minus(1).sqrt().plus(n),p=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},A.inverseHyperbolicSine=A.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,p=!1,n=n.times(n).plus(1).sqrt().plus(n),p=!0,r.precision=e,r.rounding=t,n.ln())},A.inverseHyperbolicTangent=A.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?R(new o(i),e,t,!0):(o.precision=n=r-i.e,i=P(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},A.inverseSine=A.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=V(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},A.inverseTangent=A.atan=function(){var e,t,n,r,i,o,a,s,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=I)return(a=V(c,d+4,f).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=I)return(a=V(c,d+4,f).times(.5)).s=u.s,a}for(c.precision=s=d+10,c.rounding=1,e=n=Math.min(28,s/S+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(p=!1,t=Math.ceil(s/S),r=1,l=u.times(u),a=new c(u),i=u;-1!==e;)if(i=i.times(l),o=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=o.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===o.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),p=!0,R(a,c.precision=d,c.rounding=f,!0)},A.isFinite=function(){return!!this.d},A.isInteger=A.isInt=function(){return!!this.d&&g(this.e/S)>this.d.length-2},A.isNaN=function(){return!this.s},A.isNegative=A.isNeg=function(){return this.s<0},A.isPositive=A.isPos=function(){return this.s>0},A.isZero=function(){return!!this.d&&0===this.d[0]},A.lessThan=A.lt=function(e){return this.cmp(e)<0},A.lessThanOrEqualTo=A.lte=function(e){return this.cmp(e)<1},A.logarithm=A.log=function(e){var t,n,r,i,o,a,s,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(p=!1,a=W(u,s=d+5),r=t?N(c,s+10):W(e,s),M((l=P(a,r,s,1)).d,i=d,f))do{if(a=W(u,s+=10),r=t?N(c,s+10):W(e,s),l=P(a,r,s,1),!o){+D(l.d).slice(i+1,i+15)+1==1e14&&(l=R(l,d+1,0));break}}while(M(l.d,i+=10,f));return p=!0,R(l,d,f)},A.minus=A.sub=function(e){var t,n,r,i,o,a,s,l,u,c,d,f,h=this,m=h.constructor;if(e=new m(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new m(e.d||h.s!==e.s?h:NaN):e=new m(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(u=h.d,f=e.d,s=m.precision,l=m.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else{if(!u[0])return new m(3===l?-0:0);e=new m(h)}return p?R(e,s,l):e}if(n=g(e.e/S),c=g(h.e/S),u=u.slice(),o=c-n){for((d=o<0)?(t=u,o=-o,a=f.length):(t=f,n=c,a=u.length),o>(r=Math.max(Math.ceil(s/S),a)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((d=(r=u.length)<(a=f.length))&&(a=r),r=0;r<a;r++)if(u[r]!=f[r]){d=u[r]<f[r];break}o=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),a=u.length,r=f.length-a;r>0;--r)u[a++]=0;for(r=f.length;r>o;){if(u[--r]<f[r]){for(i=r;i&&0===u[--i];)u[i]=x-1;--u[i],u[r]+=x}u[r]-=f[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=j(u,n),p?R(e,s,l):e):new m(3===l?-0:0)},A.modulo=A.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?R(new r(n),r.precision,r.rounding):(p=!1,9==r.modulo?(t=P(n,e.abs(),0,3,1)).s*=e.s:t=P(n,e,0,r.modulo,1),t=t.times(e),p=!0,n.minus(t))},A.naturalExponential=A.exp=function(){return z(this)},A.naturalLogarithm=A.ln=function(){return W(this)},A.negated=A.neg=function(){var e=new this.constructor(this);return e.s=-e.s,R(e)},A.plus=A.add=function(e){var t,n,r,i,o,a,s,l,u,c,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new f(e.d||d.s===e.s?d:NaN)):e=new f(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,c=e.d,s=f.precision,l=f.rounding,!u[0]||!c[0])return c[0]||(e=new f(d)),p?R(e,s,l):e;if(o=g(d.e/S),r=g(e.e/S),u=u.slice(),i=o-r){for(i<0?(n=u,i=-i,a=c.length):(n=c,r=o,a=u.length),i>(a=(o=Math.ceil(s/S))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=u.length)-(i=c.length)<0&&(i=a,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/x|0,u[i]%=x;for(t&&(u.unshift(t),++r),a=u.length;0==u[--a];)u.pop();return e.d=u,e.e=j(u,r),p?R(e,s,l):e},A.precision=A.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(m+e);return n.d?(t=B(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},A.round=function(){var e=this,t=e.constructor;return R(new t(e),e.e+1,t.rounding)},A.sine=A.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+S,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return J(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Y(5,n)),t=J(e,2,t,t);for(var i,o=new e(5),a=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(s))));return t}(r,Q(r,n)),r.precision=e,r.rounding=t,R(a>2?n.neg():n,e,t,!0)):new r(NaN)},A.squareRoot=A.sqrt=function(){var e,t,n,r,i,o,a=this,s=a.d,l=a.e,u=a.s,c=a.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);for(p=!1,0==(u=Math.sqrt(+a))||u==1/0?(((t=D(s)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=g((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(o=r).plus(P(a,o,n+2,1)).times(.5),D(o.d).slice(0,n)===(t=D(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(R(r,l+1,1),e=!r.times(r).eq(a));break}if(!i&&(R(o,l+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return p=!0,R(r,l,c.rounding,e)},A.tangent=A.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=P(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,R(2==a||4==a?n.neg():n,e,t,!0)):new r(NaN)},A.times=A.mul=function(e){var t,n,r,i,o,a,s,l,u,c=this,d=c.constructor,f=c.d,h=(e=new d(e)).d;if(e.s*=c.s,!(f&&f[0]&&h&&h[0]))return new d(!e.s||f&&!f[0]&&!h||h&&!h[0]&&!f?NaN:f&&h?0*e.s:e.s/0);for(n=g(c.e/S)+g(e.e/S),(l=f.length)<(u=h.length)&&(o=f,f=h,h=o,a=l,l=u,u=a),o=[],r=a=l+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)s=o[i]+h[r]*f[i-r-1]+t,o[i--]=s%x|0,t=s/x|0;o[i]=(o[i]+t)%x|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=j(o,n),p?R(e,d.precision,d.rounding):e},A.toBinary=function(e,t){return Z(this,2,e,t)},A.toDecimalPlaces=A.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(T(e,0,l),void 0===t?t=r.rounding:T(t,0,8),R(n,e+n.e+1,t))},A.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=L(r,!0):(T(e,0,l),void 0===t?t=i.rounding:T(t,0,8),n=L(r=R(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},A.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?n=L(i):(T(e,0,l),void 0===t?t=o.rounding:T(t,0,8),n=L(r=R(new o(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},A.toFraction=function(e){var t,n,r,i,o,a,s,l,u,c,d,f,h=this,_=h.d,b=h.constructor;if(!_)return new b(h);if(u=n=new b(1),r=l=new b(0),a=(o=(t=new b(r)).e=B(_)-h.e-1)%S,t.d[0]=v(10,a<0?S+a:a),null==e)e=o>0?t:u;else{if(!(s=new b(e)).isInt()||s.lt(u))throw Error(m+s);e=s.gt(t)?o>0?t:u:s}for(p=!1,s=new b(D(_)),c=b.precision,b.precision=o=_.length*S*2;d=P(s,t,0,1,1),1!=(i=n.plus(d.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(d.times(i)),l=i,i=t,t=s.minus(d.times(i)),s=i;return i=P(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=h.s,f=P(u,r,o,1).minus(h).abs().cmp(P(l,n,o,1).minus(h).abs())<1?[u,r]:[l,n],b.precision=c,p=!0,f},A.toHexadecimal=A.toHex=function(e,t){return Z(this,16,e,t)},A.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:T(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(p=!1,n=P(n,e,0,t,1).times(e),p=!0,R(n)):(e.s=n.s,n=e),n},A.toNumber=function(){return+this},A.toOctal=function(e,t){return Z(this,8,e,t)},A.toPower=A.pow=function(e){var t,n,r,i,o,a,s=this,l=s.constructor,u=+(e=new l(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new l(v(+s,u));if((s=new l(s)).eq(1))return s;if(r=l.precision,o=l.rounding,e.eq(1))return R(s,r,o);if((t=g(e.e/S))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=U(l,s,n,r),e.s<0?new l(1).div(i):R(i,r,o);if((a=s.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(t=0!=(n=v(+s,u))&&isFinite(n)?new l(n+"").e:g(u*(Math.log("0."+D(s.d))/Math.LN10+s.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(p=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=z(e.times(W(s,r+n)),r)).d&&M((i=R(i,r+5,1)).d,r,o)&&(t=r+10,+D((i=R(z(e.times(W(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=R(i,r+1,0))),i.s=a,p=!0,l.rounding=o,R(i,r,o))},A.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=L(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(T(e,1,l),void 0===t?t=i.rounding:T(t,0,8),n=L(r=R(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},A.toSignificantDigits=A.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(T(e,1,l),void 0===t?t=n.rounding:T(t,0,8)),R(new n(this),e,t)},A.toString=function(){var e=this,t=e.constructor,n=L(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},A.truncated=A.trunc=function(){return R(new this.constructor(this),this.e+1,1)},A.valueOf=A.toJSON=function(){var e=this,t=e.constructor,n=L(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var P=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,o,a,s,l,u){var c,d,f,p,h,m,_,b,v,y,w,E,k,C,I,A,D,T,M,O,P=r.constructor,L=r.s==o.s?1:-1,j=r.d,N=o.d;if(!(j&&j[0]&&N&&N[0]))return new P(r.s&&o.s&&(j?!N||j[0]!=N[0]:N)?j&&0==j[0]||!N?0*L:L/0:NaN);for(u?(h=1,d=r.e-o.e):(u=x,h=S,d=g(r.e/h)-g(o.e/h)),M=N.length,D=j.length,y=(v=new P(L)).d=[],f=0;N[f]==(j[f]||0);f++);if(N[f]>(j[f]||0)&&d--,null==a?(C=a=P.precision,s=P.rounding):C=l?a+(r.e-o.e)+1:a,C<0)y.push(1),m=!0;else{if(C=C/h+2|0,f=0,1==M){for(p=0,N=N[0],C++;(f<D||p)&&C--;f++)I=p*u+(j[f]||0),y[f]=I/N|0,p=I%N|0;m=p||f<D}else{for((p=u/(N[0]+1)|0)>1&&(N=e(N,p,u),j=e(j,p,u),M=N.length,D=j.length),A=M,E=(w=j.slice(0,M)).length;E<M;)w[E++]=0;(O=N.slice()).unshift(0),T=N[0],N[1]>=u/2&&++T;do{p=0,(c=t(N,w,M,E))<0?(k=w[0],M!=E&&(k=k*u+(w[1]||0)),(p=k/T|0)>1?(p>=u&&(p=u-1),1==(c=t(_=e(N,p,u),w,b=_.length,E=w.length))&&(p--,n(_,M<b?O:N,b,u))):(0==p&&(c=p=1),_=N.slice()),(b=_.length)<E&&_.unshift(0),n(w,_,E,u),-1==c&&(c=t(N,w,M,E=w.length))<1&&(p++,n(w,M<E?O:N,E,u)),E=w.length):0===c&&(p++,w=[0]),y[f++]=p,c&&w[0]?w[E++]=j[A]||0:(w=[j[A]],E=1)}while((A++<D||void 0!==w[0])&&C--);m=void 0!==w[0]}y[0]||y.shift()}if(1==h)v.e=d,i=m;else{for(f=1,p=y[0];p>=10;p/=10)f++;v.e=f+d*h-1,R(v,l?a+v.e+1:a,s,m)}return v}}();function R(e,t,n,r){var i,o,a,s,l,u,c,d,f,h=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(i=1,s=d[0];s>=10;s/=10)i++;if((o=t-i)<0)o+=S,a=t,l=(c=d[f=0])/v(10,i-a-1)%10|0;else if((f=Math.ceil((o+1)/S))>=(s=d.length)){if(!r)break e;for(;s++<=f;)d.push(0);c=l=0,i=1,a=(o%=S)-S+1}else{for(c=s=d[f],i=1;s>=10;s/=10)i++;l=(a=(o%=S)-S+i)<0?0:c/v(10,i-a-1)%10|0}if(r=r||t<0||void 0!==d[f+1]||(a<0?c:c%v(10,i-a-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?a>0?c/v(10,i-a):0:d[f-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=v(10,(S-t%S)%S),e.e=-t||0):d[0]=e.e=0,e;if(0==o?(d.length=f,s=1,f--):(d.length=f+1,s=v(10,S-o),d[f]=a>0?(c/v(10,i-a)%v(10,a)|0)*s:0),u)for(;;){if(0==f){for(o=1,a=d[0];a>=10;a/=10)o++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(e.e++,d[0]==x&&(d[0]=1));break}if(d[f]+=s,d[f]!=x)break;d[f--]=0,s=1}for(o=d.length;0===d[--o];)d.pop()}return p&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function L(e,t,n){if(!e.isFinite())return $(e);var r,i=e.e,o=D(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+q(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+q(-i-1)+o,n&&(r=n-a)>0&&(o+=q(r))):i>=a?(o+=q(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+q(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=q(r))),o}function j(e,t){var n=e[0];for(t*=S;n>=10;n/=10)t++;return t}function N(e,t,n){if(t>C)throw p=!0,n&&(e.precision=n),Error(_);return R(new e(c),t,1,!0)}function V(e,t,n){if(t>I)throw Error(_);return R(new e(d),t,n,!0)}function B(e){var t=e.length-1,n=t*S+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function q(e){for(var t="";e--;)t+="0";return t}function U(e,t,n,r){var i,o=new e(1),a=Math.ceil(r/S+4);for(p=!1;;){if(n%2&&X((o=o.times(t)).d,a)&&(i=!0),0===(n=g(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}X((t=t.times(t)).d,a)}return p=!0,o}function F(e){return 1&e.d[e.d.length-1]}function H(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function z(e,t){var n,r,i,o,a,s,l,u=0,c=0,d=0,f=e.constructor,h=f.rounding,m=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(p=!1,l=m):l=t,s=new f(.03125);e.e>-2;)e=e.times(s),d+=5;for(l+=r=Math.log(v(2,d))/Math.LN10*2+5|0,n=o=a=new f(1),f.precision=l;;){if(o=R(o.times(e),l,1),n=n.times(++c),D((s=a.plus(P(o,n,l,1))).d).slice(0,l)===D(a.d).slice(0,l)){for(i=d;i--;)a=R(a.times(a),l,1);if(null!=t)return f.precision=m,a;if(!(u<3&&M(a.d,l-r,h,u)))return R(a,f.precision=m,h,p=!0);f.precision=l+=10,n=o=s=new f(1),c=0,u++}a=s}}function W(e,t){var n,r,i,o,a,s,l,u,c,d,f,h=1,m=e,_=m.d,b=m.constructor,g=b.rounding,v=b.precision;if(m.s<0||!_||!_[0]||!m.e&&1==_[0]&&1==_.length)return new b(_&&!_[0]?-1/0:1!=m.s?NaN:_?0:m);if(null==t?(p=!1,c=v):c=t,b.precision=c+=10,r=(n=D(_)).charAt(0),!(Math.abs(o=m.e)<15e14))return u=N(b,c+2,v).times(o+""),m=W(new b(r+"."+n.slice(1)),c-10).plus(u),b.precision=v,null==t?R(m,v,g,p=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=D((m=m.times(e)).d)).charAt(0),h++;for(o=m.e,r>1?(m=new b("0."+n),o++):m=new b(r+"."+n.slice(1)),d=m,l=a=m=P(m.minus(1),m.plus(1),c,1),f=R(m.times(m),c,1),i=3;;){if(a=R(a.times(f),c,1),D((u=l.plus(P(a,new b(i),c,1))).d).slice(0,c)===D(l.d).slice(0,c)){if(l=l.times(2),0!==o&&(l=l.plus(N(b,c+2,v).times(o+""))),l=P(l,new b(h),c,1),null!=t)return b.precision=v,l;if(!M(l.d,c-10,g,s))return R(l,b.precision=v,g,p=!0);b.precision=c+=10,u=a=m=P(d.minus(1),d.plus(1),c,1),f=R(m.times(m),c,1),i=s=1}l=u,i+=2}}function $(e){return String(e.s*e.s/0)}function G(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%S,n<0&&(r+=S),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=S;r<i;)e.d.push(+t.slice(r,r+=S));t=t.slice(r),r=S-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),p&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function K(e,t){var n,i,o,a,s,l,u,c,d;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(w.test(t))n=16,t=t.toLowerCase();else if(y.test(t))n=2;else{if(!E.test(t))throw Error(m+t);n=8}for((a=t.search(/p/i))>0?(u=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),s=(a=t.indexOf("."))>=0,i=e.constructor,s&&(a=(l=(t=t.replace(".","")).length)-a,o=U(i,new i(n),a,2*a)),a=d=(c=O(t,n,x)).length-1;0===c[a];--a)c.pop();return a<0?new i(0*e.s):(e.e=j(c,d),e.d=c,p=!1,s&&(e=P(e,o,4*l)),u&&(e=e.times(Math.abs(u)<54?v(2,u):r.pow(2,u))),p=!0,e)}function J(e,t,n,r,i){var o,a,s,l,u=e.precision,c=Math.ceil(u/S);for(p=!1,l=n.times(n),s=new e(r);;){if(a=P(s.times(l),new e(t++*t++),u,1),s=i?r.plus(a):r.minus(a),r=P(a.times(l),new e(t++*t++),u,1),void 0!==(a=s.plus(r)).d[c]){for(o=c;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o}return p=!0,a.d.length=c+1,a}function Y(e,t){for(var n=e;--t;)n*=e;return n}function Q(e,t){var n,r=t.s<0,i=V(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return a=r?4:1,t;if((n=t.divToInt(i)).isZero())a=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return a=F(n)?r?2:3:r?4:1,t;a=F(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Z(e,t,n,r){var o,a,s,c,d,f,p,h,m,_=e.constructor,b=void 0!==n;if(b?(T(n,1,l),void 0===r?r=_.rounding:T(r,0,8)):(n=_.precision,r=_.rounding),e.isFinite()){for(b?(o=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):o=t,(s=(p=L(e)).indexOf("."))>=0&&(p=p.replace(".",""),(m=new _(1)).e=p.length-s,m.d=O(L(m),10,o),m.e=m.d.length),a=d=(h=O(p,10,o)).length;0==h[--d];)h.pop();if(h[0]){if(s<0?a--:((e=new _(e)).d=h,e.e=a,h=(e=P(e,m,n,r,0,o)).d,a=e.e,f=i),s=h[n],c=o/2,f=f||void 0!==h[n+1],f=r<4?(void 0!==s||f)&&(0===r||r===(e.s<0?3:2)):s>c||s===c&&(4===r||f||6===r&&1&h[n-1]||r===(e.s<0?8:7)),h.length=n,f)for(;++h[--n]>o-1;)h[n]=0,n||(++a,h.unshift(1));for(d=h.length;!h[d-1];--d);for(s=0,p="";s<d;s++)p+=u.charAt(h[s]);if(b){if(d>1)if(16==t||8==t){for(s=16==t?4:3,--d;d%s;d++)p+="0";for(d=(h=O(p,o,t)).length;!h[d-1];--d);for(s=1,p="1.";s<d;s++)p+=u.charAt(h[s])}else p=p.charAt(0)+"."+p.slice(1);p=p+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)p="0"+p;p="0."+p}else if(++a>d)for(a-=d;a--;)p+="0";else a<d&&(p=p.slice(0,a)+"."+p.slice(a))}else p=b?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=$(e);return e.s<0?"-"+p:p}function X(e,t){if(e.length>t)return e.length=t,!0}function ee(e){return new this(e).abs()}function te(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function re(e,t){return new this(e).plus(t)}function ie(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function ae(e){return new this(e).atan()}function se(e){return new this(e).atanh()}function le(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?V(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=V(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(P(e,t,o,1)),t=V(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(P(e,t,o,1)):(n=V(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ue(e){return new this(e).cbrt()}function ce(e){return R(e=new this(e),e.e+1,2)}function de(e){if(!e||"object"!=typeof e)throw Error(h+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,l,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=f[n]),void 0!==(r=e[n])){if(!(g(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(m+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=f[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(m+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(b);this[n]=!0}else this[n]=!1}return this}function fe(e){return new this(e).cos()}function pe(e){return new this(e).cosh()}function he(e,t){return new this(e).div(t)}function me(e){return new this(e).exp()}function _e(e){return R(e=new this(e),e.e+1,3)}function be(){var e,t,n=new this(0);for(p=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return p=!0,new this(1/0);n=t}return p=!0,n.sqrt()}function ge(e){return e instanceof r||e&&"[object Decimal]"===e.name||!1}function ve(e){return new this(e).ln()}function ye(e,t){return new this(e).log(t)}function we(e){return new this(e).log(2)}function Ee(e){return new this(e).log(10)}function ke(){return H(this,arguments,"lt")}function xe(){return H(this,arguments,"gt")}function Se(e,t){return new this(e).mod(t)}function Ce(e,t){return new this(e).mul(t)}function Ie(e,t){return new this(e).pow(t)}function Ae(e){var t,n,r,i,o=0,a=new this(1),s=[];if(void 0===e?e=this.precision:T(e,1,l),r=Math.ceil(e/S),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(b);for(t=crypto.randomBytes(r*=4);o<r;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(s.push(i%1e7),o+=4);o=r/4}else for(;o<r;)s[o++]=1e7*Math.random()|0;for(r=s[--o],e%=S,r&&e&&(i=v(10,S-e),s[o]=(r/i|0)*i);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=S)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<S&&(n-=S-r)}return a.e=n,a.d=s,a}function De(e){return R(e=new this(e),e.e+1,this.rounding)}function Te(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Me(e){return new this(e).sin()}function Oe(e){return new this(e).sinh()}function Pe(e){return new this(e).sqrt()}function Re(e,t){return new this(e).sub(t)}function Le(e){return new this(e).tan()}function je(e){return new this(e).tanh()}function Ne(e){return R(e=new this(e),e.e+1,1)}r=function e(t){var n,r,i;function o(e){var t,n,r,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,e instanceof o)return i.s=e.s,void(p?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(p?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):G(i,e.toString())}if("string"!==r)throw Error(m+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),k.test(e)?G(i,e):K(i,e)}if(o.prototype=A,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=de,o.clone=e,o.isDecimal=ge,o.abs=ee,o.acos=te,o.acosh=ne,o.add=re,o.asin=ie,o.asinh=oe,o.atan=ae,o.atanh=se,o.atan2=le,o.cbrt=ue,o.ceil=ce,o.cos=fe,o.cosh=pe,o.div=he,o.exp=me,o.floor=_e,o.hypot=be,o.ln=ve,o.log=ye,o.log10=Ee,o.log2=we,o.max=ke,o.min=xe,o.mod=Se,o.mul=Ce,o.pow=Ie,o.random=Ae,o.round=De,o.sign=Te,o.sin=Me,o.sinh=Oe,o.sqrt=Pe,o.sub=Re,o.tan=Le,o.tanh=je,o.trunc=Ne,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(f),r.default=r.Decimal=r,c=new r(c),d=new r(d),"function"==typeof e&&e.amd?e((function(){return r})):void 0!==n&&n.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(A[Symbol.for("nodejs.util.inspect.custom")]=A.toString,A[Symbol.toStringTag]="Decimal"),n.exports=r):(t||(t="undefined"!=typeof self&&self&&self.self==self?self:window),o=t.Decimal,r.noConflict=function(){return t.Decimal=o,r},t.Decimal=r)}(this)},{}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addEventListener=function(e,t,n,r,a){var s=(0,i.default)()||!r||"object"!==o(r)?r:!!r.capture;e.addEventListener(t,n,s,a)},n.removeEventListener=function(e,t,n,r){var a=(0,i.default)()||!r||"object"!==o(r)?r:!!r.capture;e.removeEventListener(t,n,a)};var r,i=(r=e("./supportsCaptureOption"))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}},{"./supportsCaptureOption":136}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(null===r){var e=!1;try{var t=Object.defineProperty({},"capture",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}r=e}return r};var r=null},{}],137:[function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}b(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):_(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,c=_(l,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},{}],138:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.installGlobally=n.getXMLHttpRequest=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/slicedToArray")),l=r(e("lodash/once")),u=e("./moduleId"),c=r(e("./transferrables"));function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,l.default)((function(){var e={},t=new MessageChannel,n=t.port1;n.addEventListener("message",(function(t){var n=t.data,r=n.id,i=n.type,o=e[r];if("COMPLETE"===i){var a=t.data,l=a.headers,u=a.readyState,c=a.status,d=a.statusText,f=a.response,p=a.responseText,h=a.responseURL,m={};l.split("\r\n").forEach((function(e){var t=e.split(":"),n=(0,s.default)(t,2),r=n[0],i=n[1];r&&i&&(m[r.toLowerCase().trim()]=i.trim())})),o._headers=l,o._headersObj=m,o.status=c,o.statusText=d,o.readyState=u,o.response=f,o.responseText=p,o.responseURL=h,delete e[r];for(var _=function(){var e=g[b],t={name:e,target:o};(Object.prototype.hasOwnProperty.call(o._eventListeners,e)?o._eventListeners[e]:[]).forEach((function(e){return e(t)})),o["on"+e]&&o["on"+e](t)},b=0,g=["load","loadend","readystatechange"];b<g.length;b++)_()}else console.error("ext-corb-workaround: Unknown event in content script:",t)})),n.addEventListener("messageerror",(function(e){console.error("ext-corb-workaround: Unknown error in content script:",e)})),n.start(),window.postMessage({type:"ext-corb-workaround_port",moduleId:u.moduleId,port:t.port2},document.location.origin,[t.port2]);var r=0,l=function(){function t(){var o=this;(0,i.default)(this,t),(0,a.default)(this,"UNSENT",0),(0,a.default)(this,"OPENED",1),(0,a.default)(this,"HEADERS_RECEIVED",2),(0,a.default)(this,"LOADING",3),(0,a.default)(this,"DONE",4),(0,a.default)(this,"_id",r++),(0,a.default)(this,"_eventListeners",{}),(0,a.default)(this,"_headersObj",{}),(0,a.default)(this,"status",0),(0,a.default)(this,"statusText",""),(0,a.default)(this,"readyState",0),(0,a.default)(this,"response",""),(0,a.default)(this,"responseText",""),(0,a.default)(this,"responseURL",""),(0,a.default)(this,"_headers",""),(0,a.default)(this,"responseType",void 0),(0,a.default)(this,"withCredentials",void 0),(0,a.default)(this,"setRequestHeader",void 0),(0,a.default)(this,"open",void 0),(0,a.default)(this,"send",void 0),(0,a.default)(this,"abort",void 0);var s=this._id;e[s]=this,n.postMessage({type:"NEW_XHR",id:s});var l,u=d(["responseType","withCredentials"]);try{var f=function(){var e=l.value,t=void 0;Object.defineProperty(o,e,{get:function(){return t},set:function(r){t=r,n.postMessage({type:"SET",id:s,prop:e,value:r})}})};for(u.s();!(l=u.n()).done;)f()}catch(e){u.e(e)}finally{u.f()}var p,h=d(["setRequestHeader","open","send","abort"]);try{var m=function(){var e=p.value;o[e]=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.postMessage({type:"CALL",id:s,method:e,args:r},(0,c.default)(r))}};for(h.s();!(p=h.n()).done;)m()}catch(e){h.e(e)}finally{h.f()}}return(0,o.default)(t,[{key:"getAllResponseHeaders",value:function(){return this._headers}},{key:"getResponseHeader",value:function(e){if(e=e.toLowerCase(),Object.prototype.hasOwnProperty.call(this._headersObj,e))return this._headersObj[e]}},{key:"addEventListener",value:function(e,t){Object.prototype.hasOwnProperty.call(this._eventListeners,e)||(this._eventListeners[e]=[]),this._eventListeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){Object.prototype.hasOwnProperty.call(this._eventListeners,e)&&(this._eventListeners[e]=this._eventListeners[e].filter((function(e){return t!==e})))}}]),t}();return(0,a.default)(l,"UNSENT",0),(0,a.default)(l,"OPENED",1),(0,a.default)(l,"HEADERS_RECEIVED",2),(0,a.default)(l,"LOADING",3),(0,a.default)(l,"DONE",4),l}));n.getXMLHttpRequest=p;var h=(0,l.default)((function(){window.XMLHttpRequest=p()}));n.installGlobally=h},{"./moduleId":139,"./transferrables":140,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/slicedToArray":24,"lodash/once":346}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.moduleId=void 0;n.moduleId="1f24 e53a"},{}],140:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.map((function(e){if(e&&"object"===(0,i.default)(e)&&e.__proto__){if("ArrayBuffer"===e.__proto__.constructor.name)return e;if(e.__proto__.__proto__&&"TypedArray"===e.__proto__.__proto__.constructor.name)return e.buffer}})).filter(Boolean)};var i=r(e("@babel/runtime/helpers/typeof"))},{"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/typeof":27}],141:[function(e,t,n){"use strict";t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},{}],142:[function(e,t,n){t.exports=function(e,t){return(t="number"==typeof t?t:1/0)?function e(n,r){return n.reduce((function(n,i){return Array.isArray(i)&&r<t?n.concat(e(i,r+1)):n.concat(i)}),[])}(e,1):Array.isArray(e)?e.map((function(e){return e})):e}},{}],143:[function(e,t,n){var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString;t.exports=function(e,t,n){if("[object Function]"!==i.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var a=0;a<o;a++)t.call(n,e[a],a,e);else for(var s in e)r.call(e,s)&&t.call(n,e[s],s,e)}},{}],144:[function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";t.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==a)throw new TypeError(r+t);for(var n,s=i.call(arguments,1),l=Math.max(0,t.length-s.length),u=[],c=0;c<l;c++)u.push("$"+c);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var r=t.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,s.concat(i.call(arguments)))})),t.prototype){var d=function(){};d.prototype=t.prototype,n.prototype=new d,d.prototype=null}return n}},{}],145:[function(e,t,n){"use strict";var r=e("./implementation");t.exports=Function.prototype.bind||r},{"./implementation":144}],146:[function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=e("./shams");t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},{"./shams":147}],147:[function(e,t,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},{}],148:[function(e,t,n){"use strict";var r=e("function-bind");t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":145}],149:[function(e,t,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*m}},{}],150:[function(e,t,n){(function(e){(function(){"use strict";function r(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(n,"__esModule",{value:!0});var i="object"==typeof e&&"production"===e.env.NODE_ENV;function o(e,t){if(!e){if(i)throw new Error("Invariant failed");throw new Error(t())}}n.invariant=o;var a=Object.prototype.hasOwnProperty,s=Array.prototype.splice,l=Object.prototype.toString;function u(e){return l.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return d(t).forEach((function(n){a.call(t,n)&&(e[n]=t[n])})),e},d="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function f(e){return Array.isArray(e)?c(e.constructor(e.length),e):"Map"===u(e)?new Map(e):"Set"===u(e)?new Set(e):e&&"object"==typeof e?c(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=c({},h),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,r="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||o(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),o("object"==typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var i=e;return d(r).forEach((function(t){if(a.call(n.commands,t)){var o=e===i;i=n.commands[t](r[t],i,r,e),o&&n.isEquals(i,e)&&(i=e)}else{var s="Map"===u(e)?n.update(e.get(t),r[t]):n.update(e[t],r[t]),l="Map"===u(i)?i.get(t):i[t];n.isEquals(s,l)&&(void 0!==s||a.call(e,t))||(i===e&&(i=f(e)),"Map"===u(i)?i.set(t,s):i[t]=s)}})),i},e}();n.Context=p;var h={$push:function(e,t,n){return _(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return _(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,i){return function(e,t){o(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+r(e)})),g(t.$splice)}(t,n),e.forEach((function(e){g(e),t===i&&e.length&&(t=f(i)),s.apply(t,e)})),t},$set:function(e,t,n){return function(e){o(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),e},$toggle:function(e,t){b(e,"$toggle");var n=e.length?f(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,r){return b(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=f(r)),delete t[e])})),t},$add:function(e,t,n,r){return v(t,"$add"),b(e,"$add"),"Map"===u(t)?e.forEach((function(e){var n=e[0],i=e[1];t===r&&t.get(n)!==i&&(t=f(r)),t.set(n,i)})):e.forEach((function(e){t!==r||t.has(e)||(t=f(r)),t.add(e)})),t},$remove:function(e,t,n,r){return v(t,"$remove"),b(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=f(r)),t.delete(e)})),t},$merge:function(e,t,n,i){var a,s;return a=t,o((s=e)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+r(s)})),o(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+r(a)})),d(e).forEach((function(n){e[n]!==t[n]&&(t===i&&(t=f(i)),t[n]=e[n])})),t},$apply:function(e,t){var n;return o("function"==typeof(n=e),(function(){return"update(): expected spec of $apply to be a function; got "+r(n)+"."})),e(t)}},m=new p;function _(e,t,n){o(Array.isArray(e),(function(){return"update(): expected target of "+r(n)+" to be an array; got "+r(e)+"."})),b(t[n],n)}function b(e,t){o(Array.isArray(e),(function(){return"update(): expected spec of "+r(t)+" to be an array; got "+r(e)+". Did you forget to wrap your parameter in an array?"}))}function g(e){o(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+r(e)+". Did you forget to wrap your parameters in an array?"}))}function v(e,t){var n=u(e);o("Map"===n||"Set"===n,(function(){return"update(): "+r(t)+" expects a target of type Set or Map; got "+r(n)}))}n.isEquals=m.update.isEquals,n.extend=m.extend,n.default=m.update,n.default.default=t.exports=c(n.default,n)}).call(this)}).call(this,e("_process"))},{_process:398}],151:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=[];-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}},{}],152:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],153:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},{}],154:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=e("call-bind/callBound")("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},{"call-bind/callBound":53}],155:[function(e,t,n){"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,l=Object.getPrototypeOf;t.exports=function(e){if("function"!=typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if(void 0===r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&l(t)}return l(e)===r}},{}],156:[function(t,n,r){var i,o;i=this,o=function(e){var t={plug:function(){},unplug:function(){}};function n(){var n=!1,r=e.pool(),i=null,o=e.stream((function(e){function t(t){e.emitEvent(t)}if(i=e,!n)return r.onAny(t),function(){i=null,r.offAny(t)};e.end()}));return o.value=o.emit=function(e){return i&&i.emit(e),o},o.error=function(e){return i&&i.error(e),o},o.event=o.emitEvent=function(e){return"end"===e.type?o.end():i&&i.emitEvent(e),o},o.plug=function(e){return r.plug(e),o},o.unplug=function(e){return r.unplug(e),o},o.end=function(){return n||(n=!0,i&&i.end(),r=t),o},o.setName("bus")}return n.default=n,n},"function"==typeof e&&e.amd?e(["kefir"],o):"object"==typeof r?n.exports=o(t("kefir")):i.KefirBus=o(i.Kefir)},{kefir:159}],157:[function(e,t,n){"use strict";t.exports=function(e,t){return t&&t.subscribe&&t.subscribeOnNext?e.stream((function(e){var n=t.subscribe((function(t){e.emit(t)}),(function(t){e.error(t),e.end()}),(function(){e.end()}));return function(){n.dispose()}})):t&&t.onAny&&t.offAny?e.stream((function(e){var n=e.emitEvent;return t.onAny(n),function(){t.offAny(n)}})):t&&t.subscribe&&t.onValue?e.stream((function(e){return t.subscribe((function(t){"function"==typeof t.hasValue?t.hasValue()?e.emit(t.value()):t.isEnd()?e.end():t.isError()?e.error(t.error):console.error("Unknown type of Bacon event",t):t.hasValue?e.emit(t.value):t.isEnd?e.end():t.isError?e.error(t.error):console.error("Unknown type of Bacon event",t)}))})):t&&t.subscribe&&t.lift?e.stream((function(e){var n=t.subscribe((function(t){e.emit(t)}),(function(t){e.error(t),e.end()}),(function(){e.end()}));return function(){n.unsubscribe()}})):e.constant(t)}},{}],158:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=null;function t(){n.stopped=!0,e&&(e.emit(null),e.end())}var n=r.stream((function(r){e=r,n.stopped&&t()})).toProperty();return n.stopped=!1,n.destroy=t,n};var r=e("kefir");t.exports=n.default,t.exports.default=n.default},{kefir:159}],159:[function(t,n,r){(function(t){(function(){
/*! Kefir.js v3.8.8
 *  https://github.com/kefirjs/kefir
 */
!function(t,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.Kefir=t.Kefir||{})}(this,(function(e){"use strict";function r(e){var t=arguments.length,n=void 0,r=void 0;for(n=1;n<t;n++)for(r in arguments[n])e[r]=arguments[n][r];return e}function i(e,t){var n,i,o=arguments.length,a=void 0;for(e.prototype=(n=t.prototype,(i=function(){}).prototype=n,new i),e.prototype.constructor=e,a=2;a<o;a++)r(e.prototype,arguments[a]);return e}var o=["<nothing>"],a="end",s="value",l="error",u="any";function c(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;if(0===e.length)return t;if(0===t.length)return e;for(o=0,n=new Array(e.length+t.length),r=e.length,i=0;i<r;i++,o++)n[o]=e[i];for(r=t.length,i=0;i<r;i++,o++)n[o]=t[i];return n}function d(e,t){var n=e.length,r=void 0;for(r=0;r<n;r++)if(e[r]===t)return r;return-1}function f(e,t){var n=e.length,r=void 0;for(r=0;r<n;r++)if(t(e[r]))return r;return-1}function p(e){var t=e.length,n=new Array(t),r=void 0;for(r=0;r<t;r++)n[r]=e[r];return n}function h(e,t){var n=e.length,r=void 0,i=void 0,o=void 0;if(t>=0&&t<n){if(1===n)return[];for(r=new Array(n-1),i=0,o=0;i<n;i++)i!==t&&(r[o]=e[i],o++);return r}return e}function m(e,t){var n=e.length,r=new Array(n),i=void 0;for(i=0;i<n;i++)r[i]=t(e[i]);return r}function _(e,t,n){e===u?t(n):e===n.type&&(e===s||e===l?t(n.value):t())}function b(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function g(){this._dispatcher=new b,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function v(){g.call(this)}function y(){g.call(this),this._currentEvent=null}r(b.prototype,{add:function(e,t){return this._items=c(this._items,[{type:e,fn:t}]),this._items.length},remove:function(e,t){var n=f(this._items,(function(n){return n.type===e&&n.fn===t}));return 0!==this._inLoop&&-1!==n&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[n])),this._items=h(this._items,n),this._items.length},addSpy:function(e){return this._spies=c(this._spies,[e]),this._spies.length},removeSpy:function(e){return this._spies=h(this._spies,this._spies.indexOf(e)),this._spies.length},dispatch:function(e){this._inLoop++;for(var t=0,n=this._spies;null!==this._spies&&t<n.length;t++)n[t](e);for(var r=0,i=this._items;r<i.length&&null!==this._items;r++)null!==this._removedItems&&(o=this._removedItems,a=i[r],-1!==d(o,a))||_(i[r].type,i[r].fn,e);var o,a;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),r(g.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(e){this._active!==e&&(this._active=e,e?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(e,t){switch(e){case s:return this._emitValue(t);case l:return this._emitError(t);case a:return this._emitEnd()}},_emitValue:function(e){this._alive&&this._dispatcher.dispatch({type:s,value:e})},_emitError:function(e){this._alive&&this._dispatcher.dispatch({type:l,value:e})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:a}),this._clear())},_on:function(e,t){return this._alive?(this._dispatcher.add(e,t),this._setActive(!0)):_(e,t,{type:a}),this},_off:function(e,t){this._alive&&(0===this._dispatcher.remove(e,t)&&this._setActive(!1));return this},onValue:function(e){return this._on(s,e)},onError:function(e){return this._on(l,e)},onEnd:function(e){return this._on(a,e)},onAny:function(e){return this._on(u,e)},offValue:function(e){return this._off(s,e)},offError:function(e){return this._off(l,e)},offEnd:function(e){return this._off(a,e)},offAny:function(e){return this._off(u,e)},observe:function(e,t,n){var r=this,i=!1,o=e&&"function"!=typeof e?e:{value:e,error:t,end:n},u=function(e){e.type===a&&(i=!0),e.type===s&&o.value?o.value(e.value):e.type===l&&o.error?o.error(e.value):e.type===a&&o.end&&o.end(e.value)};return this.onAny(u),{unsubscribe:function(){i||(r.offAny(u),i=!0)},get closed(){return i}}},_ofSameType:function(e,t){return e.prototype.getType()===this.getType()?e:t},setName:function(e,t){return this._name=t?e._name+"."+t:e,this},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=void 0,n=function(n){var r="<"+n.type+(t?":current":"")+">";n.type===a?console.log(e,r):console.log(e,r,n.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:n})),t=!0,this.onAny(n),t=!1,this},offLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=f(this._logHandlers,(function(t){return t.name===e}));-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var n="<"+t.type+">";t.type===a?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=f(this._spyHandlers,(function(t){return t.name===e}));-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),g.prototype.toString=function(){return"["+this._name+"]"},i(v,g,{_name:"stream",getType:function(){return"stream"}}),i(y,g,{_name:"property",_emitValue:function(e){this._alive&&(this._currentEvent={type:s,value:e},this._activating||this._dispatcher.dispatch({type:s,value:e}))},_emitError:function(e){this._alive&&(this._currentEvent={type:l,value:e},this._activating||this._dispatcher.dispatch({type:l,value:e}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:a}),this._clear())},_on:function(e,t){return this._alive&&(this._dispatcher.add(e,t),this._setActive(!0)),null!==this._currentEvent&&_(e,t,this._currentEvent),this._alive||_(e,t,{type:a}),this},getType:function(){return"property"}});var w=new v;function E(){return w}function k(e){function t(e,t){var n=this;v.call(this),this._wait=e,this._intervalId=null,this._$onTick=function(){return n._onTick()},this._init(t)}return i(t,v,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){v.prototype._clear.call(this),this._$onTick=null,this._free()}},e),t}w._emitEnd(),w._name="never";var x=k({_name:"later",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});function S(e,t){return new x(e,{x:t})}var C=k({_name:"interval",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});function I(e,t){return new C(e,{x:t})}var A=k({_name:"sequentially",_init:function(e){var t=e.xs;this._xs=p(t)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});function D(e,t){return 0===t.length?E():new A(e,{xs:t})}var T=k({_name:"fromPoll",_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_onTick:function(){var e=this._fn;this._emitValue(e())}});function M(e,t){return new T(e,{fn:t})}function O(e){function t(t){return e._emitValue(t),e._active}function n(t){return e._emit(t.type,t.value),e._active}return{value:t,error:function(t){return e._emitError(t),e._active},end:function(){return e._emitEnd(),e._active},event:n,emit:t,emitEvent:n}}var P=k({_name:"withInterval",_init:function(e){var t=e.fn;this._fn=t,this._emitter=O(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function R(e,t){return new P(e,{fn:t})}function L(e){v.call(this),this._fn=e,this._unsubscribe=null}function j(e){return new L(e)}function N(e){var t=!1;return j((function(n){t||(e((function(e){n.emit(e),n.end()})),t=!0)})).setName("fromCallback")}function V(e){var t=!1;return j((function(n){t||(e((function(e,t){e?n.error(e):n.emit(t),n.end()})),t=!0)})).setName("fromNodeCallback")}function B(e,t){switch(t){case 0:return function(){return e()};case 1:return function(t){return e(t[0])};case 2:return function(t){return e(t[0],t[1])};case 3:return function(t){return e(t[0],t[1],t[2])};case 4:return function(t){return e(t[0],t[1],t[2],t[3])};default:return function(t){return e.apply(null,t)}}}i(L,v,{_name:"stream",_onActivation:function(){var e=(0,this._fn)(O(this));this._unsubscribe="function"==typeof e?e:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){v.prototype._clear.call(this),this._fn=null}});var q=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function U(e,t,n){for(var r=void 0,i=void 0,o=0;o<q.length;o++)if("function"==typeof e[q[o][0]]&&"function"==typeof e[q[o][1]]){r=q[o][0],i=q[o][1];break}if(void 0===r)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return function(e,t,n){return j((function(r){var i=n?function(){r.emit(function(e,t,n){var r=n?n.length:0;if(null!=t)return 0===r?e.call(t):e.apply(t,n);switch(r){case 0:return e();case 1:return e(n[0]);case 2:return e(n[0],n[1]);case 3:return e(n[0],n[1],n[2]);case 4:return e(n[0],n[1],n[2],n[3]);default:return e.apply(null,n)}}(n,this,arguments))}:function(e){r.emit(e)};return e(i),function(){return t(i)}})).setName("fromSubUnsub")}((function(n){return e[r](t,n)}),(function(n){return e[i](t,n)}),n).setName("fromEvents")}function F(e){this._currentEvent={type:"value",value:e,current:!0}}function H(e){return new F(e)}function z(e){this._currentEvent={type:"error",value:e,current:!0}}function W(e){return new z(e)}function $(e,t){return function(n,r){var i=this;e.call(this),this._source=n,this._name=n._name+"."+t,this._init(r),this._$handleAny=function(e){return i._handleAny(e)}}}function G(e){return{_init:function(){},_free:function(){},_handleValue:function(e){this._emitValue(e)},_handleError:function(e){this._emitError(e)},_handleEnd:function(){this._emitEnd()},_handleAny:function(e){switch(e.type){case s:return this._handleValue(e.value);case l:return this._handleError(e.value);case a:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){e.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function K(e,t){var n=$(v,e);return i(n,v,G(v),t),n}function J(e,t){var n=$(y,e);return i(n,y,G(y),t),n}i(F,y,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),i(z,y,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var Y=J("toProperty",{_init:function(e){var t=e.fn;this._getInitialCurrent=t},_onActivation:function(){if(null!==this._getInitialCurrent){var e=this._getInitialCurrent;this._emitValue(e())}this._source.onAny(this._$handleAny)}});function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t&&"function"!=typeof t)throw new Error("You should call toProperty() with a function or no arguments.");return new Y(e,{fn:t})}var Z=K("changes",{_handleValue:function(e){this._activating||this._emitValue(e)},_handleError:function(e){this._activating||this._emitError(e)}});function X(e){var t=!1,n=j((function(n){if(!t){var r=e.then((function(e){n.emit(e),n.end()}),(function(e){n.error(e),n.end()}));r&&"function"==typeof r.done&&r.done(),t=!0}}));return Q(n,null).setName("fromPromise")}function ee(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}var te=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:void 0!==n?n:Function("return this")()),ne=te.default?te.default:te;function re(e){var t=e[ne]?e[ne]():e;return j((function(e){var n=t.subscribe({error:function(t){e.error(t),e.end()},next:function(t){e.emit(t)},complete:function(){e.end()}});return n.unsubscribe?function(){n.unsubscribe()}:n})).setName("fromESObservable")}function ie(e){this._observable=e.takeErrors(1)}function oe(){return new ie(this)}function ae(e,t,n){for(var r in e)e.hasOwnProperty(r)&&(t.push(r),n.push(e[r]))}function se(e,t,n){var r=this;v.call(this),this._activeCount=e.length,this._sources=c(e,t),this._combinator=n,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(e,t){var n=e.length,r=void 0;for(r=0;r<n;r++)e[r]=t}(this._latestValues,o),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var i=function(e){r._$handlers.push((function(t){return r._handleAny(e,t)}))},a=0;a<this._sources.length;a++)i(a)}function le(e,t,n){return"function"==typeof t&&(n=t,t=void 0),Array.isArray(e)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2];if(!Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");return n=n?B(n,e.length+t.length):function(e){return e},0===e.length?E():new se(e,t,n)}(e,t,n):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if("object"!=typeof t||Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");var r=[],i=[],o=[];return ae(e,r,i),ae(t,r,o),0===i.length?E():new se(i,o,(function(e){for(var t={},i=e.length-1;0<=i;i--)t[r[i]]=e[i];return n?n(t):t}))}(e,t,n)}r(ie.prototype,{subscribe:function(e,t,n){var r=this,i="function"==typeof e?{next:e,error:t,complete:n}:e,o=function(e){e.type===a&&(u=!0),e.type===s&&i.next?i.next(e.value):e.type===l&&i.error?i.error(e.value):e.type===a&&i.complete&&i.complete(e.value)};this._observable.onAny(o);var u=!1;return{unsubscribe:function(){u=!0,r._observable.offAny(o)},get closed(){return u}}}}),ie.prototype[ne]=function(){return this},i(se,v,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var e=this._activeCount;e<this._sources.length;e++)this._sources[e].onAny(this._$handlers[e]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var e=this._sources.length,t=void 0;for(t=0;t<e;t++)this._sources[t].offAny(this._$handlers[t])},_emitIfFull:function(){for(var e=!0,t=!1,n=this._latestValues.length,r=new Array(n),i=new Array(n),a=0;a<n;a++)r[a]=this._latestValues[a],i[a]=this._latestErrors[a],r[a]===o&&(e=!1),void 0!==i[a]&&(t=!0);if(e){var s=this._combinator;this._emitValue(s(r))}t&&this._emitError(function(e){for(var t=void 0,n=0;n<e.length;n++)void 0!==e[n]&&(void 0===t||t.index<e[n].index)&&(t=e[n]);return t.error}(i))},_handleAny:function(e,t){t.type===s||t.type===l?(t.type===s&&(this._latestValues[e]=t.value,this._latestErrors[e]=void 0),t.type===l&&(this._latestValues[e]=o,this._latestErrors[e]={index:this._latestErrorIndex++,error:t.value}),e<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):e<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){v.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var ue={empty:function(){return E()},concat:function(e,t){return e.merge(t)},of:function(e){return H(e)},map:function(e,t){return t.map(e)},bimap:function(e,t,n){return n.mapErrors(e).map(t)},ap:function(e,t){return le([e,t],(function(e,t){return e(t)}))},chain:function(e,t){return t.flatMap(e)}},ce=Object.freeze({Observable:ue}),de={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;this._emitValue(t(e))}},fe=K("map",de),pe=J("map",de),he=function(e){return e};function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;return new(e._ofSameType(fe,pe))(e,{fn:t})}var _e={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)&&this._emitValue(e)}},be=K("filter",_e),ge=J("filter",_e),ve=function(e){return e};var ye={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleValue:function(e){0!==this._n&&(this._n--,this._emitValue(e),0===this._n&&this._emitEnd())}},we=K("take",ye),Ee=J("take",ye);var ke={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleError:function(e){0!==this._n&&(this._n--,this._emitError(e),0===this._n&&this._emitEnd())}},xe=K("takeErrors",ke),Se=J("takeErrors",ke);var Ce={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)?this._emitValue(e):this._emitEnd()}},Ie=K("takeWhile",Ce),Ae=J("takeWhile",Ce),De=function(e){return e};var Te={_init:function(){this._lastValue=o},_free:function(){this._lastValue=null},_handleValue:function(e){this._lastValue=e},_handleEnd:function(){this._lastValue!==o&&this._emitValue(this._lastValue),this._emitEnd()}},Me=K("last",Te),Oe=J("last",Te);var Pe={_init:function(e){var t=e.n;this._n=Math.max(0,t)},_handleValue:function(e){0===this._n?this._emitValue(e):this._n--}},Re=K("skip",Pe),Le=J("skip",Pe);var je={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;null===this._fn||t(e)||(this._fn=null),null===this._fn&&this._emitValue(e)}},Ne=K("skipWhile",je),Ve=J("skipWhile",je),Be=function(e){return e};var qe={_init:function(e){var t=e.fn;this._fn=t,this._prev=o},_free:function(){this._fn=null,this._prev=null},_handleValue:function(e){var t=this._fn;this._prev!==o&&t(this._prev,e)||(this._prev=e,this._emitValue(e))}},Ue=K("skipDuplicates",qe),Fe=J("skipDuplicates",qe),He=function(e,t){return e===t};function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;return new(e._ofSameType(Ue,Fe))(e,{fn:t})}var We={_init:function(e){var t=e.fn,n=e.seed;this._fn=t,this._prev=n},_free:function(){this._prev=null,this._fn=null},_handleValue:function(e){if(this._prev!==o){var t=this._fn;this._emitValue(t(this._prev,e))}this._prev=e}},$e=K("diff",We),Ge=J("diff",We);function Ke(e,t){return[e,t]}var Je=J("scan",{_init:function(e){var t=e.fn,n=e.seed;this._fn=t,this._seed=n,n!==o&&this._emitValue(n)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(e){var t=this._fn;null===this._currentEvent||this._currentEvent.type===l?this._emitValue(this._seed===o?e:t(this._seed,e)):this._emitValue(t(this._currentEvent.value,e))}});var Ye=K("flatten",{_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){for(var t=(0,this._fn)(e),n=0;n<t.length;n++)this._emitValue(t[n])}}),Qe=function(e){return e};var Ze={},Xe={_init:function(e){var t=this,n=e.wait;this._wait=Math.max(0,n),this._buff=[],this._$shiftBuff=function(){var e=t._buff.shift();e===Ze?t._emitEnd():t._emitValue(e)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._buff.push(e),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(Ze),setTimeout(this._$shiftBuff,this._wait))}},et=K("delay",Xe),tt=J("delay",Xe);var nt=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},rt={_init:function(e){var t=this,n=e.wait,r=e.leading,i=e.trailing;this._wait=Math.max(0,n),this._leading=r,this._trailing=i,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return t._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(e){if(this._activating)this._emitValue(e);else{var t=nt();0!==this._lastCallTime||this._leading||(this._lastCallTime=t);var n=this._wait-(t-this._lastCallTime);n<=0?(this._cancelTrailing(),this._lastCallTime=t,this._emitValue(e)):this._trailing&&(this._cancelTrailing(),this._trailingValue=e,this._timeoutId=setTimeout(this._$trailingCall,n))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?nt():0,this._endLater&&this._emitEnd()}},it=K("throttle",rt),ot=J("throttle",rt);var at={_init:function(e){var t=this,n=e.wait,r=e.immediate;this._wait=Math.max(0,n),this._immediate=r,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return t._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._lastAttempt=nt(),this._immediate&&!this._timeoutId&&this._emitValue(e),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=e))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var e=nt()-this._lastAttempt;if(e<this._wait&&e>=0)this._timeoutId=setTimeout(this._$later,this._wait-e);else{if(this._timeoutId=null,!this._immediate){var t=this._laterValue;this._laterValue=null,this._emitValue(t)}this._endLater&&this._emitEnd()}}},st=K("debounce",at),lt=J("debounce",at);var ut={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;this._emitError(t(e))}},ct=K("mapErrors",ut),dt=J("mapErrors",ut),ft=function(e){return e};var pt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){(0,this._fn)(e)&&this._emitError(e)}},ht=K("filterErrors",pt),mt=J("filterErrors",pt),_t=function(e){return e};var bt={_handleValue:function(){}},gt=K("ignoreValues",bt),vt=J("ignoreValues",bt);var yt={_handleError:function(){}},wt=K("ignoreErrors",yt),Et=J("ignoreErrors",yt);var kt={_handleEnd:function(){}},xt=K("ignoreEnd",kt),St=J("ignoreEnd",kt);var Ct={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleEnd:function(){var e=this._fn;this._emitValue(e()),this._emitEnd()}},It=K("beforeEnd",Ct),At=J("beforeEnd",Ct);var Dt={_init:function(e){var t=e.min,n=e.max;this._max=n,this._min=t,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(e){this._buff=function(e,t,n){var r=Math.min(n,e.length+1),i=e.length-r+1,o=new Array(r),a=void 0;for(a=i;a<r;a++)o[a-i]=e[a];return o[r-1]=t,o}(this._buff,e,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},Tt=K("slidingWindow",Dt),Mt=J("slidingWindow",Dt);var Ot={_init:function(e){var t=e.fn,n=e.flushOnEnd;this._fn=t,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),(0,this._fn)(e)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Pt=K("bufferWhile",Ot),Rt=J("bufferWhile",Ot),Lt=function(e){return e};var jt={_init:function(e){var t=e.count,n=e.flushOnEnd;this._count=t,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Nt=K("bufferWithCount",jt),Vt=J("bufferWithCount",jt);var Bt={_init:function(e){var t=this,n=e.wait,r=e.count,i=e.flushOnEnd;this._wait=n,this._count=r,this._flushOnEnd=i,this._intervalId=null,this._$onTick=function(){return t._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},qt=K("bufferWithTimeOrCount",Bt),Ut=J("bufferWithTimeOrCount",Bt);var Ft={_init:function(e){var t,n=e.transducer;this._xform=n((t=this,{"@@transducer/step":function(e,n){return t._emitValue(n),null},"@@transducer/result":function(){return t._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(e){null!==this._xform["@@transducer/step"](null,e)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},Ht=K("transduce",Ft),zt=J("transduce",Ft);var Wt={_init:function(e){var t=e.fn;this._handler=t,this._emitter=O(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(e){this._handler(this._emitter,e)}},$t=K("withHandler",Wt),Gt=J("withHandler",Wt);var Kt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Jt(e,t){var n=this;v.call(this),this._buffers=m(e,(function(e){return Kt(e)?p(e):[]})),this._sources=m(e,(function(e){return Kt(e)?E():e})),this._combinator=t?B(t,this._sources.length):function(e){return e},this._aliveCount=0,this._$handlers=[];for(var r=function(e){n._$handlers.push((function(t){return n._handleAny(e,t)}))},i=0;i<this._sources.length;i++)r(i)}function Yt(e,t){return 0===e.length?E():new Jt(e,t)}i(Jt,v,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var e=this._sources.length;this._aliveCount=e;for(var t=0;t<e&&this._active;t++)this._sources[t].onAny(this._$handlers[t])},_onDeactivation:function(){for(var e=0;e<this._sources.length;e++)this._sources[e].offAny(this._$handlers[e])},_emit:function(){for(var e=new Array(this._buffers.length),t=0;t<this._buffers.length;t++)e[t]=this._buffers[t].shift();var n=this._combinator;this._emitValue(n(e))},_isFull:function(){for(var e=0;e<this._buffers.length;e++)if(0===this._buffers[e].length)return!1;return!0},_handleAny:function(e,t){t.type===s&&(this._buffers[e].push(t.value),this._isFull()&&this._emit()),t.type===l&&this._emitError(t.value),t.type===a&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){v.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Qt=function(e){return e};function Zt(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.queueLim,r=void 0===n?0:n,i=t.concurLim,o=void 0===i?-1:i,a=t.drop,s=void 0===a?"new":a;v.call(this),this._queueLim=r<0?-1:r,this._concurLim=o<0?-1:o,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return e._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Xt(e){Zt.call(this),this._addAll(e),this._initialised=!0}function en(e){return 0===e.length?E():new Xt(e)}function tn(e){var t=this;v.call(this),this._generator=e,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(e){return t._handleAny(e)}}i(Zt,v,{_name:"abstractPool",_add:function(e,t){t=t||Qt,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(t(e)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(t(e)):"old"===this._drop&&(this._removeOldest(),this._add(e,t))},_addAll:function(e){var t=this;!function(e,t){var n=e.length,r=void 0;for(r=0;r<n;r++)t(e[r])}(e,(function(e){return t._add(e)}))},_remove:function(e){-1===this._removeCur(e)&&this._removeQueue(e)},_addToQueue:function(e){this._queue=c(this._queue,[e])},_addToCur:function(e){if(this._active){if(!e._alive)return e._currentEvent&&this._emit(e._currentEvent.type,e._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=e,e.onAny(this._$handleSubAny),this._currentlyAdding=null,e._alive?(this._curSources=c(this._curSources,[e]),this._active&&this._subToEnd(e)):0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()}else this._curSources=c(this._curSources,[e])},_subToEnd:function(e){var t=this,n=function(){return t._removeCur(e)};this._$endHandlers.push({obs:e,handler:n}),e.onEnd(n)},_subscribe:function(e){e.onAny(this._$handleSubAny),this._active&&this._subToEnd(e)},_unsubscribe:function(e){e.offAny(this._$handleSubAny);var t=f(this._$endHandlers,(function(t){return t.obs===e}));-1!==t&&(e.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(e){e.type===s?this._emitValue(e.value):e.type===l&&this._emitError(e.value)},_removeQueue:function(e){var t=d(this._queue,e);return this._queue=h(this._queue,t),t},_removeCur:function(e){this._active&&this._unsubscribe(e);var t=d(this._curSources,e);return this._curSources=h(this._curSources,t),-1!==t&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),t},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=p(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var e=0,t=this._curSources;e<t.length&&this._active;e++)this._subscribe(t[e])},_onDeactivation:function(){for(var e=0,t=this._curSources;e<t.length;e++)this._unsubscribe(t[e]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){v.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),i(Xt,Zt,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),i(tn,v,{_name:"repeat",_handleAny:function(e){e.type===a?(this._source=null,this._getSource()):this._emit(e.type,e.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var e=this._generator;null===this._source&&this._alive&&this._active;)this._source=e(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){v.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var nn=function(e){return new tn(e)};function rn(e){return nn((function(t){return e.length>t&&e[t]})).setName("concat")}function on(){Zt.call(this)}function an(e,t,n){var r=this;Zt.call(this,n),this._source=e,this._fn=t,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(e){return r._handleMain(e)}}function sn(e,t){an.call(this,e,t)}function ln(e,t){return function(n,r,i){var a=this;e.call(this),this._primary=n,this._secondary=r,this._name=n._name+"."+t,this._lastSecondary=o,this._$handleSecondaryAny=function(e){return a._handleSecondaryAny(e)},this._$handlePrimaryAny=function(e){return a._handlePrimaryAny(e)},this._init(i)}}function un(e){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(e){this._emitValue(e)},_handlePrimaryError:function(e){this._emitError(e)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(e){this._lastSecondary=e},_handleSecondaryError:function(e){this._emitError(e)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(e){switch(e.type){case s:return this._handlePrimaryValue(e.value);case l:return this._handlePrimaryError(e.value);case a:return this._handlePrimaryEnd(e.value)}},_handleSecondaryAny:function(e){switch(e.type){case s:return this._handleSecondaryValue(e.value);case l:return this._handleSecondaryError(e.value);case a:this._handleSecondaryEnd(e.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){e.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function cn(e,t){var n=ln(v,e);return i(n,v,un(v),t),n}function dn(e,t){var n=ln(y,e);return i(n,y,un(y),t),n}i(on,Zt,{_name:"pool",plug:function(e){return this._add(e),this},unplug:function(e){return this._remove(e),this}}),i(an,Zt,{_onActivation:function(){Zt.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Zt.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(e){e.type===s&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1);e.type===l&&this._emitError(e.value),e.type===a&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Zt.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),i(sn,an,{_handleMain:function(e){e.type===l&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1);e.type===s&&this._emitValue(e.value),e.type===a&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var fn={_handlePrimaryValue:function(e){this._lastSecondary!==o&&this._lastSecondary&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary!==o&&this._lastSecondary||this._emitEnd()}},pn=cn("filterBy",fn),hn=dn("filterBy",fn);var mn=function(e,t){return t};var _n={_handlePrimaryValue:function(e){this._lastSecondary!==o&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary===o&&this._emitEnd()}},bn=cn("skipUntilBy",_n),gn=dn("skipUntilBy",_n);var vn={_handleSecondaryValue:function(){this._emitEnd()}},yn=cn("takeUntilBy",vn),wn=dn("takeUntilBy",vn);var En={_init:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,t=void 0===e||e;this._buff=[],this._flushOnEnd=t},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(e){this._buff.push(e)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},kn=cn("bufferBy",En),xn=dn("bufferBy",En);var Sn={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,n=void 0===t||t,r=e.flushOnChange,i=void 0!==r&&r;this._buff=[],this._flushOnEnd=n,this._flushOnChange=i},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(e){this._buff.push(e),this._lastSecondary===o||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==o&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(e){this._flushOnChange&&!e&&this._flush(),this._lastSecondary=e}},Cn=cn("bufferWhileBy",Sn),In=dn("bufferWhileBy",Sn);var An=function(){return!1},Dn=function(){return!0};var Tn={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=(0,this._fn)(e);t.convert?this._emitError(t.error):this._emitValue(e)}},Mn=K("valuesToErrors",Tn),On=J("valuesToErrors",Tn),Pn=function(e){return{convert:!0,error:e}};var Rn={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=(0,this._fn)(e);t.convert?this._emitValue(t.value):this._emitError(e)}},Ln=K("errorsToValues",Rn),jn=J("errorsToValues",Rn),Nn=function(e){return{convert:!0,value:e}};var Vn={_handleError:function(e){this._emitError(e),this._emitEnd()}},Bn=K("endOnError",Vn),qn=J("endOnError",Vn);g.prototype.toProperty=function(e){return Q(this,e)},g.prototype.changes=function(){return new Z(this)},g.prototype.toPromise=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee(),n=null;return new t((function(t,r){e.onAny((function(e){e.type===a&&null!==n?((n.type===s?t:r)(n.value),n=null):n=e}))}))}(this,e)},g.prototype.toESObservable=oe,g.prototype[ne]=oe,g.prototype.map=function(e){return me(this,e)},g.prototype.filter=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;return new(e._ofSameType(be,ge))(e,{fn:t})}(this,e)},g.prototype.take=function(e){return function(e,t){return new(e._ofSameType(we,Ee))(e,{n:t})}(this,e)},g.prototype.takeErrors=function(e){return function(e,t){return new(e._ofSameType(xe,Se))(e,{n:t})}(this,e)},g.prototype.takeWhile=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:De;return new(e._ofSameType(Ie,Ae))(e,{fn:t})}(this,e)},g.prototype.last=function(){return new((e=this)._ofSameType(Me,Oe))(e);var e},g.prototype.skip=function(e){return function(e,t){return new(e._ofSameType(Re,Le))(e,{n:t})}(this,e)},g.prototype.skipWhile=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be;return new(e._ofSameType(Ne,Ve))(e,{fn:t})}(this,e)},g.prototype.skipDuplicates=function(e){return ze(this,e)},g.prototype.diff=function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return new(e._ofSameType($e,Ge))(e,{fn:t||Ke,seed:n})}(this,e,t)},g.prototype.scan=function(e,t){return function(e,t){return new Je(e,{fn:t,seed:arguments.length>2&&void 0!==arguments[2]?arguments[2]:o})}(this,e,t)},g.prototype.flatten=function(e){return function(e){return new Ye(e,{fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe})}(this,e)},g.prototype.delay=function(e){return function(e,t){return new(e._ofSameType(et,tt))(e,{wait:t})}(this,e)},g.prototype.throttle=function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.leading,i=void 0===r||r,o=n.trailing,a=void 0===o||o;return new(e._ofSameType(it,ot))(e,{wait:t,leading:i,trailing:a})}(this,e,t)},g.prototype.debounce=function(e,t){return function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).immediate,r=void 0!==n&&n;return new(e._ofSameType(st,lt))(e,{wait:t,immediate:r})}(this,e,t)},g.prototype.mapErrors=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;return new(e._ofSameType(ct,dt))(e,{fn:t})}(this,e)},g.prototype.filterErrors=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;return new(e._ofSameType(ht,mt))(e,{fn:t})}(this,e)},g.prototype.ignoreValues=function(){return new((e=this)._ofSameType(gt,vt))(e);var e},g.prototype.ignoreErrors=function(){return new((e=this)._ofSameType(wt,Et))(e);var e},g.prototype.ignoreEnd=function(){return new((e=this)._ofSameType(xt,St))(e);var e},g.prototype.beforeEnd=function(e){return function(e,t){return new(e._ofSameType(It,At))(e,{fn:t})}(this,e)},g.prototype.slidingWindow=function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(e._ofSameType(Tt,Mt))(e,{min:n,max:t})}(this,e,t)},g.prototype.bufferWhile=function(e,t){return function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,r=void 0===n||n;return new(e._ofSameType(Pt,Rt))(e,{fn:t||Lt,flushOnEnd:r})}(this,e,t)},g.prototype.bufferWithCount=function(e,t){return function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,r=void 0===n||n;return new(e._ofSameType(Nt,Vt))(e,{count:t,flushOnEnd:r})}(this,e,t)},g.prototype.bufferWithTimeOrCount=function(e,t,n){return function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,i=void 0===r||r;return new(e._ofSameType(qt,Ut))(e,{wait:t,count:n,flushOnEnd:i})}(this,e,t,n)},g.prototype.transduce=function(e){return function(e,t){return new(e._ofSameType(Ht,zt))(e,{transducer:t})}(this,e)},g.prototype.withHandler=function(e){return function(e,t){return new(e._ofSameType($t,Gt))(e,{fn:t})}(this,e)},g.prototype.thru=function(e){return e(this)},g.prototype.combine=function(e,t){return le([this,e],t)},g.prototype.zip=function(e,t){return Yt([this,e],t)},g.prototype.merge=function(e){return en([this,e])},g.prototype.concat=function(e){return rn([this,e])};var Un=function(){return new on};g.prototype.flatMap=function(e){return new an(this,e).setName(this,"flatMap")},g.prototype.flatMapLatest=function(e){return new an(this,e,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},g.prototype.flatMapFirst=function(e){return new an(this,e,{concurLim:1}).setName(this,"flatMapFirst")},g.prototype.flatMapConcat=function(e){return new an(this,e,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},g.prototype.flatMapConcurLimit=function(e,t){return new an(this,e,{queueLim:-1,concurLim:t}).setName(this,"flatMapConcurLimit")},g.prototype.flatMapErrors=function(e){return new sn(this,e).setName(this,"flatMapErrors")},g.prototype.filterBy=function(e){return n=e,new((t=this)._ofSameType(pn,hn))(t,n);var t,n},g.prototype.sampledBy=function(e,t){return function(e,t,n){return le([t],[e],n?function(e,t){return n(t,e)}:mn).setName(e,"sampledBy")}(this,e,t)},g.prototype.skipUntilBy=function(e){return n=e,new((t=this)._ofSameType(bn,gn))(t,n);var t,n},g.prototype.takeUntilBy=function(e){return n=e,new((t=this)._ofSameType(yn,wn))(t,n);var t,n},g.prototype.bufferBy=function(e,t){return function(e,t,n){return new(e._ofSameType(kn,xn))(e,t,n)}(this,e,t)},g.prototype.bufferWhileBy=function(e,t){return function(e,t,n){return new(e._ofSameType(Cn,In))(e,t,n)}(this,e,t)};var Fn=!0;function Hn(e){if(Fn&&console&&"function"==typeof console.warn){console.warn(e,"\nHere is an Error object for you containing the call stack:",new Error)}}g.prototype.awaiting=function(e){return Hn("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),function(e,t){var n=en([me(e,Dn),me(t,An)]);return(n=Q(n=ze(n),An)).setName(e,"awaiting")}(this,e)},g.prototype.valuesToErrors=function(e){return Hn("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;return new(e._ofSameType(Mn,On))(e,{fn:t})}(this,e)},g.prototype.errorsToValues=function(e){return Hn("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nn;return new(e._ofSameType(Ln,jn))(e,{fn:t})}(this,e)},g.prototype.endOnError=function(){return Hn("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((e=this)._ofSameType(Bn,qn))(e);var e};var zn={Observable:g,Stream:v,Property:y,never:E,later:S,interval:I,sequentially:D,fromPoll:M,withInterval:R,fromCallback:N,fromNodeCallback:V,fromEvents:U,stream:j,constant:H,constantError:W,fromPromise:X,fromESObservable:re,combine:le,zip:Yt,merge:en,concat:rn,Pool:on,pool:Un,repeat:nn,staticLand:ce};zn.Kefir=zn,e.dissableDeprecationWarnings=function(){Fn=!1},e.Kefir=zn,e.Observable=g,e.Stream=v,e.Property=y,e.never=E,e.later=S,e.interval=I,e.sequentially=D,e.fromPoll=M,e.withInterval=R,e.fromCallback=N,e.fromNodeCallback=V,e.fromEvents=U,e.stream=j,e.constant=H,e.constantError=W,e.fromPromise=X,e.fromESObservable=re,e.combine=le,e.zip=Yt,e.merge=en,e.concat=rn,e.Pool=on,e.pool=Un,e.repeat=nn,e.staticLand=ce,e.default=zn,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],160:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("asap")),l=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_queue",[]),(0,a.default)(this,"_isFlushing",!1),(0,a.default)(this,"_index",0)}return(0,o.default)(e,[{key:"schedule",value:function(e){var t=this;this._queue.push((function(){try{e()}catch(e){setTimeout((function(){throw e}),0)}})),1===this._queue.length&&(0,s.default)((function(){t.flush()}))}},{key:"flush",value:function(){if(!this._isFlushing){this._isFlushing=!0;for(var e=this._queue;this._index<e.length;){var t=this._index;if(this._index+=1,e[t].call(),this._index>1024){for(var n=0,r=e.length-this._index;n<r;n++)e[n]=e[n+this._index];e.length-=this._index,this._index=0}}e.length=0,this._index=0,this._isFlushing=!1}}}]),e}();n.default=l,t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31}],161:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new i.default({scheduler:e.getScheduler(),read:function(){var n=new Set;return e.values().forEach((function(e){t(e)&&n.add(e)})),n},listen:function(n,r){var i=new Set;return e.subscribe({start:function(){var r=new Set;e.values().forEach((function(e){t(e)&&(i.add(e),r.add(e))})),n(r)},next:function(e){e.forEach((function(e){"add"===e.type?t(e.value)&&(i.add(e.value),r.add(e.value)):"remove"===e.type&&i.has(e.value)&&(i.delete(e.value),r.remove(e.value))}))},error:function(e){r.error(e)},complete:function(){r.end()}})}})};var i=r(e("."));t.exports=n.default,t.exports.default=n.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],162:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=!1;return new i.default({scheduler:e.getScheduler(),read:function(){if(n)throw new Error("reading inactive recursively-flatMapped stream is not supported");n=!0;var r=new Set;return e.values().forEach((function(e){t(e).values().forEach((function(e){r.add(e)}))})),n=!1,r},listen:function(n,r){var i=!1,o=!1,a=!1,s=new Map;function l(e){e.isEnded()?e.values().forEach((function(e){r.add(e)})):e.subscribe({start:function(t){s.set(e,t),e.values().forEach((function(e){r.add(e)}))},next:function(e){a=!0,e.forEach((function(e){"add"===e.type?r.add(e.value):"remove"===e.type&&r.remove(e.value)}))},error:function(e){r.error(e)},complete:function(){s.delete(e),i&&0===s.size&&r.end()}})}n(new Set);var u=new Map,c=e.subscribe({start:function(){e.values().forEach((function(e){var n=t(e);u.set(e,n),l(n)})),o=!0},next:function(e){a=!0,e.forEach((function(e){if("add"===e.type){var n=t(e.value);u.set(e.value,n),l(n)}else if("remove"===e.type){var i=u.get(e.value);if(!i)throw new Error("removed value not in liveset");i.values().forEach((function(e){r.remove(e)})),u.delete(e.value);var o=s.get(i);o&&(o.unsubscribe(),s.delete(i))}}))},error:function(e){r.error(e)},complete:function(){i=!0,o&&0===s.size&&r.end()}}),d=!1;return{unsubscribe:function(){c.unsubscribe(),s.forEach((function(e){e.unsubscribe()})),u.clear(),s.clear()},pullChanges:function(){if(!d){d=!0;do{a=!1,c.pullChanges(),s.forEach((function(e){e.pullChanges()}))}while(a);d=!1}}}}})};var i=r(e("."));t.exports=n.default,t.exports.default=n.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],163:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("./Scheduler")),l=r(e("symbol-observable")),u=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"_init",void 0),(0,a.default)(this,"_scheduler",void 0),(0,a.default)(this,"_values",null),(0,a.default)(this,"_mutableValues",!1),(0,a.default)(this,"_active",null),(0,a.default)(this,"_inSubscriptionStart",!1),(0,a.default)(this,"_ended",!1),(0,a.default)(this,"_endedWithError",!1),(0,a.default)(this,"_error",null),(0,a.default)(this,"_queuedCall",!1),(0,a.default)(this,"_changeQueue",[]),(0,a.default)(this,"_observers",[]),this._init=t,this._scheduler=t.scheduler||e.defaultScheduler}return(0,o.default)(e,[{key:"_queueChange",value:function(e){var t=this;e&&this._changeQueue.push(e),this._queuedCall||(this._queuedCall=!0,this._scheduler.schedule((function(){t._queuedCall=!1;var e,n=t._changeQueue;t._changeQueue=[];var r=t._ended;r?(e=t._observers,t._observers=[]):e=t._observers.slice(),e.forEach((function(e){var i=e.observer,o=e.ignore,a=i.next;if(a)if(0===o)a.call(i,n);else{e.ignore=0;var s=n.slice(o);s.length&&a.call(i,s)}r&&(t._endedWithError?i.error&&i.error(t._error):i.complete&&i.complete())}))})))}},{key:"_deactivate",value:function(){if(!this._active)throw new Error("already inactive");var e=this._active.listenHandler;this._active=null,e&&e.unsubscribe()}},{key:"values",value:function(){if(this._values){if(this._active&&!this._inSubscriptionStart){var e=this._active.listenHandler;e.pullChanges&&e.pullChanges()}return this._mutableValues&&(this._mutableValues=!1,c(this._values)),this._values}if(this._active)throw new Error("tried to call values() on liveset during subscription before setValues was called");var t=this._init.read();return c(t),t}},{key:"isEnded",value:function(){return this._ended}},{key:"getScheduler",value:function(){return this._scheduler}},{key:"subscribe",value:function(e,t,n){var r,i=this,o=this;if(r="function"==typeof e?{next:e,error:t,complete:n}:e,this._ended){var a={closed:!1,unsubscribe:function(){a.closed=!0},pullChanges:function(){}};return r.start&&r.start(a),a.closed||(this._endedWithError?r.error&&r.error(this._error):r.complete&&r.complete()),a.closed=!0,a}var s={observer:r,ignore:this._changeQueue.length},l=!0,u=!1,d={get closed(){return!l&&o._observers.indexOf(s)<0},unsubscribe:function(){if(l)u=!0;else{var e=i._observers.indexOf(s);e>=0&&(i._observers.splice(e,1),i._ended||0!==i._observers.length||(i._values=null,i._deactivate()))}},pullChanges:function(){i._active&&i._active.listenHandler&&i._active.listenHandler.pullChanges&&i._active.listenHandler.pullChanges();var e=i._changeQueue.length,t=r.next;if(0!==e&&t){var n=i._changeQueue.slice(s.ignore);0!==n.length&&(s.ignore=e,t.call(r,n))}}};if(!this._active){var f={get closed(){return!o._active||o._active.controller!==this},add:function(e){var t=i._values;if(!t)throw new Error("setValue must be called before controller is used");i._ended||t.has(e)||(i._mutableValues||(i._values=t=new Set(t),i._mutableValues=!0),t.add(e),i._queueChange({type:"add",value:e}))},remove:function(e){var t=i._values;if(!t)throw new Error("setValue must be called before controller is used");!i._ended&&t.has(e)&&(i._mutableValues||(i._values=t=new Set(t),i._mutableValues=!0),t.delete(e),i._queueChange({type:"remove",value:e}))},error:function(e){i._ended||(i._ended=!0,i._endedWithError=!0,i._error=e,i._queueChange(),i._deactivate())},end:function(){i._ended||(i._ended=!0,i._queueChange(),i._deactivate())}},p=this._active={controller:f,listenHandler:{unsubscribe:function(){}}},h=function(){throw new Error("setValues must be called once during listen")},m=function(e){m=h,c(e),i._values=e,i._mutableValues=!1},_=this._init.listen((function(e){return m(e)}),f);if(this._values||h(),"function"==typeof _)p.listenHandler={unsubscribe:_};else if(null!=_&&"function"==typeof _.unsubscribe)p.listenHandler=_;else if(null!=_)throw new TypeError("listen must return object with unsubscribe method, a function, or null");f.closed&&(this._active=p,this._deactivate())}return r.start&&(this._inSubscriptionStart=!0,r.start(d),this._inSubscriptionStart=!1),l=!1,s.ignore=this._changeQueue.length,u||this._observers.push(s),d}}],[{key:"active",value:function(t,n){var r,i=t||new Set,o=new e({scheduler:n?n.scheduler:void 0,read:function(){return i},listen:function(e,t){e(i),r=t}});return o.subscribe({}),{liveSet:o,controller:r}}},{key:"constant",value:function(t,n){c(t);var r=function(){throw new Error("Should not happen")},i=new e({scheduler:n?n.scheduler:void 0,read:r,listen:r});return i._ended=!0,i._values=t,i._mutableValues=!1,i}}]),e}();function c(e){0}n.default=u,(0,a.default)(u,"defaultScheduler",new s.default),u.prototype[l.default]=function(){return this},t.exports=n.default,t.exports.default=n.default},{"./Scheduler":160,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"symbol-observable":447}],164:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new i.default({scheduler:e[0]?e[0].getScheduler():void 0,read:function(){var t=new Set;return e.forEach((function(e){e.values().forEach((function(e){t.add(e)}))})),t},listen:function(t,n){var r=new Set,i=new Set,o=!1;return e.forEach((function(e){var t;e.subscribe({start:function(n){t=n,i.add(t),e.values().forEach((function(e){r.add(e)}))},next:function(e){e.forEach((function(e){"add"===e.type?n.add(e.value):"remove"===e.type&&n.remove(e.value)}))},error:function(e){n.error(e)},complete:function(){i.delete(t),o&&0===i.size&&n.end()}})})),t(r),o=!0,0===i.size&&n.end(),{unsubscribe:function(){i.forEach((function(e){e.unsubscribe()}))},pullChanges:function(){i.forEach((function(e){e.pullChanges()}))}}}})};var i=r(e("."));t.exports=n.default,t.exports.default=n.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],165:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new i.default((function(t){var n=new Map;function r(e){var r,i=new Promise((function(e){r=e}));n.set(e,r);var o={value:e,removal:i};t.next(o)}var i=e.subscribe({start:function(t){var n=!0,i=!1,o=void 0;try{for(var a,s=e.values()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(t.closed)break;r(l)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}},next:function(e){e.forEach((function(e){"add"===e.type?r(e.value):"remove"===e.type&&function(e){var t=n.get(e);if(!t)throw new Error("Resolver not found in map for value");n.delete(e),t()}(e.value)}))},error:function(e){t.error(e)},complete:function(){t.complete()}});return function(){i.unsubscribe(),n.forEach((function(e){e()}))}}))};r(e("."));var i=r(e("zen-observable"));t.exports=n.default,t.exports.default=n.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15,"zen-observable":464}],166:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){function n(e,t){var n,r=!1,i=e["@@transducer/step"]([],t);return i&&i["@@transducer/reduced"]?(n=i["@@transducer/value"],r=!0):n=i,{outputValues:n,addsComplete:r}}function r(){var r=new Map,i=t(o),a=!1,s=new Set(i["@@transducer/init"]()),l=!0,u=!1,c=void 0;try{for(var d,f=e.values()[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,h=n(i,p),m=h.outputValues,_=h.addsComplete;r.set(p,m);for(var b=0,g=m.length;b<g;b++)s.add(m[b]);if(_){a=!0,i["@@transducer/result"]([]).forEach((function(e){s.add(e)}));break}}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return{values:s,inputToOutputValues:r,xform:i,addsComplete:a}}return new i.default({scheduler:e.getScheduler(),read:function(){return r().values},listen:function(t,i){var o,a,s;return e.subscribe({start:function(){var e=r();t(e.values),o=e.inputToOutputValues,a=e.xform,s=e.addsComplete},next:function(e){for(var t=0,r=e.length;t<r;t++){var l=e[t];if("add"===l.type){if(!s){var u=l.value,c=n(a,u),d=c.outputValues,f=c.addsComplete;o.set(u,d);for(var p=0,h=d.length;p<h;p++)i.add(d[p]);f&&(s=!0,a["@@transducer/result"]([]).forEach((function(e){i.add(e)})))}}else if("remove"===l.type){var m=l.value,_=o.get(m);if(!_)throw new Error("value had not been added");_.forEach((function(e){i.remove(e)})),o.delete(m)}}},error:function(e){i.error(e)},complete:function(){i.end()}})}})};var i=r(e(".")),o={"@@transducer/init":function(){return[]},"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":function(e){return e}};t.exports=n.default,t.exports.default=n.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],167:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"DataView");t.exports=r},{"./_getNative":251,"./_root":291}],168:[function(e,t,n){var r=e("./_hashClear"),i=e("./_hashDelete"),o=e("./_hashGet"),a=e("./_hashHas"),s=e("./_hashSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_hashClear":257,"./_hashDelete":258,"./_hashGet":259,"./_hashHas":260,"./_hashSet":261}],169:[function(e,t,n){var r=e("./_listCacheClear"),i=e("./_listCacheDelete"),o=e("./_listCacheGet"),a=e("./_listCacheHas"),s=e("./_listCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_listCacheClear":270,"./_listCacheDelete":271,"./_listCacheGet":272,"./_listCacheHas":273,"./_listCacheSet":274}],170:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Map");t.exports=r},{"./_getNative":251,"./_root":291}],171:[function(e,t,n){var r=e("./_mapCacheClear"),i=e("./_mapCacheDelete"),o=e("./_mapCacheGet"),a=e("./_mapCacheHas"),s=e("./_mapCacheSet");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},{"./_mapCacheClear":275,"./_mapCacheDelete":276,"./_mapCacheGet":277,"./_mapCacheHas":278,"./_mapCacheSet":279}],172:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Promise");t.exports=r},{"./_getNative":251,"./_root":291}],173:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Set");t.exports=r},{"./_getNative":251,"./_root":291}],174:[function(e,t,n){var r=e("./_MapCache"),i=e("./_setCacheAdd"),o=e("./_setCacheHas");function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},{"./_MapCache":171,"./_setCacheAdd":292,"./_setCacheHas":293}],175:[function(e,t,n){var r=e("./_ListCache"),i=e("./_stackClear"),o=e("./_stackDelete"),a=e("./_stackGet"),s=e("./_stackHas"),l=e("./_stackSet");function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,t.exports=u},{"./_ListCache":169,"./_stackClear":297,"./_stackDelete":298,"./_stackGet":299,"./_stackHas":300,"./_stackSet":301}],176:[function(e,t,n){var r=e("./_root").Symbol;t.exports=r},{"./_root":291}],177:[function(e,t,n){var r=e("./_root").Uint8Array;t.exports=r},{"./_root":291}],178:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"WeakMap");t.exports=r},{"./_getNative":251,"./_root":291}],179:[function(e,t,n){t.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},{}],180:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},{}],181:[function(e,t,n){var r=e("./_baseIndexOf");t.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},{"./_baseIndexOf":199}],182:[function(e,t,n){t.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},{}],183:[function(e,t,n){var r=e("./_baseTimes"),i=e("./isArguments"),o=e("./isArray"),a=e("./isBuffer"),s=e("./_isIndex"),l=e("./isTypedArray"),u=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=o(e),c=!n&&i(e),d=!n&&!c&&a(e),f=!n&&!c&&!d&&l(e),p=n||c||d||f,h=p?r(e.length,String):[],m=h.length;for(var _ in e)!t&&!u.call(e,_)||p&&("length"==_||d&&("offset"==_||"parent"==_)||f&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||s(_,m))||h.push(_);return h}},{"./_baseTimes":224,"./_isIndex":263,"./isArguments":326,"./isArray":327,"./isBuffer":330,"./isTypedArray":338}],184:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},{}],185:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},{}],186:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},{}],187:[function(e,t,n){var r=e("./eq");t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},{"./eq":311}],188:[function(e,t,n){t.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},{}],189:[function(e,t,n){var r=e("./_SetCache"),i=e("./_arrayIncludes"),o=e("./_arrayIncludesWith"),a=e("./_arrayMap"),s=e("./_baseUnary"),l=e("./_cacheHas"),u=200;t.exports=function(e,t,n,c){var d=-1,f=i,p=!0,h=e.length,m=[],_=t.length;if(!h)return m;n&&(t=a(t,s(n))),c?(f=o,p=!1):t.length>=u&&(f=l,p=!1,t=new r(t));e:for(;++d<h;){var b=e[d],g=null==n?b:n(b);if(b=c||0!==b?b:0,p&&g==g){for(var v=_;v--;)if(t[v]===g)continue e;m.push(b)}else f(t,g,c)||m.push(b)}return m}},{"./_SetCache":174,"./_arrayIncludes":181,"./_arrayIncludesWith":182,"./_arrayMap":184,"./_baseUnary":227,"./_cacheHas":231}],190:[function(e,t,n){var r=e("./_baseForOwn"),i=e("./_createBaseEach")(r);t.exports=i},{"./_baseForOwn":194,"./_createBaseEach":237}],191:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},{}],192:[function(e,t,n){var r=e("./_arrayPush"),i=e("./_isFlattenable");t.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},{"./_arrayPush":185,"./_isFlattenable":262}],193:[function(e,t,n){var r=e("./_createBaseFor")();t.exports=r},{"./_createBaseFor":238}],194:[function(e,t,n){var r=e("./_baseFor"),i=e("./keys");t.exports=function(e,t){return e&&r(e,t,i)}},{"./_baseFor":193,"./keys":339}],195:[function(e,t,n){var r=e("./_castPath"),i=e("./_toKey");t.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},{"./_castPath":233,"./_toKey":304}],196:[function(e,t,n){var r=e("./_arrayPush"),i=e("./isArray");t.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},{"./_arrayPush":185,"./isArray":327}],197:[function(e,t,n){var r=e("./_Symbol"),i=e("./_getRawTag"),o=e("./_objectToString"),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?s:a:l&&l in Object(e)?i(e):o(e)}},{"./_Symbol":176,"./_getRawTag":252,"./_objectToString":287}],198:[function(e,t,n){t.exports=function(e,t){return null!=e&&t in Object(e)}},{}],199:[function(e,t,n){var r=e("./_baseFindIndex"),i=e("./_baseIsNaN"),o=e("./_strictIndexOf");t.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},{"./_baseFindIndex":191,"./_baseIsNaN":206,"./_strictIndexOf":302}],200:[function(e,t,n){var r=e("./_SetCache"),i=e("./_arrayIncludes"),o=e("./_arrayIncludesWith"),a=e("./_arrayMap"),s=e("./_baseUnary"),l=e("./_cacheHas"),u=Math.min;t.exports=function(e,t,n){for(var c=n?o:i,d=e[0].length,f=e.length,p=f,h=Array(f),m=1/0,_=[];p--;){var b=e[p];p&&t&&(b=a(b,s(t))),m=u(b.length,m),h[p]=!n&&(t||d>=120&&b.length>=120)?new r(p&&b):void 0}b=e[0];var g=-1,v=h[0];e:for(;++g<d&&_.length<m;){var y=b[g],w=t?t(y):y;if(y=n||0!==y?y:0,!(v?l(v,w):c(_,w,n))){for(p=f;--p;){var E=h[p];if(!(E?l(E,w):c(e[p],w,n)))continue e}v&&v.push(w),_.push(y)}}return _}},{"./_SetCache":174,"./_arrayIncludes":181,"./_arrayIncludesWith":182,"./_arrayMap":184,"./_baseUnary":227,"./_cacheHas":231}],201:[function(e,t,n){var r=e("./_baseForOwn");t.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,n(e),r,o)})),i}},{"./_baseForOwn":194}],202:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObjectLike"),o="[object Arguments]";t.exports=function(e){return i(e)&&r(e)==o}},{"./_baseGetTag":197,"./isObjectLike":335}],203:[function(e,t,n){var r=e("./_baseIsEqualDeep"),i=e("./isObjectLike");t.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},{"./_baseIsEqualDeep":204,"./isObjectLike":335}],204:[function(e,t,n){var r=e("./_Stack"),i=e("./_equalArrays"),o=e("./_equalByTag"),a=e("./_equalObjects"),s=e("./_getTag"),l=e("./isArray"),u=e("./isBuffer"),c=e("./isTypedArray"),d=1,f="[object Arguments]",p="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,_,b,g){var v=l(e),y=l(t),w=v?p:s(e),E=y?p:s(t),k=(w=w==f?h:w)==h,x=(E=E==f?h:E)==h,S=w==E;if(S&&u(e)){if(!u(t))return!1;v=!0,k=!1}if(S&&!k)return g||(g=new r),v||c(e)?i(e,t,n,_,b,g):o(e,t,w,n,_,b,g);if(!(n&d)){var C=k&&m.call(e,"__wrapped__"),I=x&&m.call(t,"__wrapped__");if(C||I){var A=C?e.value():e,D=I?t.value():t;return g||(g=new r),b(A,D,n,_,g)}}return!!S&&(g||(g=new r),a(e,t,n,_,b,g))}},{"./_Stack":175,"./_equalArrays":243,"./_equalByTag":244,"./_equalObjects":245,"./_getTag":254,"./isArray":327,"./isBuffer":330,"./isTypedArray":338}],205:[function(e,t,n){var r=e("./_Stack"),i=e("./_baseIsEqual"),o=1,a=2;t.exports=function(e,t,n,s){var l=n.length,u=l,c=!s;if(null==e)return!u;for(e=Object(e);l--;){var d=n[l];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<u;){var f=(d=n[l])[0],p=e[f],h=d[1];if(c&&d[2]){if(void 0===p&&!(f in e))return!1}else{var m=new r;if(s)var _=s(p,h,f,e,t,m);if(!(void 0===_?i(h,p,o|a,s,m):_))return!1}}return!0}},{"./_Stack":175,"./_baseIsEqual":203}],206:[function(e,t,n){t.exports=function(e){return e!=e}},{}],207:[function(e,t,n){var r=e("./isFunction"),i=e("./_isMasked"),o=e("./isObject"),a=e("./_toSource"),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,f=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:s).test(a(e))}},{"./_isMasked":267,"./_toSource":305,"./isFunction":332,"./isObject":334}],208:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isLength"),o=e("./isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},{"./_baseGetTag":197,"./isLength":333,"./isObjectLike":335}],209:[function(e,t,n){var r=e("./_baseMatches"),i=e("./_baseMatchesProperty"),o=e("./identity"),a=e("./isArray"),s=e("./property");t.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},{"./_baseMatches":213,"./_baseMatchesProperty":214,"./identity":322,"./isArray":327,"./property":347}],210:[function(e,t,n){var r=e("./_isPrototype"),i=e("./_nativeKeys"),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},{"./_isPrototype":268,"./_nativeKeys":284}],211:[function(e,t,n){var r=e("./isObject"),i=e("./_isPrototype"),o=e("./_nativeKeysIn"),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},{"./_isPrototype":268,"./_nativeKeysIn":285,"./isObject":334}],212:[function(e,t,n){var r=e("./_baseEach"),i=e("./isArrayLike");t.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},{"./_baseEach":190,"./isArrayLike":328}],213:[function(e,t,n){var r=e("./_baseIsMatch"),i=e("./_getMatchData"),o=e("./_matchesStrictComparable");t.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},{"./_baseIsMatch":205,"./_getMatchData":250,"./_matchesStrictComparable":281}],214:[function(e,t,n){var r=e("./_baseIsEqual"),i=e("./get"),o=e("./hasIn"),a=e("./_isKey"),s=e("./_isStrictComparable"),l=e("./_matchesStrictComparable"),u=e("./_toKey"),c=1,d=2;t.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,c|d)}}},{"./_baseIsEqual":203,"./_isKey":265,"./_isStrictComparable":269,"./_matchesStrictComparable":281,"./_toKey":304,"./get":320,"./hasIn":321}],215:[function(e,t,n){var r=e("./_arrayMap"),i=e("./_baseGet"),o=e("./_baseIteratee"),a=e("./_baseMap"),s=e("./_baseSortBy"),l=e("./_baseUnary"),u=e("./_compareMultiple"),c=e("./identity"),d=e("./isArray");t.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var f=-1;t=r(t,l(o));var p=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++f,value:e}}));return s(p,(function(e,t){return u(e,t,n)}))}},{"./_arrayMap":184,"./_baseGet":195,"./_baseIteratee":209,"./_baseMap":212,"./_baseSortBy":223,"./_baseUnary":227,"./_compareMultiple":235,"./identity":322,"./isArray":327}],216:[function(e,t,n){t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],217:[function(e,t,n){var r=e("./_baseGet");t.exports=function(e){return function(t){return r(t,e)}}},{"./_baseGet":195}],218:[function(e,t,n){t.exports=function(e){return function(t){return null==e?void 0:e[t]}}},{}],219:[function(e,t,n){var r=e("./_baseUnset"),i=e("./_isIndex"),o=Array.prototype.splice;t.exports=function(e,t){for(var n=e?t.length:0,a=n-1;n--;){var s=t[n];if(n==a||s!==l){var l=s;i(s)?o.call(e,s,1):r(e,s)}}return e}},{"./_baseUnset":229,"./_isIndex":263}],220:[function(e,t,n){var r=e("./identity"),i=e("./_overRest"),o=e("./_setToString");t.exports=function(e,t){return o(i(e,t,r),e+"")}},{"./_overRest":289,"./_setToString":295,"./identity":322}],221:[function(e,t,n){var r=e("./constant"),i=e("./_defineProperty"),o=e("./identity"),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;t.exports=a},{"./_defineProperty":242,"./constant":307,"./identity":322}],222:[function(e,t,n){t.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},{}],223:[function(e,t,n){t.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},{}],224:[function(e,t,n){t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},{}],225:[function(e,t,n){var r=e("./_Symbol"),i=e("./_arrayMap"),o=e("./isArray"),a=e("./isSymbol"),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},{"./_Symbol":176,"./_arrayMap":184,"./isArray":327,"./isSymbol":337}],226:[function(e,t,n){var r=e("./_trimmedEndIndex"),i=/^\s+/;t.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},{"./_trimmedEndIndex":306}],227:[function(e,t,n){t.exports=function(e){return function(t){return e(t)}}},{}],228:[function(e,t,n){var r=e("./_SetCache"),i=e("./_arrayIncludes"),o=e("./_arrayIncludesWith"),a=e("./_cacheHas"),s=e("./_createSet"),l=e("./_setToArray"),u=200;t.exports=function(e,t,n){var c=-1,d=i,f=e.length,p=!0,h=[],m=h;if(n)p=!1,d=o;else if(f>=u){var _=t?null:s(e);if(_)return l(_);p=!1,d=a,m=new r}else m=t?[]:h;e:for(;++c<f;){var b=e[c],g=t?t(b):b;if(b=n||0!==b?b:0,p&&g==g){for(var v=m.length;v--;)if(m[v]===g)continue e;t&&m.push(g),h.push(b)}else d(m,g,n)||(m!==h&&m.push(g),h.push(b))}return h}},{"./_SetCache":174,"./_arrayIncludes":181,"./_arrayIncludesWith":182,"./_cacheHas":231,"./_createSet":241,"./_setToArray":294}],229:[function(e,t,n){var r=e("./_castPath"),i=e("./last"),o=e("./_parent"),a=e("./_toKey");t.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},{"./_castPath":233,"./_parent":290,"./_toKey":304,"./last":341}],230:[function(e,t,n){var r=e("./_arrayMap");t.exports=function(e,t){return r(t,(function(t){return e[t]}))}},{"./_arrayMap":184}],231:[function(e,t,n){t.exports=function(e,t){return e.has(t)}},{}],232:[function(e,t,n){var r=e("./isArrayLikeObject");t.exports=function(e){return r(e)?e:[]}},{"./isArrayLikeObject":329}],233:[function(e,t,n){var r=e("./isArray"),i=e("./_isKey"),o=e("./_stringToPath"),a=e("./toString");t.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},{"./_isKey":265,"./_stringToPath":303,"./isArray":327,"./toString":357}],234:[function(e,t,n){var r=e("./isSymbol");t.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),s=void 0!==t,l=null===t,u=t==t,c=r(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&e<t||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},{"./isSymbol":337}],235:[function(e,t,n){var r=e("./_compareAscending");t.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=l?u:u*("desc"==n[i]?-1:1)}return e.index-t.index}},{"./_compareAscending":234}],236:[function(e,t,n){var r=e("./_root")["__core-js_shared__"];t.exports=r},{"./_root":291}],237:[function(e,t,n){var r=e("./isArrayLike");t.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},{"./isArrayLike":328}],238:[function(e,t,n){t.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},{}],239:[function(e,t,n){var r=e("./_baseIteratee"),i=e("./isArrayLike"),o=e("./keys");t.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},{"./_baseIteratee":209,"./isArrayLike":328,"./keys":339}],240:[function(e,t,n){var r=e("./_baseInverter");t.exports=function(e,t){return function(n,i){return r(n,e,t(i),{})}}},{"./_baseInverter":201}],241:[function(e,t,n){var r=e("./_Set"),i=e("./noop"),o=e("./_setToArray"),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;t.exports=a},{"./_Set":173,"./_setToArray":294,"./noop":344}],242:[function(e,t,n){var r=e("./_getNative"),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=i},{"./_getNative":251}],243:[function(e,t,n){var r=e("./_SetCache"),i=e("./_arraySome"),o=e("./_cacheHas"),a=1,s=2;t.exports=function(e,t,n,l,u,c){var d=n&a,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var h=c.get(e),m=c.get(t);if(h&&m)return h==t&&m==e;var _=-1,b=!0,g=n&s?new r:void 0;for(c.set(e,t),c.set(t,e);++_<f;){var v=e[_],y=t[_];if(l)var w=d?l(y,v,_,t,e,c):l(v,y,_,e,t,c);if(void 0!==w){if(w)continue;b=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||u(v,e,n,l,c)))return g.push(t)}))){b=!1;break}}else if(v!==y&&!u(v,y,n,l,c)){b=!1;break}}return c.delete(e),c.delete(t),b}},{"./_SetCache":174,"./_arraySome":186,"./_cacheHas":231}],244:[function(e,t,n){var r=e("./_Symbol"),i=e("./_Uint8Array"),o=e("./eq"),a=e("./_equalArrays"),s=e("./_mapToArray"),l=e("./_setToArray"),u=1,c=2,d="[object Boolean]",f="[object Date]",p="[object Error]",h="[object Map]",m="[object Number]",_="[object RegExp]",b="[object Set]",g="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",w="[object DataView]",E=r?r.prototype:void 0,k=E?E.valueOf:void 0;t.exports=function(e,t,n,r,E,x,S){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!x(new i(e),new i(t)));case d:case f:case m:return o(+e,+t);case p:return e.name==t.name&&e.message==t.message;case _:case g:return e==t+"";case h:var C=s;case b:var I=r&u;if(C||(C=l),e.size!=t.size&&!I)return!1;var A=S.get(e);if(A)return A==t;r|=c,S.set(e,t);var D=a(C(e),C(t),r,E,x,S);return S.delete(e),D;case v:if(k)return k.call(e)==k.call(t)}return!1}},{"./_Symbol":176,"./_Uint8Array":177,"./_equalArrays":243,"./_mapToArray":280,"./_setToArray":294,"./eq":311}],245:[function(e,t,n){var r=e("./_getAllKeys"),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,a,s,l){var u=n&i,c=r(e),d=c.length;if(d!=r(t).length&&!u)return!1;for(var f=d;f--;){var p=c[f];if(!(u?p in t:o.call(t,p)))return!1}var h=l.get(e),m=l.get(t);if(h&&m)return h==t&&m==e;var _=!0;l.set(e,t),l.set(t,e);for(var b=u;++f<d;){var g=e[p=c[f]],v=t[p];if(a)var y=u?a(v,g,p,t,e,l):a(g,v,p,e,t,l);if(!(void 0===y?g===v||s(g,v,n,a,l):y)){_=!1;break}b||(b="constructor"==p)}if(_&&!b){var w=e.constructor,E=t.constructor;w==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E||(_=!1)}return l.delete(e),l.delete(t),_}},{"./_getAllKeys":248}],246:[function(e,t,n){var r=e("./_basePropertyOf")({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},{"./_basePropertyOf":218}],247:[function(e,t,n){(function(e){(function(){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],248:[function(e,t,n){var r=e("./_baseGetAllKeys"),i=e("./_getSymbols"),o=e("./keys");t.exports=function(e){return r(e,o,i)}},{"./_baseGetAllKeys":196,"./_getSymbols":253,"./keys":339}],249:[function(e,t,n){var r=e("./_isKeyable");t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},{"./_isKeyable":266}],250:[function(e,t,n){var r=e("./_isStrictComparable"),i=e("./keys");t.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},{"./_isStrictComparable":269,"./keys":339}],251:[function(e,t,n){var r=e("./_baseIsNative"),i=e("./_getValue");t.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},{"./_baseIsNative":207,"./_getValue":255}],252:[function(e,t,n){var r=e("./_Symbol"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},{"./_Symbol":176}],253:[function(e,t,n){var r=e("./_arrayFilter"),i=e("./stubArray"),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;t.exports=s},{"./_arrayFilter":180,"./stubArray":351}],254:[function(e,t,n){var r=e("./_DataView"),i=e("./_Map"),o=e("./_Promise"),a=e("./_Set"),s=e("./_WeakMap"),l=e("./_baseGetTag"),u=e("./_toSource"),c="[object Map]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",h="[object DataView]",m=u(r),_=u(i),b=u(o),g=u(a),v=u(s),y=l;(r&&y(new r(new ArrayBuffer(1)))!=h||i&&y(new i)!=c||o&&y(o.resolve())!=d||a&&y(new a)!=f||s&&y(new s)!=p)&&(y=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return h;case _:return c;case b:return d;case g:return f;case v:return p}return t}),t.exports=y},{"./_DataView":167,"./_Map":170,"./_Promise":172,"./_Set":173,"./_WeakMap":178,"./_baseGetTag":197,"./_toSource":305}],255:[function(e,t,n){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],256:[function(e,t,n){var r=e("./_castPath"),i=e("./isArguments"),o=e("./isArray"),a=e("./_isIndex"),s=e("./isLength"),l=e("./_toKey");t.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,d=!1;++u<c;){var f=l(t[u]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&s(c)&&a(f,c)&&(o(e)||i(e))}},{"./_castPath":233,"./_isIndex":263,"./_toKey":304,"./isArguments":326,"./isArray":327,"./isLength":333}],257:[function(e,t,n){var r=e("./_nativeCreate");t.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":283}],258:[function(e,t,n){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],259:[function(e,t,n){var r=e("./_nativeCreate"),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},{"./_nativeCreate":283}],260:[function(e,t,n){var r=e("./_nativeCreate"),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},{"./_nativeCreate":283}],261:[function(e,t,n){var r=e("./_nativeCreate"),i="__lodash_hash_undefined__";t.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},{"./_nativeCreate":283}],262:[function(e,t,n){var r=e("./_Symbol"),i=e("./isArguments"),o=e("./isArray"),a=r?r.isConcatSpreadable:void 0;t.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},{"./_Symbol":176,"./isArguments":326,"./isArray":327}],263:[function(e,t,n){var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}},{}],264:[function(e,t,n){var r=e("./eq"),i=e("./isArrayLike"),o=e("./_isIndex"),a=e("./isObject");t.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},{"./_isIndex":263,"./eq":311,"./isArrayLike":328,"./isObject":334}],265:[function(e,t,n){var r=e("./isArray"),i=e("./isSymbol"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},{"./isArray":327,"./isSymbol":337}],266:[function(e,t,n){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],267:[function(e,t,n){var r,i=e("./_coreJsData"),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(e){return!!o&&o in e}},{"./_coreJsData":236}],268:[function(e,t,n){var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},{}],269:[function(e,t,n){var r=e("./isObject");t.exports=function(e){return e==e&&!r(e)}},{"./isObject":334}],270:[function(e,t,n){t.exports=function(){this.__data__=[],this.size=0}},{}],271:[function(e,t,n){var r=e("./_assocIndexOf"),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},{"./_assocIndexOf":187}],272:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},{"./_assocIndexOf":187}],273:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e){return r(this.__data__,e)>-1}},{"./_assocIndexOf":187}],274:[function(e,t,n){var r=e("./_assocIndexOf");t.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},{"./_assocIndexOf":187}],275:[function(e,t,n){var r=e("./_Hash"),i=e("./_ListCache"),o=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},{"./_Hash":168,"./_ListCache":169,"./_Map":170}],276:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":249}],277:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).get(e)}},{"./_getMapData":249}],278:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).has(e)}},{"./_getMapData":249}],279:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},{"./_getMapData":249}],280:[function(e,t,n){t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},{}],281:[function(e,t,n){t.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},{}],282:[function(e,t,n){var r=e("./memoize"),i=500;t.exports=function(e){var t=r(e,(function(e){return n.size===i&&n.clear(),e})),n=t.cache;return t}},{"./memoize":343}],283:[function(e,t,n){var r=e("./_getNative")(Object,"create");t.exports=r},{"./_getNative":251}],284:[function(e,t,n){var r=e("./_overArg")(Object.keys,Object);t.exports=r},{"./_overArg":288}],285:[function(e,t,n){t.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},{}],286:[function(e,t,n){var r=e("./_freeGlobal"),i="object"==typeof n&&n&&!n.nodeType&&n,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s},{"./_freeGlobal":247}],287:[function(e,t,n){var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},{}],288:[function(e,t,n){t.exports=function(e,t){return function(n){return e(t(n))}}},{}],289:[function(e,t,n){var r=e("./_apply"),i=Math.max;t.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},{"./_apply":179}],290:[function(e,t,n){var r=e("./_baseGet"),i=e("./_baseSlice");t.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},{"./_baseGet":195,"./_baseSlice":222}],291:[function(e,t,n){var r=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},{"./_freeGlobal":247}],292:[function(e,t,n){var r="__lodash_hash_undefined__";t.exports=function(e){return this.__data__.set(e,r),this}},{}],293:[function(e,t,n){t.exports=function(e){return this.__data__.has(e)}},{}],294:[function(e,t,n){t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},{}],295:[function(e,t,n){var r=e("./_baseSetToString"),i=e("./_shortOut")(r);t.exports=i},{"./_baseSetToString":221,"./_shortOut":296}],296:[function(e,t,n){var r=800,i=16,o=Date.now;t.exports=function(e){var t=0,n=0;return function(){var a=o(),s=i-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},{}],297:[function(e,t,n){var r=e("./_ListCache");t.exports=function(){this.__data__=new r,this.size=0}},{"./_ListCache":169}],298:[function(e,t,n){t.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},{}],299:[function(e,t,n){t.exports=function(e){return this.__data__.get(e)}},{}],300:[function(e,t,n){t.exports=function(e){return this.__data__.has(e)}},{}],301:[function(e,t,n){var r=e("./_ListCache"),i=e("./_Map"),o=e("./_MapCache"),a=200;t.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},{"./_ListCache":169,"./_Map":170,"./_MapCache":171}],302:[function(e,t,n){t.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},{}],303:[function(e,t,n){var r=e("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));t.exports=a},{"./_memoizeCapped":282}],304:[function(e,t,n){var r=e("./isSymbol"),i=1/0;t.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},{"./isSymbol":337}],305:[function(e,t,n){var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],306:[function(e,t,n){var r=/\s/;t.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},{}],307:[function(e,t,n){t.exports=function(e){return function(){return e}}},{}],308:[function(e,t,n){var r=e("./isObject"),i=e("./now"),o=e("./toNumber"),a="Expected a function",s=Math.max,l=Math.min;t.exports=function(e,t,n){var u,c,d,f,p,h,m=0,_=!1,b=!1,g=!0;if("function"!=typeof e)throw new TypeError(a);function v(t){var n=u,r=c;return u=c=void 0,m=t,f=e.apply(r,n)}function y(e){var n=e-h;return void 0===h||n>=t||n<0||b&&e-m>=d}function w(){var e=i();if(y(e))return E(e);p=setTimeout(w,function(e){var n=t-(e-h);return b?l(n,d-(e-m)):n}(e))}function E(e){return p=void 0,g&&u?v(e):(u=c=void 0,f)}function k(){var e=i(),n=y(e);if(u=arguments,c=this,h=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(w,t),_?v(e):f}(h);if(b)return clearTimeout(p),p=setTimeout(w,t),v(h)}return void 0===p&&(p=setTimeout(w,t)),f}return t=o(t)||0,r(n)&&(_=!!n.leading,d=(b="maxWait"in n)?s(o(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==p&&clearTimeout(p),m=0,u=h=c=p=void 0},k.flush=function(){return void 0===p?f:E(i())},k}},{"./isObject":334,"./now":345,"./toNumber":356}],309:[function(e,t,n){var r=e("./_baseRest"),i=e("./eq"),o=e("./_isIterateeCall"),a=e("./keysIn"),s=Object.prototype,l=s.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&o(t[0],t[1],u)&&(r=1);++n<r;)for(var c=t[n],d=a(c),f=-1,p=d.length;++f<p;){var h=d[f],m=e[h];(void 0===m||i(m,s[h])&&!l.call(e,h))&&(e[h]=c[h])}return e}));t.exports=u},{"./_baseRest":220,"./_isIterateeCall":264,"./eq":311,"./keysIn":340}],310:[function(e,t,n){var r=e("./_baseDifference"),i=e("./_baseFlatten"),o=e("./_baseRest"),a=e("./isArrayLikeObject"),s=o((function(e,t){return a(e)?r(e,i(t,1,a,!0)):[]}));t.exports=s},{"./_baseDifference":189,"./_baseFlatten":192,"./_baseRest":220,"./isArrayLikeObject":329}],311:[function(e,t,n){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],312:[function(e,t,n){var r=e("./_escapeHtmlChar"),i=e("./toString"),o=/[&<>"']/g,a=RegExp(o.source);t.exports=function(e){return(e=i(e))&&a.test(e)?e.replace(o,r):e}},{"./_escapeHtmlChar":246,"./toString":357}],313:[function(e,t,n){var r=e("./toString"),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);t.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},{"./toString":357}],314:[function(e,t,n){var r=e("./_createFind")(e("./findIndex"));t.exports=r},{"./_createFind":239,"./findIndex":315}],315:[function(e,t,n){var r=e("./_baseFindIndex"),i=e("./_baseIteratee"),o=e("./toInteger"),a=Math.max;t.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},{"./_baseFindIndex":191,"./_baseIteratee":209,"./toInteger":355}],316:[function(e,t,n){var r=e("./_baseFindIndex"),i=e("./_baseIteratee"),o=e("./toInteger"),a=Math.max,s=Math.min;t.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var u=l-1;return void 0!==n&&(u=o(n),u=n<0?a(l+u,0):s(u,l-1)),r(e,i(t,3),u,!0)}},{"./_baseFindIndex":191,"./_baseIteratee":209,"./toInteger":355}],317:[function(e,t,n){var r=e("./_baseFlatten"),i=e("./map");t.exports=function(e,t){return r(i(e,t),1)}},{"./_baseFlatten":192,"./map":342}],318:[function(e,t,n){var r=e("./_baseFlatten");t.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},{"./_baseFlatten":192}],319:[function(e,t,n){t.exports=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}},{}],320:[function(e,t,n){var r=e("./_baseGet");t.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},{"./_baseGet":195}],321:[function(e,t,n){var r=e("./_baseHasIn"),i=e("./_hasPath");t.exports=function(e,t){return null!=e&&i(e,t,r)}},{"./_baseHasIn":198,"./_hasPath":256}],322:[function(e,t,n){t.exports=function(e){return e}},{}],323:[function(e,t,n){var r=e("./_baseIndexOf"),i=e("./isArrayLike"),o=e("./isString"),a=e("./toInteger"),s=e("./values"),l=Math.max;t.exports=function(e,t,n,u){e=i(e)?e:s(e),n=n&&!u?a(n):0;var c=e.length;return n<0&&(n=l(c+n,0)),o(e)?n<=c&&e.indexOf(t,n)>-1:!!c&&r(e,t,n)>-1}},{"./_baseIndexOf":199,"./isArrayLike":328,"./isString":336,"./toInteger":355,"./values":361}],324:[function(e,t,n){var r=e("./_arrayMap"),i=e("./_baseIntersection"),o=e("./_baseRest"),a=e("./_castArrayLikeObject"),s=o((function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]}));t.exports=s},{"./_arrayMap":184,"./_baseIntersection":200,"./_baseRest":220,"./_castArrayLikeObject":232}],325:[function(e,t,n){var r=e("./_baseIteratee"),i=e("./_createInverter"),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),a.call(e,t)?e[t].push(n):e[t]=[n]}),r);t.exports=l},{"./_baseIteratee":209,"./_createInverter":240}],326:[function(e,t,n){var r=e("./_baseIsArguments"),i=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=l},{"./_baseIsArguments":202,"./isObjectLike":335}],327:[function(e,t,n){var r=Array.isArray;t.exports=r},{}],328:[function(e,t,n){var r=e("./isFunction"),i=e("./isLength");t.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},{"./isFunction":332,"./isLength":333}],329:[function(e,t,n){var r=e("./isArrayLike"),i=e("./isObjectLike");t.exports=function(e){return i(e)&&r(e)}},{"./isArrayLike":328,"./isObjectLike":335}],330:[function(e,t,n){var r=e("./_root"),i=e("./stubFalse"),o="object"==typeof n&&n&&!n.nodeType&&n,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l},{"./_root":291,"./stubFalse":352}],331:[function(e,t,n){var r=e("./_baseIsEqual");t.exports=function(e,t){return r(e,t)}},{"./_baseIsEqual":203}],332:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObject"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==l}},{"./_baseGetTag":197,"./isObject":334}],333:[function(e,t,n){var r=9007199254740991;t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},{}],334:[function(e,t,n){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],335:[function(e,t,n){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],336:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isArray"),o=e("./isObjectLike"),a="[object String]";t.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&r(e)==a}},{"./_baseGetTag":197,"./isArray":327,"./isObjectLike":335}],337:[function(e,t,n){var r=e("./_baseGetTag"),i=e("./isObjectLike"),o="[object Symbol]";t.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},{"./_baseGetTag":197,"./isObjectLike":335}],338:[function(e,t,n){var r=e("./_baseIsTypedArray"),i=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},{"./_baseIsTypedArray":208,"./_baseUnary":227,"./_nodeUtil":286}],339:[function(e,t,n){var r=e("./_arrayLikeKeys"),i=e("./_baseKeys"),o=e("./isArrayLike");t.exports=function(e){return o(e)?r(e):i(e)}},{"./_arrayLikeKeys":183,"./_baseKeys":210,"./isArrayLike":328}],340:[function(e,t,n){var r=e("./_arrayLikeKeys"),i=e("./_baseKeysIn"),o=e("./isArrayLike");t.exports=function(e){return o(e)?r(e,!0):i(e)}},{"./_arrayLikeKeys":183,"./_baseKeysIn":211,"./isArrayLike":328}],341:[function(e,t,n){t.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},{}],342:[function(e,t,n){var r=e("./_arrayMap"),i=e("./_baseIteratee"),o=e("./_baseMap"),a=e("./isArray");t.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},{"./_arrayMap":184,"./_baseIteratee":209,"./_baseMap":212,"./isArray":327}],343:[function(e,t,n){var r=e("./_MapCache"),i="Expected a function";function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},{"./_MapCache":171}],344:[function(e,t,n){t.exports=function(){}},{}],345:[function(e,t,n){var r=e("./_root");t.exports=function(){return r.Date.now()}},{"./_root":291}],346:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new Error("Parameter must be function");var t;return function(){if(e){var n=e;e=void 0,t=n.apply(this,arguments)}return t}}},{}],347:[function(e,t,n){var r=e("./_baseProperty"),i=e("./_basePropertyDeep"),o=e("./_isKey"),a=e("./_toKey");t.exports=function(e){return o(e)?r(a(e)):i(e)}},{"./_baseProperty":216,"./_basePropertyDeep":217,"./_isKey":265,"./_toKey":304}],348:[function(e,t,n){var r=e("./_baseIteratee"),i=e("./_basePullAt");t.exports=function(e,t){var n=[];if(!e||!e.length)return n;var o=-1,a=[],s=e.length;for(t=r(t,3);++o<s;){var l=e[o];t(l,o,e)&&(n.push(l),a.push(o))}return i(e,a),n}},{"./_baseIteratee":209,"./_basePullAt":219}],349:[function(e,t,n){var r=e("./_baseFlatten"),i=e("./_baseOrderBy"),o=e("./_baseRest"),a=e("./_isIterateeCall"),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));t.exports=s},{"./_baseFlatten":192,"./_baseOrderBy":215,"./_baseRest":220,"./_isIterateeCall":264}],350:[function(e,t,n){var r=e("./_baseClamp"),i=e("./_baseToString"),o=e("./toInteger"),a=e("./toString");t.exports=function(e,t,n){return e=a(e),n=null==n?0:r(o(n),0,e.length),t=i(t),e.slice(n,n+t.length)==t}},{"./_baseClamp":188,"./_baseToString":225,"./toInteger":355,"./toString":357}],351:[function(e,t,n){t.exports=function(){return[]}},{}],352:[function(e,t,n){t.exports=function(){return!1}},{}],353:[function(e,t,n){var r=e("./debounce"),i=e("./isObject"),o="Expected a function";t.exports=function(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError(o);return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:a,maxWait:t,trailing:s})}},{"./debounce":308,"./isObject":334}],354:[function(e,t,n){var r=e("./toNumber"),i=1/0,o=17976931348623157e292;t.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},{"./toNumber":356}],355:[function(e,t,n){var r=e("./toFinite");t.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},{"./toFinite":354}],356:[function(e,t,n){var r=e("./_baseTrim"),i=e("./isObject"),o=e("./isSymbol"),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?a:+e}},{"./_baseTrim":226,"./isObject":334,"./isSymbol":337}],357:[function(e,t,n){var r=e("./_baseToString");t.exports=function(e){return null==e?"":r(e)}},{"./_baseToString":225}],358:[function(e,t,n){var r=e("./_baseUniq");t.exports=function(e){return e&&e.length?r(e):[]}},{"./_baseUniq":228}],359:[function(e,t,n){var r=e("./_baseIteratee"),i=e("./_baseUniq");t.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},{"./_baseIteratee":209,"./_baseUniq":228}],360:[function(e,t,n){var r=e("./_arrayFilter"),i=e("./_arrayMap"),o=e("./_baseProperty"),a=e("./_baseTimes"),s=e("./isArrayLikeObject"),l=Math.max;t.exports=function(e){if(!e||!e.length)return[];var t=0;return e=r(e,(function(e){if(s(e))return t=l(e.length,t),!0})),a(t,(function(t){return i(e,o(t))}))}},{"./_arrayFilter":180,"./_arrayMap":184,"./_baseProperty":216,"./_baseTimes":224,"./isArrayLikeObject":329}],361:[function(e,t,n){var r=e("./_baseValues"),i=e("./keys");t.exports=function(e){return null==e?[]:r(e,i(e))}},{"./_baseValues":230,"./keys":339}],362:[function(e,t,n){var r=e("./_baseRest")(e("./unzip"));t.exports=r},{"./_baseRest":220,"./unzip":360}],363:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){return new a(e,t)}};var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=function(){function e(t,n){(0,i.default)(this,e),this.f=t,this.xform=n,this.i=-1}return(0,o.default)(e,[{key:"@@transducer/init",value:function(){return this.xform["@@transducer/init"]()}},{key:"@@transducer/result",value:function(e){return this.xform["@@transducer/result"](e)}},{key:"@@transducer/step",value:function(e,t){return this.i++,this.xform["@@transducer/step"](e,this.f(t,this.i))}}]),e}();t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":15}],364:[function(e,t,n){(function(e){(function(){"use strict";n.__esModule=!0,n.default=function(e,t){if(i)return i.call(e,t);var n=e.parentNode;if(n&&"function"==typeof n.querySelectorAll)for(var r=n.querySelectorAll(t),o=0;o<r.length;o++)if(r[o]===e)return!0;return!1};var r=e.Element&&e.Element.prototype,i=r&&(r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector);t.exports=n.default,t.exports.default=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],365:[function(e,t,n){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},{}],366:[function(e,t,n){(function(e){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e.Object.freeze||function(e){return e};n.default=r,t.exports=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],367:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=h(e("babel-runtime/helpers/extends")),i=h(e("babel-runtime/core-js/object/keys")),o=h(e("babel-runtime/helpers/classCallCheck")),a=h(e("babel-runtime/helpers/createClass")),s=h(e("babel-runtime/core-js/json/stringify")),l=h(e("immutability-helper")),u=h(e("lodash/findIndex")),c=h(e("lodash/findLastIndex")),d=h(e("lodash/invertBy")),f=h(e("lodash/sortBy")),p=h(e("./freeze"));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){return(0,s.default)(e.groupId)+":"+(0,s.default)(e.id)}var _=function(){function e(t){(0,o.default)(this,e),this._items=(0,p.default)([]),this._needsSort=!1,this._get=t.get,this._set=t.set,this._maxLimit=t.maxLimit||200}return(0,a.default)(e,[{key:"_read",value:function(){var e=this._get();return null==e?{order:[]}:e}},{key:"_save",value:function(e){if(e.order.length>this._maxLimit){var t=e.order.map((function(e,t){return{item:e,index:t}})),n=(0,f.default)(t,(function(e){return e.item.lastUse})).slice(0,e.order.length-this._maxLimit).map((function(e){return e.index})),r=(0,f.default)(n,(function(e){return-e}));e=(0,l.default)(e,{order:{$splice:r.map((function(e){return[e,1]}))}})}this._set(e)}},{key:"_updatePersistedDataWithItem",value:function(e){var t=this._read(),n=(0,u.default)(t.order,(function(t){return t.groupId===e.groupId&&t.id===e.id}));if(-1!==n&&t.order[n].orderHint!==e.orderHint&&(t=(0,l.default)(t,{order:{$splice:[[n,1]]}}),n=-1),-1!==n)t=(0,l.default)(t,{order:{$splice:[[n,1,{groupId:e.groupId,id:e.id,orderHint:e.orderHint,lastUse:Date.now()}]]}});else{var r=void 0,o=(0,c.default)(t.order,(function(t){return t.groupId===e.groupId&&t.orderHint<=e.orderHint}));if(-1!==o)r=o+1;else{var a=(0,u.default)(t.order,(function(t){return t.groupId===e.groupId}));if(-1!==a)r=a;else{var s=(0,d.default)(t.order,(function(e){return e.groupId})),f=(0,i.default)(s),p=Math.floor(Math.random()*(f.length+1));r=p===f.length?t.order.length:s[f[p]][0]}}t=(0,l.default)(t,{order:{$splice:[[r,0,{groupId:e.groupId,id:e.id,orderHint:e.orderHint,lastUse:Date.now()}]]}})}return this._save(t),t}},{key:"_sortItemsIfNecessary",value:function(e){if(this._needsSort){e||(e=this._read());var t=(0,d.default)(e.order,m);this._items=(0,p.default)((0,f.default)(this._items,(function(e){var n=m(e);return Object.prototype.hasOwnProperty.call(t,n)?Number(t[n][0]):0}))),this._needsSort=!1}}},{key:"addItem",value:function(e){this._updatePersistedDataWithItem(e),this._needsSort=!0,this._items=this._items.concat([(0,p.default)({groupId:e.groupId,id:e.id,orderHint:e.orderHint,value:e.value})])}},{key:"updateItemValue",value:function(e,t,n){this._items=(0,p.default)(this._items.map((function(i){return i.groupId===e&&i.id===t?(0,p.default)((0,r.default)({},i,{value:n})):i})))}},{key:"updateItemValueByIndex",value:function(e,t){this._sortItemsIfNecessary(),this._items=(0,p.default)((0,l.default)(this._items,{$splice:[[e,1,(0,p.default)((0,r.default)({},this._items[e],{value:t}))]]}))}},{key:"removeItem",value:function(e,t){this._items=(0,p.default)(this._items.filter((function(n){return n.groupId!==e||n.id!==t})))}},{key:"removeItemByIndex",value:function(e){this._sortItemsIfNecessary(),this._items=(0,p.default)((0,l.default)(this._items,{$splice:[[e,1]]}))}},{key:"moveItem",value:function(e,t){var n=this._read();this._sortItemsIfNecessary(n);var r=this._items[e],i=this._items[t],o=(0,u.default)(n.order,(function(e){return e.groupId===r.groupId&&e.id===r.id})),a=(0,u.default)(n.order,(function(e){return e.groupId===i.groupId&&e.id===i.id}));n=(0,l.default)(n,{order:{$splice:[[o,1],[a,0,n.order[o]]]}}),this._save(n),this._needsSort=!0}},{key:"getOrderedItems",value:function(){return this._sortItemsIfNecessary(),this._items}},{key:"reload",value:function(){this._needsSort=!0}}]),e}();n.default=_,t.exports=n.default},{"./freeze":366,"babel-runtime/core-js/json/stringify":35,"babel-runtime/core-js/object/keys":38,"babel-runtime/helpers/classCallCheck":39,"babel-runtime/helpers/createClass":40,"babel-runtime/helpers/extends":41,"immutability-helper":368,"lodash/findIndex":315,"lodash/findLastIndex":316,"lodash/invertBy":325,"lodash/sortBy":349}],368:[function(e,t,n){var r=e("invariant"),i=Object.prototype.hasOwnProperty,o=Array.prototype.splice,a=Object.prototype.toString,s=function(e){return a.call(e).slice(8,-1)},l=Object.assign||function(e,t){return u(t).forEach((function(n){i.call(t,n)&&(e[n]=t[n])})),e},u="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function c(e){if(Array.isArray(e))return l(e.constructor(e.length),e);if("Map"===s(e))return new Map(e);if("Set"===s(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return l(Object.create(t),e)}return e}function d(){var e=l({},f);return t.extend=function(t,n){e[t]=n},t.isEquals=function(e,t){return e===t},t;function t(n,o){"function"==typeof o&&(o={$apply:o}),Array.isArray(n)&&Array.isArray(o)||r(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),r("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var a=n;return u(o).forEach((function(r){if(i.call(e,r)){var l=n===a;a=e[r](o[r],a,o,n),l&&t.isEquals(a,n)&&(a=n)}else{var u="Map"===s(n)?t(n.get(r),o[r]):t(n[r],o[r]),d="Map"===s(a)?a.get(r):a[r];t.isEquals(u,d)&&(void 0!==u||i.call(n,r))||(a===n&&(a=c(n)),"Map"===s(a)?a.set(r,u):a[r]=u)}})),a}}var f={$push:function(e,t,n){return h(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return h(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,i){return function(e,t){r(Array.isArray(e),"Expected $splice target to be an array; got %s",e),_(t.$splice)}(t,n),e.forEach((function(e){_(e),t===i&&e.length&&(t=c(i)),o.apply(t,e)})),t},$set:function(e,t,n){return function(e){r(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(n),e},$toggle:function(e,t){m(e,"$toggle");var n=e.length?c(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,r){return m(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=c(r)),delete t[e])})),t},$add:function(e,t,n,r){return b(t,"$add"),m(e,"$add"),"Map"===s(t)?e.forEach((function(e){var n=e[0],i=e[1];t===r&&t.get(n)!==i&&(t=c(r)),t.set(n,i)})):e.forEach((function(e){t!==r||t.has(e)||(t=c(r)),t.add(e)})),t},$remove:function(e,t,n,r){return b(t,"$remove"),m(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=c(r)),t.delete(e)})),t},$merge:function(e,t,n,i){var o,a;return o=t,r((a=e)&&"object"==typeof a,"update(): $merge expects a spec of type 'object'; got %s",a),r(o&&"object"==typeof o,"update(): $merge expects a target of type 'object'; got %s",o),u(e).forEach((function(n){e[n]!==t[n]&&(t===i&&(t=c(i)),t[n]=e[n])})),t},$apply:function(e,t){var n;return r("function"==typeof(n=e),"update(): expected spec of $apply to be a function; got %s.",n),e(t)}},p=d();function h(e,t,n){r(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e),m(t[n],n)}function m(e,t){r(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function _(e){r(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function b(e,t){var n=s(e);r("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",t,n)}t.exports=p,t.exports.default=p,t.exports.newContext=d},{invariant:153}],369:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){return(0,i.default)(t,e)}};var i=r(e("matches-selector-ng"));t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/interopRequireDefault":15,"matches-selector-ng":364}],370:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){var r=n.map((function(n){if("string"==typeof n){var r=(0,l.default)(n);return function(e){return(0,c.default)(e,r)}}if(n.$or){var d=n.$or.map((function(n){return e(t,n)}));return function(e){return(0,s.default)(d.map((function(t){return t(e)})))}}if(n.$watch){var f=n.$watch,p=f.attributeFilter,h=f.cond,m="function"==typeof h?h:(0,l.default)(h);return function(e){return(0,u.default)(e,p,m)}}if(n.$log){var _=n.$log,b=function(e){return console.log(_,e.el),!0};return function(e){return(0,a.default)(e,b)}}if(n.$filter){var g=n.$filter,v=function(e){var t=e.el;return g(t)};return function(e){return(0,a.default)(e,v)}}if(n.$map){var y=n.$map,w=i.default.compose(i.default.map((function(e){return{el:y(e.el),parents:e.parents}})),i.default.filter((function(e){return null!=e.el})));return function(e){return(0,o.default)(e,w)}}throw new Error("Invalid selector item: ".concat(JSON.stringify(n)))}));return r.reduce((function(e,t){return function(n){return t(e(n))}}),(function(e){return e}))};var i=r(e("transducers.js")),o=r(e("live-set/transduce")),a=r(e("live-set/filter")),s=r(e("live-set/merge")),l=r(e("./createCssFn")),u=r(e("./watchMutations")),c=r(e("./watchFilteredChildren"));t.exports=n.default,t.exports.default=n.default},{"./createCssFn":369,"./watchFilteredChildren":371,"./watchMutations":372,"@babel/runtime/helpers/interopRequireDefault":15,"live-set/filter":161,"live-set/merge":164,"live-set/transduce":166,"transducers.js":452}],371:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new i.default({scheduler:e.getScheduler(),read:function(){throw new Error},listen:function(n,r){n(new Set);var i=new Map,o=new Map;function a(e){function n(n){if(1===n.nodeType&&t(n)){var i={el:n,parents:e.parents};o.set(n,i),r.add(i)}}function a(e){if(1===e.nodeType){var t=o.get(e);t&&(o.delete(e),r.remove(t))}}Array.prototype.forEach.call(e.el.children,n);var s=new MutationObserver((function(e){if(e.length>1){var t=new Set,r=[];e.forEach((function(e){for(var n=e.addedNodes,i=e.removedNodes,o=0,a=i.length;o<a;o++){1===i[o].nodeType&&t.add(i[o])}for(var s=0,l=n.length;s<l;s++){var u=n[s];1===u.nodeType&&(t.has(u)?t.delete(u):r.push(u))}})),r.forEach(n),t.forEach(a)}else e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,n),Array.prototype.forEach.call(e.removedNodes,a)}))}));s.observe(e.el,{childList:!0}),i.set(e,{observer:s,removedNode:a})}var s=e.subscribe({start:function(){e.values().forEach(a)},next:function(e){e.forEach((function(e){"add"===e.type?a(e.value):"remove"===e.type&&function(e){var t=i.get(e);if(!t)throw new Error("Should not happen: Unseen ElementContext removed");t.observer.takeRecords().forEach((function(e){Array.prototype.forEach.call(e.removedNodes,t.removedNode)})),t.observer.disconnect(),Array.prototype.forEach.call(e.el.children,t.removedNode),i.delete(e)}(e.value)}))}});return{unsubscribe:function(){s.unsubscribe(),i.forEach((function(e){e.observer.disconnect()}))},pullChanges:function(){s.pullChanges()}}}})};var i=r(e("live-set"));t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],372:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return new i.default({scheduler:e.getScheduler(),read:function(){throw new Error},listen:function(r,i){r(new Set);var o=new Map;function a(e){var r=new MutationObserver((function(t){0!==t.length&&(n(e.el)?a.passed||(a.passed=!0,i.add(e)):a.passed&&(a.passed=!1,i.remove(e)))})),a={mo:r,passed:!1};n(e.el)&&(a.passed=!0,i.add(e)),r.observe(e.el,{attributes:!0,attributeFilter:t}),o.set(e,a)}var s=e.subscribe({start:function(){e.values().forEach(a)},next:function(e){e.forEach((function(e){"add"===e.type?a(e.value):"remove"===e.type&&function(e){var t=o.get(e);if(!t)throw new Error("Should not happen: Unseen ElementContext removed");t.mo.disconnect(),t.passed&&i.remove(e),o.delete(e)}(e.value)}))}});return{unsubscribe:function(){s.unsubscribe(),o.forEach((function(e){e.mo.disconnect()}))},pullChanges:function(){s.pullChanges()}}}})};var i=r(e("live-set"));t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],373:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("live-set")),l=r(e("live-set/merge")),u=r(e("live-set/flatMapR")),c=r(e("live-set/Scheduler")),d=e("tag-tree"),f=r(e("./watcherFinderMerger")),p=r(e("./createTransformer"));function h(e){var t=new Map,n=[];return Object.keys(e.tags).forEach((function(r){var i=e.tags[r],o=i.ownedBy;n.push({tag:r,ownedBy:o}),t.set(r,i)})),Object.keys(e.finders).concat(e.watchers.map((function(e){return e.tag}))).forEach((function(e){t.has(e)||(t.set(e,{ownedBy:[]}),n.push({tag:e}))})),{map:t,list:n}}var m=function(){function e(t,n){var r,o=this;if((0,i.default)(this,e),(0,a.default)(this,"tree",void 0),(0,a.default)(this,"_scheduler",new c.default),(0,a.default)(this,"_treeController",void 0),(0,a.default)(this,"_rootMatchedSet",void 0),(0,a.default)(this,"_ecSources",void 0),(0,a.default)(this,"_logError",void 0),(0,a.default)(this,"_options",void 0),(0,a.default)(this,"_tagOptions",void 0),(0,a.default)(this,"_tagsList",void 0),(0,a.default)(this,"_subscriptions",[]),t.nodeType===Node.DOCUMENT_NODE){if(!(r=t.documentElement))throw new Error("missing documentElement")}else r=t;this._options=n,this._logError=n.logError||function(e){setTimeout((function(){throw e}),0)};var l=h(this._options),u=l.map,f=l.list;this._tagOptions=u,this._tagsList=f,this.tree=new d.TagTree({root:r,tags:f,executor:function(e){o._treeController=e}}),this._rootMatchedSet=s.default.constant(new Set([{el:this.tree.getValue(),parents:[{tag:null,node:this.tree}]}]),{scheduler:this._scheduler}),this._setupWatchersAndFinders()}return(0,o.default)(e,[{key:"_setupWatchersAndFinders",value:function(){var e=this,t=new Set;this._options.watchers.forEach((function(e){t.add(e.tag)})),this._ecSources=new Map(this._tagsList.map((function(n){var r=n.tag,i=e._tagOptions.get(r);if(!i)throw new Error;var o=new Set(i.ownedBy||[]),a=s.default.active(null,{scheduler:e._scheduler}),l=a.liveSet,c=a.controller,d=t.has(r)?(0,u.default)(l,(function(e){return e})):null,p=e._options.finders[r],h=p?(0,f.default)(e._scheduler,e.tree,r,i,d,p,e._logError):d||s.default.constant(new Set,{scheduler:e._scheduler}),m=new Map;var _=new s.default({scheduler:e._scheduler,read:function(){throw new Error},listen:function(t,n){var i=new Map,a=function(t){var n=t.el,i=function(e){for(var t,n=e.length-1;n>=0;n--)if(null==e[n].tag||o.has(e[n].tag)){t=e[n].node;break}if(!t)throw new Error;return t}(t.parents),a=e._treeController.addTaggedValue(i,r,n);return m.has(n)&&e._logError(new Error("PageParserTree(".concat(r,") watcher received element twice")),n),m.set(n,a),{el:n,parents:t.parents.concat([{tag:r,node:a}])}};return h.subscribe({start:function(){var e=new Set;h.values().forEach((function(t){var n=a(t);i.set(t,n),e.add(n)})),t(e)},next:function(t){var o=new Set;t.length>1&&t.forEach((function(e){"remove"===e.type&&o.add(e.value)})),t.forEach((function(t){if("add"===t.type){if(o.has(t.value))return;var s=a(t.value);i.set(t.value,s),n.add(s)}else if("remove"===t.type){var l=i.get(t.value);if(!l)return;i.delete(t.value),n.remove(l);var u=m.get(l.el);if(!u)throw new Error("Should not happen: received removal of unseen element");m.delete(l.el);var c=u.getParent();c&&c.ownsNode(u)&&e._treeController.removeTaggedNode(c,r,u)}}))},error:function(e){n.error(e)},complete:function(){n.end()}})}});return e._subscriptions.push(_.subscribe({})),[r,{liveSet:l,controller:c,ecSet:_}]}))),this._options.watchers.forEach((function(t){var n=t.sources,r=t.selectors,i=t.tag,o=n.map((function(t){if(!t)return e._rootMatchedSet;var n=e._ecSources.get(t);if(!n)throw new Error("Unknown source: "+t);return n.ecSet})),a=1===o.length?o[0]:(0,l.default)(o),s=(0,p.default)(e._scheduler,r),u=e._ecSources.get(i);if(!u)throw new Error;u.controller.add(s(a))})),this._scheduler.flush()}},{key:"_dumpWithoutEnd",value:function(){var e=this;this._subscriptions.forEach((function(e){e.unsubscribe()})),this._subscriptions.length=0,this.tree.getOwned().forEach((function(t,n){t.values().forEach((function(t){e._treeController.removeTaggedNode(e.tree,n,t)}))}))}},{key:"dump",value:function(){this._dumpWithoutEnd(),this._treeController.end()}},{key:"replaceOptions",value:function(e){var t="replaceOptions does not support tag changes",n=h(e).map;if(this._tagOptions.size!==n.size)throw new Error(t);this._tagOptions.forEach((function(e,r){var i=n.get(r);if(!i)throw new Error(t);var o=e.ownedBy||[],a=new Set(i.ownedBy||[]);if(o.length!==a.size)throw new Error(t);o.forEach((function(e){if(!a.has(e))throw new Error(t)}))})),this._dumpWithoutEnd(),this._options=e,this._setupWatchersAndFinders()}}]),e}();n.default=m,t.exports=n.default,t.exports.default=n.default},{"./createTransformer":370,"./watcherFinderMerger":374,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163,"live-set/Scheduler":160,"live-set/flatMapR":162,"live-set/merge":164,"tag-tree":451}],374:[function(e,t,n){(function(r){(function(){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,i,l,u,c){return new a.default({scheduler:e,read:function(){throw new Error("Should not happen")},listen:function(a,d){var f=new Set,p=new Set,h=new Set,m=new Set,_=null;l?_=l.subscribe({start:function(){if(!l)throw new Error;var e=l.values();a(e),e.forEach((function(e){h.add(e.el),f.add(e.el),p.add(e)}))},next:function(e){e.forEach((function(e){if("add"===e.type){var t=e.value.el;h.add(t),f.has(t)?c(new Error("PageParserTree(".concat(n,") watcher found element already found by finder")),t):(f.add(t),p.add(e.value),d.add(e.value))}else if("remove"===e.type){var r=e.value.el;h.delete(r),m.delete(r),p.has(e.value)&&(f.delete(r),p.delete(e.value),d.remove(e.value))}}))},error:function(e){d.error(e)},complete:function(){d.end()}}):a(new Set);var b=null;if(u){var g=u.fn,v=u.interval,y=i.ownedBy||[];b=function(e,t,n){var i=Date.now(),a=null,s=null,l=function(){s=null,n(),u()},u=function(){var n;if(null==e)n=5e3+1e3*Math.random();else if("number"==typeof e)n=e;else{if("function"!=typeof e)throw new Error("interval has wrong type: ".concat((0,o.default)(e)));n=e(t.size,Date.now()-i)}n!==1/0&&(a=setTimeout((function(){a=null,r.requestIdleCallback&&r.cancelIdleCallback?s=r.requestIdleCallback(l,{timeout:n}):l()}),n))};return u(),{dispose:function(){null!=a&&clearTimeout(a),null!=s&&r.cancelIdleCallback(s)}}}(v,f,(function(){for(var r=new Set,i=g(t.getValue()),o=0,a=i.length;o<a;o++){var u=i[o];if(r.add(u),!f.has(u)){f.add(u);var b=s(u,t,y);p.add(b),d.add(b),l&&(c(new Error("PageParserTree(".concat(n,") finder found element missed by watcher")),u),_&&_.pullChanges())}}p.forEach((function(e){var t=e.el;r.has(t)||(h.has(t)?m.has(t)||(m.add(t),c(new Error("PageParserTree(".concat(n,") watcher found element missed by finder")),t)):(p.delete(e),f.delete(t),d.remove(e),_&&_.pullChanges()))})),e.flush()}))}return{unsubscribe:function(){null!=b&&b.dispose(),_&&_.unsubscribe()},pullChanges:function(){_&&_.pullChanges()}}}})};var o=i(e("@babel/runtime/helpers/typeof")),a=i(e("live-set"));function s(e,t,n){var r=null;return{el:e,get parents(){if(!r){for(var i=t.getValue(),o=[],a=e.parentElement;a;){for(var s=t.getNodesForValue(a),l=0,u=s.length;l<u;l++){var c=s[l],d=c.getTag();if(null==d||n.indexOf(d)>=0){o.push({tag:d,node:c});break}}if(a===i)break;a=a.parentElement}o.reverse(),r=o}return r}}}t.exports=n.default,t.exports.default=n.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/typeof":27,"live-set":163}],375:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},{}],376:[function(e,t,n){(function(e){(function(){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,i=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:398}],377:[function(e,t,n){"use strict";n.__esModule=!0;var r=b(e("./processor")),i=b(e("./selectors/attribute")),o=b(e("./selectors/className")),a=b(e("./selectors/combinator")),s=b(e("./selectors/comment")),l=b(e("./selectors/id")),u=b(e("./selectors/nesting")),c=b(e("./selectors/pseudo")),d=b(e("./selectors/root")),f=b(e("./selectors/selector")),p=b(e("./selectors/string")),h=b(e("./selectors/tag")),m=b(e("./selectors/universal")),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./selectors/types"));function b(e){return e&&e.__esModule?e:{default:e}}var g=function(e){return new r.default(e)};g.attribute=function(e){return new i.default(e)},g.className=function(e){return new o.default(e)},g.combinator=function(e){return new a.default(e)},g.comment=function(e){return new s.default(e)},g.id=function(e){return new l.default(e)},g.nesting=function(e){return new u.default(e)},g.pseudo=function(e){return new c.default(e)},g.root=function(e){return new d.default(e)},g.selector=function(e){return new f.default(e)},g.string=function(e){return new p.default(e)},g.tag=function(e){return new h.default(e)},g.universal=function(e){return new m.default(e)},Object.keys(_).forEach((function(e){"__esModule"!==e&&(g[e]=_[e])})),n.default=g,t.exports=n.default},{"./processor":379,"./selectors/attribute":380,"./selectors/className":381,"./selectors/combinator":382,"./selectors/comment":383,"./selectors/id":385,"./selectors/nesting":387,"./selectors/pseudo":389,"./selectors/root":390,"./selectors/selector":391,"./selectors/string":392,"./selectors/tag":393,"./selectors/types":394,"./selectors/universal":395}],378:[function(e,t,n){"use strict";n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=E(e("flatten")),o=E(e("indexes-of")),a=E(e("uniq")),s=E(e("./selectors/root")),l=E(e("./selectors/selector")),u=E(e("./selectors/className")),c=E(e("./selectors/comment")),d=E(e("./selectors/id")),f=E(e("./selectors/tag")),p=E(e("./selectors/string")),h=E(e("./selectors/pseudo")),m=E(e("./selectors/attribute")),_=E(e("./selectors/universal")),b=E(e("./selectors/combinator")),g=E(e("./selectors/nesting")),v=E(e("./sortAscending")),y=E(e("./tokenize")),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./selectors/types"));function E(e){return e&&e.__esModule?e:{default:e}}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=t,this.lossy=!1===t.options.lossless,this.position=0,this.root=new s.default;var n=new l.default;return this.root.append(n),this.current=n,this.lossy?this.tokens=(0,y.default)({safe:t.safe,css:t.css.trim()}):this.tokens=(0,y.default)(t),this.loop()}return e.prototype.attribute=function(){var e="",t=void 0,n=this.currToken;for(this.position++;this.position<this.tokens.length&&"]"!==this.currToken[0];)e+=this.tokens[this.position][1],this.position++;this.position!==this.tokens.length||~e.indexOf("]")||this.error("Expected a closing square bracket.");var r=e.split(/((?:[*~^$|]?=))([^]*)/),i=r[0].split(/(\|)/g),o={operator:r[1],value:r[2],source:{start:{line:n[2],column:n[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:n[4]};if(i.length>1?(""===i[0]&&(i[0]=!0),o.attribute=this.parseValue(i[2]),o.namespace=this.parseNamespace(i[0])):o.attribute=this.parseValue(r[0]),t=new m.default(o),r[2]){var a=r[2].split(/(\s+i\s*?)$/),s=a[0].trim();t.value=this.lossy?s:a[0],a[1]&&(t.insensitive=!0,this.lossy||(t.raws.insensitive=a[1])),t.quoted="'"===s[0]||'"'===s[0],t.raws.unquoted=t.quoted?s.slice(1,-1):s}this.newNode(t),this.position++},e.prototype.combinator=function(){if("|"===this.currToken[1])return this.namespace();for(var e=new b.default({value:"",source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]});this.position<this.tokens.length&&this.currToken&&("space"===this.currToken[0]||"combinator"===this.currToken[0]);)this.nextToken&&"combinator"===this.nextToken[0]?(e.spaces.before=this.parseSpace(this.currToken[1]),e.source.start.line=this.nextToken[2],e.source.start.column=this.nextToken[3],e.source.end.column=this.nextToken[3],e.source.end.line=this.nextToken[2],e.sourceIndex=this.nextToken[4]):this.prevToken&&"combinator"===this.prevToken[0]?e.spaces.after=this.parseSpace(this.currToken[1]):"combinator"===this.currToken[0]?e.value=this.currToken[1]:"space"===this.currToken[0]&&(e.value=this.parseSpace(this.currToken[1]," ")),this.position++;return this.newNode(e)},e.prototype.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;var e=new l.default;this.current.parent.append(e),this.current=e,this.position++},e.prototype.comment=function(){var e=new c.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]});this.newNode(e),this.position++},e.prototype.error=function(e){throw new this.input.error(e)},e.prototype.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.")},e.prototype.missingParenthesis=function(){return this.error("Expected opening parenthesis.")},e.prototype.missingSquareBracket=function(){return this.error("Expected opening square bracket.")},e.prototype.namespace=function(){var e=this.prevToken&&this.prevToken[1]||!0;return"word"===this.nextToken[0]?(this.position++,this.word(e)):"*"===this.nextToken[0]?(this.position++,this.universal(e)):void 0},e.prototype.nesting=function(){this.newNode(new g.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]})),this.position++},e.prototype.parentheses=function(){var e=this.current.last;if(e&&e.type===w.PSEUDO){var t=new l.default,n=this.current;e.append(t),this.current=t;var r=1;for(this.position++;this.position<this.tokens.length&&r;)"("===this.currToken[0]&&r++,")"===this.currToken[0]&&r--,r?this.parse():(t.parent.source.end.line=this.currToken[2],t.parent.source.end.column=this.currToken[3],this.position++);r&&this.error("Expected closing parenthesis."),this.current=n}else{var i=1;for(this.position++,e.value+="(";this.position<this.tokens.length&&i;)"("===this.currToken[0]&&i++,")"===this.currToken[0]&&i--,e.value+=this.parseParenthesisToken(this.currToken),this.position++;i&&this.error("Expected closing parenthesis.")}},e.prototype.pseudo=function(){for(var e=this,t="",n=this.currToken;this.currToken&&":"===this.currToken[0];)t+=this.currToken[1],this.position++;if(!this.currToken)return this.error("Expected pseudo-class or pseudo-element");if("word"===this.currToken[0]){var r=void 0;this.splitWord(!1,(function(i,o){t+=i,r=new h.default({value:t,source:{start:{line:n[2],column:n[3]},end:{line:e.currToken[4],column:e.currToken[5]}},sourceIndex:n[4]}),e.newNode(r),o>1&&e.nextToken&&"("===e.nextToken[0]&&e.error("Misplaced parenthesis.")}))}else this.error('Unexpected "'+this.currToken[0]+'" found.')},e.prototype.space=function(){var e=this.currToken;0===this.position||","===this.prevToken[0]||"("===this.prevToken[0]?(this.spaces=this.parseSpace(e[1]),this.position++):this.position===this.tokens.length-1||","===this.nextToken[0]||")"===this.nextToken[0]?(this.current.last.spaces.after=this.parseSpace(e[1]),this.position++):this.combinator()},e.prototype.string=function(){var e=this.currToken;this.newNode(new p.default({value:this.currToken[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++},e.prototype.universal=function(e){var t=this.nextToken;if(t&&"|"===t[1])return this.position++,this.namespace();this.newNode(new _.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]}),e),this.position++},e.prototype.splitWord=function(e,t){for(var n=this,r=this.nextToken,s=this.currToken[1];r&&"word"===r[0];){this.position++;var l=this.currToken[1];if(s+=l,l.lastIndexOf("\\")===l.length-1){var c=this.nextToken;c&&"space"===c[0]&&(s+=this.parseSpace(c[1]," "),this.position++)}r=this.nextToken}var p=(0,o.default)(s,"."),h=(0,o.default)(s,"#"),m=(0,o.default)(s,"#{");m.length&&(h=h.filter((function(e){return!~m.indexOf(e)})));var _=(0,v.default)((0,a.default)((0,i.default)([[0],p,h])));_.forEach((function(r,i){var o=_[i+1]||s.length,a=s.slice(r,o);if(0===i&&t)return t.call(n,a,_.length);var l=void 0;l=~p.indexOf(r)?new u.default({value:a.slice(1),source:{start:{line:n.currToken[2],column:n.currToken[3]+r},end:{line:n.currToken[4],column:n.currToken[3]+(o-1)}},sourceIndex:n.currToken[6]+_[i]}):~h.indexOf(r)?new d.default({value:a.slice(1),source:{start:{line:n.currToken[2],column:n.currToken[3]+r},end:{line:n.currToken[4],column:n.currToken[3]+(o-1)}},sourceIndex:n.currToken[6]+_[i]}):new f.default({value:a,source:{start:{line:n.currToken[2],column:n.currToken[3]+r},end:{line:n.currToken[4],column:n.currToken[3]+(o-1)}},sourceIndex:n.currToken[6]+_[i]}),n.newNode(l,e)})),this.position++},e.prototype.word=function(e){var t=this.nextToken;return t&&"|"===t[1]?(this.position++,this.namespace()):this.splitWord(e)},e.prototype.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.root},e.prototype.parse=function(e){switch(this.currToken[0]){case"space":this.space();break;case"comment":this.comment();break;case"(":this.parentheses();break;case")":e&&this.missingParenthesis();break;case"[":this.attribute();break;case"]":this.missingSquareBracket();break;case"at-word":case"word":this.word();break;case":":this.pseudo();break;case";":this.missingBackslash();break;case",":this.comma();break;case"*":this.universal();break;case"&":this.nesting();break;case"combinator":this.combinator();break;case"string":this.string()}},e.prototype.parseNamespace=function(e){if(this.lossy&&"string"==typeof e){var t=e.trim();return!t.length||t}return e},e.prototype.parseSpace=function(e,t){return this.lossy?t||"":e},e.prototype.parseValue=function(e){return this.lossy&&e&&"string"==typeof e?e.trim():e},e.prototype.parseParenthesisToken=function(e){return this.lossy?"space"===e[0]?this.parseSpace(e[1]," "):this.parseValue(e[1]):e[1]},e.prototype.newNode=function(e,t){return t&&(e.namespace=this.parseNamespace(t)),this.spaces&&(e.spaces.before=this.spaces,this.spaces=""),this.current.append(e)},r(e,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),e}();n.default=k,t.exports=n.default},{"./selectors/attribute":380,"./selectors/className":381,"./selectors/combinator":382,"./selectors/comment":383,"./selectors/id":385,"./selectors/nesting":387,"./selectors/pseudo":389,"./selectors/root":390,"./selectors/selector":391,"./selectors/string":392,"./selectors/tag":393,"./selectors/types":394,"./selectors/universal":395,"./sortAscending":396,"./tokenize":397,flatten:142,"indexes-of":151,uniq:455}],379:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./parser"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.func=t||function(){},this}return e.prototype.process=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new a.default({css:e,error:function(e){throw new Error(e)},options:t});return this.res=n,this.func(n),this},i(e,[{key:"result",get:function(){return String(this.res)}}]),e}();n.default=s,t.exports=n.default},{"./parser":378}],380:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./namespace"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.ATTRIBUTE,r.raws={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toString=function(){var e=[this.spaces.before,"[",this.ns,this.attribute];return this.operator&&e.push(this.operator),this.value&&e.push(this.value),this.raws.insensitive?e.push(this.raws.insensitive):this.insensitive&&e.push(" i"),e.push("]"),e.concat(this.spaces.after).join("")},t}(o.default);n.default=s,t.exports=n.default},{"./namespace":386,"./types":394}],381:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./namespace"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.CLASS,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String("."+this.value),this.spaces.after].join("")},t}(o.default);n.default=s,t.exports=n.default},{"./namespace":386,"./types":394}],382:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./node"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.COMBINATOR,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./node":388,"./types":394}],383:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./node"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.COMMENT,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./node":388,"./types":394}],384:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./node"),a=(r=o)&&r.__esModule?r:{default:r},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./types"));var l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.nodes||(r.nodes=[]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.append=function(e){return e.parent=this,this.nodes.push(e),this},t.prototype.prepend=function(e){return e.parent=this,this.nodes.unshift(e),this},t.prototype.at=function(e){return this.nodes[e]},t.prototype.index=function(e){return"number"==typeof e?e:this.nodes.indexOf(e)},t.prototype.removeChild=function(e){e=this.index(e),this.at(e).parent=void 0,this.nodes.splice(e,1);var t=void 0;for(var n in this.indexes)(t=this.indexes[n])>=e&&(this.indexes[n]=t-1);return this},t.prototype.removeAll=function(){var e=this.nodes,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}r.parent=void 0}return this.nodes=[],this},t.prototype.empty=function(){return this.removeAll()},t.prototype.insertAfter=function(e,t){var n=this.index(e);this.nodes.splice(n+1,0,t);var r=void 0;for(var i in this.indexes)n<=(r=this.indexes[i])&&(this.indexes[i]=r+this.nodes.length);return this},t.prototype.insertBefore=function(e,t){var n=this.index(e);this.nodes.splice(n,0,t);var r=void 0;for(var i in this.indexes)n<=(r=this.indexes[i])&&(this.indexes[i]=r+this.nodes.length);return this},t.prototype.each=function(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var t=this.lastEach;if(this.indexes[t]=0,this.length){for(var n=void 0,r=void 0;this.indexes[t]<this.length&&(n=this.indexes[t],!1!==(r=e(this.at(n),n)));)this.indexes[t]+=1;return delete this.indexes[t],!1!==r&&void 0}},t.prototype.walk=function(e){return this.each((function(t,n){var r=e(t,n);if(!1!==r&&t.length&&(r=t.walk(e)),!1===r)return!1}))},t.prototype.walkAttributes=function(e){var t=this;return this.walk((function(n){if(n.type===s.ATTRIBUTE)return e.call(t,n)}))},t.prototype.walkClasses=function(e){var t=this;return this.walk((function(n){if(n.type===s.CLASS)return e.call(t,n)}))},t.prototype.walkCombinators=function(e){var t=this;return this.walk((function(n){if(n.type===s.COMBINATOR)return e.call(t,n)}))},t.prototype.walkComments=function(e){var t=this;return this.walk((function(n){if(n.type===s.COMMENT)return e.call(t,n)}))},t.prototype.walkIds=function(e){var t=this;return this.walk((function(n){if(n.type===s.ID)return e.call(t,n)}))},t.prototype.walkNesting=function(e){var t=this;return this.walk((function(n){if(n.type===s.NESTING)return e.call(t,n)}))},t.prototype.walkPseudos=function(e){var t=this;return this.walk((function(n){if(n.type===s.PSEUDO)return e.call(t,n)}))},t.prototype.walkTags=function(e){var t=this;return this.walk((function(n){if(n.type===s.TAG)return e.call(t,n)}))},t.prototype.walkUniversals=function(e){var t=this;return this.walk((function(n){if(n.type===s.UNIVERSAL)return e.call(t,n)}))},t.prototype.split=function(e){var t=this,n=[];return this.reduce((function(r,i,o){var a=e.call(t,i);return n.push(i),a?(r.push(n),n=[]):o===t.length-1&&r.push(n),r}),[])},t.prototype.map=function(e){return this.nodes.map(e)},t.prototype.reduce=function(e,t){return this.nodes.reduce(e,t)},t.prototype.every=function(e){return this.nodes.every(e)},t.prototype.some=function(e){return this.nodes.some(e)},t.prototype.filter=function(e){return this.nodes.filter(e)},t.prototype.sort=function(e){return this.nodes.sort(e)},t.prototype.toString=function(){return this.map(String).join("")},i(t,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),t}(a.default);n.default=l,t.exports=n.default},{"./node":388,"./types":394}],385:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./namespace"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.ID,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String("#"+this.value),this.spaces.after].join("")},t}(o.default);n.default=s,t.exports=n.default},{"./namespace":386,"./types":394}],386:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./node");var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String(this.value),this.spaces.after].join("")},i(t,[{key:"ns",get:function(){var e=this.namespace;return e?("string"==typeof e?e:"")+"|":""}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);n.default=a,t.exports=n.default},{"./node":388}],387:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./node"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.NESTING,r.value="&",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./node":388,"./types":394}],388:[function(e,t,n){"use strict";n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function e(t,n){if("object"!==(void 0===t?"undefined":r(t)))return t;var i=new t.constructor;for(var o in t)if(t.hasOwnProperty(o)){var a=t[o],s=void 0===a?"undefined":r(a);"parent"===o&&"object"===s?n&&(i[o]=n):i[o]=a instanceof Array?a.map((function(t){return e(t,i)})):e(a,i)}return i},o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t)this[n]=t[n];var r=t.spaces,i=(r=void 0===r?{}:r).before,o=void 0===i?"":i,a=r.after,s=void 0===a?"":a;this.spaces={before:o,after:s}}return e.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.prototype.replaceWith=function(){if(this.parent){for(var e in arguments)this.parent.insertBefore(this,arguments[e]);this.remove()}return this},e.prototype.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prototype.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i(this);for(var n in e)t[n]=e[n];return t},e.prototype.toString=function(){return[this.spaces.before,String(this.value),this.spaces.after].join("")},e}();n.default=o,t.exports=n.default},{}],389:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./container"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.PSEUDO,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toString=function(){var e=this.length?"("+this.map(String).join(",")+")":"";return[this.spaces.before,String(this.value),e,this.spaces.after].join("")},t}(o.default);n.default=s,t.exports=n.default},{"./container":384,"./types":394}],390:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./container"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.ROOT,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toString=function(){var e=this.reduce((function(e,t){var n=String(t);return n?e+n+",":""}),"").slice(0,-1);return this.trailingComma?e+",":e},t}(o.default);n.default=s,t.exports=n.default},{"./container":384,"./types":394}],391:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./container"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.SELECTOR,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./container":384,"./types":394}],392:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./node"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.STRING,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./node":388,"./types":394}],393:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./namespace"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.TAG,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./namespace":386,"./types":394}],394:[function(e,t,n){"use strict";n.__esModule=!0;n.TAG="tag",n.STRING="string",n.SELECTOR="selector",n.ROOT="root",n.PSEUDO="pseudo",n.NESTING="nesting",n.ID="id",n.COMMENT="comment",n.COMBINATOR="combinator",n.CLASS="class",n.ATTRIBUTE="attribute",n.UNIVERSAL="universal"},{}],395:[function(e,t,n){"use strict";n.__esModule=!0;var r,i=e("./namespace"),o=(r=i)&&r.__esModule?r:{default:r},a=e("./types");var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.type=a.UNIVERSAL,r.value="*",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=s,t.exports=n.default},{"./namespace":386,"./types":394}],396:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){return e.sort((function(e,t){return e-t}))},t.exports=n.default},{}],397:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t=[],n=e.css.valueOf(),A=void 0,D=void 0,T=void 0,M=void 0,O=void 0,P=void 0,R=void 0,L=void 0,j=void 0,N=void 0,V=void 0,B=n.length,q=-1,U=1,F=0,H=function(t,r){if(!e.safe)throw e.error("Unclosed "+t,U,F-q,F);D=(n+=r).length-1};for(;F<B;){switch((A=n.charCodeAt(F))===s&&(q=F,U+=1),A){case s:case l:case c:case d:case u:D=F;do{D+=1,(A=n.charCodeAt(D))===s&&(q=D,U+=1)}while(A===l||A===s||A===c||A===d||A===u);t.push(["space",n.slice(F,D),U,F-q,F]),F=D-1;break;case f:case p:case h:case m:D=F;do{D+=1,A=n.charCodeAt(D)}while(A===f||A===p||A===h||A===m);t.push(["combinator",n.slice(F,D),U,F-q,F]),F=D-1;break;case E:t.push(["*","*",U,F-q,F]);break;case x:t.push(["&","&",U,F-q,F]);break;case _:t.push([",",",",U,F-q,F]);break;case v:t.push(["[","[",U,F-q,F]);break;case y:t.push(["]","]",U,F-q,F]);break;case k:t.push([":",":",U,F-q,F]);break;case w:t.push([";",";",U,F-q,F]);break;case b:t.push(["(","(",U,F-q,F]);break;case g:t.push([")",")",U,F-q,F]);break;case r:case i:T=A===r?"'":'"',D=F;do{for(N=!1,-1===(D=n.indexOf(T,D+1))&&H("quote",T),V=D;n.charCodeAt(V-1)===o;)V-=1,N=!N}while(N);t.push(["string",n.slice(F,D+1),U,F-q,U,D-q,F]),F=D;break;case S:C.lastIndex=F+1,C.test(n),D=0===C.lastIndex?n.length-1:C.lastIndex-2,t.push(["at-word",n.slice(F,D+1),U,F-q,U,D-q,F]),F=D;break;case o:for(D=F,R=!0;n.charCodeAt(D+1)===o;)D+=1,R=!R;A=n.charCodeAt(D+1),R&&A!==a&&A!==l&&A!==s&&A!==c&&A!==d&&A!==u&&(D+=1),t.push(["word",n.slice(F,D+1),U,F-q,U,D-q,F]),F=D;break;default:A===a&&n.charCodeAt(F+1)===E?(0===(D=n.indexOf("*/",F+2)+1)&&H("comment","*/"),(O=(M=(P=n.slice(F,D+1)).split("\n")).length-1)>0?(L=U+O,j=D-M[O].length):(L=U,j=q),t.push(["comment",P,U,F-q,L,D-j,F]),q=j,U=L,F=D):(I.lastIndex=F+1,I.test(n),D=0===I.lastIndex?n.length-1:I.lastIndex-2,t.push(["word",n.slice(F,D+1),U,F-q,U,D-q,F]),F=D)}F++}return t};var r=39,i=34,o=92,a=47,s=10,l=32,u=12,c=9,d=13,f=43,p=62,h=126,m=124,_=44,b=40,g=41,v=91,y=93,w=59,E=42,k=58,x=38,S=64,C=/[ \n\t\r\{\(\)'"\\;/]/g,I=/[ \n\t\r\(\)\*:;@!&'"\+\|~>,\[\]\\]|\/(?=\*)/g;t.exports=n.default},{}],398:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],d=!1,f=-1;function p(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!d){var e=l(p);d=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function _(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||d||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],399:[function(e,t,n){"use strict";function r(e,t,n,r,i){}r.resetWarningCache=function(){0},t.exports=r},{"./lib/ReactPropTypesSecret":403}],400:[function(e,t,n){"use strict";var r=e("./lib/ReactPropTypesSecret");function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},{"./lib/ReactPropTypesSecret":403}],401:[function(e,t,n){"use strict";var r=e("react-is"),i=e("object-assign"),o=e("./lib/ReactPropTypesSecret"),a=e("./checkPropTypes"),s=Function.call.bind(Object.prototype.hasOwnProperty),l=function(){};function u(){return null}t.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c="@@iterator";var d="<<anonymous>>",f={array:_("array"),bool:_("boolean"),func:_("function"),number:_("number"),object:_("object"),string:_("string"),symbol:_("symbol"),any:m(u),arrayOf:function(e){return m((function(t,n,r,i,a){if("function"!=typeof e)return new h("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new h("Invalid "+i+" `"+a+"` of type `"+g(s)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<s.length;l++){var u=e(s,l,r,i,a+"["+l+"]",o);if(u instanceof Error)return u}return null}))},element:m((function(t,n,r,i,o){var a=t[n];return e(a)?null:new h("Invalid "+i+" `"+o+"` of type `"+g(a)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:m((function(e,t,n,i,o){var a=e[t];return r.isValidElementType(a)?null:new h("Invalid "+i+" `"+o+"` of type `"+g(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return m((function(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||d;return new h("Invalid "+i+" `"+o+"` of type `"+(((s=t[n]).constructor&&s.constructor.name?s.constructor.name:d)+"` supplied to `")+r+"`, expected instance of `"+a+"`.")}var s;return null}))},node:m((function(e,t,n,r,i){return b(e[t])?null:new h("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return m((function(t,n,r,i,a){if("function"!=typeof e)return new h("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],u=g(l);if("object"!==u)return new h("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var c in l)if(s(l,c)){var d=e(l,c,r,i,a+"."+c,o);if(d instanceof Error)return d}return null}))},oneOf:function(e){if(!Array.isArray(e))return u;return m((function(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(p(a,e[s]))return null;var l=JSON.stringify(e,(function(e,t){return"symbol"===v(t)?String(t):t}));return new h("Invalid "+i+" `"+o+"` of value `"+String(a)+"` supplied to `"+r+"`, expected one of "+l+".")}))},oneOfType:function(e){if(!Array.isArray(e))return u;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return l("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+y(n)+" at index "+t+"."),u}return m((function(t,n,r,i,a){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,n,r,i,a,o))return null;return new h("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return m((function(t,n,r,i,a){var s=t[n],l=g(s);if("object"!==l)return new h("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var c=e[u];if(c){var d=c(s,u,r,i,a+"."+u,o);if(d)return d}}return null}))},exact:function(e){return m((function(t,n,r,a,s){var l=t[n],u=g(l);if("object"!==u)return new h("Invalid "+a+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var c=i({},t[n],e);for(var d in c){var f=e[d];if(!f)return new h("Invalid "+a+" `"+s+"` key `"+d+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=f(l,d,r,a,s+"."+d,o);if(p)return p}return null}))}};function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){this.message=e,this.stack=""}function m(e){function n(n,r,i,a,s,l,u){if((a=a||d,l=l||i,u!==o)&&t){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}return null==r[i]?n?null===r[i]?new h("The "+s+" `"+l+"` is marked as required in `"+a+"`, but its value is `null`."):new h("The "+s+" `"+l+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:e(r,i,a,s,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function _(e){return m((function(t,n,r,i,o,a){var s=t[n];return g(s)!==e?new h("Invalid "+i+" `"+o+"` of type `"+v(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function b(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(b);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[c]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!b(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!b(a[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return h.prototype=Error.prototype,f.checkPropTypes=a,f.resetWarningCache=a.resetWarningCache,f.PropTypes=f,f}},{"./checkPropTypes":399,"./lib/ReactPropTypesSecret":403,"object-assign":365,"react-is":406}],402:[function(e,t,n){t.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":400,"./factoryWithTypeCheckers":401,"react-is":406}],403:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],404:[function(e,t,n){(function(e){(function(){
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";"production"!==e.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function y(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case t:var p=e.type;switch(p){case u:case c:case i:case a:case o:case f:return p;default:var _=p&&p.$$typeof;switch(_){case l:case d:case m:case h:case s:return _;default:return n}}case r:return n}}}var w=u,E=c,k=l,x=s,S=t,C=d,I=i,A=m,D=h,T=r,M=a,O=o,P=f,R=!1;function L(e){return y(e)===c}n.AsyncMode=w,n.ConcurrentMode=E,n.ContextConsumer=k,n.ContextProvider=x,n.Element=S,n.ForwardRef=C,n.Fragment=I,n.Lazy=A,n.Memo=D,n.Portal=T,n.Profiler=M,n.StrictMode=O,n.Suspense=P,n.isAsyncMode=function(e){return R||(R=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),L(e)||y(e)===u},n.isConcurrentMode=L,n.isContextConsumer=function(e){return y(e)===l},n.isContextProvider=function(e){return y(e)===s},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},n.isForwardRef=function(e){return y(e)===d},n.isFragment=function(e){return y(e)===i},n.isLazy=function(e){return y(e)===m},n.isMemo=function(e){return y(e)===h},n.isPortal=function(e){return y(e)===r},n.isProfiler=function(e){return y(e)===a},n.isStrictMode=function(e){return y(e)===o},n.isSuspense=function(e){return y(e)===f},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===c||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===s||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===g||e.$$typeof===v||e.$$typeof===_)},n.typeOf=y}()}).call(this)}).call(this,e("_process"))},{_process:398}],405:[function(e,t,n){
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,_=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case f:case a:case l:case s:case h:return e;default:switch(e=e&&e.$$typeof){case c:case p:case b:case _:case u:return e;default:return t}}case o:return t}}}function k(e){return E(e)===f}n.AsyncMode=d,n.ConcurrentMode=f,n.ContextConsumer=c,n.ContextProvider=u,n.Element=i,n.ForwardRef=p,n.Fragment=a,n.Lazy=b,n.Memo=_,n.Portal=o,n.Profiler=l,n.StrictMode=s,n.Suspense=h,n.isAsyncMode=function(e){return k(e)||E(e)===d},n.isConcurrentMode=k,n.isContextConsumer=function(e){return E(e)===c},n.isContextProvider=function(e){return E(e)===u},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},n.isForwardRef=function(e){return E(e)===p},n.isFragment=function(e){return E(e)===a},n.isLazy=function(e){return E(e)===b},n.isMemo=function(e){return E(e)===_},n.isPortal=function(e){return E(e)===o},n.isProfiler=function(e){return E(e)===l},n.isStrictMode=function(e){return E(e)===s},n.isSuspense=function(e){return E(e)===h},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===l||e===s||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===_||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p||e.$$typeof===v||e.$$typeof===y||e.$$typeof===w||e.$$typeof===g)},n.typeOf=E},{}],406:[function(e,t,n){(function(n){(function(){"use strict";"production"===n.env.NODE_ENV?t.exports=e("./cjs/react-is.production.min.js"):t.exports=e("./cjs/react-is.development.js")}).call(this)}).call(this,e("_process"))},{"./cjs/react-is.development.js":404,"./cjs/react-is.production.min.js":405,_process:398}],407:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var d,f,p,h,m=e[c].replace(s,"%20"),_=m.indexOf(n);_>=0?(d=m.substr(0,_),f=m.substr(_+1)):(d=m,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],408:[function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],409:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":407,"./encode":408}],410:[function(e,t,n){(function(n){(function(){for(var r=e("performance-now"),i="undefined"==typeof window?n:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],u=0;!s&&u<o.length;u++)s=i[o[u]+"Request"+a],l=i[o[u]+"Cancel"+a]||i[o[u]+"CancelRequest"+a];if(!s||!l){var c=0,d=0,f=[];s=function(e){if(0===f.length){var t=r(),n=Math.max(0,16.666666666666668-(t-c));c=n+t,setTimeout((function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return f.push({handle:++d,callback:e,cancelled:!1}),d},l=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}t.exports=function(e){return s.call(i,e)},t.exports.cancel=function(){l.apply(i,arguments)},t.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":411}],411:[function(e,t,n){(function(e){(function(){(function(){var n,r,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-a)/1e6},r=e.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*e.uptime(),a=o-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:398}],412:[function(e,t,n){
/** @license React v17.0.2
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict"},{"object-assign":365,react:436,scheduler:442,"scheduler/tracing":443}],413:[function(e,t,n){
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";var r=e("react"),i=e("object-assign"),o=e("scheduler");function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},m={};function _(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new _(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new _(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new _(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){b[e]=new _(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){b[e]=new _(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){b[e]=new _(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){b[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=b.hasOwnProperty(t)?b[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(m,e)||!p.call(h,e)&&(f.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,v);b[t]=new _(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,v);b[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,v);b[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){b[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)})),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){b[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,k=60106,x=60107,S=60108,C=60114,I=60109,A=60110,D=60112,T=60113,M=60120,O=60115,P=60116,R=60121,L=60128,j=60129,N=60130,V=60131;if("function"==typeof Symbol&&Symbol.for){var B=Symbol.for;E=B("react.element"),k=B("react.portal"),x=B("react.fragment"),S=B("react.strict_mode"),C=B("react.profiler"),I=B("react.provider"),A=B("react.context"),D=B("react.forward_ref"),T=B("react.suspense"),M=B("react.suspense_list"),O=B("react.memo"),P=B("react.lazy"),R=B("react.block"),B("react.scope"),L=B("react.opaque.id"),j=B("react.debug_trace_mode"),N=B("react.offscreen"),V=B("react.legacy_hidden")}var q,U="function"==typeof Symbol&&Symbol.iterator;function F(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=U&&e[U]||e["@@iterator"])?e:null}function H(e){if(void 0===q)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var z=!1;function W(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function $(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case k:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return G(e.type);case R:return G(e._render);case P:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ue(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var he,me,_e=(me=function(e,t){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=t;else{for((he=he||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=he.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function ye(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ye(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ge).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Ae=null;function De(e){if(e=ni(e)){if("function"!=typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=ii(t),Ce(e.stateNode,e.type,t))}}function Te(e){Ie?Ae?Ae.push(e):Ae=[e]:Ie=e}function Me(){if(Ie){var e=Ie,t=Ae;if(Ae=Ie=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Oe(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Le=Oe,je=!1,Ne=!1;function Ve(){null===Ie&&null===Ae||(Re(),Me())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var qe=!1;if(d)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(me){qe=!1}function Fe(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var He=!1,ze=null,We=!1,$e=null,Ge={onError:function(e){He=!0,ze=e}};function Ke(e,t,n,r,i,o,a,s,l){He=!1,ze=null,Fe.apply(Ge,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Je(e)!==e)throw Error(a(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qe(i),e;if(o===r)return Qe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Xe(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,ot=[],at=null,st=null,lt=null,ut=new Map,ct=new Map,dt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ht(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function _t(e){var t=ti(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function gt(e,t,n){bt(e)&&n.delete(t)}function vt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&bt(at)&&(at=null),null!==st&&bt(st)&&(st=null),null!==lt&&bt(lt)&&(lt=null),ut.forEach(gt),ct.forEach(gt)}function yt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,vt)))}function wt(e){function t(t){return yt(t,e)}if(0<ot.length){yt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&yt(at,e),null!==st&&yt(st,e),null!==lt&&yt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)_t(n),null===n.blockedOn&&dt.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kt={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},xt={},St={};function Ct(e){if(xt[e])return xt[e];if(!kt[e])return e;var t,n=kt[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return xt[e]=n[t];return e}d&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete kt.animationend.animation,delete kt.animationiteration.animation,delete kt.animationstart.animation),"TransitionEvent"in window||delete kt.transitionend.transition);var It=Ct("animationend"),At=Ct("animationiteration"),Dt=Ct("animationstart"),Tt=Ct("transitionend"),Mt=new Map,Ot=new Map,Pt=["abort","abort",It,"animationEnd",At,"animationIteration",Dt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Tt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Mt.set(r,i),u(i,[r])}}(0,o.unstable_now)();var Lt=8;function jt(e){if(0!=(1&e))return Lt=15,1;if(0!=(2&e))return Lt=14,2;if(0!=(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!=(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!=(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!=(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!=(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!=(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Nt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Lt=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=jt(l),i=Lt):0!==(s&=o)&&(r=jt(s),i=Lt)}else 0!==(o=n&~a)?(r=jt(o),i=Lt):0!==s&&(r=jt(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(jt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Bt(10,t):e;case 10:return 0===(e=qt(192&~t))?Bt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function qt(e){return e&-e}function Ut(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ft(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(zt(e)/Wt|0)|0},zt=Math.log,Wt=Math.LN2;var $t=o.unstable_UserBlockingPriority,Gt=o.unstable_runWithPriority,Kt=!0;function Jt(e,t,n,r){je||Re();var i=Qt,o=je;je=!0;try{Pe(i,e,t,n,r)}finally{(je=o)||Ve()}}function Yt(e,t,n,r){Gt($t,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var i;if(Kt)if((i=0==(4&t))&&0<ot.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var o=Zt(e,t,n,r);if(null===o)i&&ht(e,r);else{if(i){if(-1<ft.indexOf(e))return e=pt(o,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=mt(at,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ut.set(o,mt(ut.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ct.set(o,mt(ct.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;ht(e,r)}Rr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Se(r);if(null!==(i=ti(i))){var o=Je(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Ye(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var Xt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,un,cn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=sn(dn),pn=i({},dn,{view:0,detail:0}),hn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),_n=sn(mn),bn=sn(i({},mn,{dataTransfer:0})),gn=sn(i({},pn,{relatedTarget:0})),vn=sn(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=i({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),En=sn(i({},dn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Cn}var An=i({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=sn(An),Tn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),On=sn(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Ln=[9,13,27,32],jn=d&&"CompositionEvent"in window,Nn=null;d&&"documentMode"in document&&(Nn=document.documentMode);var Vn=d&&"TextEvent"in window&&!Nn,Bn=d&&(!jn||Nn&&8<Nn&&11>=Nn),qn=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=jr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Jn=null;function Yn(e){Ar(e,0)}function Qn(e){if(Q(ri(e)))return e}function Zn(e,t){if("change"===e)return t}var Xn=!1;if(d){var er;if(d){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;Xn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Kn&&(Kn.detachEvent("onpropertychange",ir),Jn=Kn=null)}function ir(e){if("value"===e.propertyName&&Qn(Jn)){var t=[];if(Gn(t,Jn,e,Se(e)),e=Yn,je)e(t);else{je=!0;try{Oe(e,t)}finally{je=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(rr(),Jn=n,(Kn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Jn)}function sr(e,t){if("click"===e)return Qn(t)}function lr(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cr=Object.prototype.hasOwnProperty;function dr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function _r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var br=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Z(r)||("selectionStart"in(r=gr)&&_r(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&dr(yr,r)||(yr=r,0<(r=jr(vr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Pt,2);for(var kr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xr=0;xr<kr.length;xr++)Ot.set(kr[xr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Ke.apply(this,arguments),He){if(!He)throw Error(a(198));var c=ze;He=!1,ze=null,We||(We=!0,$e=c)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Ir(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Ir(i,s,u),o=l}}}if(We)throw e=$e,We=!1,$e=null,e}function Dr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){e[Tr]||(e[Tr]=!0,s.forEach((function(t){Cr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=oi(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Pr(o,e,i,t),a.add(s))}function Pr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Yt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ti(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ne)return e(t,n);Ne=!0;try{Le(e,t,n)}finally{Ne=!1,Ve()}}((function(){var r=o,i=Se(n),a=[];e:{var s=Mt.get(e);if(void 0!==s){var l=fn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=Dn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=_n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case It:case At:case Dt:l=vn;break;case Tt:l=On;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!=(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Be(h,f))&&c.push(Lr(h,m,p)))),d)break;h=h.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!ti(u)&&!u[Xr])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ti(u):null)&&(u!==(d=Je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=_n,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==l?s:ri(l),p=null==u?s:ri(u),(s=new c(m,h+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,ti(i)===r&&((c=new c(f,h+"enter",u,n,i)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(f=u,h=0,p=c=l;p;p=Nr(p))h++;for(p=0,m=f;m;m=Nr(m))p++;for(;0<h-p;)c=Nr(c),h--;for(;0<p-h;)f=Nr(f),p--;for(;h--;){if(c===f||null!==f&&c===f.alternate)break e;c=Nr(c),f=Nr(f)}c=null}else c=null;null!==l&&Vr(a,s,l,c,!1),null!==u&&null!==d&&Vr(a,d,u,c,!0)}if("select"===(l=(s=r?ri(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var _=Zn;else if($n(s))if(Xn)_=lr;else{_=ar;var b=or}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(_=sr);switch(_&&(_=_(e,r))?Gn(a,_,n,i):(b&&b(e,s,r),"focusout"===e&&(b=s._wrapperState)&&b.controlled&&"number"===s.type&&ie(s,"number",s.value)),b=r?ri(r):window,e){case"focusin":($n(b)||"true"===b.contentEditable)&&(gr=b,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Er(a,n,i);break;case"selectionchange":if(br)break;case"keydown":case"keyup":Er(a,n,i)}var g;if(jn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zn?Fn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Bn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==v?"onCompositionEnd"===v&&zn&&(g=nn()):(en="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(b=jr(r,v)).length&&(v=new En(v,e,null,n,i),a.push({event:v,listeners:b}),g?v.data=g:null!==(g=Hn(n))&&(v.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Un=!0,qn);case"textInput":return(e=t.data)===qn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!jn&&Fn(e,t)?(e=nn(),tn=en=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=g))}Ar(a,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Be(e,n))&&r.unshift(Lr(e,o,i)),null!=(o=Be(e,t))&&r.push(Lr(e,o,i))),e=e.return}return r}function Nr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Be(n,o))&&a.unshift(Lr(n,l,s)):i||null!=(l=Be(n,o))&&a.push(Lr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Br(){}var qr=null,Ur=null;function Fr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var zr="function"==typeof setTimeout?setTimeout:void 0,Wr="function"==typeof clearTimeout?clearTimeout:void 0;function $r(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Yr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Yr,Zr="__reactProps$"+Yr,Xr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xr]||n[Qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[Qr])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Qr]||e[Xr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ii(e){return e[Zr]||null}function oi(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var ai=[],si=-1;function li(e){return{current:e}}function ui(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function ci(e,t){si++,ai[si]=e.current,e.current=t}var di={},fi=li(di),pi=li(!1),hi=di;function mi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _i(e){return null!=(e=e.childContextTypes)}function bi(){ui(pi),ui(fi)}function gi(e,t,n){if(fi.current!==di)throw Error(a(168));ci(fi,t),ci(pi,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,G(t)||"Unknown",o));return i({},n,r)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,hi=fi.current,ci(fi,e),ci(pi,pi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vi(e,t,hi),r.__reactInternalMemoizedMergedChildContext=e,ui(pi),ui(fi),ci(fi,e)):ui(pi),ci(pi,n)}var Ei=null,ki=null,xi=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Ii=o.unstable_shouldYield,Ai=o.unstable_requestPaint,Di=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Mi=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Pi=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Li=o.unstable_IdlePriority,ji={},Ni=void 0!==Ai?Ai:function(){},Vi=null,Bi=null,qi=!1,Ui=Di(),Fi=1e4>Ui?Di:function(){return Di()-Ui};function Hi(){switch(Ti()){case Mi:return 99;case Oi:return 98;case Pi:return 97;case Ri:return 96;case Li:return 95;default:throw Error(a(332))}}function zi(e){switch(e){case 99:return Mi;case 98:return Oi;case 97:return Pi;case 96:return Ri;case 95:return Li;default:throw Error(a(332))}}function Wi(e,t){return e=zi(e),xi(e,t)}function $i(e,t,n){return e=zi(e),Si(e,t,n)}function Gi(){if(null!==Bi){var e=Bi;Bi=null,Ci(e)}Ki()}function Ki(){if(!qi&&null!==Vi){qi=!0;var e=0;try{var t=Vi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(t){throw null!==Vi&&(Vi=Vi.slice(e+1)),Si(Mi,Gi),t}finally{qi=!1}}}var Ji=w.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Qi=li(null),Zi=null,Xi=null,eo=null;function to(){eo=Xi=Zi=null}function no(e){var t=Qi.current;ui(Qi),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function io(e,t){Zi=e,eo=Xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ja=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xi){if(null===Zi)throw Error(a(308));Xi=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else Xi=Xi.next=t;return e._currentValue}var ao=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function co(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;ao=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=c:f.next=c,d.lastBaseUpdate=u)}}if(null!==a){for(f=o.baseState,s=0,d=c=u=null;;){l=a.lane;var p=a.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,m=a;switch(l=t,p=n,m.tag){case 1:if("function"==typeof(h=m.payload)){f=h.call(p,f,l);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(l="function"==typeof(h=m.payload)?h.call(p,f,l):h))break e;f=i({},f,l);break e;case 2:ao=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=p,u=f):d=d.next=p,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===d&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,Us|=s,e.lanes=s,e.memoizedState=f}}function ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var mo=(new r.Component).refs;function _o(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var bo={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fl(),i=pl(e),o=uo(r,i);o.payload=t,null!=n&&(o.callback=n),co(e,o),hl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fl(),i=pl(e),o=uo(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),co(e,o),hl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fl(),r=pl(e),i=uo(n,r);i.tag=2,null!=t&&(i.callback=t),co(e,i),hl(e,r,n)}};function go(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,o))}function vo(e,t,n){var r=!1,i=di,o=t.contextType;return"object"==typeof o&&null!==o?o=oo(o):(i=_i(t)?hi:fi.current,o=(r=null!=(r=t.contextTypes))?mi(e,i):di),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=bo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function yo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=mo,so(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=oo(o):(o=_i(t)?hi:fi.current,i.context=mi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(_o(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&bo.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Eo=Array.isArray;function ko(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===mo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function xo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=$l(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Yl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ko(e,t,n),r.return=e,r):((r=Gl(n.type,n.key,n.props,null,e.mode,r)).ref=ko(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ql(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Kl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Yl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Gl(t.type,t.key,t.props,null,e.mode,n)).ref=ko(e,null,t),n.return=e,n;case k:return(t=Ql(t,e.mode,n)).return=e,t}if(Eo(t)||F(t))return(t=Kl(t,e.mode,n,null)).return=e,t;xo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===x?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null}if(Eo(n)||F(n))return null!==i?null:d(e,t,n,r,null);xo(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===x?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Eo(r)||F(r))return d(t,e=e.get(n)||null,r,i,null);xo(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,_=null;null!==d&&m<s.length;m++){d.index>m?(_=d,d=null):_=d.sibling;var b=p(i,d,s[m],l);if(null===b){null===d&&(d=_);break}e&&d&&null===b.alternate&&t(i,d),a=o(b,a,m),null===c?u=b:c.sibling=b,c=b,d=_}if(m===s.length)return n(i,d),u;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(i,d);m<s.length;m++)null!==(_=h(d,i,m,s[m],l))&&(e&&null!==_.alternate&&d.delete(null===_.key?m:_.key),a=o(_,a,m),null===c?u=_:c.sibling=_,c=_);return e&&d.forEach((function(e){return t(i,e)})),u}function _(i,s,l,u){var c=F(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,_=s=0,b=null,g=l.next();null!==m&&!g.done;_++,g=l.next()){m.index>_?(b=m,m=null):b=m.sibling;var v=p(i,m,g.value,u);if(null===v){null===m&&(m=b);break}e&&m&&null===v.alternate&&t(i,m),s=o(v,s,_),null===d?c=v:d.sibling=v,d=v,m=b}if(g.done)return n(i,m),c;if(null===m){for(;!g.done;_++,g=l.next())null!==(g=f(i,g.value,u))&&(s=o(g,s,_),null===d?c=g:d.sibling=g,d=g);return c}for(m=r(i,m);!g.done;_++,g=l.next())null!==(g=h(m,i,_,g.value,u))&&(e&&null!==g.alternate&&m.delete(null===g.key?_:g.key),s=o(g,s,_),null===d?c=g:d.sibling=g,d=g);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"==typeof o&&null!==o&&o.type===x&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case E:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===x){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=ko(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===x?((r=Kl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Gl(o.type,o.key,o.props,null,e.mode,l)).ref=ko(e,r,o),l.return=e,e=l)}return s(e);case k:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ql(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Yl(o,e.mode,l)).return=e,e=r),s(e);if(Eo(o))return m(e,r,o,l);if(F(o))return _(e,r,o,l);if(c&&xo(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(e.type)||"Component"))}return n(e,r)}}var Co=So(!0),Io=So(!1),Ao={},Do=li(Ao),To=li(Ao),Mo=li(Ao);function Oo(e){if(e===Ao)throw Error(a(174));return e}function Po(e,t){switch(ci(Mo,t),ci(To,e),ci(Do,Ao),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Do),ci(Do,t)}function Ro(){ui(Do),ui(To),ui(Mo)}function Lo(e){Oo(Mo.current);var t=Oo(Do.current),n=pe(t,e.type);t!==n&&(ci(To,e),ci(Do,n))}function jo(e){To.current===e&&(ui(Do),ui(To))}var No=li(0);function Vo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bo=null,qo=null,Uo=!1;function Fo(e,t){var n=zl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function zo(e){if(Uo){var t=qo;if(t){var n=t;if(!Ho(e,t)){if(!(t=Gr(n.nextSibling))||!Ho(e,t))return e.flags=-1025&e.flags|2,Uo=!1,void(Bo=e);Fo(Bo,n)}Bo=e,qo=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,Uo=!1,Bo=e}}function Wo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Bo=e}function $o(e){if(e!==Bo)return!1;if(!Uo)return Wo(e),Uo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=qo;t;)Fo(e,t),t=Gr(t.nextSibling);if(Wo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){qo=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}qo=null}}else qo=Bo?Gr(e.stateNode.nextSibling):null;return!0}function Go(){qo=Bo=null,Uo=!1}var Ko=[];function Jo(){for(var e=0;e<Ko.length;e++)Ko[e]._workInProgressVersionPrimary=null;Ko.length=0}var Yo=w.ReactCurrentDispatcher,Qo=w.ReactCurrentBatchConfig,Zo=0,Xo=null,ea=null,ta=null,na=!1,ra=!1;function ia(){throw Error(a(321))}function oa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function aa(e,t,n,r,i,o){if(Zo=o,Xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yo.current=null===e||null===e.memoizedState?Oa:Pa,e=n(r,i),ra){o=0;do{if(ra=!1,!(25>o))throw Error(a(301));o+=1,ta=ea=null,t.updateQueue=null,Yo.current=Ra,e=n(r,i)}while(ra)}if(Yo.current=Ma,t=null!==ea&&null!==ea.next,Zo=0,ta=ea=Xo=null,na=!1,t)throw Error(a(300));return e}function sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ta?Xo.memoizedState=ta=e:ta=ta.next=e,ta}function la(){if(null===ea){var e=Xo.alternate;e=null!==e?e.memoizedState:null}else e=ea.next;var t=null===ta?Xo.memoizedState:ta.next;if(null!==t)ta=t,ea=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ea=e).memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},null===ta?Xo.memoizedState=ta=e:ta=ta.next=e}return ta}function ua(e,t){return"function"==typeof t?t(e):t}function ca(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ea,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.lane;if((Zo&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,o=r):l=l.next=d,Xo.lanes|=c,Us|=c}u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,ur(r,t.memoizedState)||(ja=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function da(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);ur(o,t.memoizedState)||(ja=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function fa(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Zo&e)===e)&&(t._workInProgressVersionPrimary=r,Ko.push(t))),e)return n(t._source);throw Ko.push(t),Error(a(350))}function pa(e,t,n,r){var i=Ps;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Yo.current,u=l.useState((function(){return fa(i,t,n)})),c=u[1],d=u[0];u=ta;var f=e.memoizedState,p=f.refs,h=p.getSnapshot,m=f.source;f=f.subscribe;var _=Xo;return e.memoizedState={refs:p,source:t,subscribe:r},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!ur(s,e)){e=n(t._source),ur(d,e)||(c(e),e=pl(_),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-Ht(a),u=1<<l;r[l]|=e,a&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pl(_);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(h,n)&&ur(m,t)&&ur(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ua,lastRenderedState:d}).dispatch=c=Ta.bind(null,Xo,e),u.queue=e,u.baseQueue=null,d=fa(i,t,n),u.memoizedState=u.baseState=d),d}function ha(e,t,n){return pa(la(),e,t,n)}function ma(e){var t=sa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e}).dispatch=Ta.bind(null,Xo,e),[t.memoizedState,e]}function _a(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xo.updateQueue)?(t={lastEffect:null},Xo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ba(e){return e={current:e},sa().memoizedState=e}function ga(){return la().memoizedState}function va(e,t,n,r){var i=sa();Xo.flags|=e,i.memoizedState=_a(1|t,n,void 0,void 0===r?null:r)}function ya(e,t,n,r){var i=la();r=void 0===r?null:r;var o=void 0;if(null!==ea){var a=ea.memoizedState;if(o=a.destroy,null!==r&&oa(r,a.deps))return void _a(t,n,o,r)}Xo.flags|=e,i.memoizedState=_a(1|t,n,o,r)}function wa(e,t){return va(516,4,e,t)}function Ea(e,t){return ya(516,4,e,t)}function ka(e,t){return ya(4,2,e,t)}function xa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sa(e,t,n){return n=null!=n?n.concat([e]):null,ya(4,2,xa.bind(null,t,e),n)}function Ca(){}function Ia(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Aa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Da(e,t){var n=Hi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Qo.transition;Qo.transition=1;try{e(!1),t()}finally{Qo.transition=n}}))}function Ta(e,t,n){var r=fl(),i=pl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Xo||null!==a&&a===Xo)ra=na=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,ur(l,s))return}catch(e){}hl(e,i,r)}}var Ma={readContext:oo,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useOpaqueIdentifier:ia,unstable_isNewReconciler:!1},Oa={readContext:oo,useCallback:function(e,t){return sa().memoizedState=[e,void 0===t?null:t],e},useContext:oo,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,va(4,2,xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return va(4,2,e,t)},useMemo:function(e,t){var n=sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ta.bind(null,Xo,e),[r.memoizedState,e]},useRef:ba,useState:ma,useDebugValue:Ca,useDeferredValue:function(e){var t=ma(e),n=t[0],r=t[1];return wa((function(){var t=Qo.transition;Qo.transition=1;try{r(e)}finally{Qo.transition=t}}),[e]),n},useTransition:function(){var e=ma(!1),t=e[0];return ba(e=Da.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=sa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pa(r,e,t,n)},useOpaqueIdentifier:function(){if(Uo){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(a(355))})),n=ma(t)[1];return 0==(2&Xo.mode)&&(Xo.flags|=516,_a(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return ma(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Pa={readContext:oo,useCallback:Ia,useContext:oo,useEffect:Ea,useImperativeHandle:Sa,useLayoutEffect:ka,useMemo:Aa,useReducer:ca,useRef:ga,useState:function(){return ca(ua)},useDebugValue:Ca,useDeferredValue:function(e){var t=ca(ua),n=t[0],r=t[1];return Ea((function(){var t=Qo.transition;Qo.transition=1;try{r(e)}finally{Qo.transition=t}}),[e]),n},useTransition:function(){var e=ca(ua)[0];return[ga().current,e]},useMutableSource:ha,useOpaqueIdentifier:function(){return ca(ua)[0]},unstable_isNewReconciler:!1},Ra={readContext:oo,useCallback:Ia,useContext:oo,useEffect:Ea,useImperativeHandle:Sa,useLayoutEffect:ka,useMemo:Aa,useReducer:da,useRef:ga,useState:function(){return da(ua)},useDebugValue:Ca,useDeferredValue:function(e){var t=da(ua),n=t[0],r=t[1];return Ea((function(){var t=Qo.transition;Qo.transition=1;try{r(e)}finally{Qo.transition=t}}),[e]),n},useTransition:function(){var e=da(ua)[0];return[ga().current,e]},useMutableSource:ha,useOpaqueIdentifier:function(){return da(ua)[0]},unstable_isNewReconciler:!1},La=w.ReactCurrentOwner,ja=!1;function Na(e,t,n,r){t.child=null===e?Io(t,null,n,r):Co(t,e.child,n,r)}function Va(e,t,n,r,i){n=n.render;var o=t.ref;return io(t,i),r=aa(e,t,n,r,o,i),null===e||ja?(t.flags|=1,Na(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Ba(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Wl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,qa(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=$l(a,r)).ref=t.ref,e.return=t,t.child=e)}function qa(e,t,n,r,i,o){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(ja=!1,0==(o&i))return t.lanes=e.lanes,os(e,t,o);0!=(16384&e.flags)&&(ja=!0)}return Ha(e,t,n,r,o)}function Ua(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},El(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},El(t,e),null;t.memoizedState={baseLanes:0},El(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,El(t,r);return Na(e,t,i,n),t.child}function Fa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ha(e,t,n,r,i){var o=_i(n)?hi:fi.current;return o=mi(t,o),io(t,i),n=aa(e,t,n,r,o,i),null===e||ja?(t.flags|=1,Na(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function za(e,t,n,r,i){if(_i(n)){var o=!0;yi(t)}else o=!1;if(io(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=oo(u):u=mi(t,u=_i(n)?hi:fi.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&yo(t,a,r,u),ao=!1;var f=t.memoizedState;a.state=f,po(t,r,a,i),l=t.memoizedState,s!==r||f!==l||pi.current||ao?("function"==typeof c&&(_o(t,n,c,r),l=t.memoizedState),(s=ao||go(t,n,s,r,f,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,lo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Yi(t.type,s),a.props=u,d=t.pendingProps,f=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=oo(l):l=mi(t,l=_i(n)?hi:fi.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||f!==l)&&yo(t,a,r,l),ao=!1,f=t.memoizedState,a.state=f,po(t,r,a,i);var h=t.memoizedState;s!==d||f!==h||pi.current||ao?("function"==typeof p&&(_o(t,n,p,r),h=t.memoizedState),(u=ao||go(t,n,u,r,f,h,l))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Wa(e,t,n,r,o,i)}function Wa(e,t,n,r,i,o){Fa(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,La.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):Na(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function $a(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Po(e,t.containerInfo)}var Ga,Ka,Ja,Ya,Qa={dehydrated:null,retryLane:0};function Za(e,t,n){var r,i=t.pendingProps,o=No.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ci(No,1&o),null===e?(void 0!==i.fallback&&zo(t),e=i.children,o=i.fallback,a?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qa,e):"number"==typeof i.unstable_expectedLoadTime?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qa,t.lanes=33554432,e):((n=Jl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Qa,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Xa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Jl(t,i,0,null),n=Kl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=$l(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=$l(a,s),null!==e?r=$l(e,r):(r=Kl(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ro(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Na(e,t,r.children,n),0!=(2&(r=No.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(No,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Vo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Vo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=$l(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$l(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Uo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&bi(),null;case 3:return Ro(),ui(pi),ui(fi),Jo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||($o(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ka(t),null;case 5:jo(t);var o=Oo(Mo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ja(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Oo(Do.current),$o(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Qr]=t,r[Zr]=s,n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Dr(Sr[e],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":ee(r,s),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Dr("invalid",r);break;case"textarea":le(r,s),Dr("invalid",r)}for(var u in ke(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Dr("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===de.html&&(e=fe(n)),e===de.html?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Qr]=t,e[Zr]=r,Ga(e,t,!1,!1),t.stateNode=e,u=xe(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),o=r;break;case"iframe":case"object":case"embed":Dr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sr.length;o++)Dr(Sr[o],e);o=r;break;case"source":Dr("error",e),o=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),o=r;break;case"details":Dr("toggle",e),o=r;break;case"input":ee(e,r),o=X(e,r),Dr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":le(e,r),o=se(e,r),Dr("invalid",e);break;default:o=r}ke(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&_e(e,d):"children"===s?"string"==typeof d?("textarea"!==n||""!==d)&&be(e,d):"number"==typeof d&&be(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Dr("scroll",e):null!=d&&y(e,s,d,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Br)}Fr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ya(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=Oo(Mo.current),Oo(Do.current),$o(t)?(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=t,t.stateNode=r)}return null;case 13:return ui(No),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&$o(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&No.current)?0===Vs&&(Vs=3):(0!==Vs&&3!==Vs||(Vs=4),null===Ps||0==(134217727&Us)&&0==(134217727&Fs)||gl(Ps,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Ro(),Ka(t),null===e&&Mr(t.stateNode.containerInfo),null;case 10:return no(t),null;case 19:if(ui(No),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(u=r.rendering))if(s)as(r,!1);else{if(0!==Vs||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Vo(e))){for(t.flags|=64,as(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ci(No,1&No.current|2),t.child}e=e.sibling}null!==r.tail&&Fi()>$s&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Vo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Uo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>$s&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,t=No.current,ci(No,s?1&t|2:1&t),n):null;case 23:case 24:return kl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ls(e){switch(e.tag){case 1:_i(e.type)&&bi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ro(),ui(pi),ui(fi),Jo(),0!=(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return jo(e),null;case 13:return ui(No),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(No),null;case 4:return Ro(),null;case 10:return no(e),null;case 23:case 24:return kl(),null;default:return null}}function us(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ga=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ka=function(){},Ja=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Oo(Do.current);var a,s=null;switch(n){case"input":o=X(e,o),r=X(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Br)}for(d in ke(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var u=o[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(u=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Dr("scroll",e),s||u===c||(s=[])):"object"==typeof c&&null!==c&&c.$$typeof===L?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ya=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Qs=r),cs(0,t)},n}function ps(e,t,n){(n=uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"==typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){ql(e,t)}else t.current=null}function _s(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&$r(t.stateNode.containerInfo))}throw Error(a(163))}function bs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Nl(n,e),jl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ho(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ho(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Fr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ye("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function vs(e,t){if(ki&&"function"==typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(Ei,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Nl(t,n);else{r=t;try{i()}catch(e){ql(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){ql(t,e)}break;case 5:ms(t);break;case 4:Ss(e,t)}}function ys(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function Es(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(be(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ks(e,n,t):xs(e,n,t)}function ks(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(ks(e,t,n),e=e.sibling;null!==e;)ks(e,t,n),e=e.sibling}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=l;;)if(vs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(vs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),xe(e,i),t=xe(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?we(n,l):"dangerouslySetInnerHTML"===s?_e(n,l):"children"===s?be(n,l):y(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=Fi(),gs(t.child,!0)),void Is(t);case 19:return void Is(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(a(163))}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function As(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ds=Math.ceil,Ts=w.ReactCurrentDispatcher,Ms=w.ReactCurrentOwner,Os=0,Ps=null,Rs=null,Ls=0,js=0,Ns=li(0),Vs=0,Bs=null,qs=0,Us=0,Fs=0,Hs=0,zs=null,Ws=0,$s=1/0;function Gs(){$s=Fi()+500}var Ks,Js=null,Ys=!1,Qs=null,Zs=null,Xs=!1,el=null,tl=90,nl=[],rl=[],il=null,ol=0,al=null,sl=-1,ll=0,ul=0,cl=null,dl=!1;function fl(){return 0!=(48&Os)?Fi():-1!==sl?sl:sl=Fi()}function pl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Hi()?1:2;if(0===ll&&(ll=qs),0!==Ji.transition){0!==ul&&(ul=null!==zs?zs.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!=(4&Os)&&98===e?e=Bt(12,ll):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function hl(e,t,n){if(50<ol)throw ol=0,al=null,Error(a(185));if(null===(e=ml(e,t)))return null;Ft(e,t,n),e===Ps&&(Fs|=t,4===Vs&&gl(e,Ls));var r=Hi();1===t?0!=(8&Os)&&0==(48&Os)?vl(e):(_l(e,n),0===Os&&(Gs(),Gi())):(0==(4&Os)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),_l(e,n)),zs=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function _l(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ht(s),u=1<<l,c=o[l];if(-1===c){if(0==(u&r)||0!=(u&i)){c=t,jt(u);var d=Lt;o[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=Nt(e,e===Ps?Ls:0),t=Lt,0===r)null!==n&&(n!==ji&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==ji&&Ci(n)}15===t?(n=vl.bind(null,e),null===Vi?(Vi=[n],Bi=Si(Mi,Ki)):Vi.push(n),n=ji):14===t?n=$i(99,vl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=$i(n,bl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function bl(e){if(sl=-1,ul=ll=0,0!=(48&Os))throw Error(a(327));var t=e.callbackNode;if(Ll()&&e.callbackNode!==t)return null;var n=Nt(e,e===Ps?Ls:0);if(0===n)return null;var r=n,i=Os;Os|=16;var o=Cl();for(Ps===e&&Ls===r||(Gs(),xl(e,r));;)try{Dl();break}catch(t){Sl(e,t)}if(to(),Ts.current=o,Os=i,null!==Rs?r=0:(Ps=null,Ls=0,r=Vs),0!=(qs&Fs))xl(e,0);else if(0!==r){if(2===r&&(Os|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(n=Vt(e))&&(r=Il(e,n))),1===r)throw t=Bs,xl(e,0),gl(e,n),_l(e,Fi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ol(e);break;case 3:if(gl(e,n),(62914560&n)===n&&10<(r=Ws+500-Fi())){if(0!==Nt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zr(Ol.bind(null,e),r);break}Ol(e);break;case 4:if(gl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Fi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ds(n/1960))-n)){e.timeoutHandle=zr(Ol.bind(null,e),n);break}Ol(e);break;default:throw Error(a(329))}}return _l(e,Fi()),e.callbackNode===t?bl.bind(null,e):null}function gl(e,t){for(t&=~Hs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function vl(e){if(0!=(48&Os))throw Error(a(327));if(Ll(),e===Ps&&0!=(e.expiredLanes&Ls)){var t=Ls,n=Il(e,t);0!=(qs&Fs)&&(n=Il(e,t=Nt(e,t)))}else n=Il(e,t=Nt(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(t=Vt(e))&&(n=Il(e,t))),1===n)throw n=Bs,xl(e,0),gl(e,t),_l(e,Fi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e),_l(e,Fi()),null}function yl(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(Gs(),Gi())}}function wl(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(Gs(),Gi())}}function El(e,t){ci(Ns,js),js|=t,qs|=t}function kl(){js=Ns.current,ui(Ns)}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&bi();break;case 3:Ro(),ui(pi),ui(fi),Jo();break;case 5:jo(r);break;case 4:Ro();break;case 13:case 19:ui(No);break;case 10:no(r);break;case 23:case 24:kl()}n=n.return}Ps=e,Rs=$l(e.current,null),Ls=js=qs=t,Vs=0,Bs=null,Hs=Fs=Us=0}function Sl(e,t){for(;;){var n=Rs;try{if(to(),Yo.current=Ma,na){for(var r=Xo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}na=!1}if(Zo=0,ta=ea=Xo=null,ra=!1,Ms.current=null,null===n||null===n.return){Vs=1,Bs=t,Rs=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!=(1&No.current),f=a;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var m=f.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(p){var _=f.updateQueue;if(null===_){var b=new Set;b.add(u),f.updateQueue=b}else _.add(u);if(0==(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=uo(-1,1);g.tag=2,co(s,g)}s.lanes|=1;break e}l=void 0,s=t;var v=o.pingCache;if(null===v?(v=o.pingCache=new ds,l=new Set,v.set(u,l)):void 0===(l=v.get(u))&&(l=new Set,v.set(u,l)),!l.has(s)){l.add(s);var y=Ul.bind(null,o,u,s);u.then(y,y)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);l=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Vs&&(Vs=2),l=us(l,s),f=a;do{switch(f.tag){case 3:o=l,f.flags|=4096,t&=-t,f.lanes|=t,fo(f,fs(0,o,t));break e;case 1:o=l;var w=f.type,E=f.stateNode;if(0==(64&f.flags)&&("function"==typeof w.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Zs||!Zs.has(E)))){f.flags|=4096,t&=-t,f.lanes|=t,fo(f,ps(f,o,t));break e}}f=f.return}while(null!==f)}Ml(n)}catch(e){t=e,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function Cl(){var e=Ts.current;return Ts.current=Ma,null===e?Ma:e}function Il(e,t){var n=Os;Os|=16;var r=Cl();for(Ps===e&&Ls===t||xl(e,t);;)try{Al();break}catch(t){Sl(e,t)}if(to(),Os=n,Ts.current=r,null!==Rs)throw Error(a(261));return Ps=null,Ls=0,Vs}function Al(){for(;null!==Rs;)Tl(Rs)}function Dl(){for(;null!==Rs&&!Ii();)Tl(Rs)}function Tl(e){var t=Ks(e.alternate,e,js);e.memoizedProps=e.pendingProps,null===t?Ml(e):Rs=t,Ms.current=null}function Ml(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ss(n,t,js)))return void(Rs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&js)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ls(t)))return n.flags&=2047,void(Rs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Vs&&(Vs=5)}function Ol(e){var t=Hi();return Wi(99,Pl.bind(null,e,t)),null}function Pl(e,t){do{Ll()}while(null!==el);if(0!=(48&Os))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-Ht(o),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==il&&0==(24&r)&&il.has(e)&&il.delete(e),e===Ps&&(Rs=Ps=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Os,Os|=32,Ms.current=null,qr=Kt,_r(s=mr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var d=0,f=-1,p=-1,h=0,m=0,_=s,b=null;t:for(;;){for(var g;_!==l||0!==o&&3!==_.nodeType||(f=d+o),_!==u||0!==c&&3!==_.nodeType||(p=d+c),3===_.nodeType&&(d+=_.nodeValue.length),null!==(g=_.firstChild);)b=_,_=g;for(;;){if(_===s)break t;if(b===l&&++h===o&&(f=d),b===u&&++m===c&&(p=d),null!==(g=_.nextSibling))break;b=(_=b).parentNode}_=g}l=-1===f||-1===p?null:{start:f,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Ur={focusedElem:s,selectionRange:l},Kt=!1,cl=null,dl=!1,Js=r;do{try{Rl()}catch(e){if(null===Js)throw Error(a(330));ql(Js,e),Js=Js.nextEffect}}while(null!==Js);cl=null,Js=r;do{try{for(s=e;null!==Js;){var v=Js.flags;if(16&v&&be(Js.stateNode,""),128&v){var y=Js.alternate;if(null!==y){var w=y.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&v){case 2:Es(Js),Js.flags&=-3;break;case 6:Es(Js),Js.flags&=-3,Cs(Js.alternate,Js);break;case 1024:Js.flags&=-1025;break;case 1028:Js.flags&=-1025,Cs(Js.alternate,Js);break;case 4:Cs(Js.alternate,Js);break;case 8:Ss(s,l=Js);var E=l.alternate;ys(l),null!==E&&ys(E)}Js=Js.nextEffect}}catch(e){if(null===Js)throw Error(a(330));ql(Js,e),Js=Js.nextEffect}}while(null!==Js);if(w=Ur,y=mr(),v=w.focusedElem,s=w.selectionRange,y!==v&&v&&v.ownerDocument&&hr(v.ownerDocument.documentElement,v)){null!==s&&_r(v)&&(y=s.start,void 0===(w=s.end)&&(w=y),"selectionStart"in v?(v.selectionStart=y,v.selectionEnd=Math.min(w,v.value.length)):(w=(y=v.ownerDocument||document)&&y.defaultView||window).getSelection&&(w=w.getSelection(),l=v.textContent.length,E=Math.min(s.start,l),s=void 0===s.end?E:Math.min(s.end,l),!w.extend&&E>s&&(l=s,s=E,E=l),l=pr(v,E),o=pr(v,s),l&&o&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((y=y.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),E>s?(w.addRange(y),w.extend(o.node,o.offset)):(y.setEnd(o.node,o.offset),w.addRange(y))))),y=[];for(w=v;w=w.parentNode;)1===w.nodeType&&y.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<y.length;v++)(w=y[v]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Kt=!!qr,Ur=qr=null,e.current=n,Js=r;do{try{for(v=e;null!==Js;){var k=Js.flags;if(36&k&&bs(v,Js.alternate,Js),128&k){y=void 0;var x=Js.ref;if(null!==x){var S=Js.stateNode;Js.tag,y=S,"function"==typeof x?x(y):x.current=y}}Js=Js.nextEffect}}catch(e){if(null===Js)throw Error(a(330));ql(Js,e),Js=Js.nextEffect}}while(null!==Js);Js=null,Ni(),Os=i}else e.current=n;if(Xs)Xs=!1,el=e,tl=t;else for(Js=r;null!==Js;)t=Js.nextEffect,Js.nextEffect=null,8&Js.flags&&((k=Js).sibling=null,k.stateNode=null),Js=t;if(0===(r=e.pendingLanes)&&(Zs=null),1===r?e===al?ol++:(ol=0,al=e):ol=0,n=n.stateNode,ki&&"function"==typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(Ei,n,void 0,64==(64&n.current.flags))}catch(e){}if(_l(e,Fi()),Ys)throw Ys=!1,e=Qs,Qs=null,e;return 0!=(8&Os)||Gi(),null}function Rl(){for(;null!==Js;){var e=Js.alternate;dl||null===cl||(0!=(8&Js.flags)?Xe(Js,cl)&&(dl=!0):13===Js.tag&&As(e,Js)&&Xe(Js,cl)&&(dl=!0));var t=Js.flags;0!=(256&t)&&_s(e,Js),0==(512&t)||Xs||(Xs=!0,$i(97,(function(){return Ll(),null}))),Js=Js.nextEffect}}function Ll(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Wi(e,Vl)}return!1}function jl(e,t){nl.push(t,e),Xs||(Xs=!0,$i(97,(function(){return Ll(),null})))}function Nl(e,t){rl.push(t,e),Xs||(Xs=!0,$i(97,(function(){return Ll(),null})))}function Vl(){if(null===el)return!1;var e=el;if(el=null,0!=(48&Os))throw Error(a(331));var t=Os;Os|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(a(330));ql(o,e)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===o)throw Error(a(330));ql(o,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Os=t,Gi(),!0}function Bl(e,t,n){co(e,t=fs(0,t=us(n,t),1)),t=fl(),null!==(e=ml(e,1))&&(Ft(e,1,t),_l(e,t))}function ql(e,t){if(3===e.tag)Bl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){var i=ps(n,e=us(t,e),1);if(co(n,i),i=fl(),null!==(n=ml(n,1)))Ft(n,1,i),_l(n,i);else if("function"==typeof r.componentDidCatch&&(null===Zs||!Zs.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fl(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(Ls&n)===n&&(4===Vs||3===Vs&&(62914560&Ls)===Ls&&500>Fi()-Ws?xl(e,0):Hs|=n),_l(e,t)}function Fl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Hi()?1:2:(0===ll&&(ll=qs),0===(t=qt(62914560&~ll))&&(t=4194304))),n=fl(),null!==(e=ml(e,t))&&(Ft(e,t,n),_l(e,n))}function Hl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(e,t,n,r){return new Hl(e,t,n,r)}function Wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $l(e,t){var n=e.alternate;return null===n?((n=zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Wl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case x:return Kl(n.children,i,o,t);case j:s=8,i|=16;break;case S:s=8,i|=1;break;case C:return(e=zl(12,n,t,8|i)).elementType=C,e.type=C,e.lanes=o,e;case T:return(e=zl(13,n,t,i)).type=T,e.elementType=T,e.lanes=o,e;case M:return(e=zl(19,n,t,i)).elementType=M,e.lanes=o,e;case N:return Jl(n,i,o,t);case V:return(e=zl(24,n,t,i)).elementType=V,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case A:s=9;break e;case D:s=11;break e;case O:s=14;break e;case P:s=16,r=null;break e;case R:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=zl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Kl(e,t,n,r){return(e=zl(7,e,r,t)).lanes=n,e}function Jl(e,t,n,r){return(e=zl(23,e,r,t)).elementType=N,e.lanes=n,e}function Yl(e,t,n){return(e=zl(6,e,null,t)).lanes=n,e}function Ql(e,t,n){return(t=zl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function Xl(e,t,n,r){var i=t.current,o=fl(),s=pl(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=vi(n,u,l);break e}}n=l}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=uo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),co(i,t),hl(i,s,o),s}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function ru(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zl(e,t,null!=n&&!0===n.hydrate),t=zl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,so(t),e[Xr]=n.current,Mr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=eu(a);s.call(e)}}Xl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=eu(a);l.call(e)}}wl((function(){Xl(t,a,e,i)}))}return eu(a)}function au(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)ja=!0;else{if(0==(n&r)){switch(ja=!1,t.tag){case 3:$a(t),Go();break;case 5:Lo(t);break;case 1:_i(t.type)&&yi(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ci(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Za(e,t,n):(ci(No,1&No.current),null!==(t=os(e,t,n))?t.sibling:null);ci(No,1&No.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(No,No.current),r)break;return null;case 23:case 24:return t.lanes=0,Ua(e,t,n)}return os(e,t,n)}ja=0!=(16384&e.flags)}else ja=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,fi.current),io(t,n),i=aa(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var o=!0;yi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,so(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&_o(t,r,s,e),i.updater=bo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=Wa(null,t,r,!0,o,n)}else t.tag=0,Na(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Wl(e)?1:0;if(null!=e){if((e=e.$$typeof)===D)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=Ha(null,t,i,e,n);break e;case 1:t=za(null,t,i,e,n);break e;case 11:t=Va(null,t,i,e,n);break e;case 14:t=Ba(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if($a(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,lo(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)Go(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(qo=Gr(t.stateNode.containerInfo.firstChild),Bo=t,o=Uo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Ko.push(o);for(n=Io(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Na(e,t,r,n),Go();t=t.child}return t;case 5:return Lo(t),null===e&&zo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==o&&Hr(r,o)&&(t.flags|=16),Fa(e,t),Na(e,t,s,n),t.child;case 6:return null===e&&zo(t),null;case 13:return Za(e,t,n);case 4:return Po(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(ci(Qi,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=ur(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!pi.current){t=os(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=uo(-1,n&-n)).tag=2,co(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ro(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,io(t,n),r=r(i=oo(i,o.unstable_observedBits)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),Ba(e,t,i,o=Yi(i.type,o),r,n);case 15:return qa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,_i(r)?(e=!0,yi(t)):e=!1,io(t,n),vo(t,r,i),wo(t,r,i,n),Wa(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Ua(e,t,n)}throw Error(a(156,t.tag))},ru.prototype.render=function(e){Xl(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xl(null,e,null,(function(){t[Xr]=null}))},et=function(e){13===e.tag&&(hl(e,4,fl()),nu(e,4))},tt=function(e){13===e.tag&&(hl(e,67108864,fl()),nu(e,67108864))},nt=function(e){if(13===e.tag){var t=fl(),n=pl(e);hl(e,n,t),nu(e,n)}},rt=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(a(90));Q(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Oe=yl,Pe=function(e,t,n,r,i){var o=Os;Os|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Os=o)&&(Gs(),Gi())}},Re=function(){0==(49&Os)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,_l(e,Fi())}))}Gi()}(),Ll())},Le=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(Gs(),Gi())}};var su={Events:[ni,ri,ii,Te,Me,Ll,{current:!1}]},lu={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uu={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{Ei=cu.inject(uu),ki=cu}catch(me){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,n.createPortal=au,n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},n.flushSync=function(e,t){var n=Os;if(0!=(48&n))return e(t);Os|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Os=n,Gi()}},n.hydrate=function(e,t,n){if(!iu(t))throw Error(a(200));return ou(null,e,t,!0,n)},n.render=function(e,t,n){if(!iu(t))throw Error(a(200));return ou(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!iu(e))throw Error(a(40));return!!e._reactRootContainer&&(wl((function(){ou(null,null,e,!1,(function(){e._reactRootContainer=null,e[Xr]=null}))})),!0)},n.unstable_batchedUpdates=yl,n.unstable_createPortal=function(e,t){return au(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ou(e,t,n,!1,r)},n.version="17.0.2"},{"object-assign":365,react:436,scheduler:442}],414:[function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),t.exports=e("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.development.js":412,"./cjs/react-dom.production.min.js":413}],415:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/assertThisInitialized")),u=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/defineProperty")),d=r(e("react")),f=r(e("./TemplateContainer")),p=function(e){function t(){var e,n;(0,i.default)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o))),(0,c.default)((0,l.default)(n),"_templateContainer",void 0),(0,c.default)((0,l.default)(n),"_templateContainerSetter",(function(e){e&&(n._templateContainer=e)})),(0,c.default)((0,l.default)(n),"_el",void 0),(0,c.default)((0,l.default)(n),"_elSetter",(function(e){e&&(n._el=e)})),(0,c.default)((0,l.default)(n),"_dragHandleProps",n.props.makeDragHandleProps((function(){return n.props.y}))),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"getDOMNode",value:function(){return this._el}},{key:"getTemplate",value:function(){return this._templateContainer.getTemplate()}},{key:"shouldComponentUpdate",value:function(e){return this.props.anySelected!==e.anySelected||this.props.itemSelected!==e.itemSelected||this.props.item!==e.item||this.props.template!==e.template||this.props.y!==e.y||this.props.height!==e.height||this.props.zIndex!==e.zIndex||this.props.commonProps!==e.commonProps}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.y,r=e.padding,i=e.itemSelected,o=e.anySelected,a=e.height,s=e.zIndex,l=e.template,u=e.commonProps;return d.default.createElement("div",{ref:this._elSetter,style:{position:null==n?"relative":"absolute",boxSizing:"border-box",left:"0px",right:"0px",top:null==n?"0px":"".concat(n,"px"),marginBottom:"".concat(r,"px"),height:null==n?"auto":"".concat(o*(a.drag-a.natural)+a.natural,"px"),zIndex:s}},d.default.createElement(f.default,{ref:this._templateContainerSetter,item:t,template:l,itemSelected:i,anySelected:o,dragHandleProps:this._dragHandleProps,commonProps:u}))}}]),t}(d.default.Component);n.default=p,t.exports=n.default,t.exports.default=n.default},{"./TemplateContainer":417,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,react:436}],416:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/inherits")),u=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(){this.props.cb()}},{key:"render",value:function(){return null}}]),t}(r(e("react")).default.Component);n.default=u,t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,react:436}],417:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/assertThisInitialized")),u=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/defineProperty")),d=r(e("react")),f=function(e){function t(){var e,n;(0,i.default)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(o))),(0,c.default)((0,l.default)(n),"_template",void 0),(0,c.default)((0,l.default)(n),"_templateSetter",(function(e){e&&(n._template=e)})),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.anySelected!==e.anySelected||this.props.itemSelected!==e.itemSelected||this.props.item!==e.item||this.props.template!==e.template||this.props.commonProps!==e.commonProps}},{key:"getTemplate",value:function(){return this._template}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.itemSelected,r=e.anySelected,i=e.dragHandleProps,o=e.commonProps,a=this.props.template;return d.default.createElement(a,{ref:this._templateSetter,item:t,itemSelected:n,anySelected:r,dragHandleProps:i,commonProps:o})}}]),t}(d.default.Component);n.default=f,t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,react:436}],418:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/objectSpread")),a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/assertThisInitialized")),d=i(e("@babel/runtime/helpers/inherits")),f=i(e("@babel/runtime/helpers/defineProperty")),p=r(e("react")),h=i(e("prop-types")),m=e("react-motion"),_=i(e("immutability-helper")),b=i(e("react-multi-ref")),g=i(e("./OnUpdate")),v=i(e("./MoveContainer")),y={natural:200,drag:30};function w(e,t,n){return Math.round(t-t/n*e)}var E=function(e){function t(e){var n;return(0,a.default)(this,t),n=(0,l.default)(this,(0,u.default)(t).call(this,e)),(0,f.default)((0,c.default)(n),"_itemRefs",new b.default),(0,f.default)((0,c.default)(n),"_autoScrollerTimer",void 0),(0,f.default)((0,c.default)(n),"_listRef",p.createRef()),(0,f.default)((0,c.default)(n),"_handleTouchMove",(function(e){e.preventDefault(),n._handleMouseMove(e.touches[0])})),(0,f.default)((0,c.default)(n),"_handleMouseMove",(function(e){var t=e.pageY,r=e.clientY,i=n.props,a=i.list,s=i.autoScrollMaxSpeed,l=i.autoScrollRegionSize,u=n.state,c=u.dragging,d=u.lastDrag;if(c&&d){var f=n._getContainer(),p=n._getDragVisualIndex(),h=n._getKeyFn();if(clearInterval(n._autoScrollerTimer),0!==p&&p!==a.length-1){var m=0,_=f&&f!==document.body&&f.getBoundingClientRect?f.getBoundingClientRect():{top:0,bottom:1/0},b=Math.max(0,_.top),g=r-b;if(g>0&&g<l)m=-1*w(g,s,l);else{var v=Math.min(window.innerHeight,_.bottom)-r;v>0&&v<l&&(m=w(v,s,l))}0!==m&&(n._scrollContainer(m),n._autoScrollerTimer=setTimeout((function(){n._handleMouseMove({pageY:t+(f===document.body?m:0),clientY:r})}),16))}var y=f&&f!==document.body?f.scrollTop:0,E=t-d.mouseOffset+y;if(n.props.constrainDrag){var k=n._getVisualListDuringDrag();E=Math.max(E,n._getDistanceFromTopDuringDrag(d,h(k[0]),k)),E=Math.min(E,n._getDistanceFromTopDuringDrag(d,h(k[k.length-1]),k))}n.setState({lastDrag:(0,o.default)({},d,{mouseY:E})})}})),(0,f.default)((0,c.default)(n),"_handleMouseUp",(function(){clearInterval(n._autoScrollerTimer),window.removeEventListener("mouseup",n._handleMouseUp),window.removeEventListener("touchend",n._handleMouseUp),window.removeEventListener("touchmove",n._handleTouchMove),window.removeEventListener("mousemove",n._handleMouseMove),document.documentElement&&(document.documentElement.style.cursor=""),n._lastScrollDelta=0;var e=n.props,t=e.list,r=e.onMoveEnd,i=n.state,o=i.dragging,a=i.lastDrag;if(o&&a&&r){var s=n._getDragListIndex(),l=n._getDragVisualIndex();if(s!==l)r(n._getVisualListDuringDrag(),t[s],s,l);n.setState({dragging:!1})}})),(0,f.default)((0,c.default)(n),"_lastScrollDelta",0),n.state={useAbsolutePositioning:!1,dragging:!1,lastDrag:null,heights:null},n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"getItemInstance",value:function(e){var t=this._itemRefs.map.get(e);if(!t)throw new Error("key not found");return t.getTemplate()}},{key:"componentWillUnmount",value:function(){this._handleMouseUp()}},{key:"_handleTouchStart",value:function(e,t,n){n.stopPropagation(),this._handleStartDrag(e,t,n.touches[0].pageY)}},{key:"_handleMouseDown",value:function(e,t,n){n.preventDefault(),this._handleStartDrag(e,t,n.pageY)}},{key:"_handleStartDrag",value:function(e,t,n){var r=this;document.documentElement&&(document.documentElement.style.cursor="move"),window.addEventListener("mouseup",this._handleMouseUp),window.addEventListener("touchend",this._handleMouseUp),window.addEventListener("touchmove",this._handleTouchMove),window.addEventListener("mousemove",this._handleMouseMove);var i=this._listRef.current;if(!i)throw new Error("Should not happen");i.contains&&document.activeElement&&i.contains(document.activeElement)&&document.activeElement.blur();var o=this._getKeyFn(),a=null;if(null==this.state.heights){var s=Object.create(null);this.props.list.forEach((function(e){var t=o(e),n=r._itemRefs.map.get(t),i=n?n.getDOMNode().firstElementChild:null,a=n?n.getTemplate():null,l=i instanceof HTMLElement?i.offsetHeight:y.natural,u=a&&"function"==typeof a.getDragHeight&&a.getDragHeight()||l;s[t]={natural:l,drag:u}})),a=s}var l=function(){var i=r.props.list.map(o).indexOf(e),a=null==t?r._getDistance(0,i,!1):t,s=r._getContainer(),l=s&&s!==document.body?s.scrollTop:0;r.setState({useAbsolutePositioning:!0,dragging:!0,lastDrag:{itemKey:e,startY:a,mouseY:a,mouseOffset:n-a+l}})};a?this.setState({heights:a},l):l()}},{key:"_scrollContainer",value:function(e){var t=this._getContainer();t&&(window.scrollBy&&t===document.body?window.scrollBy(0,e):t.scrollTop+=e)}},{key:"_adjustScrollAtEnd",value:function(e){var t=Math.round(e-this._lastScrollDelta);this._scrollContainer(t),this._lastScrollDelta+=t}},{key:"_getDragListIndex",value:function(){var e=this.props.list,n=this.state.lastDrag;if(!n)throw new Error("No drag happened");var r=this._getKeyFn();return t._getIndexOfItemWithKey(r,e,n.itemKey)}},{key:"_getDragVisualIndex",value:function(){var e=this.props,t=e.list,n=e.padding,r=this.state,i=r.dragging,o=r.lastDrag;if(!i||!o)throw new Error("Should not happen");var a=this._getDragListIndex(),s=o.mouseY-o.startY,l=s>0?1:s<0?-1:0,u=a;if(0!==l)for(var c=this._getKeyFn(),d=Math.abs(s),f=a+l;f<t.length&&f>=0;f+=l){var p=this._getItemHeight(c(t[f])).drag;if(d<p/2+n)break;d-=p+n,u=f}return u}},{key:"_getVisualListDuringDrag",value:function(){var e=this.props.list,t=this.state,n=t.dragging,r=t.lastDrag;if(!n||!r)throw new Error("Should not happen: _getVisualListDuringDrag called outside of drag");var i=this._getDragListIndex(),o=this._getDragVisualIndex();return(0,_.default)(e,{$splice:[[i,1],[o,0,e[i]]]})}},{key:"_getItemHeight",value:function(e){return null!=this.state.heights&&e in this.state.heights?this.state.heights[e]:y}},{key:"_getDistance",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props.list;if(t<e)return-this._getDistance(t,e,n,r);for(var i=this.props.padding,o=this._getKeyFn(),a=0,s=e;s<t;s++){var l=this._getItemHeight(o(r[s]));a+=(n?l.drag:l.natural)+i}return a}},{key:"_getDistanceFromTopDuringDrag",value:function(e,n,r){var i=this._getKeyFn(),o=t._getIndexOfItemWithKey(i,r,n),a=this._getDragListIndex(),s=0;if(t._getIndexOfItemWithKey(i,r,e.itemKey)<a){var l=this._getItemHeight(e.itemKey),u=this._getItemHeight(i(r[a]));s=l.drag-u.drag}return e.startY+s+this._getDistance(a,o,!0,r)}},{key:"_getContainer",value:function(){var e=this.props.container;return e?e():null}},{key:"_getKeyFn",value:function(){return t._getKeyFn(this.props.itemKey)}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.springConfig,i=t.container,a=t.padding,s=t.template,l=t.unsetZIndex,u=t.commonProps,c=this.state,d=c.dragging,f=c.lastDrag,h=c.useAbsolutePositioning,_=this._getKeyFn(),b=(0,m.spring)(d?1:0,r),y=d?this._getVisualListDuringDrag():n,w=n.map((function(t,i){var c=_(t),g=d&&f&&f.itemKey===c?{itemSelected:(0,m.spring)(1,r),y:f.mouseY}:{itemSelected:(0,m.spring)(0,r),y:(h?m.spring:function(e,t){return e})(d&&f?e._getDistanceFromTopDuringDrag(f,c,y):e._getDistance(0,i,!1),r)},w=(0,o.default)({anySelected:b},g),E=function(t){return{onMouseDown:function(n){return e._handleMouseDown(c,t(),n)},onTouchStart:function(n){return e._handleTouchStart(c,t(),n)}}},k=e._getItemHeight(c);return p.createElement(m.Motion,{style:w,key:c,children:function(r){var o=r.itemSelected,d=r.anySelected,m=r.y;return p.createElement(v.default,{ref:e._itemRefs.ref(c),y:h?m:null,template:s,padding:a,item:t,itemSelected:o,anySelected:d,height:k,zIndex:l&&!h?"auto":f&&f.itemKey===c?n.length:i,makeDragHandleProps:E,commonProps:u})}})})),E=0;if(!d&&f&&h){var k=this._getDragListIndex();E=(0,m.spring)(this._getDistance(0,k,!1)-f.mouseY,r)}var x=0,S=0;return n.length&&(S=a,h&&(x=this._getDistance(0,n.length,!1)-a)),p.createElement("div",{style:{position:"relative"},ref:this._listRef},p.createElement(m.Motion,{style:{adjustScroll:E,anySelected:b},onRest:function(){d||e.setState({heights:null,useAbsolutePositioning:!1})},children:function(t){var n=t.adjustScroll;return p.createElement("div",{style:{display:h?"block":"none",height:"".concat(x,"px"),marginBottom:"".concat(S,"px")}},i&&p.createElement(g.default,{cb:function(){!d&&f&&h&&e._adjustScrollAtEnd(n)}}))}}),w)}}],[{key:"getDerivedStateFromProps",value:function(e,n){var r=e.list,i=n.lastDrag;if(i){var o=t._getKeyFn(e.itemKey);try{t._getIndexOfItemWithKey(o,r,i.itemKey)}catch(e){return{dragging:!1,lastDrag:null}}}return null}},{key:"_getIndexOfItemWithKey",value:function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(e(t[r])===n)return r;throw new Error("Failed to find drag index")}},{key:"_getKeyFn",value:function(e){return"function"==typeof e?e:function(t){return t[e]}}}]),t}(p.Component);n.default=E,(0,f.default)(E,"propTypes",{itemKey:h.default.oneOfType([h.default.string,h.default.func]).isRequired,template:h.default.func,list:h.default.array.isRequired,onMoveEnd:h.default.func,container:h.default.func,springConfig:h.default.object,constrainDrag:h.default.bool,padding:h.default.number,unsetZIndex:h.default.bool,autoScrollMaxSpeed:h.default.number.isRequired,autoScrollRegionSize:h.default.number.isRequired,commonProps:h.default.object}),(0,f.default)(E,"defaultProps",{springConfig:{stiffness:300,damping:50},padding:10,unsetZIndex:!1,constrainDrag:!1,autoScrollMaxSpeed:15,autoScrollRegionSize:30}),t.exports=n.default,t.exports.default=n.default},{"./MoveContainer":415,"./OnUpdate":416,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/interopRequireWildcard":16,"@babel/runtime/helpers/objectSpread":19,"@babel/runtime/helpers/possibleConstructorReturn":22,"immutability-helper":150,"prop-types":402,react:436,"react-motion":425,"react-multi-ref":431}],419:[function(e,t,n){"use strict";n.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("./mapToZero")),s=o(e("./stripStyle")),l=o(e("./stepper")),u=o(e("performance-now")),c=o(e("raf")),d=o(e("./shouldStopAnimation")),f=o(e("react")),p=o(e("prop-types")),h=1e3/60,m=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,n=i.state,o=n.currentStyle,a=n.currentVelocity,s=n.lastIdealStyle,l=n.lastIdealVelocity;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=e[u];"number"==typeof c&&(t||(t=!0,o=r({},o),a=r({},a),s=r({},s),l=r({},l)),o[u]=c,a[u]=0,s[u]=c,l[u]=0)}t&&i.setState({currentStyle:o,currentVelocity:a,lastIdealStyle:s,lastIdealVelocity:l})},this.startAnimationIfNecessary=function(){i.animationID=c.default((function(e){var t=i.props.style;if(d.default(i.state.currentStyle,t,i.state.currentVelocity))return i.wasAnimating&&i.props.onRest&&i.props.onRest(),i.animationID=null,i.wasAnimating=!1,void(i.accumulatedTime=0);i.wasAnimating=!0;var n=e||u.default(),r=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+r,i.accumulatedTime>10*h&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/h)*h)/h,a=Math.floor(i.accumulatedTime/h),s={},c={},f={},p={};for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m)){var _=t[m];if("number"==typeof _)f[m]=_,p[m]=0,s[m]=_,c[m]=0;else{for(var b=i.state.lastIdealStyle[m],g=i.state.lastIdealVelocity[m],v=0;v<a;v++){var y=l.default(h/1e3,b,g,_.val,_.stiffness,_.damping,_.precision);b=y[0],g=y[1]}var w=l.default(h/1e3,b,g,_.val,_.stiffness,_.damping,_.precision),E=w[0],k=w[1];f[m]=b+(E-b)*o,p[m]=g+(k-g)*o,s[m]=b,c[m]=g}}i.animationID=null,i.accumulatedTime-=a*h,i.setState({currentStyle:f,currentVelocity:p,lastIdealStyle:s,lastIdealVelocity:c}),i.unreadPropStyle=null,i.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyle:p.default.objectOf(p.default.number),style:p.default.objectOf(p.default.oneOfType([p.default.number,p.default.object])).isRequired,children:p.default.func.isRequired,onRest:p.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||s.default(n),i=a.default(r);return{currentStyle:r,currentVelocity:i,lastIdealStyle:r,lastIdealVelocity:i}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(c.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&f.default.Children.only(e)},t}(f.default.Component);n.default=m,t.exports=n.default},{"./mapToZero":422,"./shouldStopAnimation":427,"./stepper":429,"./stripStyle":430,"performance-now":376,"prop-types":402,raf:410,react:436}],420:[function(e,t,n){"use strict";n.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("./mapToZero")),s=o(e("./stripStyle")),l=o(e("./stepper")),u=o(e("performance-now")),c=o(e("raf")),d=o(e("./shouldStopAnimation")),f=o(e("react")),p=o(e("prop-types")),h=1e3/60;var m=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=i.state,n=t.currentStyles,o=t.currentVelocities,a=t.lastIdealStyles,s=t.lastIdealVelocities,l=!1,u=0;u<e.length;u++){var c=e[u],d=!1;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var p=c[f];"number"==typeof p&&(d||(d=!0,l=!0,n[u]=r({},n[u]),o[u]=r({},o[u]),a[u]=r({},a[u]),s[u]=r({},s[u])),n[u][f]=p,o[u][f]=0,a[u][f]=p,s[u][f]=0)}}l&&i.setState({currentStyles:n,currentVelocities:o,lastIdealStyles:a,lastIdealVelocities:s})},this.startAnimationIfNecessary=function(){i.animationID=c.default((function(e){var t=i.props.styles(i.state.lastIdealStyles);if(function(e,t,n){for(var r=0;r<e.length;r++)if(!d.default(e[r],t[r],n[r]))return!1;return!0}(i.state.currentStyles,t,i.state.currentVelocities))return i.animationID=null,void(i.accumulatedTime=0);var n=e||u.default(),r=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+r,i.accumulatedTime>10*h&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/h)*h)/h,a=Math.floor(i.accumulatedTime/h),s=[],c=[],f=[],p=[],m=0;m<t.length;m++){var _=t[m],b={},g={},v={},y={};for(var w in _)if(Object.prototype.hasOwnProperty.call(_,w)){var E=_[w];if("number"==typeof E)b[w]=E,g[w]=0,v[w]=E,y[w]=0;else{for(var k=i.state.lastIdealStyles[m][w],x=i.state.lastIdealVelocities[m][w],S=0;S<a;S++){var C=l.default(h/1e3,k,x,E.val,E.stiffness,E.damping,E.precision);k=C[0],x=C[1]}var I=l.default(h/1e3,k,x,E.val,E.stiffness,E.damping,E.precision),A=I[0],D=I[1];b[w]=k+(A-k)*o,g[w]=x+(D-x)*o,v[w]=k,y[w]=x}}f[m]=b,p[m]=g,s[m]=v,c[m]=y}i.animationID=null,i.accumulatedTime-=a*h,i.setState({currentStyles:f,currentVelocities:p,lastIdealStyles:s,lastIdealVelocities:c}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyles:p.default.arrayOf(p.default.objectOf(p.default.number)),styles:p.default.func.isRequired,children:p.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(s.default),i=r.map((function(e){return a.default(e)}));return{currentStyles:r,currentVelocities:i,lastIdealStyles:r,lastIdealVelocities:i}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(c.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&f.default.Children.only(e)},t}(f.default.Component);n.default=m,t.exports=n.default},{"./mapToZero":422,"./shouldStopAnimation":427,"./stepper":429,"./stripStyle":430,"performance-now":376,"prop-types":402,raf:410,react:436}],421:[function(e,t,n){"use strict";n.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("./mapToZero")),s=o(e("./stripStyle")),l=o(e("./stepper")),u=o(e("./mergeDiff")),c=o(e("performance-now")),d=o(e("raf")),f=o(e("./shouldStopAnimation")),p=o(e("react")),h=o(e("prop-types")),m=1e3/60;function _(e,t,n){var r=t;return null==r?e.map((function(e,t){return{key:e.key,data:e.data,style:n[t]}})):e.map((function(e,t){for(var i=0;i<r.length;i++)if(r[i].key===e.key)return{key:r[i].key,data:r[i].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}}))}function b(e,t,n,r,i,o,s,l,c){for(var d=u.default(r,i,(function(e,r){var i=t(r);return null==i||f.default(o[e],i,s[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:i}})),p=[],h=[],m=[],_=[],b=0;b<d.length;b++){for(var g=d[b],v=null,y=0;y<r.length;y++)if(r[y].key===g.key){v=y;break}if(null==v){var w=e(g);p[b]=w,m[b]=w;var E=a.default(g.style);h[b]=E,_[b]=E}else p[b]=o[v],m[b]=l[v],h[b]=s[v],_[b]=c[v]}return[d,p,h,m,_]}var g=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=b(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,e,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),n=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=0;u<e.length;u++){var c=e[u].style,d=!1;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var p=c[f];"number"==typeof p&&(d||(d=!0,o[u]=r({},o[u]),a[u]=r({},a[u]),s[u]=r({},s[u]),l[u]=r({},l[u]),n[u]={key:n[u].key,data:n[u].data,style:r({},n[u].style)}),o[u][f]=p,a[u][f]=0,s[u][f]=p,l[u][f]=0,n[u].style[f]=p)}}i.setState({currentStyles:o,currentVelocities:a,mergedPropsStyles:n,lastIdealStyles:s,lastIdealVelocities:l})},this.startAnimationIfNecessary=function(){i.unmounting||(i.animationID=d.default((function(e){if(!i.unmounting){var t=i.props.styles,n="function"==typeof t?t(_(i.state.mergedPropsStyles,i.unreadPropStyles,i.state.lastIdealStyles)):t;if(function(e,t,n,r){if(r.length!==t.length)return!1;for(var i=0;i<r.length;i++)if(r[i].key!==t[i].key)return!1;for(i=0;i<r.length;i++)if(!f.default(e[i],t[i].style,n[i]))return!1;return!0}(i.state.currentStyles,n,i.state.currentVelocities,i.state.mergedPropsStyles))return i.animationID=null,void(i.accumulatedTime=0);var r=e||c.default(),o=r-i.prevTime;if(i.prevTime=r,i.accumulatedTime=i.accumulatedTime+o,i.accumulatedTime>10*m&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var a=(i.accumulatedTime-Math.floor(i.accumulatedTime/m)*m)/m,s=Math.floor(i.accumulatedTime/m),u=b(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,n,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),d=u[0],p=u[1],h=u[2],g=u[3],v=u[4],y=0;y<d.length;y++){var w=d[y].style,E={},k={},x={},S={};for(var C in w)if(Object.prototype.hasOwnProperty.call(w,C)){var I=w[C];if("number"==typeof I)E[C]=I,k[C]=0,x[C]=I,S[C]=0;else{for(var A=g[y][C],D=v[y][C],T=0;T<s;T++){var M=l.default(m/1e3,A,D,I.val,I.stiffness,I.damping,I.precision);A=M[0],D=M[1]}var O=l.default(m/1e3,A,D,I.val,I.stiffness,I.damping,I.precision),P=O[0],R=O[1];E[C]=A+(P-A)*a,k[C]=D+(R-D)*a,x[C]=A,S[C]=D}}g[y]=x,v[y]=S,p[y]=E,h[y]=k}i.animationID=null,i.accumulatedTime-=s*m,i.setState({currentStyles:p,currentVelocities:h,lastIdealStyles:g,lastIdealVelocities:v,mergedPropsStyles:d}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}})))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyles:h.default.arrayOf(h.default.shape({key:h.default.string.isRequired,data:h.default.any,style:h.default.objectOf(h.default.number).isRequired})),styles:h.default.oneOfType([h.default.func,h.default.arrayOf(h.default.shape({key:h.default.string.isRequired,data:h.default.any,style:h.default.objectOf(h.default.oneOfType([h.default.number,h.default.object])).isRequired}))]).isRequired,children:h.default.func.isRequired,willEnter:h.default.func,willLeave:h.default.func,didLeave:h.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return s.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,i=e.willLeave,o=e.didLeave,l="function"==typeof n?n(t):n,u=void 0;u=null==t?l:t.map((function(e){for(var t=0;t<l.length;t++)if(l[t].key===e.key)return l[t];return e}));var c=null==t?l.map((function(e){return s.default(e.style)})):t.map((function(e){return s.default(e.style)})),d=null==t?l.map((function(e){return a.default(e.style)})):t.map((function(e){return a.default(e.style)})),f=b(r,i,o,u,l,c,d,c,d),p=f[0];return{currentStyles:f[1],currentVelocities:f[2],lastIdealStyles:f[3],lastIdealVelocities:f[4],mergedPropsStyles:p}},t.prototype.componentDidMount=function(){this.prevTime=c.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(_(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=c.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(d.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=_(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&p.default.Children.only(t)},t}(p.default.Component);n.default=g,t.exports=n.default},{"./mapToZero":422,"./mergeDiff":423,"./shouldStopAnimation":427,"./stepper":429,"./stripStyle":430,"performance-now":376,"prop-types":402,raf:410,react:436}],422:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t},t.exports=n.default},{}],423:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t,n){for(var r={},i=0;i<e.length;i++)r[e[i].key]=i;var o={};for(i=0;i<t.length;i++)o[t[i].key]=i;var a=[];for(i=0;i<t.length;i++)a[i]=t[i];for(i=0;i<e.length;i++)if(!Object.prototype.hasOwnProperty.call(o,e[i].key)){var s=n(i,e[i]);null!=s&&a.push(s)}return a.sort((function(e,n){var i=o[e.key],a=o[n.key],s=r[e.key],l=r[n.key];if(null!=i&&null!=a)return o[e.key]-o[n.key];if(null!=s&&null!=l)return r[e.key]-r[n.key];if(null!=i){for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(r,c)){if(i<o[c]&&l>r[c])return-1;if(i>o[c]&&l<r[c])return 1}}return 1}for(u=0;u<t.length;u++){c=t[u].key;if(Object.prototype.hasOwnProperty.call(r,c)){if(a<o[c]&&s>r[c])return 1;if(a>o[c]&&s<r[c])return-1}}return-1}))},t.exports=n.default},{}],424:[function(e,t,n){"use strict";n.__esModule=!0,n.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},t.exports=n.default},{}],425:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}n.__esModule=!0;var i=e("./Motion");n.Motion=r(i);var o=e("./StaggeredMotion");n.StaggeredMotion=r(o);var a=e("./TransitionMotion");n.TransitionMotion=r(a);var s=e("./spring");n.spring=r(s);var l=e("./presets");n.presets=r(l);var u=e("./stripStyle");n.stripStyle=r(u);var c=e("./reorderKeys");n.reorderKeys=r(c)},{"./Motion":419,"./StaggeredMotion":420,"./TransitionMotion":421,"./presets":424,"./reorderKeys":426,"./spring":428,"./stripStyle":430}],426:[function(e,t,n){(function(e){(function(){"use strict";n.__esModule=!0,n.default=function(){"development"===e.env.NODE_ENV&&(r||(r=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))};var r=!1;t.exports=n.default}).call(this)}).call(this,e("_process"))},{_process:398}],427:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var i="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==i)return!1}return!0},t.exports=n.default},{}],428:[function(e,t,n){"use strict";n.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n.default=function(e,t){return r({},s,t,{val:e})};var i,o=e("./presets"),a=(i=o)&&i.__esModule?i:{default:i},s=r({},a.default.noWobble,{precision:.01});t.exports=n.default},{"./presets":424}],429:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t,n,i,o,a,s){var l=n+(-o*(t-i)+-a*n)*e,u=t+l*e;if(Math.abs(l)<s&&Math.abs(u-i)<s)return r[0]=i,r[1]=0,r;return r[0]=u,r[1]=l,r};var r=[0,0];t.exports=n.default},{}],430:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t},t.exports=n.default},{}],431:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty")),s=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"map",new Map),(0,a.default)(this,"_refFns",new Map)}return(0,o.default)(e,[{key:"ref",value:function(e){var t=this,n=this._refFns.get(e);return n||(n=function(n){null==n?(t._refFns.delete(e),t.map.delete(e)):t.map.set(e,n)},this._refFns.set(e,n)),n}}]),e}();n.default=s},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],432:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=/(\d+(?:\.\d+)?|\.\d+)(m?s)\b/i.exec(e);if(!t)throw new Error("Could not parse time from transition value");return Number(t[1])*(1===t[2].length?1e3:1)}},{}],433:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/extends")),a=i(e("@babel/runtime/helpers/objectWithoutProperties")),s=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/assertThisInitialized")),f=i(e("@babel/runtime/helpers/inherits")),p=i(e("@babel/runtime/helpers/defineProperty")),h=r(e("react")),m=i(e("prop-types")),_=i(e("./getTransitionTimeMs")),b=function(e){function t(e){var n;return(0,s.default)(this,t),n=(0,u.default)(this,(0,c.default)(t).call(this,e)),(0,p.default)((0,d.default)(n),"_removeTransitionEndListener",(function(){})),(0,p.default)((0,d.default)(n),"_main",h.createRef()),(0,p.default)((0,d.default)(n),"_inner",h.createRef()),(0,p.default)((0,d.default)(n),"_onNextTransitionEnd",(function(e,t){n._removeTransitionEndListener();var r,i=function(){n._removeTransitionEndListener(),t()};n._removeTransitionEndListener=function(){n._removeTransitionEndListener=function(){},clearTimeout(r),e.removeEventListener("transitionend",i)},e.addEventListener("transitionend",i);var o=1.1*(0,_.default)(n.props.heightTransition)+500;r=setTimeout(i,o)})),n.state={renderInner:e.expanded||t._visibleWhenClosed(e),closing:!1,fullyClosed:!e.expanded,height:e.expanded?"auto":e.collapsedHeight},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){this._removeTransitionEndListener()}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(!e.expanded&&this.props.expanded){this._removeTransitionEndListener();var r=this._main.current,i=this._inner.current;if(!r||!i)throw new Error("Should not happen");var o="".concat(i.clientHeight,"px");this.setState({height:o}),this._onNextTransitionEnd(r,(function(){n.setState({height:"auto"},(function(){n.props.onChangeEnd&&n.props.onChangeEnd()}))}))}else if(e.expanded&&!this.props.expanded){if(this._removeTransitionEndListener(),!this._inner.current)throw new Error("Should not happen");this.setState({height:"".concat(this._inner.current.clientHeight,"px")},(function(){var e=n._main.current;if(!e)throw new Error("Should not happen");e.clientHeight,n.setState({height:n.props.collapsedHeight,closing:!0}),n._onNextTransitionEnd(e,(function(){n.setState({closing:!1,fullyClosed:!0}),n.props.onChangeEnd&&n.props.onChangeEnd()}))}))}}},{key:"render",value:function(){var e=t._visibleWhenClosed(this.props),n=this.props,r=n.allowOverflowWhenOpen,i=n.children,s=(n.collapsedHeight,n.eagerRender,n.expanded,n.heightTransition),l=(n.onChangeEnd,(0,a.default)(n,["allowOverflowWhenOpen","children","collapsedHeight","eagerRender","expanded","heightTransition","onChangeEnd"])),u=this.state,c=u.height,d=u.fullyClosed,f=u.renderInner?h.createElement("div",{ref:this._inner,style:{overflow:r&&"auto"===c?"visible":"hidden"}},i):null;return h.createElement("div",(0,o.default)({},l,{ref:this._main,style:{height:c,overflow:r&&"auto"===c?"visible":"hidden",display:d&&!e?"none":null,transition:"height ".concat(s)}}),f)}}],[{key:"_visibleWhenClosed",value:function(e){return e.eagerRender||0!==parseFloat(e.collapsedHeight)}},{key:"getDerivedStateFromProps",value:function(e,n){return e.expanded&&(n.closing||n.fullyClosed)?{closing:!1,fullyClosed:!1,renderInner:!0}:e.expanded||!n.closing&&!n.fullyClosed||n.height===e.collapsedHeight?null:{height:e.collapsedHeight,renderInner:n.renderInner||t._visibleWhenClosed(e)}}}]),t}(h.Component);n.default=b,(0,p.default)(b,"propTypes",{expanded:m.default.bool.isRequired,onChangeEnd:m.default.func,collapsedHeight:m.default.string,heightTransition:m.default.string,className:m.default.string,allowOverflowWhenOpen:m.default.bool,eagerRender:m.default.bool}),(0,p.default)(b,"defaultProps",{collapsedHeight:"0",heightTransition:".25s ease",className:"",allowOverflowWhenOpen:!1,eagerRender:!1})},{"./getTransitionTimeMs":432,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/extends":12,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/interopRequireWildcard":16,"@babel/runtime/helpers/objectWithoutProperties":20,"@babel/runtime/helpers/possibleConstructorReturn":22,"prop-types":402,react:436}],434:[function(e,t,n){
/** @license React v17.0.2
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict"},{"object-assign":365}],435:[function(e,t,n){
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";var r=e("object-assign"),i=60103,o=60106;n.Fragment=60107,n.StrictMode=60108,n.Profiler=60114;var a=60109,s=60110,l=60112;n.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),n.Fragment=d("react.fragment"),n.StrictMode=d("react.strict_mode"),n.Profiler=d("react.profiler"),a=d("react.provider"),s=d("react.context"),l=d("react.forward_ref"),n.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function b(){}function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=_.prototype;var v=g.prototype=new b;v.constructor=g,r(v,_.prototype),v.isPureReactComponent=!0;var y={current:null},w=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!E.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:y.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case o:l=!0}}if(l)return a=a(l=e),e=""===r?"."+C(l,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(a,t,n,"",(function(e){return e}))):null!=a&&(x(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+C(s=e[u],u);l+=I(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,n,c=r+C(s,u++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function M(){var e=T.current;if(null===e)throw Error(p(321));return e}var O={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:y,IsSomeRendererActing:{current:!1},assign:r};n.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(p(143));return e}},n.Component=_,n.PureComponent=g,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,n.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=y.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!E.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:l}},n.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},n.createElement=k,n.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:l,render:e}},n.isValidElement=x,n.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:D}},n.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},n.useCallback=function(e,t){return M().useCallback(e,t)},n.useContext=function(e,t){return M().useContext(e,t)},n.useDebugValue=function(){},n.useEffect=function(e,t){return M().useEffect(e,t)},n.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},n.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},n.useMemo=function(e,t){return M().useMemo(e,t)},n.useReducer=function(e,t,n){return M().useReducer(e,t,n)},n.useRef=function(e){return M().useRef(e)},n.useState=function(e){return M().useState(e)},n.version="17.0.2"},{"object-assign":365}],436:[function(e,t,n){"use strict";t.exports=e("./cjs/react.production.min.js")},{"./cjs/react.development.js":434,"./cjs/react.production.min.js":435}],437:[function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:46}],438:[function(e,t,n){
/** @license React v0.20.2
 * scheduler-tracing.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict"},{}],439:[function(e,t,n){
/** @license React v0.20.2
 * scheduler-tracing.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";var r=0;n.__interactionsRef=null,n.__subscriberRef=null,n.unstable_clear=function(e){return e()},n.unstable_getCurrent=function(){return null},n.unstable_getThreadID=function(){return++r},n.unstable_subscribe=function(){},n.unstable_trace=function(e,t,n){return n()},n.unstable_unsubscribe=function(){},n.unstable_wrap=function(e){return e}},{}],440:[function(e,t,n){
/** @license React v0.20.2
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict"},{}],441:[function(e,t,n){
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";var r,i,o,a;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,d=null,f=function(){if(null!==c)try{var e=n.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(f,0),e}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(f,0))},i=function(e,t){d=setTimeout(e,t)},o=function(){clearTimeout(d)},n.unstable_shouldYield=function(){return!1},a=n.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var _=!1,b=null,g=-1,v=5,y=0;n.unstable_shouldYield=function(){return n.unstable_now()>=y},a=function(){},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,E=w.port2;w.port1.onmessage=function(){if(null!==b){var e=n.unstable_now();y=e+v;try{b(!0,e)?E.postMessage(null):(_=!1,b=null)}catch(e){throw E.postMessage(null),e}}else _=!1},r=function(e){b=e,_||(_=!0,E.postMessage(null))},i=function(e,t){g=p((function(){e(n.unstable_now())}),t)},o=function(){h(g),g=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<C(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>C(a,n))void 0!==l&&0>C(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>C(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],A=[],D=1,T=null,M=3,O=!1,P=!1,R=!1;function L(e){for(var t=x(A);null!==t;){if(null===t.callback)S(A);else{if(!(t.startTime<=e))break;S(A),t.sortIndex=t.expirationTime,k(I,t)}t=x(A)}}function j(e){if(R=!1,L(e),!P)if(null!==x(I))P=!0,r(N);else{var t=x(A);null!==t&&i(j,t.startTime-e)}}function N(e,t){P=!1,R&&(R=!1,o()),O=!0;var r=M;try{for(L(t),T=x(I);null!==T&&(!(T.expirationTime>t)||e&&!n.unstable_shouldYield());){var a=T.callback;if("function"==typeof a){T.callback=null,M=T.priorityLevel;var s=a(T.expirationTime<=t);t=n.unstable_now(),"function"==typeof s?T.callback=s:T===x(I)&&S(I),L(t)}else S(I);T=x(I)}if(null!==T)var l=!0;else{var u=x(A);null!==u&&i(j,u.startTime-t),l=!1}return l}finally{T=null,M=r,O=!1}}var V=a;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){P||O||(P=!0,r(N))},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_getFirstCallbackNode=function(){return x(I)},n.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=V,n.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},n.unstable_scheduleCallback=function(e,t,a){var s=n.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:D++,callback:t,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,k(A,e),null===x(I)&&e===x(A)&&(R?o():R=!0,i(j,a-s))):(e.sortIndex=l,k(I,e),P||O||(P=!0,r(N))),e},n.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},{}],442:[function(e,t,n){"use strict";t.exports=e("./cjs/scheduler.production.min.js")},{"./cjs/scheduler.development.js":440,"./cjs/scheduler.production.min.js":441}],443:[function(e,t,n){"use strict";t.exports=e("./cjs/scheduler-tracing.production.min.js")},{"./cjs/scheduler-tracing.development.js":438,"./cjs/scheduler-tracing.production.min.js":439}],444:[function(e,t,n){var r=e("safe-buffer").Buffer;function i(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,i=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var l=a%i,u=Math.min(o-s,i-l),c=0;c<u;c++)n[l+c]=e[s+c];s+=u,(a+=u)%i==0&&this._update(n)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},{"safe-buffer":437}],445:[function(e,t,n){var r=e("inherits"),i=e("./hash"),o=e("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function l(){this.init(),this._w=s,i.call(this,64,56)}function u(e){return e<<5|e>>>27}function c(e){return e<<30|e>>>2}function d(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,l=0|this._e,f=0;f<16;++f)n[f]=e.readInt32BE(4*f);for(;f<80;++f)n[f]=(t=n[f-3]^n[f-8]^n[f-14]^n[f-16])<<1|t>>>31;for(var p=0;p<80;++p){var h=~~(p/20),m=u(r)+d(h,i,o,s)+l+n[p]+a[h]|0;l=s,s=o,o=c(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=l},{"./hash":444,inherits:152,"safe-buffer":437}],446:[function(e,t,n){var r=e("inherits"),i=e("./hash"),o=e("safe-buffer").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function l(){this.init(),this._w=s,i.call(this,64,56)}function u(e,t,n){return n^e&(t^n)}function c(e,t,n){return e&t|n&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(l,i),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,l=0|this._e,h=0|this._f,m=0|this._g,_=0|this._h,b=0;b<16;++b)n[b]=e.readInt32BE(4*b);for(;b<64;++b)n[b]=0|(((t=n[b-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[b-7]+p(n[b-15])+n[b-16];for(var g=0;g<64;++g){var v=_+f(l)+u(l,h,m)+a[g]+n[g]|0,y=d(r)+c(r,i,o)|0;_=m,m=h,h=l,l=s+v|0,s=o,o=i,i=r,r=v+y|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0,this._f=h+this._f|0,this._g=m+this._g|0,this._h=_+this._h|0},l.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=l},{"./hash":444,inherits:152,"safe-buffer":437}],447:[function(e,t,n){(function(r){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,a=e("./ponyfill.js"),s=(i=a)&&i.__esModule?i:{default:i};o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==t?t:Function("return this")();var l=(0,s.default)(o);n.default=l}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":448}],448:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=e.Symbol;"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable";return t}},{}],449:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/inherits")),u=r(e("@babel/runtime/helpers/assertThisInitialized")),c=r(e("@babel/runtime/helpers/defineProperty")),d=r(e("live-set")),f=r(e("./TagTreeNode")),p=Object.freeze([]),h=function(e){function t(e){var n,r;if((0,i.default)(this,t),n=(0,a.default)(this,(0,s.default)(t).call(this,{value:e.root,parent:null,ownedTags:new Set(e.tags.map((function(e){return e.tag}))),executor:function(e){r=e}})),(0,c.default)((0,u.default)((0,u.default)(n)),"_nodeControllers",new Map),(0,c.default)((0,u.default)((0,u.default)(n)),"_lookupTable",void 0),(0,c.default)((0,u.default)((0,u.default)(n)),"_allByTag",void 0),!r)throw new Error;n._nodeControllers.set((0,u.default)((0,u.default)(n)),r),n._lookupTable=new Map([[e.root,[(0,u.default)((0,u.default)(n))]]]),n._allByTag=new Map,e.tags.forEach((function(e){var t=e.tag,r=d.default.active(),i=r.liveSet,o=r.controller;if(n._allByTag.has(t))throw new Error("Tag specified twice: "+t);n._allByTag.set(t,{ownedTags:new Set,liveSet:i,controller:o})})),e.tags.forEach((function(e){var t=e.tag,r=e.ownedBy;r&&r.forEach((function(e){var r=n._allByTag.get(e);if(!r)throw new Error("unknown ownedBy value for ".concat(t,": ").concat(e));r.ownedTags.add(t)}))}));var o={tree:(0,u.default)((0,u.default)(n)),addTaggedValue:function(e,t,r){var i,o=n._allByTag.get(t);if(!o)throw new Error("unknown tag: ".concat(t));var a=new f.default({value:r,parent:e,ownedTags:o.ownedTags,executor:function(e){i=e}});if(!i)throw new Error;n._nodeControllers.set(a,i),o.controller.add(a);var s=n._lookupTable.get(r);s?s.push(a):n._lookupTable.set(r,[a]);var l=n._nodeControllers.get(e);if(!l)throw new Error("parent is not part of TagTree");return l.addOwnedNode(t,a),a},removeTaggedNode:function(e,t,r){var i=n._allByTag.get(t);if(!i)throw new Error("unknown tag: ".concat(t));var a=n._nodeControllers.get(e);if(!a)throw new Error("parent is not part of TagTree");var s=r.getValue(),l=n._lookupTable.get(s);if(!l)throw new Error("node was missing from lookup table before removal");if(l.length>1){var u=l.indexOf(r);if(u<0)throw new Error("node was missing from list in lookup table before removal");l.splice(u,1)}else n._lookupTable.delete(s);r.getOwned().forEach((function(e,t){e.values().forEach((function(e){o.removeTaggedNode(r,t,e)}))})),i.controller.remove(r),a.removeOwnedNode(t,r),n._nodeControllers.delete(r)},end:function(){n._nodeControllers.forEach((function(e){e.end()})),n._allByTag.forEach((function(e){e.controller.end()}))}};return e.executor(o),e.executor=function(){},n}return(0,l.default)(t,e),(0,o.default)(t,[{key:"getNodesForValue",value:function(e){var t=this._lookupTable.get(e);return t?Object.freeze(t.slice()):p}},{key:"getAllByTag",value:function(e){var t=this._allByTag.get(e);if(!t)throw new Error("tag does not exist in TagTree: ".concat(e));return t.liveSet}},{key:"getAll",value:function(){var e=new Map;return this._allByTag.forEach((function(t,n){var r=t.liveSet;e.set(n,r)})),e}}]),t}(f.default);n.default=h,t.exports=n.default,t.exports.default=n.default},{"./TagTreeNode":450,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,"live-set":163}],450:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("live-set")),l=function(){function e(t){var n=this;(0,i.default)(this,e),(0,a.default)(this,"_init",void 0),(0,a.default)(this,"_ownedNodes",new Map),(0,a.default)(this,"_ownedByTag",new Map),this._init=t,this._init.executor({node:this,addOwnedNode:function(e,t){n._ownedNodes.set(t,e);var r=n._ownedByTag.get(e);r||(r=n._createTagEntry(),n._ownedByTag.set(e,r)),r.controller.add(t)},removeOwnedNode:function(e,t){n._ownedNodes.delete(t);var r=n._ownedByTag.get(e);if(!r)throw new Error("tag not owned");r.controller.remove(t)},end:function(){n._ownedByTag.forEach((function(e){e.controller.end()}))}}),this._init.executor=function(){}}return(0,o.default)(e,[{key:"_createTagEntry",value:function(){return s.default.active()}},{key:"getValue",value:function(){return this._init.value}},{key:"getParent",value:function(){return this._init.parent||null}},{key:"getOwnedByTag",value:function(e){var t=this._ownedByTag.get(e);if(!t){if(!this._init.ownedTags.has(e))throw new Error("tag not owned: ".concat(e));t=this._createTagEntry(),this._ownedByTag.set(e,t)}return t.liveSet}},{key:"getOwned",value:function(){var e=new Map;return this._ownedByTag.forEach((function(t,n){var r=t.liveSet;e.set(n,r)})),e}},{key:"getTag",value:function(){var e=this._init.parent;return e?e.getTagOfOwnedNode(this):null}},{key:"ownsNode",value:function(e){return this._ownedNodes.has(e)}},{key:"getTagOfOwnedNode",value:function(e){var t=this._ownedNodes.get(e);if(null==t)throw new Error("node not owned");return t}}]),e}();n.default=l,t.exports=n.default,t.exports.default=n.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],451:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"TagTree",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"TagTreeNode",{enumerable:!0,get:function(){return o.default}});var i=r(e("./TagTree")),o=r(e("./TagTreeNode"))},{"./TagTree":449,"./TagTreeNode":450,"@babel/runtime/helpers/interopRequireDefault":15}],452:[function(e,t,n){var r={iterator:"undefined"!=typeof Symbol?Symbol.iterator:"@@iterator"};function i(e,t){throw new Error("don't know how to "+e+" collection: "+t)}function o(e,t){return"iterator"===t?e[r.iterator]||e.next:e[r[t]]}function a(e){var t=e[r["iterator"]];return t?t.call(e):e.next?e:c(e)?new s(e):f(e)?new l(e):void 0}function s(e){this.arr=e,this.index=0}function l(e){this.obj=e,this.keys=Object.keys(e),this.index=0}s.prototype.next=function(){return this.index<this.arr.length?{value:this.arr[this.index++],done:!1}:{done:!0}},l.prototype.next=function(){if(this.index<this.keys.length){var e=this.keys[this.index++];return{value:[e,this.obj[e]],done:!1}}return{done:!0}};var u=Object.prototype.toString,c="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"==u.call(e)};function d(e){return"function"==typeof e}function f(e){return e instanceof Object&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function p(e){return"number"==typeof e}function h(e){this["@@transducer/reduced"]=!0,this["@@transducer/value"]=e}function m(e){return e instanceof h||e&&e["@@transducer/reduced"]}function _(e){return e["@@transducer/value"]}function b(e){return m(e)?_(e):e}function g(e,t,n){if(c(e)){for(var r=n,s=-1,l=e.length;++s<l;)if(m(r=t["@@transducer/step"](r,e[s]))){r=_(r);break}return t["@@transducer/result"](r)}if(f(e)||o(e,"iterator")){r=n;for(var u=a(e),d=u.next();!d.done;){if(m(r=t["@@transducer/step"](r,d.value))){r=_(r);break}d=u.next()}return t["@@transducer/result"](r)}i("iterate",e)}function v(e,t,n,r){return t=t(n),void 0===r&&(r=t["@@transducer/init"]()),g(e,t,r)}function y(){var e=Array.prototype.slice.call(arguments);return function(t){for(var n=t,r=e.length-1;r>=0;r--)n=e[r](n);return n}}function w(e,t,n){if(!t)return e;switch(n=null!=n?n:1){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};default:return e.bind(t)}}function E(e,t){this.xform=t,this.f=e}function k(e,t,n){return d(e)&&(n=t,t=e,e=null),t=w(t,n),e?c(e)?function(e,t,n){var r=-1,i=e.length,o=Array(i);for(t=w(t,n,2);++r<i;)o[r]=t(e[r],r);return o}(e,t,n):H(e,k(t)):function(e){return new E(t,e)}}function x(e,t){this.xform=t,this.f=e}function S(e,t,n){return d(e)&&(n=t,t=e,e=null),t=w(t,n),e?c(e)?function(e,t,n){var r=e.length,i=[];t=w(t,n,2);for(var o=0;o<r;o++)t(e[o],o)&&i.push(e[o]);return i}(e,t,n):H(e,S(t)):function(e){return new x(t,e)}}function C(e){this.xform=e,this.last=void 0}function I(e,t){this.xform=t,this.f=e}function A(e,t){this.n=e,this.i=0,this.xform=t}function D(e,t){this.n=e,this.i=0,this.xform=t}function T(e,t){this.xform=t,this.f=e,this.dropping=!0}function M(e,t){this.n=e,this.i=0,this.xform=t,this.part=new Array(e)}E.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},E.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},E.prototype["@@transducer/step"]=function(e,t){return this.xform["@@transducer/step"](e,this.f(t))},x.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},x.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},x.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):e},C.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},C.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},C.prototype["@@transducer/step"]=function(e,t){return t!==this.last?(this.last=t,this.xform["@@transducer/step"](e,t)):e},I.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},I.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},I.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):new h(e)},A.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},A.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},A.prototype["@@transducer/step"]=function(e,t){var n;return this.i<this.n&&(e=this.xform["@@transducer/step"](e,t),this.i+1>=this.n&&(e=m(n=e)?n:new h(n))),this.i++,e},D.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},D.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},D.prototype["@@transducer/step"]=function(e,t){return this.i++<this.n?e:this.xform["@@transducer/step"](e,t)},T.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},T.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},T.prototype["@@transducer/step"]=function(e,t){if(this.dropping){if(this.f(t))return e;this.dropping=!1}return this.xform["@@transducer/step"](e,t)},M.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},M.prototype["@@transducer/result"]=function(e){return this.i>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,this.i))):this.xform["@@transducer/result"](e)},M.prototype["@@transducer/step"]=function(e,t){if(this.part[this.i]=t,this.i+=1,this.i===this.n){var n=this.part.slice(0,this.n);return this.part=new Array(this.n),this.i=0,this.xform["@@transducer/step"](e,n)}return e};var O={};function P(e,t){this.f=e,this.xform=t,this.part=[],this.last=O}function R(e,t){this.sep=e,this.xform=t,this.started=!1}function L(e,t){this.xform=t,this.n=e}function j(e,t){this.xform=t,this.n=e,this.i=-1}function N(e){this.xform=e}function V(e){return new N(e)}function B(e,t){return e.push(t),e}function q(e,t){if(c(t)&&2===t.length)e[t[0]]=t[1];else for(var n=Object.keys(t),r=n.length,i=0;i<r;i++)e[n[i]]=t[n[i]];return e}P.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},P.prototype["@@transducer/result"]=function(e){var t=this.part.length;return t>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,t))):this.xform["@@transducer/result"](e)},P.prototype["@@transducer/step"]=function(e,t){var n=this.f(t);return n===this.last||this.last===O?this.part.push(t):(e=this.xform["@@transducer/step"](e,this.part),this.part=[t]),this.last=n,e},R.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},R.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},R.prototype["@@transducer/step"]=function(e,t){if(this.started){var n=this.xform["@@transducer/step"](e,this.sep);return m(n)?n:this.xform["@@transducer/step"](n,t)}return this.started=!0,this.xform["@@transducer/step"](e,t)},L.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},L.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},L.prototype["@@transducer/step"]=function(e,t){for(var n=this.n,r=e,i=0;i<n&&!m(r=this.xform["@@transducer/step"](r,t));i++);return r},j.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},j.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},j.prototype["@@transducer/step"]=function(e,t){return this.i+=1,this.i%this.n==0?this.xform["@@transducer/step"](e,t):e},N.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},N.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},N.prototype["@@transducer/step"]=function(e,t){var n=this.xform,r={"@@transducer/init":function(){return n["@@transducer/init"]()},"@@transducer/result":function(e){return e},"@@transducer/step":function(e,t){var r=n["@@transducer/step"](e,t);return m(r)?_(r):r}};return g(t,r,e)};var U={"@@transducer/init":function(){return[]},"@@transducer/result":function(e){return e}};U["@@transducer/step"]=B;var F={};function H(e,t){return c(e)?v(e,t,U,[]):f(e)?v(e,t,F,{}):e["@@transducer/step"]?(n=e["@@transducer/init"]?e["@@transducer/init"]():new e.constructor,v(e,t,e,n)):o(e,"iterator")?new $(t,e):void i("sequence",e);var n}F["@@transducer/init"]=function(){return{}},F["@@transducer/result"]=function(e){return e},F["@@transducer/step"]=q;var z={};function W(e,t){this.xform=e(z),this.iter=t}function $(e,t){this.iter=a(t),this.items=[],this.stepper=new W(e,a(t))}z["@@transducer/result"]=function(e){return m(e)?_(e):e},z["@@transducer/step"]=function(e,t){return e.items.push(t),e.rest},W.prototype["@@transducer/step"]=function(e){for(var t=e.items.length;e.items.length===t;){var n=this.iter.next();if(n.done||m(n.value)){this.xform["@@transducer/result"](this);break}this.xform["@@transducer/step"](e,n.value)}},$.prototype[r.iterator]=function(){return this},$.prototype.next=function(){return this["@@transducer/step"](),this.items.length?{value:this.items.pop(),done:!1}:{done:!0}},$.prototype["@@transducer/step"]=function(){this.items.length||this.stepper["@@transducer/step"](this)},t.exports={reduce:g,transformer:function(e){var t={"@@transducer/init":function(){throw new Error("init value unavailable")},"@@transducer/result":function(e){return e}};return t["@@transducer/step"]=e,t},Reduced:h,isReduced:m,iterator:a,push:B,merge:q,transduce:v,seq:H,toArray:function(e,t){return t?v(e,t,U,[]):g(e,U,[])},toObj:function(e,t){return t?v(e,t,F,{}):g(e,F,{})},toIter:function(e,t){return t?new $(t,e):a(e)},into:function(e,t,n){return c(e)?v(n,t,U,e):f(e)?v(n,t,F,e):e["@@transducer/step"]?v(n,t,e,e):void i("into",e)},compose:y,map:k,filter:S,remove:function(e,t,n){return d(e)&&(n=t,t=e,e=null),t=w(t,n),S(e,(function(e){return!t(e)}))},cat:V,mapcat:function(e,t){return y(k(e=w(e,t)),V)},keep:function(e){return S(e,(function(e){return null!=e}))},dedupe:function e(t){return t?H(t,e()):function(e){return new C(e)}},take:function e(t,n){return p(t)&&(n=t,t=null),t?H(t,e(n)):function(e){return new A(n,e)}},takeWhile:function e(t,n,r){return d(t)&&(r=n,n=t,t=null),n=w(n,r),t?H(t,e(n)):function(e){return new I(n,e)}},takeNth:function e(t,n){return 1===arguments.length?(n=t,function(e){return new j(n,e)}):H(t,e(n))},drop:function e(t,n){return p(t)&&(n=t,t=null),t?H(t,e(n)):function(e){return new D(n,e)}},dropWhile:function e(t,n,r){return d(t)&&(r=n,n=t,t=null),n=w(n,r),t?H(t,e(n)):function(e){return new T(n,e)}},partition:function e(t,n){return p(t)&&(n=t,t=null),t?H(t,e(n)):function(e){return new M(n,e)}},partitionBy:function e(t,n,r){return d(t)&&(r=n,n=t,t=null),n=w(n,r),t?H(t,e(n)):function(e){return new P(n,e)}},interpose:function e(t,n){return 1===arguments.length?(n=t,function(e){return new R(n,e)}):H(t,e(n))},repeat:function e(t,n){return 1===arguments.length?(n=t,function(e){return new L(n,e)}):H(t,e(n))},range:function(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=n;return t},LazyTransformer:$}},{}],453:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=(0,r.defonce)(e,(function(){var e,t=i.stream((function(t){e=t})).toProperty();if(t.onValue((function(){})),!e)throw new Error("Should not happen, emitter was not set");var n=e;return{property:t,emit:function(e){n.emit(e)}}}),"--udkefir-"+n);return o.emit(t),o.property};var r=e("ud"),i=e("kefir");t.exports=n.default,t.exports.default=n.default},{kefir:159,ud:454}],454:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=s(e,(function(){if(!e.hot)return{fn:null,wrapper:t};var n={fn:null,wrapper:null},i=r(t.length).map((function(e){return"a"+e})).join(",");return n.wrapper=new Function("shared","\n      'use strict';\n      return function ".concat(t.name,"__ud_wrapper(").concat(i,") {\n        if (new.target) {\n          return Reflect.construct(shared.fn, arguments, new.target);\n        } else {\n          return shared.fn.apply(this, arguments);\n        }\n      };\n      "))(n),t.prototype?(n.wrapper.prototype=Object.create(t.prototype),n.wrapper.prototype.constructor=n.wrapper):n.wrapper.prototype=t.prototype,n}),"--defn-shared-"+n);i.fn=t,e.hot&&(t.prototype&&i.wrapper.prototype&&Object.getPrototypeOf(i.wrapper.prototype)!==t.prototype&&Object.setPrototypeOf(i.wrapper.prototype,t.prototype),Object.setPrototypeOf(i.wrapper,t));return i.wrapper},n.defobj=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=s(e,(function(){return t}),"--defobj-"+n);r!==t&&function(e,t){Object.getOwnPropertyNames(e).filter((function(e){return!Object.prototype.hasOwnProperty.call(t,e)})).forEach((function(t){delete e[t]}));var n=Object.getOwnPropertyNames(t);Object.defineProperties(e,i(n,n.map((function(e){return Object.getOwnPropertyDescriptor(t,e)})).filter(Boolean).map((function(e){return{value:e.value,enumerable:e.enumerable,writable:!0,configurable:!0}}))))}(r,t);return r},n.defonce=s,n.markReloadable=a;var r=e("array-range"),i=e("zip-object"),o=new WeakMap;function a(e){e.hot&&e.hot.accept()}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a(e);var r=o.get(e);if(r||(r=new Set,o.set(e,r)),r.has(n))throw new Error("ud functions can only be used once per module with a given key");r.add(n);var i=!1,s=void 0;return e.hot&&(e.hot.data&&e.hot.data.__ud__&&Object.prototype.hasOwnProperty.call(e.hot.data.__ud__,n)&&(s=e.hot.data.__ud__[n],i=!0),e.hot.dispose((function(e){e.__ud__||(e.__ud__={}),e.__ud__[n]=s}))),i||(s=t()),s}},{"array-range":30,"zip-object":466}],455:[function(e,t,n){"use strict";t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],a=1;a<r;++a)if(o=i,t(i=e[a],o)){if(a===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;o<n;++o,i=r)if(i=r,(r=e[o])!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},{}],456:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],457:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],458:[function(e,t,n){(function(t,r){(function(){var i=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),l=r[n];n<o;l=r[++n])m(l)||!y(l)?a+=" "+l:a+=" "+s(l);return a},n.deprecate=function(e,i){if(g(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,a={};function s(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(t)?r.showHidden=t:t&&n._extend(r,t),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),c(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function c(e,t,r){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var o=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(_(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,t);if(o)return o;var a=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),E(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(t);if(0===a.length){if(k(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return d(t)}var u,y="",x=!1,S=["{","}"];(p(t)&&(x=!0,S=["[","]"]),k(t))&&(y=" [Function"+(t.name?": "+t.name:"")+"]");return v(t)&&(y=" "+RegExp.prototype.toString.call(t)),w(t)&&(y=" "+Date.prototype.toUTCString.call(t)),E(t)&&(y=" "+d(t)),0!==a.length||x&&0!=t.length?r<0?v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=x?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)I(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))})),o}(e,t,r,s,a):a.map((function(n){return f(e,t,r,s,n,x)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,y,S)):S[0]+y+S[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?c(e,l.value,null):c(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function _(e){return"number"==typeof e}function b(e){return"string"==typeof e}function g(e){return void 0===e}function v(e){return y(e)&&"[object RegExp]"===x(e)}function y(e){return"object"==typeof e&&null!==e}function w(e){return y(e)&&"[object Date]"===x(e)}function E(e){return y(e)&&("[object Error]"===x(e)||e instanceof Error)}function k(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(g(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var r=t.pid;a[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=h,n.isNull=m,n.isNullOrUndefined=function(e){return null==e},n.isNumber=_,n.isString=b,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=g,n.isRegExp=v,n.isObject=y,n.isDate=w,n.isError=E,n.isFunction=k,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":"),[e.getDate(),C[e.getMonth()],t].join(" ")),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!y(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":457,_process:398,inherits:456}],459:[function(e,t,n){(function(n){(function(){"use strict";var r=e("foreach"),i=e("available-typed-arrays"),o=e("call-bind/callBound"),a=o("Object.prototype.toString"),s=e("has-symbols")()&&"symbol"==typeof Symbol.toStringTag,l=i(),u=o("String.prototype.slice"),c={},d=e("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;s&&d&&f&&r(l,(function(e){if("function"==typeof n[e]){var t=new n[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=f(t),i=d(r,Symbol.toStringTag);if(!i){var o=f(r);i=d(o,Symbol.toStringTag)}c[e]=i.get}}));var p=e("is-typed-array");t.exports=function(e){return!!p(e)&&(s?function(e){var t=!1;return r(c,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(e){}})),t}(e):u(a(e),8,-1))}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":460,"call-bind/callBound":53,"es-abstract/helpers/getOwnPropertyDescriptor":461,foreach:143,"has-symbols":146,"is-typed-array":463}],460:[function(e,t,n){(function(e){(function(){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];t.exports=function(){for(var t=[],r=0;r<n.length;r++)"function"==typeof e[n[r]]&&(t[t.length]=n[r]);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],461:[function(e,t,n){arguments[4][47][0].apply(n,arguments)},{dup:47,"get-intrinsic":462}],462:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"function-bind":145,has:148,"has-symbols":146}],463:[function(e,t,n){(function(n){(function(){"use strict";var r=e("foreach"),i=e("available-typed-arrays"),o=e("call-bind/callBound"),a=o("Object.prototype.toString"),s=e("has-symbols")()&&"symbol"==typeof Symbol.toStringTag,l=i(),u=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},c=o("String.prototype.slice"),d={},f=e("es-abstract/helpers/getOwnPropertyDescriptor"),p=Object.getPrototypeOf;s&&f&&p&&r(l,(function(e){var t=new n[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=p(t),i=f(r,Symbol.toStringTag);if(!i){var o=p(r);i=f(o,Symbol.toStringTag)}d[e]=i.get}));t.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s){var t=c(a(e),8,-1);return u(l,t)>-1}return!!f&&function(e){var t=!1;return r(d,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":460,"call-bind/callBound":53,"es-abstract/helpers/getOwnPropertyDescriptor":461,foreach:143,"has-symbols":146}],464:[function(e,t,n){t.exports=e("./lib/Observable.js").Observable},{"./lib/Observable.js":465}],465:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.Observable=void 0;var a=function(){return"function"==typeof Symbol},s=function(e){return a()&&Boolean(Symbol[e])},l=function(e){return s(e)?Symbol[e]:"@@"+e};a()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var u=l("iterator"),c=l("observable"),d=l("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function p(e){var t=e.constructor;return void 0!==t&&null===(t=t[d])&&(t=void 0),void 0!==t?t:k}function h(e){return e instanceof k}function m(e){m.log?m.log(e):setTimeout((function(){throw e}))}function _(e){Promise.resolve().then((function(){try{e()}catch(e){m(e)}}))}function b(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(e){m(e)}}function g(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function v(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(g(e),!i)throw n;i.call(r,n);break;case"complete":g(e),i&&i.call(r)}}catch(e){m(e)}"closed"===e._state?b(e):"running"===e._state&&(e._state="ready")}function y(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void _((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(v(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void v(e,t,n);e._queue.push({type:t,value:n})}}var w=function(){function e(t,n){r(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new E(this);try{this._cleanup=n.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return o(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(g(this),b(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),E=function(){function e(t){r(this,e),this._subscription=t}return o(e,[{key:"next",value:function(e){y(this._subscription,"next",e)}},{key:"error",value:function(e){y(this._subscription,"error",e)}},{key:"complete",value:function(){y(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),k=function(){function e(t){if(r(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return o(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this),r=arguments.length>1,i=!1,o=arguments[1];return new n((function(n){return t.subscribe({next:function(t){var a=!i;if(i=!0,!a||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=p(this);return new i((function(t){var r,o=0;return function e(a){r=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),a()}});i.push(o)},error:function(e){r.error(e)},complete:function(){a()}});function a(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:c,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,c);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return h(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(s("iterator")&&(r=f(t,u)))return new n((function(e){_((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var a,s=r.call(t)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(e.next(l),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){_((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)((function(e){_((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:d,get:function(){return this}}]),e}();n.Observable=k,a()&&Object.defineProperty(k,Symbol("extensions"),{value:{symbol:c,hostReportError:m},configurable:!0})},{}],466:[function(e,t,n){t.exports=function(e,t){1==arguments.length&&(t=e[1],e=e[0]);for(var n={},r=0;r<e.length;r+=1)n[e[r]]=t[r];return n}},{}],467:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var i=r(e("querystring")),o=r(e("pdelay")),a=r(e("./cachebust-url"));const s=64e3,l=5,u={};function c(e){if(!e||"string"!=typeof e.url)throw new Error("URL must be given");return new Promise((function(t,n){const r=e.method?e.method:"GET";let d=e.url,f=null;e.data&&(f="string"==typeof e.data?e.data:i.default.stringify(e.data),"GET"!==r&&"HEAD"!==r||(d+=(/\?/.test(d)?"&":"?")+f,f=null));const p=null!=e.canRetry?e.canRetry:"GET"===r||"HEAD"===r,h=d.match(/(?:(?:[a-z]+:)?\/\/)?([^/]*)\//);if(!h)throw new Error("Failed to match url");const m=h[1];if(Object.prototype.hasOwnProperty.call(u,m))return void n(new Error(`Server at ${d} has told us to stop connecting`));e.cachebust&&(d=(0,a.default)(d));const _=new(e.XMLHttpRequest||window.XMLHttpRequest);if(Object.assign(_,e.xhrFields),_.onerror=function(r){if((e.retryNum||0)<l&&(502===_.status||(0===_.status||_.status>=500)&&p))return void t(function(e){const t=(e.retryNum||0)+1,n=Math.min(1e3*Math.pow(2,t),s);return(0,o.default)(n).then((()=>c(Object.assign({},e,{retryNum:t}))))}(e));const i=Object.assign(new Error(`Failed to load ${d}`),{event:r,xhr:_,status:_.status});490==_.status&&(u[m]=!0),n(i)},_.onload=function(e){200===_.status?t({xhr:_,text:_.responseText}):_.onerror(e)},_.open(r,d,!0),e.headers){const{headers:t}=e;Object.keys(t).forEach((e=>{const n=t[e];_.setRequestHeader(e,n)}))}_.send(f)}))}},{"./cachebust-url":468,"@babel/runtime/helpers/interopRequireDefault":15,pdelay:375,querystring:409}],468:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.test(e)?e.replace(r,"$1_="+i++):e+(/\?/.test(e)?"&":"?")+"_="+i++};const r=/([?&])_=[^&]*/;let i=Date.now()+Math.floor(Math.random()*Math.pow(2,32))},{}],469:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ATTRIBUTE_WHITELIST=void 0,n.default=function(e){return e.replace(/(^|>)([^<]+)/g,((e,t,n)=>t+(n.trim().length?"...":""))).replace(/\s([^\s=]+)\s*=\s*"[^"]+"/g,((e,t)=>r.has(t)?e:` ${t}="..."`))};const r=new Set(["class","rel","target","type","tabindex","id","style","role","contenteditable","aria-expanded","aria-hidden","aria-disabled","aria-haspopup","aria-labelledby","aria-busy","aria-multiselectable","name","data-action-data","data-item-id","data-msg-id","data-map-id","g_editable","jsnamespace","jsaction"]);n.ATTRIBUTE_WHITELIST=r},{}],470:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=[],n=[];let r=e,a=0;for(;r;){const s=Array.from(r.attributes).map((e=>{let{name:t,value:n}=e;return i.default` ${t}="${o.ATTRIBUTE_WHITELIST.has(t)?n:"..."}"`})).join(""),l=a,u=r.children.length-1-a,c=e!==r&&l?`[${l}]`:"",d=e!==r&&u?`[${u}]`:"";t.push(i.default`<${r.nodeName.toLowerCase()}${{__html:s}}>${c}`),n.push(i.default`${d}</${r.nodeName.toLowerCase()}>`),r.parentElement&&(a=Array.from(r.parentElement.children).indexOf(r)),r=r.parentElement}return t.reverse().join("")+(0,o.default)(e.innerHTML)+n.join("")};var i=r(e("auto-html")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("./censorHTMLstring"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}},{"./censorHTMLstring":469,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34}],471:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return Promise.all(a.map((e=>function(e){return new Promise((t=>{const n=document.createElement("img");n.onload=function(){t(!0)},n.addEventListener("loadend",(function(){t(!1)})),n.onerror=function(){t(!1)},n.src=(0,i.default)(e)}))}(e).then((t=>[e,t]))))).then((e=>(0,o.default)(e)))};var i=r(e("./cachebust-url")),o=r(e("lodash/fromPairs"));const a=["https://www.inboxsdk.com/images/logo-red.png"]},{"./cachebust-url":468,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/fromPairs":319}],472:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return{resolve:e,reject:t,promise:n}}},{}],473:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){let n=e.parentElement;for(;n;){if(t(n))return n;n=n.parentElement}return null}},{}],474:[function(e,t,n){(function(e){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const t=e.chrome;if(t&&t.extension&&t.extension.getURL)return t.extension.getURL("");return null}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],475:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e,t){const n=e.get(t);if(void 0===n)throw new Error("Key not found in map");return n};n.default=r},{}],476:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e="undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-session-id");if("string"==typeof e)return e;{const e=Date.now()+"-"+Math.random();return"undefined"!=typeof document&&document.documentElement.setAttribute("data-inboxsdk-session-id",e),e}}},{}],477:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(""+new Error("Stack saver").stack).replace(/^([^\n]*\n){2}/,"")}},{}],478:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=document.createElement("div");return t.innerHTML=e.replace(/<[^>]*>?/g,""),t.textContent}},{}],479:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.offsetWidth>0||e.offsetHeight>0}},{}],480:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){let r;if(u()){const i=function(r,o){if(r>3)throw o||new Error("Ran out of loadScript attempts for unknown reason");return(0,s.default)({url:e,cachebust:r>0,XMLHttpRequest:n?n.XMLHttpRequest:void 0}).then((o=>{const s=o.text,u=eval,c=[];n&&n.disableSourceMappingURL?c.push(s.replace(/\/\/# sourceMappingURL=(?!data:)[^\n]*\n?$/,"")):c.push(s),n&&n.nowrap||(c.unshift("(function(){"),c.push("\n});")),c.push("\n//# sourceURL="+e+"\n");const d=c.join("");let f;try{f=u(d)}catch(t){if(t&&"SyntaxError"===t.name)return(0,a.default)(t,{retryNum:r,caughtSyntaxError:!0,url:e,message:`SyntaxError in loading ${e}. Did we not load it fully? Trying again...`},{}),(0,l.default)(5e3).then((()=>i(r+1,t)));throw t}n&&n.nowrap||f.call(t)}))};r=i(0,null)}else r=c(e,!0).catch((()=>c(e,!1).then((()=>{console.warn("Script "+e+" included without CORS headers. Error logs might be censored by the browser.")}))));return r.catch((t=>(0,o.default)().then((n=>{(0,a.default)(t,{url:e,connectivityTestResults:n,status:t&&t.status,response:t&&t.xhr?t.xhr.responseText:null,message:"Failed to load script"},{})})))),r};var i=r(e("lodash/once")),o=r(e("./connectivity-test")),a=r(e("./log-error")),s=r(e("./ajax")),l=r(e("pdelay"));const u=(0,i.default)((function(){return!(!t.chrome||!t.chrome.extension)||!(!t.safari||!t.safari.extension)}));function c(e,t){const n=document.createElement("script");n.type="text/javascript",t&&(n.crossOrigin="anonymous");const r=new Promise(((t,r)=>{n.addEventListener("error",(function(t){r(t.error||new Error(t.message||"Load failure: "+e,t.filename,t.lineno,t.column))}),!1),n.addEventListener("load",(function(){setTimeout(t,1)}),!1)}));if(n.src=e,!document.head)throw new Error("missing head");return document.head.appendChild(n),r}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":467,"./connectivity-test":471,"./log-error":481,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346,pdelay:375}],481:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if("undefined"==typeof document)throw e;try{if(function(e){if((0,c.default)(e))return f.has(e);return!1}(e))return;p(e),e instanceof Error||(console.warn("First parameter to Logger.error was not an error object:",e),p(e=new Error("Logger.error called with non-error: "+e)));const{appIds:r,implVersion:i,isUsingSyncAPI:o,userEmailHash:l}=n,m=n.loaderVersion||u.BUILD_VERSION,_=!!n.sentByApp,b={};for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))try{const n=e[t];JSON.stringify(n),b[t]=n}catch(e){}Object.keys(b).length>0&&(t={errorProperties:b,details:t});const g=(0,a.default)(),v=["Error logged:",e];e&&e.stack&&v.push("\n\nOriginal error stack:\n"+e.stack),v.push("\n\nError logged from:\n"+g),t&&v.push("\n\nError details:",t),v.push("\n\nExtension App Ids:",JSON.stringify(r,null,2)),v.push("\nSent by App:",_),v.push("\nSession Id:",d),v.push("\nExtension Id:",(0,s.default)()),v.push("\nInboxSDK Loader Version:",m),v.push("\nInboxSDK Implementation Version:",i),v.push("\nIs Using Sync API:",o),console.error(...v);const y={message:e&&e.message||e,stack:e&&e.stack,loggedFrom:g,details:t,appIds:r,sentByApp:_,sessionId:d,emailHash:l,extensionId:(0,s.default)(),loaderVersion:m,implementationVersion:i,isUsingSyncAPI:o,origin:document.location.origin,timestamp:1e3*Date.now()};h(y),"true"===document.documentElement.getAttribute("inboxsdk-emit-error-event")&&document.documentElement.dispatchEvent(new CustomEvent("inboxSDKerror",{bubbles:!1,cancelable:!1,detail:{message:e&&e.message||e,stack:e&&e.stack,loggedFrom:g,details:t,sentByApp:_}}))}catch(r){m(r,[e,t,n])}};var i=r(e("./ajax")),o=r(e("./rate-limit")),a=r(e("./get-stack-trace")),s=r(e("./get-extension-id")),l=r(e("./get-session-id")),u=e("./version"),c=r(e("lodash/isObject"));const d=(0,l.default)();const f=(!t.__inboxsdk_extensionSeenErrors&&t.WeakMap&&Object.defineProperty(t,"__inboxsdk_extensionSeenErrors",{value:new t.WeakMap}),{has(e){if(t.__inboxsdk_extensionSeenErrors)return t.__inboxsdk_extensionSeenErrors.has(e);try{return!!e.__inboxsdk_extensionHasSeenError}catch(e){return console.error(e),!1}},add(e){if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.set)t.__inboxsdk_extensionSeenErrors.set(e,!0);else if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.add)t.__inboxsdk_extensionSeenErrors.add(e);else try{Object.defineProperty(e,"__inboxsdk_extensionHasSeenError",{value:!0})}catch(e){console.error(e)}}});function p(e){(0,c.default)(e)&&f.add(e)}const h=(0,o.default)((function(e){try{(0,i.default)({url:"https://api.inboxsdk.com/api/v2/errors",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)}).catch((t=>{m(t,[e])}))}catch(t){m(t,[e])}}),6e4,10);function m(e,t){console.error("ERROR REPORTING ERROR",e),console.error("ORIGINAL ERROR",t)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":467,"./get-extension-id":474,"./get-session-id":476,"./get-stack-trace":477,"./rate-limit":483,"./version":484,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isObject":334}],482:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){let r=[];const i=[];let o=!1;function a(){i.shift()(),i.length?s():o=!1}function s(){o=!0;const e=function(){const e=Date.now()-t;if(r=r.filter((t=>t>e)),r.length>=n)return r[0]-e;return-1}();e>0?setTimeout(a,e):a()}return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];let l;const u=new Promise(((t,i)=>{l=()=>{r.push(Date.now());try{t(e.apply(this,n))}catch(e){i(e)}}}));if(!l)throw new Error("Should not happen");return i.push(l),o||s(),u}}},{}],483:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){let r=[];return function(){const i=Date.now();if(r=r.filter((e=>e>i-t)),r.length>=n)throw new Error("Function rate limit exceeded");r.push(i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e.apply(this,a)}}},{}],484:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BUILD_VERSION=void 0;n.BUILD_VERSION="0.7.25-1679357874544-abbce3ccb30cb365",t.hot&&t.hot.accept()},{}],485:[function(e,t,n){"use strict";e("./loading/platform-implementation-loader").default._loadScript=e("./loading/load-platform-implementation-DEV")(500),t.exports=e("./inboxsdk")},{"./inboxsdk":486,"./loading/load-platform-implementation-DEV":487,"./loading/platform-implementation-loader":488}],486:[function(e,t,n){(function(t){(function(){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.LOADER_VERSION=void 0,n.load=function(e,t,n){return n=Object.assign({globalErrorLogging:!0},n,{VERSION:a,REQUESTED_API_VERSION:e}),r.default.load(t,n)},n.loadScript=void 0;t(e("../common/log-error"));var r=t(e("./loading/platform-implementation-loader")),i=e("../common/version"),o=t(e("../common/load-script"));const a=i.BUILD_VERSION;n.LOADER_VERSION=a;const s=o.default;n.loadScript=s;const l=document.location.origin;-1!=["https://mail.google.com","https://inbox.google.com"].indexOf(l)&&r.default.preload()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/load-script":480,"../common/log-error":481,"../common/version":484,"./loading/platform-implementation-loader":488,"@babel/runtime/helpers/interopRequireDefault":15}],487:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("lodash/once"));t.exports=function(t){return(0,r.default)((()=>new Promise(((n,r)=>{setTimeout((()=>{try{e("../../platform-implementation-js/main"),n()}catch(e){r(e)}}),t)}))))}},{"../../platform-implementation-js/main":705,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],488:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/once")),o=r(e("../../common/load-script"));const a={load:(e,n)=>Promise.resolve().then((()=>{if(!t.__InboxSDKImpLoader)return a._loadScript().then((()=>{if(!t.__InboxSDKImpLoader)throw new Error("Implementation file did not load correctly")}))})).then((()=>t.__InboxSDKImpLoader.load("0.1",e,n))),_loadScript:(0,i.default)((function(){return(0,o.default)("https://www.inboxsdk.com/build/platform-implementation.js",{nowrap:!0})})),preload(){a._loadScript()}};var s=a;n.default=s}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/load-script":480,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],489:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=Object.freeze({NAVIGATION:"NAVIGATION",LINK:"LINK",GROUPER:"GROUPER",MANAGE:"MANAGE"});n.default=r},{}],490:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ROUTE_TYPES=n.NATIVE_ROUTE_IDS=n.NATIVE_LIST_ROUTE_IDS=void 0;const r=Object.freeze({INBOX:"inbox/:page",ALL_MAIL:"all/:page",SENT:"sent/:page",STARRED:"starred/:page",DRAFTS:"drafts/:page",SNOOZED:"snoozed/:page",DONE:"done",REMINDERS:"reminders",LABEL:"label/:labelName/:page",TRASH:"trash/:page",SPAM:"spam/:page",IMPORTANT:"imp/:page",SEARCH:"search/:query/:page",THREAD:"inbox/:threadID",CHATS:"chats/:page",CHAT:"chats/:chatID",CONTACTS:"contacts/:page",CONTACT:"contacts/:contactID",SETTINGS:"settings/:section",SCHEDULED:"scheduled",CHAT_WELCOME:"chat/welcome",CHAT_DM:"chat/dm/:chatID",SPACES_WELCOME:"rooms/welcome",SPACE:"chat/space/:spaceID",MEET:"calls",ANY_LIST:"*"});n.NATIVE_ROUTE_IDS=r;const i=Object.freeze({INBOX:r.INBOX,ALL_MAIL:r.ALL_MAIL,SENT:r.SENT,STARRED:r.STARRED,DRAFTS:r.DRAFTS,SNOOZED:r.SNOOZED,DONE:r.DONE,REMINDERS:r.REMINDERS,LABEL:r.LABEL,TRASH:r.TRASH,SPAM:r.SPAM,IMPORTANT:r.IMPORTANT,SEARCH:r.SEARCH,ANY_LIST:r.ANY_LIST});n.NATIVE_LIST_ROUTE_IDS=i;const o=Object.freeze({LIST:"LIST",THREAD:"THREAD",SETTINGS:"SETTINGS",CHAT:"CHAT",SPACE:"SPACE",MEET:"MEET",CUSTOM:"CUSTOM",UNKNOWN:"UNKNOWN"});n.ROUTE_TYPES=o},{}],491:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SECTION_NAMES=void 0;const r=Object.freeze({INBOX_STATE:"INBOX_STATE",METADATA_STATE:"METADATA_STATE",OTHER:"OTHER"});n.SECTION_NAMES=r},{}],492:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!document.getElementById("inboxsdk__style")){var e=document.createElement("style");if(e.id="inboxsdk__style",a.onValue((t=>{e.textContent=(0,o.default)(t)})),!document.head)throw new Error("missing head");document.head.appendChild(e)}};var i=r(e("ud-kefir")),o=r(e("../../lib/rewriteCssWithIdMap")),a=(0,i.default)(t,"/* suggestions */\n\n.inboxsdk__suggestions_separator_before {\n  padding-bottom: 2px !important;\n}\n\n.inboxsdk__suggestions_separator_after {\n  border-top: 1px solid #e5e5e5;\n  padding-top: 2px !important;\n}\n\n/* buttons */\n\ndiv.T-I.inboxsdk__button {\n  -webkit-user-select: none;\n  min-width: 27px;\n}\n\n.inboxsdk__no_bg {\n  background: none;\n}\n\n.inboxsdk__button.inboxsdk__button_disabled {\n  opacity: 0.55;\n}\n\n.inboxsdk__button_icon + .inboxsdk__button_text {\n  margin-left: 5px;\n}\n\n.inboxsdk__button_icon {\n  display: inline-block;\n}\n\n.inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n  vertical-align: middle;\n  margin-top: -2px;\n  user-drag: none;\n  -moz-user-select: none;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__button_green_inactive {\n  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n  background-color: #53a93f;\n  background-image: -webkit-linear-gradient(top, transparent, transparent);\n  background-image: linear-gradient(top, transparent, transparent);\n  border: 1px solid transparent;\n  color: #fff;\n  text-shadow: none;\n}\n\n.inboxsdk__button_green_hover {\n  -webkit-box-shadow: inset 0 -1px 0 #4c8534;\n  box-shadow: inset 0 -1px 0 #4c8534;\n  background-color: #65b045;\n  background-image: -webkit-linear-gradient(top, transparent, transparent);\n  background-image: linear-gradient(top, transparent, transparent);\n  border: 1px solid transparent;\n  border-bottom: 1px solid #4c8534;\n  text-shadow: none;\n}\n\n.inboxsdk__button_green_active {\n  -webkit-box-shadow: inset 0 1px 0 #2f6124;\n  box-shadow: inset 0 1px 0 #2f6124;\n  background: #3e802f;\n  border: 1px solid transparent;\n  border-top: 1px solid #2f6124;\n  color: #fff;\n  text-shadow: none;\n}\n\n.inboxsdk__menu {\n  min-width: 1em;\n  min-height: 1em;\n  padding: 0px;\n  overflow: visible;\n  max-height: none;\n\n  /* Copied from Gmail's .J-M class */\n  z-index: 7;\n  cursor: default;\n  font-size: 13px;\n  margin: 0;\n  outline: none;\n}\n\n.inboxsdk__menu > .inboxsdk__menuContent {\n  padding: 0;\n  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),\n    0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.2);\n  transition: opacity 0.218s;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background: #fff;\n  outline: none;\n}\n\n.f4.J-N-JX.inboxsdk__message_more_icon {\n  height: 16px;\n  margin-top: 1px;\n  width: 16px;\n}\n\n/* end */\n\n/* compose buttons */\n\n/* fix compose mole position when sidebar is open */\n/*\nsteps to repro:\n1. open compose mole\n2. open non-native sidebar\n3. mole overlaps sidebar\n*/\n.dw .nH > .no .nH.nn:last-child[style='width: 320px;'] {\n  width: 376px !important;\n}\n\n/* fix native button wrapping */\n.inboxsdk__compose .a8X {\n  overflow: visible;\n}\n\n.inboxsdk__compose .a8X > .bAK {\n  flex-wrap: nowrap;\n}\n\n/* in material Gmail reduce padding between buttons  */\n.inboxsdk__compose_narrow_buttons .gU:not(:first-child) {\n  padding-left: 5px;\n}\n\n.inboxsdk__compose_narrow_buttons .inboxsdk__compose_actionToolbar {\n  padding-left: 10px;\n}\n\n.inboxsdk__compose_narrow_buttons .wG:not(:first-child) {\n  margin-left: 15px;\n}\n\n.inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar\n  div.inboxsdk__composeButton:last-child {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar\n  div.inboxsdk__composeButton\n  + div.inboxsdk__composeButton {\n  margin-left: 3px;\n}\n\n/* end narrow */\n\n/* mimic button styling */\n.inboxsdk__composeButton,\n.inboxsdk__compose_sendButton {\n  height: 20px;\n  width: 20px;\n  padding: 4px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n  outline: none;\n  position: relative;\n}\n\n.inboxsdk__composeButton + .inboxsdk__composeButton {\n  margin-left: 4px;\n}\n\n.inboxsdk__composeButton .inboxsdk__button_icon {\n  opacity: 0.55;\n}\n\n.inboxsdk__composeButton:hover .inboxsdk__button_icon,\n.inboxsdk__composeButton:focus .inboxsdk__button_icon,\n.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon {\n  opacity: 1;\n}\n\n.inboxsdk__composeButton::before {\n  content: '';\n  display: block;\n  opacity: 0;\n  position: absolute;\n  transition-duration: 0.15s;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  background: none;\n  box-sizing: border-box;\n  transform: scale(0);\n  transition-property: transform, opacity;\n  border-radius: 4px;\n}\n\n.inboxsdk__composeButton:hover::before {\n  background-color: rgba(32, 33, 36, 0.059);\n  border: none;\n  box-shadow: none;\n  opacity: 1;\n  transform: scale(1);\n}\n\n.inboxsdk__composeButton:focus::before,\n.inboxsdk__composeButton.inboxsdk__composeButton_active::before {\n  background-color: rgba(32, 33, 36, 0.122);\n  border: none;\n  box-shadow: none;\n  opacity: 1;\n  transform: scale(1);\n}\n\n.inboxsdk__compose_actionToolbar\n  .inboxsdk__compose_groupedActionToolbar\n  div.inboxsdk__composeButton:last-child {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_sendButton {\n  background-color: #1a73e8;\n  color: white;\n  height: 24px;\n  width: auto;\n  padding-left: 3px;\n  padding-right: 3px;\n  border-radius: 4px;\n}\n\n.inboxsdk__compose_sendButton {\n  padding: 6px 4px;\n  margin-left: 2px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {\n  height: 20px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {\n  height: 24px;\n}\n\n.inboxsdk__compose_sendButton:focus,\n.inboxsdk__compose_sendButton.inboxsdk__composeButton_active {\n  background-color: #5094ed;\n  box-shadow: 0 1px 1px 0 rgba(66, 133, 244, 0.3),\n    0 1px 3px 1px rgba(66, 133, 244, 0.15);\n  border: none;\n}\n\n.T-I ~ .inboxsdk__compose_sendButton {\n  margin-left: -6px;\n}\n\n.inboxsdk__compose_actionToolbar {\n  white-space: nowrap;\n}\n\n.inboxsdk__compose_actionToolbar {\n  padding-left: 6px;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {\n  height: 20px;\n  width: 20px;\n  display: inline-flex;\n  user-select: none;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {\n  height: 17px;\n  width: 17px;\n  display: inline-flex;\n  margin: auto;\n}\n\n.inboxsdk__compose_actionToolbar + .gU:not(.inboxsdk__compose_separator) {\n  padding-left: 8px;\n}\n\n/* grouped action toolbar */\n.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh {\n  overflow-y: visible;\n}\n\n.inboxsdk__compose_groupedActionToolbar {\n  position: absolute;\n  bottom: 44px;\n  margin: 3px;\n  z-index: 10;\n  left: 0px;\n  border-radius: 2px;\n  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12),\n    0 2px 4px -1px rgba(0, 0, 0, 0.2);\n  padding: 5px 15px;\n}\n\n.inboxsdk__compose_groupedActionToolbar {\n  margin-bottom: 7px;\n  padding: 4px 5px;\n  background: white;\n  left: -3px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar {\n  left: 14px;\n}\n\n.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child {\n  margin-left: 0px;\n  margin-right: 0px;\n}\n\n.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton {\n  padding: 4px;\n}\n\n/*\nthere's an element that gets a height of 40px when the gmail formatting toolbar\nis visible. This rule makes that same element get the 40px height when\nthe actionToolbar is visible\n*/\n.inboxsdk__compose_groupedActionToolbar_visible .bA3 {\n  height: 40px;\n}\n\n.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {\n  z-index: 1;\n}\n\n.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_groupedActionToolbar_arrow {\n  display: none;\n}\n\n/* end grouped action toolbar */\n\n.inboxsdk__compose_customSendContainer {\n  display: inline-block;\n  position: relative;\n  outline: 0;\n  height: 29px;\n  margin: 6px 0;\n  padding: 0;\n  line-height: 29px;\n  vertical-align: middle;\n}\n\n.inboxsdk__compose_customSendContainer {\n  height: 36px;\n  line-height: 36px;\n}\n\n.inboxsdk__compose_customTitleBarColor > img.Hl,\n.inboxsdk__compose_customTitleBarColor > img.Hq,\n.inboxsdk__compose_customTitleBarColor > img.Ha {\n  background-color: transparent !important;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText,\n.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {\n  align-items: center;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText > tbody {\n  width: 100%;\n}\n\n.inboxsdk__compose_nativeTitleBarText {\n  display: none !important;\n}\n\n.inboxsdk__compose_customTitleBarText {\n  width: calc(100% - 80px);\n}\n\n.inboxsdk__compose_hasCustomTitleBarText td.Hm {\n  margin-right: 10px;\n  margin-left: auto;\n}\n\n.inboxsdk__compose_statusBarPrependContainer {\n  border-top: 1px solid #cfcfcf;\n}\n\n.inboxsdk__compose_statusBarPrependContainer + table td.gU {\n  border-top: none;\n}\n\n/* end */\n\n/* appid warning gmail specific parts */\n\ninput.inboxsdk__x_close_button {\n  background-color: transparent;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  height: 20px;\n  width: 20px;\n  border: none;\n  vertical-align: middle;\n  cursor: pointer;\n\n  float: right;\n  margin: 5px;\n}\n\n/* thread rows */\n\n.inboxsdk__gmail_label.inboxsdk__label_has_icon .au {\n  display: inline-block;\n  margin-left: 14px;\n}\n\n.inboxsdk__thread_row_label .inboxsdk__button_icon,\n.inboxsdk__thread_row_label .inboxsdk__button_iconImg {\n  height: 11px;\n  width: 11px;\n}\n\n.inboxsdk__thread_row_label .inboxsdk__button_icon {\n  display: inline-block;\n  margin-top: 3px;\n  margin-left: 4px;\n  position: absolute;\n}\n\n.inboxsdk__thread_row_button {\n  outline: 0;\n  height: 20px;\n  width: 20px;\n  padding: 0px;\n}\n\n.inboxsdk__thread_row_button .inboxsdk__button_icon {\n  max-height: 100%;\n}\n\n.inboxsdk__thread_row_custom_date_container {\n  max-width: inherit;\n}\n\n.inboxsdk__thread_row_button .inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n  margin-top: 0px;\n}\n\n.inboxsdk__gmail_action {\n  float: right;\n  position: relative;\n  background-color: grey;\n  border: 1px solid black;\n  margin-left: 1em;\n  cursor: default;\n  padding: 0 6px;\n  background-image: -webkit-linear-gradient(top, #e9e9e9, #e6e6e6);\n  background-image: linear-gradient(top, #e9e9e9, #e6e6e6);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-color: #ccc;\n  color: #444;\n  height: 17px;\n  line-height: 17px;\n  min-width: 56px;\n  border-radius: 2px;\n  font-size: 11px;\n  font-weight: bold;\n  text-align: center;\n  white-space: nowrap;\n  padding-right: 18px;\n}\n\n.inboxsdk__gmail_action:focus {\n  border: 1px solid #4d90fe;\n  outline: none;\n}\n\n.inboxsdk__gmail_action:active {\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.inboxsdk__gmail_action:hover {\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\n  background-color: #ededed;\n  background-image: -webkit-linear-gradient(top, #ededed, #eaeaea);\n  background-image: linear-gradient(top, #ededed, #eaeaea);\n  border-color: #b8b8b8;\n}\n\n.inboxsdk__gmail_action::after {\n  content: '';\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  margin-left: 5px;\n  background: no-repeat\n    url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png) -67px -100px;\n  width: 7px;\n  height: 7px;\n  opacity: 0.55;\n}\n\n.inboxsdk__thread_row_custom_date {\n  margin-left: 2px;\n}\n\nspan.inboxsdk__thread_row_custom_date\n  + span:not(.inboxsdk__thread_row_custom_date) {\n  display: none;\n}\n\nspan.inboxsdk__thread_row_custom_draft_label + div.yW {\n  display: none;\n}\n\n.inboxsdk__thread_row_attachment_iconWrapper,\n.inboxsdk__thread_row_attachment_icon {\n  margin-left: 3px;\n  width: 16px;\n  height: 16px;\n}\n\n.inboxsdk__thread_row_attachment_iconWrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: max-content;\n}\n\n/* .zA td.apU.xy refers to the <td/> element that houses the favorite star in thread row view.\n The <span> element is what inboxSDK will render threadRowButtons as when Gmail hover actions are disabled.\n The following rules fix the issue where threadRowButtons were spilling over into the thread row email text.\n */\n.zA td.apU.xY {\n  width: initial;\n}\n\n.zA td.apU.xY span.inboxsdk__thread_row_button {\n  margin: 0 10px;\n  opacity: 0.16;\n}\n\n.zA.aqw td.apU.xY span.inboxsdk__thread_row_button {\n  opacity: 0.54;\n}\n\n.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover {\n  opacity: 1;\n}\n\n.zA td.apU.xY span.inboxsdk__thread_row_button::before {\n  /* Google adds in a pseduo ::before element to span elems with the T-KT class applied.\n  Explicity setting this width and height to zero as remove weird positioning that results */\n  width: 0px;\n  height: 0px;\n}\n\n.inboxsdk__thread_row_attachment_icon {\n  vertical-align: middle;\n}\n\n.zA > .xY.inboxsdk__thread_row_attachment_icons_present {\n  max-width: inherit;\n}\n\n/* narrow vertical preview pane */\n.Zs .xY.inboxsdk__thread_row_attachment_icons_present {\n  flex-grow: 0;\n}\n\n.Zs .xY.inboxsdk__thread_row_label {\n  order: 1;\n}\n\n.Zs .xY.inboxsdk__thread_row_icon_wrapper {\n  order: 1;\n  margin-left: 3px;\n  margin-right: 0px;\n}\n/* end narrow vertical preview pane */\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  height: 18px;\n  width: 18px;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  width: 20px;\n  margin-right: 3px;\n  align-self: center;\n  height: 20px;\n  flex: 0 0 auto;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  vertical-align: top;\n}\n\n.inboxsdk__thread_row_image_added\n  .y6\n  .inboxsdk__thread_row_icon_wrapper\n  ~ span[id] {\n  margin-left: 3px;\n}\n\n.inboxsdk__thread_row_image_added .a4W,\n.inboxsdk__thread_row_image_added .apA,\n.inboxsdk__thread_row_image_added .apx {\n  position: relative;\n}\n\n/* end thread rows */\n[inboxsdk__message_added_attachment_icon] td.gH > span:first-child > img,\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  div.gK\n  > span:first-child\n  > img {\n  margin-right: 3px;\n  margin-left: 3px;\n  margin-top: 0px;\n}\n\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  > span:first-child\n  > *:last-child,\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  div.gK\n  > span:first-child\n  > *:last-child {\n  margin-right: 6px;\n}\n\n.inboxsdk__message_attachment_iconWrapper,\n.inboxsdk__message_attachment_icon {\n  width: 21px;\n  height: 21px;\n  position: relative;\n}\n\n.inboxsdk__message_attachment_iconWrapper {\n  margin: auto 3px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  vertical-align: top;\n}\n\n.inboxsdk__message_attachment_tooltipWrapper {\n  position: absolute;\n  top: 19px;\n  z-index: 10;\n}\n\n/* Work around issue where clicking \"Remove formatting\" in Compose causes this\n * element to become taller and shift the toolbar down. */\n.gU .aWQ {\n  max-height: 3px;\n}\n\n.aQw .inboxsdk__button_icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n}\n\n.aQw .inboxsdk__button_iconImg {\n  height: 18px;\n  width: 18px;\n}\n\n.aQw .inboxsdk__button_iconImg {\n  margin-top: 2px;\n}\n\n.aZi .asa .inboxsdk__button_iconImg {\n  display: inline-block;\n  vertical-align: middle;\n  margin-top: -3px;\n}\n\n/* Message view attachments toolbar */\n.aZi .aZj .asa .inboxsdk__button_iconImg {\n  margin: 0;\n}\n\nbody .dw {\n  /* Fixes issue where a tall compose window opened over a custom view could be\n   * overlapped by Gmail's top bar. Also fixes issue where mole widgets are\n   * only visible while a compose window is open.\n   */\n  z-index: 6 !important;\n}\n\n.inboxsdk__compose_outerSidebar_wrapper {\n  position: absolute;\n  left: -401px;\n  top: 0px;\n  background: white;\n  width: 400px;\n  bottom: 0px;\n  border-left: 1px solid silver;\n  box-shadow: -2px 0px 1px #e6e6e6;\n  display: block;\n}\n\n.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper {\n  border-left: 0;\n  box-shadow: none;\n  left: -400px;\n}\n\n.inboxsdk__outerSidebarActive .aSs > div {\n  width: 50% !important;\n  margin-left: 30%;\n}\n\n.inboxsdk__compose_outerSidebar_header {\n  background: #404040;\n  font-size: 80%;\n  padding: 10px 10px 11px 10px;\n  color: white;\n  border-bottom: 1px solid #c4c4c4;\n}\n\n.inboxsdk__compose_outerSidebar_body {\n  position: absolute;\n  width: 100%;\n  bottom: 43px;\n  top: 36px;\n  left: -1px;\n  overflow: auto;\n}\n\n.inboxsdk__compose_outerSidebar_footer {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  border-top: 1px solid rgb(206, 206, 206);\n  display: block;\n}\n\n.inboxsdk__compose_innerSidebarActive form,\n.inboxsdk__compose_innerSidebarActive .GQ {\n  padding-right: 200px;\n}\n\ndiv.inboxsdk__compose_statusbar {\n  border: 0;\n  height: 40px;\n  margin: 0;\n}\n\n.inboxsdk__compose_statusbar {\n  background: none;\n  position: relative;\n}\n\n/* only include padding when in thread inline view */\n.HM .I5 .inboxsdk__compose_statusbar {\n  padding: 0 16px 16px 16px;\n}\n\ntable + .inboxsdk__compose_statusbar {\n  margin-top: -8px;\n}\n\n/* Necessary in pre-new-recipients-area Gmail to stop the compose body\nfrom resizing and pushing the statusbars off-screen when the recipients\narea is focused. */\nbody.inboxsdk__classic_gmail_recipients_area\n  .inboxsdk__compose_statusbarActive\n  .aoI {\n  height: auto !important;\n}\n\n.inboxsdk__compose_statusbarActive .aDl {\n  z-index: unset;\n}\n\n/* compose size fixing.\nTODO Can we restrict this to only composes we've modified? */\n.inboxsdk__compose .qz {\n  max-height: inherit !important;\n}\n\n/* aDi is initially position: fixed, which messes things up, so we make static */\nbody:not(.inboxsdk_hack_disableComposeSizeFixer)\n  .inboxsdk__size_fixer\n  .aDj.aDi {\n  position: static !important;\n}\n\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5 {\n  padding-bottom: var(--inboxsdk-total-added-statusbar-height, 0px);\n}\n/* Extend the message foreground outline downwards to contain our added status bars */\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before {\n  height: calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px));\n}\n/* When we have a status bar added and the reply status is in position absolute or fixed mode (.aDi),\nuse a background color on the element containing our added status bars so the message background outline\nisn't visible behind it. */\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive\n  .aDj.aDi\n  > .aDh {\n  background-color: white;\n}\n\n.inboxsdk__recipient_row {\n  display: flex;\n}\n\n.inboxsdk__compose_notice {\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  margin: 10px;\n  padding: 10px 16px;\n}\n\n.inboxsdk__recipient_row td.ok {\n  height: 20px;\n  padding: 0px !important;\n}\n\n.inboxsdk__recipient_row td.az3 {\n  padding: 0px 3px 0px 3px;\n}\n\n.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH {\n  display: block !important;\n}\n\n.inboxsdk__compose_hideRecipientArea .fX.aXjCH,\n.inboxsdk__compose_hideRecipientArea .aoD.hl,\n.inboxsdk__compose_forceRecipientsOpen .aoD.hl,\n.inboxsdk__compose_forceRecipientRowHidden {\n  display: none !important;\n}\n\n/* toolbar visibility */\n\n[data-thread-toolbar='true'] [data-rowlist-toolbar='true'] {\n  display: none !important;\n}\n\n[data-toolbar-expanded='true'] [data-toolbar-expanded='false'] {\n  display: none !important;\n}\n\n[data-toolbar-expanded='false'] [data-toolbar-expanded='true'] {\n  display: none !important;\n}\n\n[data-toolbar-icononly='true'] .inboxsdk__button_text {\n  display: none !important;\n}\n\n[data-toolbar-icononly='false'] .inboxsdk__button_text {\n  color: #5f6368;\n}\n\n[data-toolbar-icononly='false'] .asa:before {\n  border-radius: 4px;\n  border: none !important;\n}\n\n[data-toolbar-icononly='false'] .inboxsdk__button {\n  align-items: center;\n  border: none;\n  display: inline-flex;\n  justify-content: center;\n  outline: none;\n  position: relative;\n  z-index: 0;\n  -webkit-font-smoothing: antialiased;\n  font-family: 'Google Sans', Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  letter-spacing: 0.15px;\n  background: none;\n  box-sizing: border-box;\n  color: #5f6368;\n  cursor: pointer;\n  font-weight: 500;\n  outline: none;\n  padding: 0 8px;\n}\n\n.inboxsdk__menuItem img,\n.inboxsdk__menuItem .inboxsdk__icon {\n  height: 16px;\n  width: 16px;\n  margin-top: -1px;\n}\n\n/* end */\n\n/* modal */\n\n.inboxsdk__modal_overlay {\n  right: 0px;\n  bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  bottom: 0px;\n  right: 0px;\n  z-index: 503;\n  display: flex;\n  display: -webkit-flex;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n  padding: 110px 50px 50px 50px;\n}\n\n.inboxsdk__modal_content {\n  margin-top: 30px;\n  margin-bottom: 30px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(.inboxsdk__modal_hideBottom)\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n  padding-bottom: 24px;\n}\n\n.inboxsdk__modal_close {\n  outline: none;\n  cursor: pointer;\n}\n\n.inboxsdk__modal_fullscreen .inboxsdk__modal_container {\n  position: relative;\n  margin-top: -60px;\n  width: auto;\n  overflow: hidden;\n}\n\n.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow {\n  margin-right: 16px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close {\n  display: none;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container {\n  padding-top: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content {\n  margin-top: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7 {\n  margin: 0px;\n  display: none;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides\n  .inboxsdk__modal_container,\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content {\n  padding-left: 0px;\n  padding-right: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom\n  .inboxsdk__modal_container {\n  padding-bottom: 0px;\n}\n\n.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {\n  -webkit-flex: 1;\n  flex: 1;\n  width: 0;\n  word-wrap: break-word;\n}\n\n/* end modal */\n\n/* mole */\n\n/* Fix issue where Compose toolbar can become disconnected when moles or\n * drawers are in use */\n.inboxsdk__drawers_in_use .aDi,\n.inboxsdk__moles_in_use .aDi {\n  left: auto !important;\n}\n\n.inboxsdk__drawers_in_use .aDi,\n.inboxsdk__moles_in_use .aDi {\n  position: static;\n}\n\n/* Make it so the compose/mole layer doesn't wrap, so we don't have to do a lot\n * of fancy logic to hide moles ourselves when things get too crowded. */\n.inboxsdk__moles_in_use .nH > .nH > .no {\n  white-space: nowrap;\n}\n.inboxsdk__moles_in_use .nH > .nH > .no > * {\n  white-space: initial;\n}\n.inboxsdk__moles_in_use .nH > .nH > .no > .nn {\n  display: inline-block;\n  float: none;\n}\n\n.inboxsdk__mole_view {\n  position: relative;\n  max-width: 564px;\n  height: 100vh;\n  vertical-align: top;\n  display: inline-flex;\n  display: -webkit-inline-flex;\n  align-items: flex-end;\n  -webkit-align-items: flex-end;\n}\n\n.inboxsdk__mole_view_inner {\n  visibility: visible;\n  box-sizing: border-box;\n  margin-right: 5px;\n  box-shadow: rgba(0, 0, 0, 0.2) 0 2px 6px;\n  min-width: 260px;\n  min-height: 36px;\n}\n\n.inboxsdk__mole_view_inner {\n  min-height: 40px;\n}\n\n.inboxsdk__mole_view_titlebar:not(.inboxsdk__original_view),\n.inboxsdk__mole_view_inner:not(.inboxsdk__original_view) {\n  border-radius: 8px 8px 0 0;\n}\n\n.inboxsdk__mole_view_titlebar {\n  position: absolute;\n  left: 0;\n  right: 5px;\n  font-size: 14px;\n  font-weight: 500;\n  box-sizing: border-box;\n  height: 40px;\n  cursor: pointer;\n  padding: 10px 12px 10px 16px;\n  color: #041e49;\n  background: #f2f6fc;\n}\n\n.inboxsdk__mole_view_titlebar.inboxsdk__original_view {\n  color: white;\n  font-size: 12.8px;\n  font-weight: 400;\n  background: #404040;\n  padding: 9px 0 0 11px;\n  border-radius: 4px 4px 0 0;\n}\n\n.inboxsdk__mole_view_titlebar h2 {\n  font-size: inherit;\n  font-weight: inherit;\n  margin: 4px 0 0 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__mole_title_buttons {\n  white-space: nowrap;\n  float: right;\n  padding-right: 5px;\n  margin-top: 1px;\n}\n\n.inboxsdk__mole_title_buttons.inboxsdk__original_view {\n  margin-top: -3px;\n}\n\n.inboxsdk__mole_title_buttons > img {\n  height: 24px;\n  width: 24px;\n  position: relative;\n  top: 2px;\n  opacity: 0.6;\n}\n\n.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img {\n  height: 16px;\n  width: 16px;\n  margin-left: 4px;\n}\n\n.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img:hover {\n  background-color: rgba(68, 71, 70, 0.078);\n}\n\n.inboxsdk__mole_title_buttons.inboxsdk__original_view > img:hover {\n  background-color: #737373;\n}\n\n.inboxsdk__mole_title_buttons > img:hover {\n  opacity: 1;\n}\n\n.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,\n.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title\n  h2.inboxsdk__mole_default,\n.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,\n.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title)\n  h2.inboxsdk__mole_minimized,\n.inboxsdk__mole_view.inboxsdk__minimized .Hl,\n.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk {\n  display: none;\n}\n\n.inboxsdk__mole_view_content:not(.inboxsdk__original_view) {\n  margin-top: 40px;\n  border: none;\n}\n\n.inboxsdk__mole_view_content {\n  margin-top: 36px;\n  border: 1px solid #cfcfcf;\n  background: white;\n  min-width: 260px;\n  min-height: 20px;\n  max-height: 80vh;\n}\n\n.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner {\n  min-width: 0px;\n}\n\n.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content {\n  margin-top: 0px;\n  min-width: 0px;\n}\n\n/* end mole */\n\n/* tabs */\n\n.inboxsdk__tab {\n  width: 30px;\n}\n\n.inboxsdk__tab.IDMAP_hideTitleBar:first-child:last-child {\n  display: none;\n}\n\n.inboxsdk__tab.inboxsdk__tab_selected {\n  width: auto;\n}\n\ntable.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role='tab'] {\n  height: 28px;\n}\n\n.inboxsdk__tab_icon {\n  width: 30px;\n  height: 25px;\n  background-position-x: 5px;\n  background-position-y: 3px;\n  background-size: 16px;\n  background-repeat: no-repeat;\n}\n\n.inboxsdk__tab_icon img {\n  height: 16px;\n  width: 16px;\n  margin-left: 5px;\n  margin-top: 3px;\n}\n\n.inboxsdk__tab .aKx {\n  top: 4px;\n}\n\n.inboxsdk__sidebar div[role='complementary'] {\n  position: static !important;\n}\n\n/* Fix issue where sidebar causes threadview to be taller than it should */\n.inboxsdk__sidebar > div.y4,\n.IDMAP_app_sidebar_in_use > div.y4 {\n  display: none;\n}\n\ntable.aKk\n  .inboxsdk__contentTabContainer\n  .inboxsdk__tab:first-child\n  .aAy[role='tab'] {\n  border-left-width: 1px;\n}\n\n/* end tabs */\n\n/* old sidebar */\n\n.inboxsdk__sidebar .inboxsdk__contentPanelContainer {\n  font: 12px Arial, sans-serif;\n  max-width: 220px;\n}\n\n.inboxsdk__contentPanelContainer_contentContainer {\n  overflow: hidden;\n  margin-bottom: 10px;\n  border-bottom: 1px solid #d8d8d8;\n}\n\n/* end old sidebar */\n\n/* sidebar */\n\nbody.inboxsdk__hasTopMessageBar .bq9 {\n  top: var(--inboxsdk__topMessageBar-height);\n}\n\n.IDMAP_app_sidebar_in_use > div[role='complementary'] {\n  position: static !important;\n  width: 216px !important;\n}\n\n.IDMAP_app_sidebar_in_use {\n  /* Necessary to prevent z-indexes on sidebar items from causing them to show\n  above stuff outside of the sidebar. */\n  will-change: position;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  background: #ffffff;\n}\n\n.IDMAP_app_sidebar_content_area {\n  padding: 4px 0 12px;\n}\n\n.IDMAP_app_sidebar.IDMAP_hideTitleBar .IDMAP_app_sidebar_content_area {\n  padding-top: 0;\n}\n\n/* gmail addon support */\n\n.container_app_sidebar_in_use.no,\n.IDMAP_container_app_sidebar_no_icons.no {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  width: 100%;\n}\n\nbody[dir='rtl'] .container_app_sidebar_in_use.no[dir='ltr'],\nbody[dir='rtl'] .idm5_container_app_sidebar_no_icons.no[dir='ltr'] {\n  flex-direction: row-reverse;\n  -webkit-flex-direction: row-reverse;\n}\n\n/* overwrite margin right of the gmail page next/back and settings icon buttons\n   to line up properly */\n\n/* when no siebar is visible */\n.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -57px !important;\n}\n\n/* when addon sidebar visible */\n.container_addon_sidebar_visible.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -321px !important;\n}\n\n/* when sdk sidebar visible */\n.container_app_sidebar_visible.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -321px !important;\n}\n\n/* no sdk icons and no native addons */\n.IDMAP_container_app_sidebar_no_icons\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: 0px !important;\n}\n\n/* quickfix, TODO investigate removing ar7 class from our buttons */\n.inboxsdk__button.ar7 {\n  pointer-events: all !important;\n}\n\n.container_app_sidebar_in_use .bkK.nn,\n.IDMAP_container_app_sidebar_no_icons .bkK.nn {\n  width: auto !important;\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0px;\n}\n\n/* when removing addon icons */\n.IDMAP_container_app_sidebar_no_icons .bnl.nn {\n  z-index: -1;\n  position: absolute;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use {\n  min-width: 57px !important;\n  flex-shrink: 0;\n  -webkit-flex-shrink: 0;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use.app_sidebar_visible {\n  min-width: 321px !important;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use > .J-KU-Jg {\n  display: block !important;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container {\n  display: none;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use.app_sidebar_visible\n  .IDMAP_app_sidebar_container {\n  display: block;\n  float: left;\n  height: 100%;\n  border-left: 1px solid #e0e0e0;\n  padding-left: 16px;\n  width: calc(100% - 74px);\n  overflow: auto;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_container\n  .IDMAP_app_sidebar_content_area {\n  width: calc(100% - 16px);\n  padding-right: 16px;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use.app_sidebar_visible\n  .J-KU-Jz {\n  width: auto;\n  padding-right: 50px;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  margin: 18px 18px 10px 18px;\n  border: none;\n  background: transparent;\n  height: 20px;\n  width: 20px;\n  overflow: hidden;\n  padding: 0;\n  cursor: pointer;\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea.sidebar_global_iconArea .inboxsdk__button_icon {\n  margin-bottom: 18px;\n}\n\nbody .IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  overflow: visible;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_icon::before,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover:before {\n  content: '';\n  background: #f1f3f4;\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border-radius: 50%;\n  z-index: 0;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_icon::before {\n  background: #e8eaed;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {\n  width: 20px;\n  height: 20px;\n  margin-top: 0px;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon .inboxsdk__button_iconImg {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 1;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  height: 40px;\n  width: 4px;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  background-color: rgb(66, 133, 244);\n  border-radius: 3px 0 0 3px;\n}\n\n.IDMAP_sidebar_iconArea.sidebar_global_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  bottom: 8px;\n}\n\n/* end sidebar */\n\n/* material sidebar */\n.brC-brG.companion_app_sidebar_visible {\n  display: block !important;\n}\n\n.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible {\n  display: block !important;\n}\n\n.companion_global_app_sidebar_visible .thread_app_sidebar {\n  display: none;\n}\n\n.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible)\n  .global_app_sidebar {\n  display: none;\n}\n\n.nH.companion_container_app_sidebar_visible {\n  width: calc(100% - 300px) !important;\n}\n\n.companion_app_sidebar_visible .addon_sidebar ~ div:not(.addon_sidebar) {\n  display: none !important;\n}\n\n.IDMAP_app_sidebar_in_use .IDMAP_app_sidebar_container.addon_sidebar {\n  height: 100%;\n  overflow: auto;\n}\n\n.IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container.addon_sidebar\n  .IDMAP_app_sidebar_content_area {\n  width: 100%;\n}\n\n.IDMAP_app_sidebar_in_use:not(.companion_app_sidebar_visible) .addon_sidebar {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon_container {\n  margin-left: 0px;\n}\n\n.IDMAP_app_sidebar_content_panel .IDMAP_app_sidebar_content_panel_top_line {\n  padding: 0px 16px;\n}\n\n/* hide thread addon icons when in custom view */\nbody.inboxsdk__custom_view_active\n  .brC-aT5-aOt-ato-Kp-Jw\n  [role='tablist']\n  > div:not(:last-child) {\n  display: none;\n}\n\n/* make the native addon icon container for thread add-ons (div.bvq) always visible */\n.IDMAP_app_sidebar_in_use .bvq,\n.IDMAP_app_sidebar_in_use .bvq > div:last-child {\n  display: block !important;\n}\n\n/* hide the native addon loading div */\n.IDMAP_companion_container_app_sidebar_in_use .bvq > div:first-child {\n  display: none !important;\n}\n\n/* end material sidebar */\n\n/* custom content */\n\n.inboxsdk__custom_view_element {\n  overflow: auto;\n}\n\n/* end custom content */\n\n/* nav menu */\n\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) {\n  border-left-color: transparent;\n}\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0 {\n  font-weight: normal;\n}\n\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU {\n  font-weight: normal;\n}\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO {\n  background: none;\n}\n\n.inboxsdk__hide_addon_container {\n  display: flex !important;\n  display: -webkit-flex !important;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  width: 100% !important;\n}\n\nbody[dir='rtl'] .inboxsdk__hide_addon_container[dir='ltr'] {\n  flex-direction: row-reverse;\n  -webkit-flex-direction: row-reverse;\n}\n\n.inboxsdk__hide_addon_container > .bkK.nn {\n  width: auto !important;\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0;\n}\n\n.inboxsdk__hide_addon_container > .bnl.nn {\n  display: none;\n}\n\n.inboxsdk__navItem {\n  font-size: 14px;\n}\n\n/*\nfix issue in pre-Chat Gmail versions where somehow a style=\"flex-grow: 1\" attribute\nshows up on our elements preventing them from collapsing.\n*/\n.inboxsdk__navItem:not(.Xr) > .V3[style] {\n  flex-grow: 0 !important;\n}\n\n.inboxsdk__navItem > .TO.n4 {\n  display: block;\n  padding-left: 0;\n}\n\n/* app menu panel nav item reshaping */\n.inboxsdk__collapsiblePanel .inboxsdk__navItem > .TO .TN.aik {\n  padding-left: 18px;\n}\n\n/* Tweak alignment of  */\n.inboxsdk__collapsiblePanel .inboxsdk__navItem > .TO .qj {\n  margin-right: 14px;\n}\n\n/* end app menu panel nav item reshaping */\n\n.inboxsdk__navItem > .TO.n4 .qj > .G-asx {\n  margin-right: 0;\n}\n\n.inboxsdk__navItem > .TO .aio > .bsU:empty {\n  display: none;\n}\n\n.inboxsdk__navItem > .TO .qj:empty::after {\n  background-color: rgb(118, 118, 118);\n  border-radius: 50%;\n  content: '';\n  height: 18px;\n  margin-left: 1px;\n  width: 18px;\n}\n\n.inboxsdk__navItem > .TO .qj[style*='border-color']:empty::after {\n  border-color: inherit;\n}\n\n.inboxsdk__navItem > .TO:hover .pM {\n  display: flex;\n  display: -webkit-flex;\n  visibility: visible;\n}\n\n.inboxsdk__navItem > .TO .afM {\n  cursor: pointer;\n}\n\n.inboxsdk__navItem > .TO:hover .afM {\n  display: block;\n  visibility: visible;\n}\n\n/* This does slightly break from the native Gmail behavior, but we keep the dropdown button\n  visible while it has an active dropdown */\n.inboxsdk__navItem > .TO img.afM.afO {\n  display: block;\n  visibility: visible;\n}\n\n/* Keep the subtitle hidden while the dropdown is active */\n.inboxsdk__navItem > .TO img.afM.afO ~ .aio > .bsU {\n  display: none;\n}\n\n.inboxsdk__navItem > .TO:hover .bsU {\n  display: none;\n}\n\n.inboxsdk__navItem.inboxsdk__navItem_nonClickable > .TO:active {\n  background-color: initial;\n}\n\n.inboxsdk__navItem_hover .aj0,\n.inboxsdk__navItem_hover .p8 {\n  visibility: visible;\n}\n\n.inboxsdk__appMenuItem .CL.V6:before,\n.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3:before {\n  background-image: var(--background-image);\n}\n\n.inboxsdk__collapsiblePanel.apV.aJu .T-I.T-I-KE.L3:before {\n  background-image: var(--background-image--hover);\n}\n\n.inboxsdk__appMenuItem.apV .CL.V6:before {\n  background-image: var(--background-image--active);\n}\n\n.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3:before {\n  background-size: 24px;\n}\n\n.inboxsdk__collapsiblePanel_loading_container {\n  display: none;\n}\n\n.inboxsdk__collapsiblePanel_loading_container.inboxsdk__collapsiblePanel_loading_container--active {\n  display: block;\n}\n\n.inboxsdk__navItem_link {\n  cursor: pointer;\n  margin-left: auto;\n}\n\n.inboxsdk__navItem_link > a {\n  margin-left: 16px;\n}\n\n.inboxsdk__navItem > .TO .inboxsdk__button {\n  margin-right: 0;\n}\n\n[dir='rtl'] .inboxsdk__navItem_link {\n  left: -4px;\n  right: initial;\n}\n\n.inboxsdk__navItem_container .aio .inboxsdk__button {\n  position: absolute;\n  top: 0px;\n  right: -30px;\n}\n\n.inboxsdk__navItem_marker {\n  position: absolute;\n  left: 0px;\n  padding-bottom: 2px;\n}\n\n.inboxsdk__expando {\n  z-index: 1;\n}\n\n.inboxsdk__navItem_link > a,\n.aip .CK {\n  color: #15c;\n}\n\n.inboxsdk__navItem_link > a:hover,\n.aip .CK:hover {\n  text-decoration: underline;\n}\n\n.inboxsdk__navItem_container .aio.aip {\n  white-space: nowrap;\n}\n\n/* start nav menu open state */\n\n.WR[role=\"navigation\"] /* new left nav */\n  .inboxsdk__navItem\n  .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty {\n  display: none;\n}\n\n.WR[role=\"navigation\"] /* new left nav */\n  .inboxsdk__navItem\n  .Yh:not(.inboxsdk__navItem_parent_accessory_button) {\n  background: none;\n}\n\n.WR[role=\"navigation\"] /* new left nav */\n  .inboxsdk__navItem\n  .Yh\n  .inboxsdk__button_icon {\n  display: none;\n}\n\n/* end nav menu open state */\n\n/* start nav menu close state */\n\n.WR[role=\"navigation\"].bhZ:not(.bym) /* .WR is the new left nav */\n  .inboxsdk__navItem\n  .Yh {\n  opacity: 1;\n}\n\n.WR[role=\"navigation\"].bhZ:not(.bym) /* .WR is the new left nav */\n  .inboxsdk__navItem\n  .Yh.inboxsdk__navItem_parent_accessory_button {\n  background-image: none !important;\n}\n\n.WR[role=\"navigation\"].bhZ:not(.bym) /* .WR is the new left nav */\n  .inboxsdk__navItem\n  .Yh:empty {\n  background-color: rgba(32, 33, 36, 0.71);\n  border-radius: 50%;\n  display: inherit;\n  height: 18px;\n  margin-left: 1px;\n  width: 18px;\n}\n\n.WR[role='navigation'].bhZ:not(.bym)\n  .inboxsdk__navItem\n  .Yh\n  .inboxsdk__button_icon {\n  display: inherit;\n}\n\n/* end nav menu close state */\n\n/* end nav menu */\n\n/* search results section */\n\n.inboxsdk__custom_sections {\n  margin-bottom: 15px;\n}\n\n.inboxsdk__custom_sections.Wc {\n  padding: 0px;\n  margin-bottom: 0px;\n}\n\n.inboxsdk__custom_sections {\n  margin-bottom: 8px;\n}\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible\n  .inboxsdk__resultsSection_title\n  .Wp {\n  visibility: hidden;\n}\n\n.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection {\n  padding-top: 0px;\n}\n\n.inboxsdk__custom_sections .Wg {\n  padding-top: 0px;\n}\n\n.inboxsdk__custom_sections.Wc .Wg {\n  border-bottom: 0;\n  padding: 0px;\n}\n\n/* end lone collapsed SectionView in Gmailv1 */\n\n.inboxsdk__results_collapsedContainer.Wg {\n  height: auto;\n}\n\n.inboxsdk__results_collapsedContainer > div {\n  display: flex;\n  display: -webkit-flex;\n  flex-wrap: wrap;\n  -webkit-flex-wrap: wrap;\n  flex: 1 0 100%;\n  -webkit-flex: 1 0 100%;\n}\n\n/* lone collapsed SectionView in Gmailv2 */\n/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */\n.inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child {\n  flex: 1;\n  -webkit-flex: 1;\n  margin-right: 0;\n}\n\n.inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  flex: 1;\n  -webkit-flex: 1;\n}\n\n.inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header\n  > .Cr {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  margin-left: auto;\n}\n\n/* end lone collapsed SectionView in Gmailv2 */\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  display: inline-block;\n  margin-right: 20px;\n}\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  display: inline-flex;\n}\n\n.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  margin-right: 0px;\n}\n\n.inboxsdk__resultsSection_collapsed .Cr {\n  display: none;\n}\n\n.inboxsdk__resultsSection_title {\n  white-space: nowrap;\n  cursor: pointer;\n  display: inline-block;\n}\n.inboxsdk__resultsSection_title {\n  display: flex;\n  align-items: center;\n  height: 48px;\n}\n\n.Wc .inboxsdk__resultsSection_title {\n  padding: 3px 0 3px 8px;\n}\n\n.inboxsdk__resultsSection_header {\n  min-height: 48px;\n  line-height: 48px;\n}\n\n.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH {\n  padding-right: 0px;\n  margin-right: 0px;\n}\n\n.inboxsdk__custom_sections.Wc\n  .inboxsdk__resultsSection_header_summaryText:last-child {\n  margin-right: 11px;\n}\n\n.inboxsdk__custom_sections.Wc .J-JN-M-I {\n  margin-right: 13px;\n}\n\n.inboxsdk__resultsSection .TB.TC {\n  text-align: center;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_loading {\n  font-style: italic;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon {\n  height: 15px;\n  width: 15px;\n}\n\n.inboxsdk__resultsSection_label_iconHtml,\n.inboxsdk__resultsSection_result_iconHtml {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover > .xW {\n  /* Gmailv2 tries to hide the \"xW\" element when a \"zA\" element is hovered. This prevent that. */\n  display: flex;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA > .xW {\n  max-width: none;\n  flex-basis: auto;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT {\n  align-items: center;\n  -webkit-align-items: center;\n}\n\n.inboxsdk__resultsSection .xX {\n  width: 20ex;\n}\n\n.inboxsdk__resultsSection_result_title span {\n  text-overflow: ellipsis;\n  display: block;\n  overflow: hidden;\n}\n\n.inboxsdk__resultsSection tr .xW > span {\n  overflow: hidden;\n  display: block;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__resultsSection .V3 {\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.inboxsdk__resultsSection .at {\n  position: relative;\n}\n\n.inboxsdk__thread_row_label {\n  flex-shrink: 0;\n  align-self: center;\n}\n\n.inboxsdk__thread_row_label {\n  align-self: flex-end;\n}\n\n/* label in vertical preview pane */\n.apv .inboxsdk__thread_row_label {\n  align-self: flex-start;\n}\n\n.inboxsdk__resultsSection_label_icon {\n  height: 11px;\n  width: 11px;\n  position: absolute;\n  top: 2px;\n  margin-left: 4px;\n}\n\n.inboxsdk__resultsSection_label_icon {\n  margin-top: 1px;\n}\n\n.inboxsdk__resultsSection .av,\n.inboxsdk__thread_row_label .av {\n  /* max-width is set inline, default is 90px */\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__resultsSection_label_icon + .av,\n.inboxsdk__thread_row_label .inboxsdk__button_icon + .av {\n  margin-left: 16px;\n}\n\n.Wc .inboxsdk__resultsSection_footer {\n  padding: 3px 3px 3px 8px;\n}\n\n/* end search results section */\n\n/* tooltip */\n\n/* gmail styles */\n\n.inboxsdk__tooltip .T-P {\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  background-color: #fff;\n  border: 1px solid;\n  border-color: #bbb #bbb #a8a8a8;\n  padding: 16px;\n  position: absolute;\n  z-index: 1201 !important;\n}\n\n.inboxsdk__tooltip.inboxdk__tooltip_content .T-P {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip .aRM {\n  outline: none;\n  padding: 13px 10px 16px;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxdk__tooltip_content.inboxsdk__tooltip .aRM {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip .aRR {\n  color: #333;\n  font-size: 18px;\n  margin-top: 13px;\n}\n\n.inboxsdk__tooltip .aRQ {\n  color: #777;\n  font-size: 13px;\n  margin: 3px 0 14px 0;\n}\n\n/* end gmail styles */\n\n.inboxsdk__tooltip {\n  position: fixed;\n  z-index: 1300;\n  transition: left 200ms ease, top 200ms ease;\n}\n\n.inboxsdk__tooltip .T-P {\n  position: relative;\n  width: auto;\n  max-width: 500px;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_arrow {\n  position: fixed;\n  z-index: 1400;\n  margin-top: -1px;\n  transition: left 200ms ease, top 200ms ease;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_close {\n  -webkit-user-select: none;\n}\n\n.inboxsdk__tooltip .inboxsdk__button {\n  margin-right: 0px;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_image {\n  max-height: 300px;\n  max-width: 500px;\n  overflow: hidden;\n  height: auto;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_image > img {\n  max-height: 300px;\n  max-width: 500px;\n}\n\n/* end tooltip */\n\n/* attachment card */\n\n.inboxsdk__attachmentCard img.aQG.aYB {\n  max-width: 178px;\n  min-width: 178px;\n  min-height: 118px;\n}\n\n.inboxsdk__attachmentCard img.aZG.aYw {\n  background: none;\n}\n\n/* add some margins between cards so 4+ cards don't hit each other */\n\n.aQw > .T-I.J-J5-Ji.L3 {\n  margin-top: 5px;\n}\n\n/* end attachment card */\n\n/* keyboard shortcut help */\n\ntable.cf.wd.inboxsdk__shortcutHelp_table {\n  margin-bottom: 15px;\n}\n\n.inboxsdk__shortcutHelp_table td.Dn {\n  display: inline-block;\n  width: 50%;\n}\n\n.inboxsdk__shortcutHelp_table table.cf {\n  display: block;\n}\n\n.inboxsdk__shortcutHelp_table tbody tbody {\n  display: block;\n}\n\n.inboxsdk__shortcutHelp_table tbody tbody tr {\n  display: block;\n  white-space: nowrap;\n}\n\n.inboxsdk__shortcutHelp_table td.wg.Dn {\n  display: inline-block;\n  width: 45%;\n}\n\n.inboxsdk__shortcutHelp_table span.wb {\n  margin-left: 3px;\n}\n\n.inboxsdk__shortcutHelp_table td.we.Dn {\n  width: 60%;\n  white-space: normal;\n}\n\n.inboxsdk__shortcutHelp_title img.inboxsdk__icon {\n  height: 21px;\n  width: 21px;\n  vertical-align: middle;\n  margin-right: 10px;\n  border-radius: 4px;\n}\n\n/* end keyboard shortcut help */\n\n/* search suggestions */\n\n.asor.inboxsdk__custom_suggestion {\n  display: flex;\n  display: -webkit-flex;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n}\n\n.inboxsdk__custom_suggestion img {\n  max-width: 32px;\n  max-height: 32px;\n}\n\n.inboxsdk__custom_suggestion_iconHTML {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 8px;\n  height: 32px;\n  width: 43px;\n}\n\n/* Adjust positioning when no description present */\n.gstq_d .inboxsdk__custom_suggestion_iconHTML {\n  margin-top: -8px;\n}\n\n/* end send suggestions */\n\n/* app toolbar */\n\n.inboxsdk__appButton {\n  margin-right: 8px;\n}\n\n.inboxsdk__appButton + .inboxsdk__appButton {\n  margin-left: 16px;\n}\n\n.inboxsdk__appButton.inboxsdk__appButton_noGPlus {\n  margin-right: 0px;\n}\n\n.inboxsdk__appButton .inboxsdk__button_icon {\n  margin-right: 5px;\n  position: relative;\n}\n\n.inboxsdk__appButton a {\n  color: #404040;\n  text-decoration: none;\n  line-height: 24px;\n}\n\n.inboxsdk__appButton.inboxsdk__appButton_noGPlus a {\n  line-height: 30px;\n}\n\n.inboxsdk__appButton a:hover {\n  text-decoration: underline;\n  color: #000;\n}\n\n.inboxsdk__gmail_dark_theme .inboxsdk__appButton a {\n  color: #eee;\n}\n.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover {\n  color: #fff;\n}\n\n.inboxsdk__appButton_tooltip {\n  outline: none;\n  transition: none;\n  -webkit-animation: gb__a 0.2s;\n}\n\n.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close {\n  display: none;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM {\n  padding: 0px;\n  white-space: initial;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow {\n  transform-origin: top;\n  transform: rotateZ(180deg);\n  margin-top: 9px;\n}\n\n/* resize based on width */\n\n.inboxsdk__searchIsNarrow .streak__appToolbarButton_title {\n  display: none;\n}\n\n/* end resize based on width */\n\n/* end app toolbar */\n\n/* custom message views */\n\n.inboxsdk__custom_message_view {\n  display: flex;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-top: 1px solid #efefef;\n  border-collapse: collapse;\n}\n\n.inboxsdk__custom_message_view_hidden {\n  display: none;\n}\n\n/* when cusotm message is right after the last message with its reply */\n.h7.ie + .inboxsdk__custom_message_view {\n  margin-top: 5px;\n}\n\n/* when custom message is after the super collapsed message elements */\n.kQ + .inboxsdk__custom_message_view,\n.kx + .inboxsdk__custom_message_view {\n  margin-top: 1px;\n}\n\n.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {\n  cursor: pointer;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon {\n  padding-left: 16px;\n  padding-right: 16px;\n  flex-shrink: 0;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img {\n  height: 32px;\n  width: 32px;\n  border-radius: 50%;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content {\n  width: 100%;\n  min-width: 0px;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header {\n  cursor: pointer;\n}\n\n.inboxsdk__custom_message_view_app_notice_content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  z-index: 1;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container {\n  position: relative;\n  width: auto !important;\n  min-width: 32px;\n}\n\n.inboxsdk__custom_message_view_app_notice_content {\n  align-items: center;\n  display: flex;\n  font-size: 0.75rem !important;\n  justify-content: flex-start;\n  margin-left: 0;\n  padding: 0px;\n  top: 0;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before {\n  content: none !important;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container\n  > span:first-child {\n  display: none;\n}\n\n.inboxsdk__custom_message_view_app_notice_container::before {\n  position: absolute;\n}\n\n.inboxsdk__custom_message_view_app_notice_content > * {\n  color: #555;\n}\n\ntable[role='presentation'].inboxsdk__thread_view_with_custom_view {\n  table-layout: fixed;\n}\n\ntable[role='presentation'].inboxsdk__thread_view_with_custom_view > tr {\n  display: block;\n}\n\n/* end custom message views */\n\n/* butter/snack bar */\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error {\n  background-color: #c53929 !important;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button'] {\n  color: #fff;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button']::before {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n/* end butter/snack bar */\n\n/* support menu item */\n.inboxsdk__support_menuItem:hover {\n  background-color: #eeeeee;\n  outline: 1px dashed transparent;\n}\n\n.inboxsdk__compose_addressList {\n  display: flex !important;\n}\n\n/* end support menu item */\n\n/* compose popover */\n.inboxsdk__linkPopOver_section_container {\n  position: absolute;\n  width: 100%;\n  top: 35px;\n  left: 0;\n}\n\n.inboxsdk__linkPopOver_section {\n  width: 100%;\n  background: #fff;\n  border: 1px solid;\n  border-color: #bbb #bbb #a8a8a8;\n  font: 13px arial, sans-serif;\n  padding: 5px 8px;\n  margin-bottom: 5px;\n  box-sizing: border-box;\n  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);\n}\n\n/* end compose popover */\n\n/*\n Toolbar/Thread button style fix for\n when the gmail setting \"Button labels\" is set to \"text\"\n*/\n\n.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after {\n  width: auto;\n}\n")},{"../../lib/rewriteCssWithIdMap":696,"@babel/runtime/helpers/interopRequireDefault":15,"ud-kefir":453}],493:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),o=r(e("../../lib/stream-wait-for")),a=r(e("../../lib/dom/querySelectorOrFail")),s=r(e("../../lib/dom/make-mutation-observer-chunked-stream"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=(0,o.default)((()=>document.body.querySelector('div.b8[role="alert"]'))).map((e=>{const t=(0,a.default)(e,".vh:not(.inboxsdk__butterbar)");let n=e.querySelector(".vh.inboxsdk__butterbar");if(!n){n=document.createElement("div"),n.classList.add("vh","inboxsdk__butterbar"),n.style.display="none";const e=document.createElement("span");e.classList.add("aT");const r=document.createElement("span");r.classList.add("inboxsdk__butterbar-text","bAq");const i=document.createElement("span");i.classList.add("inboxsdk__butterbar-buttons","bAo"),i.innerHTML="&nbsp;&nbsp;";const o=document.createElement("div");o.classList.add("inboxsdk__butterbar-close","bBe"),o.innerHTML='<div class="bBf"></div>',o.setAttribute("role","button"),o.tabIndex=0,e.appendChild(r),e.appendChild(i),n.appendChild(e),n.appendChild(o);const a=t.parentNode;if(!a)throw new Error("parentNode not found");a.insertBefore(n,t.nextSibling)}return{noticeContainer:e,googleNotice:t,sdkNotice:n}})).toProperty(),c=u.flatMapLatest((e=>{let{googleNotice:t}=e;return(0,s.default)(t,{childList:!0})})),d=c.filter((e=>e.some((e=>e.addedNodes.length>0)))),f=c.filter((e=>!e.some((e=>e.addedNodes.length>0)))),p=u.flatMapLatest((e=>{let{sdkNotice:t}=e;return(0,s.default)(t,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map((()=>t.getAttribute("data-inboxsdk-id")))})).filter((e=>null==e)),h=i.merge([f,p]);function m(e,t,n){t.style.display="",e.style.top="-10000px",e.style.position="relative",e.classList.remove("bAp"),n.style.display="none",n.removeAttribute("data-inboxsdk-id")}n.default=class{constructor(){i.combine([u,d]).onValue((e=>{let[{googleNotice:t,sdkNotice:n}]=e;t.style.display="",n.style.display="none",n.setAttribute("data-inboxsdk-id","gmail")})),h.onValue((()=>{}))}getNoticeAvailableStream(){return h}getSharedMessageQueue(){const e=document.head.getAttribute("data-inboxsdk-butterbar-queue");return e?JSON.parse(e):[]}setSharedMessageQueue(e){const t=JSON.stringify(e);document.head.setAttribute("data-inboxsdk-butterbar-queue",t)}showMessage(e){const t=Date.now()+"-"+Math.random(),n=()=>{u.take(1).onValue((n=>{let{noticeContainer:r,googleNotice:i,sdkNotice:o}=n;o.getAttribute("data-inboxsdk-id")===t&&(e.className&&o.classList.remove(e.className),m(r,i,o))}))};return u.take(1).onValue((r=>{let{noticeContainer:o,googleNotice:s,sdkNotice:l}=r;o.style.visibility="visible",o.style.top="",o.classList.add("bAp"),s.style.display="none",l.className=s.className,l.classList.add("inboxsdk__butterbar");const u=(0,a.default)(l,".inboxsdk__butterbar-text");for(;u.firstChild;)u.removeChild(u.firstChild);const c=(0,a.default)(l,".inboxsdk__butterbar-buttons");for(;c.firstChild;)c.removeChild(c.firstChild);e.html?u.innerHTML=e.html:e.el?u.appendChild(e.el):u.textContent=e.text,e.buttons&&e.buttons.forEach((e=>{const t=document.createElement("span");t.classList.add("ag","a8k"),t.onclick=t=>e.onClick(t),t.setAttribute("role","button"),t.tabIndex=0,t.textContent=e.title,c.appendChild(t)}));const d=(0,a.default)(l,".inboxsdk__butterbar-close");d&&i.fromEvents(d,"click").take(1).onValue(n),e.className&&l.classList.add(e.className),l.style.display="",l.setAttribute("data-inboxsdk-id",t)})),{destroy:n}}hideGmailMessage(){u.take(1).onValue((e=>{let{noticeContainer:t,googleNotice:n,sdkNotice:r}=e;"gmail"===r.getAttribute("data-inboxsdk-id")&&m(t,n,r)}))}}},{"../../lib/dom/make-mutation-observer-chunked-stream":662,"../../lib/dom/querySelectorOrFail":668,"../../lib/stream-wait-for":701,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],494:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("live-set/toValueObservable")),a=r(e("transducers.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=se(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),l=r(e("kefir-stopper")),u=r(e("kefir-bus")),c=r(e("lodash/includes")),d=r(e("../../../common/get-or-fail")),f=r(e("./gmail-driver/show-app-id-warning")),p=r(e("./makePageParserTree")),h=r(e("./gmail-element-getter")),m=r(e("./make-xhr-interceptor")),_=r(e("./views/gmail-backdrop")),b=e("./views/gmail-thread-row-view"),g=r(e("./widgets/gmail-top-message-bar-driver")),v=r(e("./widgets/gmail-modal-view-driver")),y=r(e("./widgets/gmail-mole-view-driver")),w=r(e("../inbox/views/inbox-drawer-view")),E=r(e("./views/gmail-route-view/gmail-route-processor")),k=r(e("./gmail-driver/keyboard-shortcut-help-modifier")),x=r(e("./gmail-driver/open-draft-by-message-id")),S=r(e("./gmail-driver/user-info")),C=r(e("./gmail-butter-bar-driver")),I=r(e("./gmail-driver/track-gmail-styles")),A=r(e("./gmail-driver/temporary-track-download-url-validity")),D=r(e("../../driver-common/getGmailThreadIdForRfcMessageId")),T=r(e("./gmail-driver/get-rfc-message-id-for-gmail-thread-id")),M=r(e("../../driver-common/getGmailMessageIdForSyncMessageId")),O=r(e("bimapcache")),P=r(e("./gmail-driver/get-draft-id-for-message-id")),R=r(e("./gmail-driver/add-nav-item")),L=e("./gmail-driver/add-app-menu-item"),j=r(e("./gmail-driver/add-support-item")),N=r(e("./gmail-driver/goto-view")),V=r(e("./gmail-driver/show-custom-thread-list")),B=r(e("./gmail-driver/show-custom-route-view")),q=r(e("./gmail-driver/show-native-route-view")),U=r(e("./gmail-driver/register-search-suggestions-provider")),F=r(e("./gmail-driver/setup-compose-view-driver-stream")),H=r(e("./gmail-driver/track-events")),z=r(e("./gmail-driver/gmail-load-event")),W=r(e("./gmail-driver/thread-row-identifier")),$=r(e("./custom-style")),G=r(e("./gmail-driver/override-gmail-back-button")),K=r(e("./gmail-driver/add-toolbar-button-for-app")),J=r(e("./gmail-driver/setup-route-view-driver-stream")),Y=r(e("./gmail-driver/get-native-nav-item")),Q=r(e("./gmail-driver/create-link")),Z=r(e("./gmail-driver/register-search-query-rewriter")),X=r(e("./gmail-driver/open-compose-window")),ee=r(e("./views/gmail-app-sidebar-view")),te=r(e("./gmail-driver/suppressAddon")),ne=r(e("./gmail-driver/getSyncThreadFromSyncThreadId")),re=r(e("./gmail-driver/getSyncThreadForOldGmailThreadId")),ie=r(e("../../lib/toItemWithLifetimeStream")),oe=r(e("../../lib/toLiveSet")),ae=r(e("../../lib/stream-wait-for"));function se(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(se=function(e){return e?n:t})(e)}var le=class{constructor(e,t,n,r,o,c){(0,i.default)(this,"_customRouteIDs",new Set),(0,i.default)(this,"_customListRouteIDs",new Map),(0,i.default)(this,"_customListSearchStringsToRouteIds",new Map),(0,i.default)(this,"_messageIDsToThreadIDs",new Map),(0,i.default)(this,"_stopper",(0,l.default)()),(0,i.default)(this,"_navMarkerHiddenChanged",(0,u.default)()),(0,i.default)(this,"_addonSidebarHiddenChanged",(0,u.default)()),(0,i.default)(this,"_appSidebarView",null),(0,i.default)(this,"_recentSyncDraftIds",new Map),(0,i.default)(this,"_selectedThreadRows",a.default.mapcat((e=>e.getSelectedThreadRowViewDrivers()))),(0,i.default)(this,"_threadRowViewSelectionChanges",(0,u.default)()),(0,$.default)(),this._appId=e,this._logger=r,this._opts=o,this._envData=c,this._page=(0,p.default)(this,document),this._stopper.onValue((()=>this._page.dump()));{const e=new O.default({key:"inboxsdk__cached_thread_ids",getAfromB:e=>(0,T.default)(this,e),getBfromA:e=>(0,D.default)(this,e)});this.getGmailThreadIdForRfcMessageId=t=>e.getBfromA(t),this.getRfcMessageIdForGmailThreadId=t=>e.getAfromB(t)}{const e=new O.default({key:"inboxsdk__cached_sync_thread_id_old_gmail_thread_id",getAfromB:e=>(0,re.default)(this,e).then((e=>{let{syncThreadID:t}=e;return t})),getBfromA:e=>(0,ne.default)(this,e).then((e=>{if(e)return e.oldGmailThreadID;throw new Error("syncThread not found")}))});this.getSyncThreadIdForOldGmailThreadId=t=>e.getAfromB(t),this.getOldGmailThreadIdFromSyncThreadId=t=>e.getBfromA(t),this.removeCachedOldGmailThreadIdFromSyncThreadId=t=>e.removeAfromCache(t)}{try{localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids_2")}catch(e){console.error(e)}const e=new O.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_3",getAfromB:e=>(0,M.default)(this,e),getBfromA(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=t=>e.getAfromB(t),this.removeCachedGmailMessageIdForSyncMessageId=t=>e.removeBfromCache(t),this.getGmailMessageIdForSyncDraftId=e=>(0,M.default)(this,e)}this._gmailRouteProcessor=new E.default,this._keyboardShortcutHelpModifier=new k.default,this._butterBarDriver=new C.default,s.later(45e3,void 0).takeUntilBy((0,ie.default)(this._page.tree.getAllByTag("supportMenu"))).onValue((()=>{this._logger.errorSite(new Error("Failed to find gmail supportMenu"))})),this._setupEventStreams(),this.onready.then((()=>{(0,H.default)(this),(0,z.default)(this),(0,G.default)(this,this._gmailRouteProcessor),(0,I.default)(),(0,A.default)(this),null!=o.suppressAddonTitle&&(0,te.default)(this,o.suppressAddonTitle)})).catch((e=>{this._logger.error(e)}))}destroy(){this._threadRowViewSelectionChanges.end(),this._keyboardShortcutHelpModifier.destroy(),this._stopper.destroy(),(0,b.removeAllThreadRowUnclaimedModifications)()}getAppId(){return this._appId}getOpts(){return this._opts}getPageCommunicator(){return this._pageCommunicator}getPageCommunicatorPromise(){return this._pageCommunicatorPromise}getLogger(){return this._logger}getTagTree(){return this._page.tree}getCustomListSearchStringsToRouteIds(){return this._customListSearchStringsToRouteIds}getThreadRowIdentifier(){return this._threadRowIdentifier}getButterBarDriver(){return this._butterBarDriver}getButterBar(){return this._butterBar}setButterBar(e){this._butterBar=e}getCustomRouteIDs(){return this._customRouteIDs}getCustomListRouteIDs(){return this._customListRouteIDs}getKeyboardShortcutHelpModifier(){return this._keyboardShortcutHelpModifier}getRouteViewDriverStream(){return this._routeViewDriverStream}getRowListViewDriverStream(){return this._rowListViewDriverStream}getThreadRowViewDriverStream(){return this._threadRowViewDriverKefirStream}getThreadViewDriverStream(){return(0,ie.default)(this._threadViewDriverLiveSet).map((e=>{let{el:t}=e;return t}))}getAttachmentCardViewDriverStream(){return this._messageViewDriverStream.flatMap((e=>e.isLoaded()?s.constant(e):e.getEventStream().filter((e=>"messageLoad"===e.eventName)).map((()=>e)).take(1))).map((e=>e.getAttachmentCardViewDrivers())).flatten()}getComposeViewDriverStream(){return this._composeViewDriverStream}getXhrInterceptorStream(){return this._xhrInterceptorStream}getMessageViewDriverStream(){return this._messageViewDriverStream}getStopper(){return this._stopper}getEnvData(){return this._envData}getTimestampOnReady(){return null==this._timestampOnready?(this._logger.error(new Error("getTimestampOnReady called before ready")),Date.now()):this._timestampOnready}delayToTimeAfterReady(e){const t=this.getTimestampOnReady()+e,n=Math.max(0,t-Date.now());return s.later(n,void 0)}getTimings(){return{piMainStarted:this._envData.piMainStarted,piLoadStarted:this._envData.piLoadStarted,globalsFound:this._timestampGlobalsFound,accountSwitcherReady:this._timestampAccountSwitcherReady,onready:this._timestampOnready}}registerThreadButton(e){const t=(0,l.default)(),n=e=>{t.takeUntilBy(e.getStopper()).onValue((()=>{e.destroy()}))},r=(0,o.default)(this._toolbarViewDriverLiveSet).subscribe((t=>{let{value:r}=t;r.isForThread()?e.positions&&!(0,c.default)(e.positions,"THREAD")||n(r.addButton({...e,section:e.threadSection||"METADATA_STATE",onClick:t=>{e.onClick({position:"THREAD",dropdown:t.dropdown,selectedThreadViewDrivers:[r.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}})):r.isForRowList()&&(e.positions&&!(0,c.default)(e.positions,"LIST")||n(r.addButton({...e,section:e.listSection||"METADATA_STATE",onClick:t=>{const n=Array.from(r.getThreadRowViewDrivers()).filter((e=>e.isSelected()));e.onClick({position:"LIST",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:n})}})))}));if(t.onValue((()=>{r.unsubscribe()})),!e.positions||(0,c.default)(e.positions,"ROW")){const n=n=>{n.addButton(s.constant({hasDropdown:e.hasDropdown,iconClass:e.iconClass,iconUrl:e.iconUrl,orderHint:e.orderHint,onClick:t=>{e.onClick&&e.onClick({position:"ROW",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[n]})}}).merge(t))};this._currentRouteViewDriver&&this._currentRouteViewDriver.getRowListViews().forEach((e=>{e.getThreadRowViewDrivers().forEach(n)}));const r=this._threadRowViewDriverKefirStream.observe({value:n});t.onValue((()=>{r.unsubscribe()}))}return()=>{t.destroy()}}hashChangeNoViewChange(e){if("#"!==e[0])throw new Error("bad hash");window.history.replaceState(null,null,e);var t=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+"#inboxsdk-fake-no-vc",newURL:document.location.href.replace(/#.*$/,"")+e});window.dispatchEvent(t)}addCustomRouteID(e){return this._customRouteIDs.add(e),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),()=>{this._customRouteIDs.delete(e)}}addCustomListRouteID(e,t){return this._customListRouteIDs.set(e,t),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),()=>{this._customListRouteIDs.delete(e)}}signalCustomThreadListActivity(e){this._lastCustomThreadListActivity={customRouteID:e,timestamp:new Date}}getLastCustomThreadListActivity(){return this._lastCustomThreadListActivity}showCustomThreadList(e,t,n){(0,V.default)(this,e,t,n)}showCustomRouteView(e){(0,B.default)(this,e)}showNativeRouteView(){(0,q.default)(this)}createLink(e,t){return(0,Q.default)(this._gmailRouteProcessor,e,t)}goto(e,t){return(0,N.default)(this,e,t)}resolveUrlRedirects(e){return this._pageCommunicatorPromise.then((t=>t.resolveUrlRedirects(e)))}registerSearchSuggestionsProvider(e){(0,U.default)(this,e)}registerSearchQueryRewriter(e){(0,Z.default)(this._pageCommunicator,e)}addToolbarButtonForApp(e){return(0,K.default)(this,e)}async openNewComposeViewDriver(){try{const e=this.getNextComposeViewDriver();await(0,X.default)(this);return await e}catch(e){throw this._logger.error(e),e}}getNextComposeViewDriver(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return this._composeViewDriverStream.merge(s.later(e,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd((()=>new Error("Driver was shut down before a new compose was found"))).flatMap((e=>e instanceof Error?s.constantError(e):s.constant(e))).take(1).takeErrors(1).toPromise()}openDraftByMessageID(e){return(0,x.default)(this,e)}createModalViewDriver(e){return new v.default(e)}createMoleViewDriver(e){return new y.default(this,e)}createDrawerViewDriver(e){return new w.default(e)}createBackdrop(e,t){return new _.default(e,t)}addNavItem(e,t,n){return(0,R.default)(this,e,t,n)}addAppMenuItem(e){return(0,L.addAppMenuItem)(this,e)}addSupportItem(e){return(0,j.default)(this,e)}getSentMailNativeNavItem(){const e=(0,Y.default)(this,"sent");return e.catch((e=>this._logger.error(e))),e}setShowNativeNavMarker(e){this._navMarkerHiddenChanged.emit(null);const t=h.default.getLeftNavContainerElement();t&&(e?t.classList.remove("inboxsdk__hide_native_marker"):(t.classList.add("inboxsdk__hide_native_marker"),this._stopper.takeUntilBy(this._navMarkerHiddenChanged).onValue((()=>{t.classList.remove("inboxsdk__hide_native_marker")}))))}setShowNativeAddonSidebar(e){this._addonSidebarHiddenChanged.emit(null);const t=h.default.getAddonSidebarContainerElement(),n=h.default.getMainContentBodyContainerElement();if(t&&n){const t=n.parentElement;if(!t)return;e?t.classList.remove("inboxsdk__hide_addon_container"):(t.classList.add("inboxsdk__hide_addon_container"),this._stopper.takeUntilBy(this._addonSidebarHiddenChanged).onValue((()=>{t.classList.remove("inboxsdk__hide_addon_container")})))}}async getGmailActionToken(){return this._pageCommunicator.getActionTokenValue()}getUserEmailAddress(){return this._pageCommunicator.getUserEmailAddress()}isConversationViewDisabled(){return this._pageCommunicator.isConversationViewDisabled()}getUserLanguage(){return this._pageCommunicator.getUserLanguage()}getUserContact(){return{emailAddress:this.getUserEmailAddress(),name:this._userInfo.getUserName()}}getAccountSwitcherContactList(){return this._userInfo.getAccountSwitcherContactList()}activateShortcut(e,t,n){this.getKeyboardShortcutHelpModifier().set(e,this._appId,t,n),e.once("destroy",(()=>{this.getKeyboardShortcutHelpModifier().delete(e)}))}_setupEventStreams(){var e=(0,m.default)();this._xhrInterceptorStream=e.xhrInterceptStream.takeUntilBy(this._stopper),this._pageCommunicatorPromise=e.pageCommunicatorPromise,this.onready=this._pageCommunicatorPromise.then((e=>{this._timestampGlobalsFound=Date.now(),this._pageCommunicator=e,this._logger.setUserEmailAddress(this.getUserEmailAddress()),this._logger.setIsUsingSyncAPI(e.isUsingSyncAPI()),this._userInfo=new S.default(this),this._timestampAccountSwitcherReady=Date.now(),this._routeViewDriverStream=(0,J.default)(this._gmailRouteProcessor,this).takeUntilBy(this._stopper).toProperty(),this._routeViewDriverStream.onValue((e=>{this._currentRouteViewDriver=e})),this._rowListViewDriverStream=this._setupRouteSubViewDriver("newGmailRowListView").takeUntilBy(this._stopper),this._setupThreadRowViewDriverKefirStream(),this._threadViewDriverLiveSet=(0,oe.default)(this._setupRouteSubViewDriver("newGmailThreadView").takeUntilBy(this._stopper).flatMap((e=>e.getReadyStream().map((()=>e)))).map((e=>({el:e,removalStream:e.getStopper()})))),this._setupToolbarViewDriverStream(),this._setupMessageViewDriverStream(),this._setupComposeViewDriverStream(),this._threadRowIdentifier=new W.default(this),this._timestampOnready=Date.now()}))}_setupComposeViewDriverStream(){this._composeViewDriverStream=(0,F.default)(this,this._messageViewDriverStream,this._xhrInterceptorStream).takeUntilBy(this._stopper)}_setupRouteSubViewDriver(e){return this._routeViewDriverStream.flatMap((t=>t.getEventStream().filter((t=>t.eventName===e)).map((e=>e.view))))}_setupThreadRowViewDriverKefirStream(){this._threadRowViewDriverKefirStream=this._rowListViewDriverStream.flatMap((e=>e.getRowViewDriverStream())).takeUntilBy(this._stopper)}_setupToolbarViewDriverStream(){this._toolbarViewDriverLiveSet=(0,oe.default)(s.merge([this._rowListViewDriverStream.map((e=>e.getToolbarView())),this.getThreadViewDriverStream().map((e=>e.getToolbarView()))]).filter(Boolean).flatMap((e=>e.waitForReady())).map((e=>({el:e,removalStream:e.getStopper()}))).takeUntilBy(this._stopper)),this._toolbarViewDriverLiveSet.subscribe({})}_setupMessageViewDriverStream(){this._messageViewDriverStream=this.getThreadViewDriverStream().flatMap((e=>e.getMessageViewDriverStream())).takeUntilBy(this._stopper)}async addGlobalSidebarContentPanel(e){await this.waitForGlobalSidebarReady().merge(this._stopper.flatMap((()=>s.constantError(new Error("Driver instance was destroyed early"))))).take(1).takeErrors(1).toPromise();return this.getGlobalSidebar().addGlobalSidebarContentPanel(e)}waitForGlobalSidebarReady(){const e=()=>h.default.getCompanionSidebarContentContainerElement()&&(h.default.getCompanionSidebarIconContainerElement()||h.default.getAddonSidebarContainerElement());return e()?s.constant(void 0):(0,ae.default)(e).map((()=>{}))}getGlobalSidebar(){let e=this._appSidebarView;if(!e){const t=h.default.getCompanionSidebarContentContainerElement();if(!t)throw new Error("did not find companionSidebarContentContainerEl");e=this._appSidebarView=new ee.default(this,t)}return e}isRunningInPageContext(){return!(!t.GLOBALS||!t._GM_main)}isUsingSyncAPI(){return this._pageCommunicator.isUsingSyncAPI()}showAppIdWarning(){(0,f.default)(this)}createTopMessageBarDriver(e){return new g.default(e)}associateThreadAndMessageIDs(e,t){this._messageIDsToThreadIDs.set(t,e)}getThreadIDForMessageID(e){return(0,d.default)(this._messageIDsToThreadIDs,e)}getDraftIDForMessageID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,P.default)(this,e,t)}reportRecentSyncDraftId(e){const t=(this._recentSyncDraftIds.get(e)??0)+1;this._recentSyncDraftIds.set(e,t)}reportDraftClosed(e){s.later(3e4,void 0).takeUntilBy(this._stopper).onValue((()=>{const t=this._recentSyncDraftIds.get(e);let n;null==t||t<1?(n=0,this._logger.error(new Error("_recentSyncDraftIds count had unexpected value"),{count:t})):n=t-1,0===n?this._recentSyncDraftIds.delete(e):this._recentSyncDraftIds.set(e,n)}))}isRecentSyncDraftId(e){return this._recentSyncDraftIds.has(e)}getSelectedThreadRowViewDrivers(){return this._currentRouteViewDriver?a.default.toArray(this._currentRouteViewDriver.getRowListViews(),this._selectedThreadRows):[]}signalThreadRowViewSelectionChange(){this._threadRowViewSelectionChanges.value(void 0)}registerThreadRowViewSelectionHandler(e){return this._threadRowViewSelectionChanges.onValue(e),()=>{this._threadRowViewSelectionChanges.offValue(e)}}};n.default=le}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/get-or-fail":475,"../../driver-common/getGmailMessageIdForSyncMessageId":634,"../../driver-common/getGmailThreadIdForRfcMessageId":635,"../../lib/stream-wait-for":701,"../../lib/toItemWithLifetimeStream":702,"../../lib/toLiveSet":703,"../inbox/views/inbox-drawer-view":623,"./custom-style":492,"./gmail-butter-bar-driver":493,"./gmail-driver/add-app-menu-item":495,"./gmail-driver/add-nav-item":497,"./gmail-driver/add-support-item":498,"./gmail-driver/add-toolbar-button-for-app":499,"./gmail-driver/create-link":500,"./gmail-driver/get-draft-id-for-message-id":502,"./gmail-driver/get-native-nav-item":503,"./gmail-driver/get-rfc-message-id-for-gmail-thread-id":505,"./gmail-driver/getSyncThreadForOldGmailThreadId":507,"./gmail-driver/getSyncThreadFromSyncThreadId":508,"./gmail-driver/gmail-load-event":509,"./gmail-driver/goto-view":510,"./gmail-driver/keyboard-shortcut-help-modifier":512,"./gmail-driver/open-compose-window":513,"./gmail-driver/open-draft-by-message-id":514,"./gmail-driver/override-gmail-back-button":515,"./gmail-driver/register-search-query-rewriter":516,"./gmail-driver/register-search-suggestions-provider":517,"./gmail-driver/setup-compose-view-driver-stream":518,"./gmail-driver/setup-route-view-driver-stream":519,"./gmail-driver/show-app-id-warning":520,"./gmail-driver/show-custom-route-view":521,"./gmail-driver/show-custom-thread-list":522,"./gmail-driver/show-native-route-view":523,"./gmail-driver/suppressAddon":524,"./gmail-driver/temporary-track-download-url-validity":525,"./gmail-driver/thread-row-identifier":526,"./gmail-driver/track-events":527,"./gmail-driver/track-gmail-styles":528,"./gmail-driver/user-info":529,"./gmail-element-getter":530,"./make-xhr-interceptor":537,"./makePageParserTree":538,"./views/gmail-app-sidebar-view":541,"./views/gmail-backdrop":550,"./views/gmail-route-view/gmail-route-processor":586,"./views/gmail-thread-row-view":590,"./widgets/gmail-modal-view-driver":608,"./widgets/gmail-mole-view-driver":609,"./widgets/gmail-top-message-bar-driver":611,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,bimapcache:44,kefir:159,"kefir-bus":156,"kefir-stopper":158,"live-set/toValueObservable":165,"lodash/includes":323,"transducers.js":452}],495:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addAppMenuItem=async function(e,t){const n=await o.default.getAppMenuAsync(),r=new i.GmailAppMenuItemView(e,t);try{if(!n)return;const e=Number.isInteger(t.insertIndex)?n.childNodes[t.insertIndex]??null:null;n.insertBefore(r.element,e)}catch(e){a.default.error(e)}return r};var i=e("../views/gmail-app-menu-item-view"),o=r(e("../gmail-element-getter")),a=r(e("../../../lib/logger"))},{"../../../lib/logger":691,"../gmail-element-getter":530,"../views/gmail-app-menu-item-view":540,"@babel/runtime/helpers/interopRequireDefault":15}],496:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addCollapsiblePanel=async function(e,t,n){const r=await u(),i=new l.CollapsiblePanelView(e,t);if(!r||!i.element)return;if(!await o.default.getAppMenuAsync())return;const a=r.querySelectorAll(l.CollapsiblePanelView.elementSelectors.NATIVE)??[],s=Number.isInteger(n)?a[n]??null:null;var c;s?s.insertAdjacentElement("beforebegin",i.element):null===(c=[...a].at(-1))||void 0===c||c.insertAdjacentElement("afterend",i.element);return i};var i=r(e("lodash/once")),o=r(e("../gmail-element-getter")),a=r(e("../../../lib/wait-for")),s=r(e("../../../lib/logger")),l=e("../../../views/collapsible-panel-view");const u=(0,i.default)((async()=>{if(!o.default.isStandalone())try{return await(0,a.default)((()=>o.default.getAppMenuContainer()))}catch(e){s.default.error(e)}}))},{"../../../lib/logger":691,"../../../lib/wait-for":704,"../../../views/collapsible-panel-view":724,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],497:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t,n,r){await f();const s=new o.default(e,t,1);if(s.setNavItemDescriptor(n),!i.default.isStandalone())try{const e=function(e,t){if(t)return()=>{(0,l.default)(t,e.getElement())};return i.default.shouldAddNavItemsInline()?function(){(0,l.default)(function(){const e=document.querySelector(".inboxsdk__navMenu");return e?(0,c.default)(e,".TK"):function(){const e=document.createElement("div");e.setAttribute("class","LrBjie inboxsdk__navMenu"),e.innerHTML='<div class="TK"></div>';const t=i.default.getSameSectionNavItemMenuInjectionContainer();if(!t)throw new Error("should not happen");return t.insertBefore(e,t.children[2]),(0,u.default)(e,{attributes:!0,attributeFilter:["class"]}).onValue((function(){e.classList.contains("TA")&&e.classList.remove("TA")})),(0,c.default)(e,".TK")}()}(),e.getElement())}:function(){const t=i.default.getSeparateSectionNavItemMenuInjectionContainer();if(!t)throw new Error("should not happen");Array.from(document.querySelectorAll(".Xa.wT:not([data-group-order-hint])")).slice(1).forEach((e=>{e.dataset.groupOrderHint="zz_gmail"})),(0,l.default)(t,e.getElement())}}(s,r);e(),s.getEventStream().filter((e=>"orderChanged"===e.eventName)).onValue(e)}catch(e){a.default.error(e)}return s},n.waitForMenuReady=void 0;var i=r(e("../gmail-element-getter")),o=r(e("../views/gmail-nav-item-view")),a=r(e("../../../lib/logger")),s=r(e("../../../lib/wait-for")),l=r(e("../../../lib/dom/insert-element-in-order")),u=r(e("../../../lib/dom/make-mutation-observer-stream")),c=r(e("../../../lib/dom/querySelectorOrFail")),d=r(e("lodash/once"));const f=(0,d.default)((async()=>{await i.default.getAppMenuAsync()||await p()}));n.waitForMenuReady=f;const p=(0,d.default)((async()=>{i.default.isStandalone()||(await i.default.waitForGmailModeToSettle(),await(0,s.default)((()=>document.querySelector(".aeN[role=navigation], .aeN [role=navigation]"))),await(0,s.default)((()=>document.querySelector(".Ls77Lb.aZ6 > .pp"))))}))},{"../../../lib/dom/insert-element-in-order":656,"../../../lib/dom/make-mutation-observer-stream":663,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/logger":691,"../../../lib/wait-for":704,"../gmail-element-getter":530,"../views/gmail-nav-item-view":585,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],498:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new i.default(e,t)};var i=r(e("../views/gmail-support-item-view"))},{"../views/gmail-support-item-view":589,"@babel/runtime/helpers/interopRequireDefault":15}],499:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return i.default.waitForGmailModeToSettle().then((()=>i.default.isStandalone()?new Promise(((e,t)=>{})):new o.default(e,t)))};var i=r(e("../gmail-element-getter")),o=r(e("../views/gmail-app-toolbar-button-view"))},{"../gmail-element-getter":530,"../views/gmail-app-toolbar-button-view":546,"@babel/runtime/helpers/interopRequireDefault":15}],500:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if(n="string"==typeof n?n:n?Object.assign({},n):{},t=e.getCompatibleRouteID(t),"string"==typeof n){var r=t.match(/:/g);if(r&&1===r.length){var a=n;(n={})[t.match(/:(\w+)($|\/)?/)[1]]=a}else n={}}t.match(/:page(?:\/|$)/)&&!n.page&&(n.page=0);const s=t.split("/");let l;try{l=(0,i.default)(t,n)}catch(e){o.default.error(e,{routeID:t,paramsKey:Object.keys(n)}),l=s.map((function(e){if(-1===e.indexOf(":"))return e;const t=e.split(":");return n&&void 0!==n[t[1]]?t[0]+n[t[1]]:t[0]})).map(encodeURIComponent).join("/")}e.isListRouteName(s[0])&&l.indexOf("p0")===l.length-2&&(l=l.substring(0,l.length-3));return"#"+l};var i=r(e("../../../lib/populateRouteID")),o=r(e("../../../lib/logger"))},{"../../../lib/logger":691,"../../../lib/populateRouteID":694,"@babel/runtime/helpers/interopRequireDefault":15}],501:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){const a=`${e.replace(/^thread-/,"")}+${n}`,s=t.from(a).toString("base64").replace(/=/g,"");return(0,r.convertBase)(s,i,o)};var r=e("@macil/simple-base-converter");const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="BCDFGHJKLMNPQRSTVWXZbcdfghjklmnpqrstvwxz"}).call(this)}).call(this,e("buffer").Buffer)},{"@macil/simple-base-converter":29,buffer:46}],502:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/memoize")),o=e("ud"),a=r(e("../../../driver-common/gmailAjax")),s=e("../gmail-response-processor"),l=r(e("../../../lib/isStreakAppId"));async function u(e,t){const n=await(0,a.default)({method:"GET",url:document.location.origin+document.location.pathname,data:{ui:"2",ik:e.getPageCommunicator().getIkValue(),view:"cv",th:t,prf:"1",nsc:"1",mb:"0",rt:"j",search:"drafts"}});try{const e=(0,s.readDraftId)(n.text,t);return{draftID:e,debugData:{responseText:n.text}}}catch(r){throw(0,l.default)(e.getAppId())&&e.getLogger().error(r,{message:"failed to read draft ID",messageID:t,text:n.text}),r}}const c=(0,i.default)(u,((e,t)=>t));var d=(0,o.defn)(t,(function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?u(e,t):c(e,t)}));n.default=d},{"../../../driver-common/gmailAjax":638,"../../../lib/isStreakAppId":690,"../gmail-response-processor":534,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/memoize":343,ud:454}],503:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,s.default)((()=>{const e=o.default.getLeftNavContainerElement();return e?e.querySelector(`.aim a[href*="#${t}"]`):null}),3e5).then((n=>{const r=(0,a.default)(n,(e=>e.classList.contains("aim")));if(!r)throw new Error("native nav item structured weird");return r.__nativeGmailNavItemView||(r.__nativeGmailNavItemView=new i.default(e,r,t)),r.__nativeGmailNavItemView})).catch((e=>{if(o.default.isStandalone())return new Promise(((e,t)=>{}));throw e}))};var i=r(e("../views/native-gmail-nav-item-view")),o=r(e("../gmail-element-getter")),a=r(e("../../../../common/find-parent")),s=r(e("../../../lib/wait-for"))},{"../../../../common/find-parent":473,"../../../lib/wait-for":704,"../gmail-element-getter":530,"../views/native-gmail-nav-item-view":596,"@babel/runtime/helpers/interopRequireDefault":15}],504:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){const n=(await(0,i.default)(e,{oldGmailMessageID:t})).match(/^Message-ID:\s+(\S+)\s*$/im);if(!n)throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");return(0,o.default)(n[1])};var i=r(e("../../../driver-common/getOriginalMessagePage")),o=r(e("../../../../common/html-to-text"))},{"../../../../common/html-to-text":478,"../../../driver-common/getOriginalMessagePage":636,"@babel/runtime/helpers/interopRequireDefault":15}],505:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){const n={ui:2,ik:e.getPageCommunicator().getIkValue(),view:"cv",th:t,nsc:1,mb:0,rt:"j",search:"all"},r=await(0,i.default)({method:"POST",url:document.location.origin+document.location.pathname+"?"+o.default.stringify(n),canRetry:!0}),l=a.extractMessageIdsFromThreadBatchRequest(r.text);if(1!==Object.keys(l).length)throw new Error(`Expected to find 1 thread/message ID pair, but got ${Object.keys(l).length}`);const u=l[t];if(!u)throw new Error("Could not find a message ID for given thread ID");return(0,s.default)(e,u)};var i=r(e("../../../driver-common/gmailAjax")),o=r(e("querystring")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("../gmail-response-processor")),s=r(e("./get-rfc-message-id-for-gmail-message-id"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}},{"../../../driver-common/gmailAjax":638,"../gmail-response-processor":534,"./get-rfc-message-id-for-gmail-message-id":504,"@babel/runtime/helpers/interopRequireDefault":15,querystring:409}],506:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=e.match(/#([^?]*)(?:\?(.*))?/);if(!t)return{name:"inbox",params:[],hash:"",query:void 0};const n=t[1],r=n.split("/");return{name:decodeURIComponent(r[0]),params:r.slice(1).map((e=>e.replace(/\+/g," "))).map(decodeURIComponent),query:t[2],hash:n}}},{}],507:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){const{threads:n,_text:r}=await(0,o.default)(e,"threadid:"+new i.default(t,16).toString(10)),s=n[0];if(null==s){console.error(`Thread with ID ${t} not found by Gmail`);const n=(0,a.default)(e.getAppId()),i=new Error("Thread not found by getSyncThreadForOldGmailThreadId");throw e.getLogger().error(i,{oldGmailThreadId:n?t:null,responseText:n?r:null}),i}return s};var i=r(e("bignumber.js")),o=r(e("../../../driver-common/getSyncThreadsForSearch")),a=r(e("../../../lib/isStreakAppId"))},{"../../../driver-common/getSyncThreadsForSearch":637,"../../../lib/isStreakAppId":690,"@babel/runtime/helpers/interopRequireDefault":15,"bignumber.js":43}],508:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){const[n,r]=await Promise.all([e.getPageCommunicator().getBtaiHeader(),e.getPageCommunicator().getXsrfToken()]);return s(t,n,r)},n.getThreadFromSyncThreadIdUsingHeaders=s;e("ud");var i=r(e("../../../driver-common/gmailAjax")),o=e("../gmail-sync-response-processor"),a=r(e("../../../driver-common/getAccountUrlPart"));async function s(e,t,n){let r=null;try{let{text:o}=await(0,i.default)({method:"POST",url:`https://mail.google.com/sync${(0,a.default)()}/i/fd`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":n,"X-Gmail-BTAI":t,"X-Google-BTD":"1"},data:JSON.stringify({1:[{1:e,2:1}]})});r=o}catch(o){let{text:s}=await(0,i.default)({method:"POST",url:`https://mail.google.com/sync${(0,a.default)()}/i/fd?rt=r&pt=ji`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":n,"X-Gmail-BTAI":t,"X-Google-BTD":"1"},data:JSON.stringify([[[e,1]],2])});r=s}const s=(0,o.extractThreadsFromThreadResponse)(r);if(s.length>0){const e=s[0];if(e.oldGmailThreadID)return e}return null}},{"../../../driver-common/getAccountUrlPart":633,"../../../driver-common/gmailAjax":638,"../gmail-sync-response-processor":535,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],509:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e){var n,a,s,l,u,c,d,f,p,h,m,_,b,g,v,y;const w=e.getPageCommunicator(),E=await w.isConversationViewDisabled();await(0,i.waitForMenuReady)(),e.getLogger().eventSite("gmailSettings",{isGmailIntegratedView:(0,r.default)(),isCollapsiblePanelHidden:(0,r.isCollapsiblePanelHidden)(),isDarkTheme:(0,o.isDarkTheme)(),screenWidth:null===(n=window.screen)||void 0===n?void 0:n.width,screenHeight:null===(a=window.screen)||void 0===a?void 0:a.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight,language:w.getUserLanguage(),isUsingSyncAPI:w.isUsingSyncAPI(),previewPane:w.getUserOriginalPreviewPaneMode(),isConversationViewDisabled:E,wasAccountSwitcherReadyAtStart:e.getEnvData().wasAccountSwitcherReadyAtStart,timings:{responseStart:null===(s=t.performance)||void 0===s?void 0:s.timing.responseStart,responseEnd:null===(l=t.performance)||void 0===l?void 0:l.timing.responseEnd,domLoading:null===(u=t.performance)||void 0===u?void 0:u.timing.domLoading,domInteractive:null===(c=t.performance)||void 0===c?void 0:c.timing.domInteractive,domComplete:null===(d=t.performance)||void 0===d?void 0:d.timing.domComplete,domContentLoadedEventStart:null===(f=t.performance)||void 0===f?void 0:f.timing.domContentLoadedEventStart,domContentLoadedEventEnd:null===(p=t.performance)||void 0===p?void 0:p.timing.domContentLoadedEventEnd,domainLookupEnd:null===(h=t.performance)||void 0===h?void 0:h.timing.domainLookupEnd,domainLookupStart:null===(m=t.performance)||void 0===m?void 0:m.timing.domainLookupStart,fetchStart:null===(_=t.performance)||void 0===_?void 0:_.timing.fetchStart,loadEventStart:null===(b=t.performance)||void 0===b?void 0:b.timing.loadEventStart,loadEventEnd:null===(g=t.performance)||void 0===g?void 0:g.timing.loadEventEnd,navigationStart:null===(v=t.performance)||void 0===v?void 0:v.timing.navigationStart,requestStart:null===(y=t.performance)||void 0===y?void 0:y.timing.requestStart,...e.getTimings()}})};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("./isIntegratedViewGmail")),i=e("./add-nav-item"),o=e("./track-gmail-styles");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-nav-item":497,"./isIntegratedViewGmail":511,"./track-gmail-styles":528}],510:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/includes")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),a=e("../../../constants/router"),s=e("../../../lib/dom/simulate-mouse-event");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var u=o.defn(t,(async function(e,t,n){if("#"===t[0]){if(n)throw new Error("params parameter can't be passed with resolved URL");t=t.slice(1)}if((0,i.default)(a.NATIVE_ROUTE_IDS,t)){if(e.isUsingSyncAPI()&&n&&"string"!=typeof n){const t=n.threadID;if(t&&"string"==typeof t){const r=parseInt(t,16);if(!isNaN(r)){const r=await e.getSyncThreadIdForOldGmailThreadId(t);n={...n,threadID:"#"+r}}}}const r=e.createLink(t,n),i=document.createElement("a");i.style.display="none",i.href=r,document.body.appendChild(i),(0,s.simulateClick)(i),i.remove()}else{const r=e.createLink(t,n);window.location.hash=r}}));n.default=u},{"../../../constants/router":490,"../../../lib/dom/simulate-mouse-event":674,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/includes":323,ud:454}],511:[function(e,t,n){"use strict";function r(){var e;const t=document.querySelector("div[role=navigation]");return Boolean(null==t||null===(e=t.firstElementChild)||void 0===e?void 0:e.classList.contains("Xa"))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,n.isCollapsiblePanelHidden=function(){if(!r())return null;return null!=document.querySelector("div[role=navigation].aBA")}},{}],512:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/escape")),o=r(e("kefir-stopper")),a=r(e("../../../lib/dom/make-element-child-stream")),s=r(e("../../../lib/dom/querySelectorOrFail")),l=r(e("../../../lib/dom/make-mutation-observer-chunked-stream"));function u(e){const t=[],n=e.split(/[\s+]/g),r=e.match(/[\s+]/g);for(var o=0;o<n.length;o++)t.push('<span class="wh">'+(0,i.default)(c(n[o]))+"</span>"),r&&r[o]&&t.push(d(r[o]));return t.push(" :"),t.join("")}function c(e){switch(e.toLowerCase()){case"shift":return"<Shift>";case"ctrl":return"<Ctrl>";case"alt":return"<Alt>";case"meta":case"command":return"<⌘>";case"mod":return/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"<⌘>":"<Ctrl>";default:return e}}function d(e){switch(e){case" ":return'<span class="wb">then</span> ';case"+":return' <span class="wb">+</span> ';default:return""}}n.default=class{constructor(){this._appId=null,this._appName=null,this._appIconUrl=null,this._stopper=(0,o.default)(),this._shortcuts=new Set,this._monitorKeyboardHelp()}destroy(){this._stopper.destroy(),this._shortcuts.clear()}set(e,t,n,r){this._initializeAppValues(t,n,r),this._shortcuts.add(e)}delete(e){this._shortcuts.delete(e)}_initializeAppValues(e,t,n){this._appId||(this._appId=e),this._appName||(this._appName=t),this._appIconUrl||(this._appIconUrl=n)}_monitorKeyboardHelp(){(0,a.default)(document.body).map((e=>e.el)).filter((e=>e&&e.classList&&e.classList.contains("wa"))).flatMap((e=>(0,l.default)(e,{attributes:!0,attributeFilter:["class"]}).filter((()=>!e.classList.contains("aou"))).toProperty((()=>null)).map((()=>e)))).takeUntilBy(this._stopper).onValue((e=>this._renderHelp(e)))}_renderHelp(e){if(0===this._shortcuts.size)return;this._shortcuts.keys();var t=this._renderHeader(),n=this._renderTable(),r=n.querySelectorAll("tbody tbody"),i=0;this._shortcuts.forEach((e=>{this._renderShortcut(r[i%2],e),i++}));const o=(0,s.default)(e,".aov"),a=o.parentElement;if(!a)throw new Error("Could not find parent");a.insertBefore(t,o),a.insertBefore(n,o)}_renderHeader(){const e=document.createElement("div");if(e.setAttribute("class","aov  aox"),e.innerHTML=['<div class="aow">','<span class="inboxsdk__shortcutHelp_title">',(0,i.default)(this._appName||this._appId)+" keyboard shortcuts","</span>","</div>"].join(""),this._appIconUrl){const t=document.createElement("img");this._appIconUrl&&(t.src=this._appIconUrl),t.setAttribute("class","inboxsdk__icon");const n=(0,s.default)(e,".inboxsdk__shortcutHelp_title");n.insertBefore(t,n.firstChild)}return e}_renderTable(){var e=document.createElement("table");return e.setAttribute("cellpadding","0"),e.setAttribute("class","cf wd inboxsdk__shortcutHelp_table"),e.innerHTML=["<tbody>","<tr>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>","</tr","</tbody>"].join(""),e}_renderShortcut(e,t){var n=document.createElement("tr");n.innerHTML=['<td class="wg Dn"> ',u(t.chord),"</td>",'<td class="we Dn"> ',(0,i.default)(t.description||""),"</td>"].join(""),e.appendChild(n)}}},{"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":158,"lodash/escape":312}],513:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e){if(await o.default.waitForGmailModeToSettle(),o.default.isStandaloneComposeWindow()||o.default.isStandaloneThreadWindow())throw new Error("Can not open new compose while in standalone window");o.default.getComposeButton()||await(0,a.default)((()=>!!o.default.getComposeButton()));const t=o.default.getComposeButton();if(!t)throw new Error("Could not find compose button");(0,i.simulateClick)(t)};var i=e("../../../lib/dom/simulate-mouse-event"),o=r(e("../gmail-element-getter")),a=r(e("../../../lib/wait-for"))},{"../../../lib/dom/simulate-mouse-event":674,"../../../lib/wait-for":704,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15}],514:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){let n;if(e.isUsingSyncAPI()){const r=await(0,s.default)(e,t),{threads:i}=await(0,o.default)(e,"rfc822msgid:"+r);if(0===i.length)throw new Error("Failed to get sync message id");const a=i[0],l=a.extraMetaData.syncMessageData.find((e=>e.oldMessageID===t));if(!l)throw new Error("Failed to find syncMessageData");const{syncMessageID:c}=l;n=u(window.location.hash,a.syncThreadID,c)}else n=l(window.location.hash,t);window.location.hash=n},n.makeNewHash=l,n.makeNewSyncHash=u;var i=r(e("querystring")),o=r(e("../../../driver-common/getSyncThreadsForSearch")),a=r(e("./encodeDraftUrlId")),s=r(e("./get-rfc-message-id-for-gmail-message-id"));function l(e,t){e="#"+e.replace(/^#/,"");const[n,r]=e.split("?"),o=i.default.parse(r);return o.compose?o.compose+=","+t:o.compose=t,n+"?"+i.default.stringify(o)}function u(e,t,n){e="#"+e.replace(/^#/,"");const[r,o]=e.split("?"),s=i.default.parse(o);return s.compose=(0,a.default)(t,n),r+"?"+i.default.stringify(s)}},{"../../../driver-common/getSyncThreadsForSearch":637,"./encodeDraftUrlId":501,"./get-rfc-message-id-for-gmail-message-id":504,"@babel/runtime/helpers/interopRequireDefault":15,querystring:409}],515:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){o.default.waitForGmailModeToSettle().then((function(){o.default.isStandalone()||function(e,t){e.getRouteViewDriverStream().scan(((e,t)=>{let n,r;return e&&e.gmailRouteView&&e.gmailRouteView.isCustomRouteBelongingToApp()&&(n=e.gmailRouteView.getRouteID(),r=e.gmailRouteView.getParams()),{gmailRouteView:t,lastCustomRouteID:n,lastCustomRouteParams:r}}),void 0).changes().onValue((n=>{let{gmailRouteView:r,lastCustomRouteID:i,lastCustomRouteParams:o}=n;s(r,i,o,e,t)}))}(e,t)}))};var i=e("ud"),o=r(e("../gmail-element-getter")),a=r(e("../../../lib/dom/on-mouse-down-and-up"));const s=(0,i.defn)(t,(function(e,t,n,r,i){t&&e.getRouteType()===i.RouteTypes.THREAD&&function(e,t){const n=o.default.getThreadBackButton();if(!n)return;(0,a.default)(n).takeUntilBy(t.getStopper()).filter((e=>!e.defaultPrevented)).onValue((e=>{window.history.back(),e.preventDefault(),e.stopImmediatePropagation()}))}(0,e)}))},{"../../../lib/dom/on-mouse-down-and-up":664,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],516:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e.createCustomSearchTerm(t.term),e.ajaxInterceptStream.filter((e=>"searchQueryForReplacement"===e.type&&e.term===t.term)).onValue((n=>{Promise.resolve(t.termReplacer({})).then((r=>{if("string"!=typeof r)throw new Error("termReplacer response must be a string");const i="("+r+")",o=n.query.replace(t.term,(()=>i));e.setSearchQueryReplacement(n.query,o)}))}))}},{}],517:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n="inboxsdk__suggestions_"+(""+Date.now()+Math.random()).replace(/\D+/g,""),r=e.getPageCommunicator();r.registerSuggestionsModifier(n);const f=r.ajaxInterceptStream.filter((e=>"suggestionsRequest"===e.type)).flatMapLatest((r=>{let{query:i}=r;return a.fromPromise(Promise.resolve(t(i))).flatMap((t=>{try{const r=(0,d.default)(e,t).map((e=>({...e,providerId:n,id:`${Date.now()}-${Math.random()}`})));return a.constant(r)}catch(e){return a.constantError(e)}})).mapErrors((t=>(e.getLogger().error(t),[]))).map((e=>({query:i,suggestions:e})))})).onValue((e=>{r.provideAutocompleteSuggestions(n,e.query,e.suggestions)})).map((e=>e.suggestions)),p=e.getRouteViewDriverStream().toProperty((()=>null)).map((()=>c.default.getSearchInput())).filter(Boolean).take(1),h=p.flatMapLatest((e=>a.fromEvents(e,"focus"))).map((()=>c.default.getSearchSuggestionsBoxParent())).filter(Boolean).flatMapLatest(l.default).map((e=>e.el.firstElementChild)).take(1).toProperty(),m=h.flatMap((e=>(0,u.default)(e,{childList:!0}).toProperty((()=>null)))).map((()=>null)),_=p.flatMap((e=>(0,s.default)(document,"keydown").filter((t=>13==t.keyCode&&t.target===e)))),b=h.sampledBy(m).map((e=>Array.from(e.children).filter((e=>e.getElementsByClassName(n).length>0))));b.onValue((e=>{if(e[0]&&e[0].previousElementSibling){const t=e[0].previousElementSibling.firstElementChild;t&&t.classList.add("inboxsdk__suggestions_separator_before");const n=e[0].firstElementChild;n&&n.classList.add("inboxsdk__suggestions_separator_after")}}));const g=b.flatMapLatest((e=>a.merge(e.map((e=>a.merge([(0,s.default)(e,"click"),_.filter((()=>e.classList.contains("gssb_i")))]).map((t=>({event:t,row:e})))))))),v=a.merge([f,p.flatMapLatest((e=>a.fromEvents(e,"blur"))).map((()=>[]))]).toProperty();a.combine([g,p],[v]).onValue((t=>{const[{event:n,row:r},a,s]=t,l=r.querySelector("span[data-inboxsdk-suggestion]"),u=l?JSON.parse(l.getAttribute("data-inboxsdk-suggestion")||"null"):null,c=(0,i.default)((()=>{n.stopImmediatePropagation(),n.preventDefault(),a.blur(),a.value=""}));if(u){const{id:t}=u,n=(0,o.default)(s,(e=>e.id===t));n||e.getLogger().error(new Error("Failed to find suggestion by id")),n&&n.onClick&&(c(),n.onClick.call(null))}u&&u.routeName?(c(),e.goto(u.routeName,u.routeParams)):u&&u.externalURL&&(c(),window.open(u.externalURL))}))};var i=r(e("lodash/once")),o=r(e("lodash/find")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),s=r(e("../../../lib/from-event-target-capture")),l=r(e("../../../lib/dom/make-element-child-stream")),u=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),c=r(e("../gmail-element-getter")),d=r(e("../../../lib/copyAndValidateAutocompleteResults"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},{"../../../lib/copyAndValidateAutocompleteResults":648,"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/from-event-target-capture":678,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/find":314,"lodash/once":346}],518:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return p.flatMapLatest((r=>r(e,t,n)))};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),o=r(e("ud-kefir")),a=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),s=r(e("../../../lib/dom/make-element-child-stream")),l=r(e("../../../lib/dom/element-view-mapper")),u=r(e("../../../lib/dom/make-element-stream-merger")),c=r(e("../gmail-element-getter")),d=r(e("../views/gmail-compose-view"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var p=(0,o.default)(t,(function(e,t,n){return i.fromPromise(c.default.waitForGmailModeToSettle()).flatMap((()=>{var t,r=!1;return c.default.isStandaloneComposeWindow()?(t=h((()=>c.default.StandaloneCompose.getComposeWindowContainer())),r=!0):t=c.default.isStandaloneThreadWindow()?i.never():h((()=>c.default.getComposeWindowContainer())).flatMap((e=>{var t=e.el.querySelector("div.AD");return t?(0,s.default)(t).takeUntilBy(e.removalStream).map(m("composeFullscreenStateChanged")):i.never()})).merge(c.default.getFullscreenComposeWindowContainerStream().flatMap((e=>{let{el:t,removalStream:n}=e;return(0,s.default)(t).takeUntilBy(n)})).map(m("composeFullscreenStateChanged")).map((e=>{let{el:t,removalStream:n}=e;const r=t.querySelector("[role=dialog] div.aaZ");if(!r)return null;var i=(0,a.default)(r,{childList:!0}).filter((()=>0===r.childElementCount)).map((()=>null));return{el:t,removalStream:n.merge(i).take(1)}})).filter(Boolean)).flatMap((e=>{if(!e)throw new Error("Should not happen");const t=e.el.querySelector("[role=dialog]");return t&&t.querySelector("form")?i.constant({el:t,removalStream:e.removalStream}):i.never()})).flatMap((0,u.default)()),t.map((0,l.default)((t=>new d.default(t,n,e,{isStandalone:r,isInlineReplyForm:!1}))))})).merge(t.flatMap((t=>t.getReplyElementStream().map((0,l.default)((t=>new d.default(t,n,e,{isStandalone:!1,isInlineReplyForm:!0}))))))).flatMap((e=>e.ready()))}));function h(e){return i.interval(2e3,void 0).map(e).filter().take(1).flatMap((e=>(0,s.default)(e)))}function m(e){return function(t){const n=t&&t.el&&t.el.querySelector&&t.el.querySelector("[role=dialog]");return n&&n.dispatchEvent(new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:null})),t}}},{"../../../lib/dom/element-view-mapper":652,"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-element-stream-merger":660,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../gmail-element-getter":530,"../views/gmail-compose-view":552,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"ud-kefir":453}],519:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=t.getCustomRouteIDs(),r=t.getCustomListRouteIDs(),c=t.getCustomListSearchStringsToRouteIds();let d=(0,l.default)(document.location.href).hash,f=null;t.getStopper().onValue((()=>{f&&f.destroy()}));let p=d,h={};const m=i.default.fromEvents(window,"hashchange").filter((e=>!e.oldURL.match(/#inboxsdk-fake-no-vc$/))).map((e=>({new:(0,l.default)(e.newURL),old:(0,l.default)(e.oldURL)}))).filter((e=>e.new.hash!==e.old.hash)).map((e=>e.new)).map((t=>{const{hash:i,name:o}=t;for(let e of n){let n=(0,u.default)(e,i);if(n)return{urlObject:t,type:"CUSTOM",routeID:n}}for(let[e]of r){let n=(0,u.default)(e,o);if(n)return{urlObject:t,type:"CUSTOM_LIST_TRIGGER",routeID:n}}return e.isNativeRoute(t.name)?{urlObject:t,type:"NATIVE"}:{urlObject:t,type:"OTHER_APP_CUSTOM"}})),_=m.filter((e=>{let{type:t}=e;return"NATIVE"!==t})),b=m.filter((e=>{let{type:t}=e;return"NATIVE"===t})).filter((e=>{let{urlObject:t}=e;const n=d;return d=t.hash,n===t.hash})).filter((e=>{let{urlObject:t}=e;return t.hash!==p}));return i.default.merge([_,b,a.default.getMainContentElementChangedStream().map((e=>({urlObject:(0,l.default)(document.location.href),type:"NATIVE"}))).filter((t=>e.isNativeRoute(t.urlObject.name)))]).map((e=>{const{type:n,urlObject:r}=e;if("NATIVE"===n&&"search"===r.name){const e=c.get(r.params[0]);if(e){const n=a.default.getSearchInput();if(!n)throw new Error("Should not happen");if(n.value="",1===r.params.length||2===r.params.length&&"p"===r.params[1][0])return t.hashChangeNoViewChange("#"+e+(r.params[1]?"/"+r.params[1]:"")),{type:"CUSTOM_LIST",urlObject:r,routeID:e}}}return e})).map((e=>{const{urlObject:t}=e;return h[t.hash]||(h[t.hash]={data:{}}),h[t.hash].lastUsedTimestamp=Date.now(),Object.keys(h).length>50&&(h=Object.keys(h).sort(((e,t)=>h[t].lastUsedTimestamp-h[e].lastUsedTimestamp)).slice(0,25).reduce(((e,t)=>({...e,[t]:h[t]})),{})),{...e,cachedRouteData:h[t.hash].data}})).map((n=>{if("NATIVE"===n.type||"CUSTOM_LIST"===n.type)t.showNativeRouteView();else if("CUSTOM_LIST_TRIGGER"===n.type)return void t.showCustomThreadList(n.routeID,(0,o.default)(r,n.routeID),n.urlObject.params);return new s.default(n,e,t)})).filter(Boolean).map((e=>(f&&f.destroy(),f=e,p=(0,l.default)(document.location.href).hash,e)))};var i=r(e("kefir")),o=r(e("../../../../common/get-or-fail")),a=r(e("../gmail-element-getter")),s=r(e("../views/gmail-route-view/gmail-route-view")),l=r(e("./get-url-object")),u=r(e("../../../lib/routeIDmatchesHash"))},{"../../../../common/get-or-fail":475,"../../../lib/routeIDmatchesHash":697,"../gmail-element-getter":530,"../views/gmail-route-view/gmail-route-view":587,"./get-url-object":506,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],520:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=document.createElement("div");t.className="inboxsdk__appid_warning",t.innerHTML='\n<div class="inboxsdk__appid_warning_main">\n  <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>\n  <div>You\'ve loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>\n</div>\n<a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>\n<input type="button" value="" title="Close" class="inboxsdk__x_close_button" />\n';const n=e.createTopMessageBarDriver((0,o.default)(i.default,{el:t})),r=t.querySelector(".inboxsdk__x_close_button");if(!r)throw new Error("Should not happen");r.addEventListener("click",(function(e){n.remove()}))};var i=r(e("kefir")),o=r(e("kefir-cast"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157}],521:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("../gmail-element-getter")),a=e("../../../lib/dom/simulate-mouse-event");var s=(0,i.defn)(t,(function(e,t){const n=o.default.getContentSectionElement();if(!n)return;const r=document.getSelection();for(let e=0;e<r.rangeCount;e++){const t=r.getRangeAt(e);if("function"==typeof t.intersectsNode&&t.intersectsNode(n)){r.removeAllRanges();break}}const i=function(e){let t=e.querySelector(".inboxsdk__custom_view");if(t)return t;return t=document.createElement("div"),t.classList.add("inboxsdk__custom_view"),e.appendChild(t),t}(n);i.appendChild(t);const s=n.children;Array.prototype.forEach.call(s,(e=>{e.classList.contains("inboxsdk__custom_view")||(e.style.display="none")}));const l=o.default.getCompanionSidebarIconContainerElement();if(l){const e=l.querySelector(".J-KU-KO");e&&(0,a.simulateClick)(e)}document.body.classList.add("inboxsdk__custom_view_active")}));n.default=s},{"../../../lib/dom/simulate-mouse-event":674,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],522:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m;const a=b(e,t,n,i),s=document.location.hash,l=o.default.getMainContentElementChangedStream().changes().take(1),u=o.default.getSearchInput();if(!u)throw new Error("could not find search input");u.value="",u.style.visibility="hidden",l.onValue((()=>{u.style.visibility="visible"}));const c="#search/"+[a,...r].map(encodeURIComponent).join("/");window.history.replaceState(null,null,c);const d=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+s,newURL:document.location.href.replace(/#.*$/,"")+c});window.dispatchEvent(d)};var i=r(e("lodash/find")),o=r(e("../gmail-element-getter")),a=d(e("../gmail-response-processor")),s=d(e("../gmail-sync-response-processor")),l=r(e("../../../lib/isStreakAppId")),u=r(e("immutability-helper"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const f=new Map,p=50;function h(e,t){return e.length>p&&t.error(new Error("Received more than the maximum number of threads specified by handler, ignoring additional threads (https://www.inboxsdk.com/docs/#Router).")),e.slice(0,p)}function m(e,t){return console.log("Failed to find id for thread",e,t),null}function _(e){if("string"==typeof e)return"<"==e[0]?{rfcId:e}:{gtid:e};if(e){const t={gtid:"string"==typeof e.gmailThreadId&&e.gmailThreadId,rfcId:"string"==typeof e.rfcMessageId&&e.rfcMessageId};if(t.gtid||t.rfcId)return t}}const b=(e,t,n,r)=>{const o=f.get(n);if(o)return o;const c=Date.now()+"-"+Math.random();return e.getPageCommunicator().setupCustomListResultsQuery(c),e.getPageCommunicator().ajaxInterceptStream.filter((e=>"searchForReplacement"===e.type&&e.query===c)).onValue((o=>{let{start:d}=o;(async()=>{let o,f;e.signalCustomThreadListActivity(t);try{const t=await Promise.resolve(n(d,p)),r=function(e,t,n){if(Array.isArray(n)){e.deprecationWarning("Returning an array from a handleCustomListRoute handler","a CustomListDescriptor object");const t=h(n,e);return{total:t.length,threads:t}}if("object"==typeof n){const{total:r,hasMore:i,threads:o}=n;if(!Array.isArray(o))throw new Error('handleCustomListRoute result must contain a "threads" array (https://www.inboxsdk.com/docs/#Router).');if(null!=r&&null!=i)throw new Error('handleCustomListRoute result must only contain either a "total" or a "hasMore" property, but not both. (https://www.inboxsdk.com/docs/#Router).');if("number"==typeof r)return{total:r,threads:h(o,e)};if("boolean"==typeof i){const n=h(o,e);return{total:i?"MANY":t+o.length,threads:n}}throw new Error('handleCustomListRoute result must contain either a "total" number or a "hasMore" boolean (https://www.inboxsdk.com/docs/#Router).')}throw new Error("handleCustomListRoute result must be an array or an object (https://www.inboxsdk.com/docs/#Router).")}(e.getLogger(),d,t);o=r.total,f=r.threads}catch(t){e.getLogger().error(t),o=0,f=[]}const m=f.map(_).filter(Boolean),b=(await Promise.all(m.map((t=>function(e,t,n){if("string"==typeof t.rfcId)return Promise.resolve(t);if("string"==typeof t.gtid){const r=t.gtid;return e.getRfcMessageIdForGmailThreadId(r).then((e=>({gtid:r,rfcId:e})),(e=>n(r,e)))}throw new Error("Should not happen")}(e,t,r))))).filter(Boolean),g=b.length>0?b.map((e=>{let{rfcId:t}=e;return"rfc822msgid:"+t})).join(" OR "):""+Math.random()+Date.now();e.getPageCommunicator().setCustomListNewQuery({newQuery:g,newStart:0,query:c,start:d});const v=e.getPageCommunicator().ajaxInterceptStream.filter((e=>"searchResultsResponse"===e.type&&e.query===c&&e.start===d)).map((e=>e.response)).take(1).toPromise(),y=(await Promise.all(b.map((t=>function(e,t,n){return"string"==typeof t.gtid?Promise.resolve(t):e.getGmailThreadIdForRfcMessageId(t.rfcId).then((e=>({gtid:e,rfcId:t.rfcId})),(e=>n(t.rfcId,e)))}(e,t,r))))).filter(Boolean),w=await v;let E;e.signalCustomThreadListActivity(t);try{if(e.isUsingSyncAPI()){const e=s.extractThreadsFromSearchResponse(w),t=y.map((t=>{let{gtid:n}=t;return(0,i.default)(e,(e=>e.oldGmailThreadID===n))})).filter(Boolean);let n;if(e.length!==t.length||e.some(((e,n)=>e!==t[n]))){const e=Date.now();n=t.map(((t,n)=>{const r=Array.isArray(t.rawResponse),i=String(e-n);let o=(0,u.default)(t,{rawResponse:r?{0:{2:{$set:i},7:{$set:i}}}:{1:{3:{$set:i},8:{$set:i}}}});return(r?t.rawResponse[0][4]:t.rawResponse[1][5])&&(o=(0,u.default)(o,{rawResponse:r?{0:{4:e=>e.map((e=>({...e,6:i,17:i,30:i})))}}:{1:{5:e=>e.map((e=>({...e,7:i,18:i,31:i})))}}})),o}))}else n=e;E=s.replaceThreadsInSearchResponse(w,n,{start:d,total:o})}else{const e=a.extractThreads(w),t=y.map((t=>{let{gtid:n}=t;return(0,i.default)(e,(e=>e.gmailThreadId===n))})).filter(Boolean);E=a.replaceThreadsInResponse(w,t,{start:d,total:o})}e.getPageCommunicator().setCustomListResults(c,E)}catch(t){e.getLogger().error(t,{responseReplacementFailure:!0,idPairsLength:y.length});const n=e.getButterBar();n&&n.showError({text:"Failed to load custom thread list"});try{e.isUsingSyncAPI()?e.getPageCommunicator().setCustomListResults(c,s.replaceThreadsInSearchResponse(w,[],{start:d,total:o})):e.getPageCommunicator().setCustomListResults(c,a.replaceThreadsInResponse(w,[],{start:d,total:o}))}catch(t){e.getLogger().error(t),e.getPageCommunicator().setCustomListResults(c,null)}return}setTimeout((()=>{const t=document.querySelector(".vY .vX.UC");if(t&&"none"!==t.style.display&&/#\d+/.test(t.textContent)){const n=(0,l.default)(e.getAppId());e.getLogger().error(new Error("Gmail error with custom thread list"),{message:t.textContent,completedIDPairsLength:y.length,response:n?w:null,newResponse:n?E:null})}}),1e3)})().catch((t=>e.getLogger().error(t)))})),e.getCustomListSearchStringsToRouteIds().set(c,t),f.set(n,c),c}},{"../../../lib/isStreakAppId":690,"../gmail-element-getter":530,"../gmail-response-processor":534,"../gmail-sync-response-processor":535,"@babel/runtime/helpers/interopRequireDefault":15,"immutability-helper":150,"lodash/find":314}],523:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=i.default.getContentSectionElement();if(!t)return;Array.prototype.forEach.call(t.children,(e=>{e.style.display=""})),document.body.classList.contains("inboxsdk__custom_view_active")&&(document.body.classList.remove("inboxsdk__custom_view_active"),(0,o.default)())};var i=r(e("../gmail-element-getter")),o=r(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":677,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15}],524:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)((()=>s.default.getCompanionSidebarIconContainerElement())).map((t=>{const n=t.querySelector(".J-KU-Jg, [role=tablist], .brC-bsf-aT5-aOt");return n||(e.getLogger().error(new Error("_waitForAddonTitleAndSuppress: elementToWatch not found")),null)})).filter().flatMap(o.default).filter((e=>{let{el:n}=e;return"tab"===n.getAttribute("role")&&(n.getAttribute("data-tooltip")||n.getAttribute("aria-label"))===t})).takeUntilBy(e.getStopper()).onValue((e=>{let{el:t}=e;(t.classList.contains("J-KU-KO")||t.classList.contains("bse-bvF-I-KO")||t.classList.contains("aT5-aOt-I-KO"))&&(0,i.simulateClick)(t),t.style.display="none"})).onError((t=>{e.getLogger().error(t,"error in suppressAddon")}))};var i=e("../../../lib/dom/simulate-mouse-event"),o=r(e("../../../lib/dom/make-element-child-stream")),a=r(e("../../../lib/stream-wait-for")),s=r(e("../gmail-element-getter"))},{"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/simulate-mouse-event":674,"../../../lib/stream-wait-for":701,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15}],525:[function(e,t,n){(function(e){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){if("sdk_streak_21e9788951"!==n.getAppId()||!e.fetch||t)return;t=!0,n.getAttachmentCardViewDriverStream().filter((e=>"FILE"===e.getAttachmentType())).filter((()=>Math.random()<.01)).onValue((async e=>{const t=e._getDownloadLink();let r;try{r=await e.getDownloadURL()}catch(r){return void n.getLogger().error(r,{reason:"problem getting download url",downloadLinkBefore:t,downloadLinkAfter:e._getDownloadLink()})}r?n.getLogger().eventSdkPassive("testing.getDownloadURL success"):n.getLogger().error(new Error("no download url found"),{downloadLinkBefore:t,downloadLinkAfter:e._getDownloadLink()})}))};let t=!1}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],526:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=class{constructor(e){this._driver=e,this._composeViews=new Set,this._driver.getComposeViewDriverStream().onValue((e=>{this._composeViews.add(e),e.getStopper().onValue((()=>{this._composeViews.delete(e)}))}))}getThreadIdForThreadRow(e,t){{const e=this._driver.getPageCommunicator().getThreadIdForThreadRowByDatabase(t[0]);if(e)return e}if(0==e.getVisibleMessageCount()&&e.getVisibleDraftCount()>0){const t=this._findComposeForThreadRow(e);if(t)return t.getMessageID()}return null}async getDraftIdForThreadRow(e){if(e.getVisibleMessageCount()>0||0==e.getVisibleDraftCount())return Promise.resolve(null);const t=this._findComposeForThreadRow(e);if(t)return t.getDraftID();const{draftID:n}=await this._driver.getDraftIDForMessageID(e.getThreadID());return n}_findComposeForThreadRow(e){const t=[],n=e.getSubject();for(let e of this._composeViews)n===e.getSubject()&&t.push(e);return 1==t.length?t[0]:null}};n.default=r},{}],527:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(function(e){e.getComposeViewDriverStream().onValue((t=>{var n=function(e,t){var n=e.getLogger(),r={isInlineReply:t.isInlineReplyForm(),isReply:t.isReply()};return function(e,t){n.eventSite(e,{...r,...t})}}(e,t);n("compose open"),function(e,t){(function(e,t){var n=e.getElement().querySelector(".a1");n&&i.default.fromEvents(n,"mousedown").takeUntilBy(e.getStopper()).onValue((()=>{t("attachment button clicked"),function(e,t){(0,o.default)(document.body).map((e=>e.el)).filter((e=>e&&"file"===e.type)).take(1).flatMap((t=>i.default.fromEvents(t,"change").map((()=>!0)).merge(i.default.fromEvents(e.getBodyElement(),"focus").map((()=>!1)).delay(1e3)))).take(1).filter(Boolean).takeUntilBy(e.getStopper()).onValue((()=>t("attachment uploaded")))}(e,t)}))})(e,t),function(e,t){var n=e.getElement().querySelector(".aA7");n&&i.default.fromEvents(n,"mousedown").takeUntilBy(e.getStopper()).onValue((()=>{t("drive button clicked"),function(e,t){var n=e.getBodyElement().querySelectorAll(".gmail_drive_chip").length;(0,o.default)(document.body).map((e=>e.el)).filter((e=>e&&e.classList.contains("picker-dialog"))).take(1).flatMap((t=>i.default.fromEvents(e.getBodyElement(),"focus").delay(1e3).map((()=>e.getBodyElement()?e.getBodyElement().querySelectorAll(".gmail_drive_chip").length:0)).map((e=>n<e)).take(1))).take(1).filter(Boolean).takeUntilBy(e.getStopper()).onValue((()=>t("drive file added")))}(e,t)}))}(e,t)}(t,n)}))})(e),function(e){(0,o.default)(document.body).map((e=>e.el)).filter((e=>e.getAttribute&&"alertdialog"===e.getAttribute("role"))).takeUntilBy(e.getStopper()).onValue((t=>{var n=t.querySelector("[role=heading]");if(n&&n.textContent.indexOf("exceeds the 25MB")>-1)e.getLogger().eventSite("large attachment suggest drive");else{var r=t.querySelector(".Kj-JD-Jz");r&&r.textContent.indexOf("exceeds the maximum")>-1&&e.getLogger().eventSite("large attachment from drag and drop")}}))}(e),function(e){e.getComposeViewDriverStream().flatMapLatest((()=>i.default.fromEvents(document.body,"dragenter").filter((e=>e.toElement)).filter((e=>e.toElement.classList.contains("aC7")||e.toElement.classList.contains("aC9"))).take(1))).takeUntilBy(e.getStopper()).onValue((()=>e.getLogger().eventSite("compose drag file"))),e.getComposeViewDriverStream().flatMapLatest((()=>i.default.fromEvents(document.body,"drop").filter((e=>e.toElement)).filter((e=>e.toElement.classList.contains("aC7")||e.toElement.classList.contains("aC9"))).take(1))).takeUntilBy(e.getStopper()).onValue((()=>e.getLogger().eventSite("compose drop file")))}(e)};var i=r(e("kefir")),o=r(e("../../../lib/dom/make-element-child-stream"))},{"../../../lib/dom/make-element-child-stream":659,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],528:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(){if(document.head.hasAttribute("data-inboxsdk-gmail-style-tracker")||s.default.isStandalone())return;document.head.setAttribute("data-inboxsdk-gmail-style-tracker","true");let e=null,t=null;function n(){const n=function(){const e=document.querySelector(".TO .TN");if(!e)return o.default.error(new Error("Failed to find nav item outer element")),"compact";const t=parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10);return t>=6?"comfortable":t>=3?"cozy":"compact"}();e!==n&&(e&&document.body.classList.remove("inboxsdk__gmail_density_"+e),e=n,document.body.classList.add("inboxsdk__gmail_density_"+e));const r=c();t!==r&&(t=r,t?document.body.classList.add("inboxsdk__gmail_dark_theme"):document.body.classList.remove("inboxsdk__gmail_dark_theme"),d.emit({type:"theme",isDarkMode:r}))}try{await(0,a.default)((()=>document.querySelector(".TO .TN")&&document.querySelector(u)))}catch(e){return void o.default.error(e)}const r=new MutationObserver(n),i={characterData:!0,childList:!0};for(const e of document.styleSheets)e.ownerNode instanceof Element&&"STYLE"==e.ownerNode.tagName&&r.observe(e.ownerNode,i);n()},n.isDarkTheme=c,n.stylesStream=void 0;var i=r(e("kefir-bus")),o=r(e("../../../lib/logger")),a=r(e("../../../lib/wait-for")),s=r(e("../gmail-element-getter"));const l=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/;const u=".aio";function c(){const e=document.querySelector(u);if(!e)return o.default.error(new Error("Failed to find nav item")),!1;const t=getComputedStyle(e).getPropertyValue("color"),n=l.exec(t);if(!n)return o.default.error(new Error("Failed to read color string"),{colorString:t}),!1;const r=+n[1],i=+n[2],a=+n[3];return(32!==r||33!==i||36!==a)&&(r===i&&r===a||o.default.error(new Error("Nav item color not grayscale"),{r:r,g:i,b:a}),r>128)}const d=(0,i.default)();n.stylesStream=d},{"../../../lib/logger":691,"../../../lib/wait-for":704,"../gmail-element-getter":530,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-bus":156}],529:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/find")),o=r(e("lodash/uniqBy"));n.default=class{constructor(e){this._failedWaitFor=!1,this._userEmail=e.getUserEmailAddress()}getUserName(){const e=document.querySelector("div.gb_w div.gb_B .gb_D");if(e)return e.textContent;const t=(0,i.default)(this.getAccountSwitcherContactList(),(e=>e.emailAddress===this._userEmail));return t&&null!=t.name?t.name:this._userEmail}getAccountSwitcherContactList(){const e=Array.from(document.querySelectorAll('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."]')).slice(0,1).map((e=>{const t=e.parentElement,n=t.children[0],r=t.children[1];return n&&r?{name:n.textContent,emailAddress:r.textContent}:null})).filter(Boolean),t=Array.from(document.querySelectorAll('[role=banner] div[aria-label] div > a[target="_blank"] > img + div')).map((e=>{const t=e.children[1].textContent.match(/\S+/);if(!t)throw new Error("Failed to match");return{name:e.children[0].textContent,emailAddress:t[0]}}));return(0,o.default)(e.concat(t),(e=>e.emailAddress.toLowerCase()))}}},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":314,"lodash/uniqBy":359}],530:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/once")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("../../lib/dom/make-element-child-stream")),s=r(e("../../lib/dom/querySelectorOrFail")),l=r(e("./gmail-element-getter/wait-for-gmail-mode-to-settle")),u=r(e("./gmail-element-getter/get-main-content-element-changed-stream")),c=r(e("./gmail-driver/isIntegratedViewGmail")),d=r(e("../../lib/logger")),f=r(e("../../lib/wait-for"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const h=".aeN.WR.a6o.anZ.nH.oy8Mbf[role=navigation]",m={getActiveMoreMenu(){const e=document.querySelectorAll(".J-M.aX0.aYO.jQjAxd");for(let t=0;t<e.length;t++)if("none"!==e[t].style.display)return e[t];return null},getAddonSidebarContainerElement:()=>document.querySelector(".no > .nn.bnl"),getCompanionSidebarContentContainerElement:()=>document.querySelector(".brC-brG"),getCompanionSidebarIconContainerElement:()=>document.querySelector(".brC-aT5-aOt-Jw"),getComposeButton:()=>(0,c.default)()?document.querySelector(".aIH .aic div[role=button].L3"):document.querySelector("[gh=cm]"),getComposeWindowContainer:()=>document.querySelector(".dw .nH > .nH > .no"),getContentSectionElement(){const e=document.querySelector("div.nH.bkK > .nH");if((0,c.default)())return e;{const t=m.getLeftNavContainerElement(),n=t?t.nextElementSibling.children[0]:null;return e!==n&&d.default.error(new Error("getContentSectionElement old and new method inconsistency"),{elClassName:null==e?void 0:e.className,oldMethodClassName:null==n?void 0:n.className}),n}},getFullscreenComposeWindowContainer:()=>document.querySelector(".aSs .aSt"),getFullscreenComposeWindowContainerStream(){if(!document.body)throw new Error;return(0,a.default)(document.body).filter((e=>{let{el:t}=e;return t.classList.contains("aSs")})).flatMap((e=>{let{el:t,removalStream:n}=e;return(0,a.default)(t).takeUntilBy(n)})).filter((e=>{let{el:t}=e;return t.classList.contains("aSt")})).take(1).map((e=>{let{el:t}=e;return{el:t,removalStream:o.never()}})).toProperty()},getGtalkButtons:()=>document.querySelector(".aeN .aj5.J-KU-Jg"),getLeftNavContainerElement(){var e;return this.getAppMenu()?(null===(e=this.getAppMenuContainer())||void 0===e?void 0:e.querySelector(".aqn.aIH"))??null:(0,c.default)()?document.querySelector("div[role=navigation] + div.aqn"):document.querySelector(".aeN")},getLeftNavHeightElement:()=>document.querySelector(".aeN"),getMainContentBodyContainerElement:()=>document.querySelector(".no > .nn.bkK"),getMainContentContainer:()=>document.querySelector("div.aeF > div.nH"),getMainContentElementChangedStream:(0,i.default)((function(){return(0,u.default)(this)})),getMoleParent:()=>document.body.querySelector(".dw .nH > .nH > .no"),shouldAddNavItemsInline(){if((0,c.default)())return!0;const e=document.querySelector(".aeN[role=navigation], .aeN [role=navigation]");if(!e)throw new Error("shouldAddNavItemsInline failed to find leftNavElement");return!!e.classList.contains("aZ6")},getAppMenuAsync:(0,i.default)((async()=>{if(!m.isStandalone()){await m.waitForGmailModeToSettle();try{const e=await(0,f.default)((()=>document.querySelector(`${h}, .aeN.WR.nH.oy8Mbf[role=navigation]`)));if(!document.querySelector(h))return;return e}catch(e){d.default.error(e)}}})),isAppBurgerMenuOpen(){var e;return"true"===(null===(e=document.querySelector('header[role="banner"] > div > div > div[aria-expanded]'))||void 0===e?void 0:e.getAttribute("aria-expanded"))??!1},getAppMenuContainer:()=>document.querySelector(".aqk.aql.bkL"),getAppMenu:()=>document.querySelector(h),getAppHeader:()=>document.querySelector(".oy8Mbf.qp"),getSeparateSectionNavItemMenuInjectionContainer:()=>document.querySelector(".aeN"),getSameSectionNavItemMenuInjectionContainer:()=>(0,c.default)()?document.querySelector(".yJ .wT > .n3"):document.querySelector(".aeN .n3"),getRowListElements:()=>Array.from(document.querySelectorAll("[gh=tl]")),getScrollContainer:()=>document.querySelector("div.Tm.aeJ"),getSearchInput:()=>document.querySelector("form[role=search] input"),getSearchSuggestionsBoxParent:()=>document.querySelector("table.gstl_50 > tbody > tr > td.gssb_e"),getSidebarContainerElement:()=>document.querySelector("[role=main] table.Bs > tr .y3"),getThreadBackButton(){let e;try{e=m.getToolbarElement()}catch(e){return null}return e.querySelector(".lS")},getThreadContainerElement:()=>document.querySelector("[role=main] .g.id table.Bs > tr"),getToolbarElement:()=>(0,s.default)(document,"[gh=tm]"),getTopAccountContainer:()=>document.querySelector('header[role="banner"] > div:nth-child(2) > div:nth-child(2)'),isGplusEnabled(){const e=m.getTopAccountContainer();return!!e&&0===e.querySelectorAll('a[href*="https://plus"][href*="upgrade"]').length},isDarkTheme:()=>document.body.classList.contains("inboxsdk__gmail_dark_theme"),isPreviewPane:()=>!!document.querySelector(".aia"),isStandalone(){return this.isStandaloneComposeWindow()||this.isStandaloneThreadWindow()},isStandaloneComposeWindow:()=>document.body.classList.contains("xE")&&document.body.classList.contains("xp"),isStandaloneThreadWindow:()=>document.body.classList.contains("aAU")&&document.body.classList.contains("xE")&&document.body.classList.contains("Su"),StandaloneCompose:{getComposeWindowContainer:()=>document.querySelector("[role=main]")},waitForGmailModeToSettle:()=>(0,l.default)().toPromise()};var _=m;n.default=_},{"../../lib/dom/make-element-child-stream":659,"../../lib/dom/querySelectorOrFail":668,"../../lib/logger":691,"../../lib/wait-for":704,"./gmail-driver/isIntegratedViewGmail":511,"./gmail-element-getter/get-main-content-element-changed-stream":531,"./gmail-element-getter/wait-for-gmail-mode-to-settle":532,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/once":346}],531:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=function(e){if(e.isStandaloneComposeWindow())return o.never();return(0,a.default)((()=>e.getMainContentContainer()))}(e).flatMap((e=>(0,l.default)(e).filter((e=>{let{el:t}=e;return t.classList.contains("nH")})).flatMap((e=>{let{el:t,removalStream:n}=e;return(0,s.default)(t,{attributes:!0,attributeFilter:["style"]}).map((e=>(0,i.default)(e))).toProperty((()=>({target:t}))).filter(c).map((e=>e.target)).takeUntilBy(n)})))).toProperty();return t.onValue((()=>{})),t};var i=r(e("lodash/last")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("../../../lib/stream-wait-for")),s=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),l=r(e("../../../lib/dom/make-element-child-stream"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e){return"none"!==e.target.style.display}},{"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/stream-wait-for":701,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/last":341}],532:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/once")),o=r(e("../../../lib/dom/make-mutation-observer-chunked-stream"));var a=(0,i.default)((()=>(0,o.default)(document.body,{attributes:!0,attributeFilter:["class"]}).toProperty((()=>{})).filter((()=>document.body.classList.length>0)).map((()=>{})).take(1).toProperty()));n.default=a},{"../../../lib/dom/make-mutation-observer-chunked-stream":662,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],533:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../lib/common-page-communicator")),o=r(e("../../lib/dom/make-mutation-observer-chunked-stream")),a=r(e("kefir"));class s extends i.default{async getMessageDate(e,t){return this._getMessageData(e,t,"data-inboxsdk-sortdate","inboxSDKtellMeThisMessageDate")}async getMessageRecipients(e,t){return this._getMessageData(e,t,"data-inboxsdk-recipients","inboxSDKtellMeThisMessageRecipients")}async _getMessageData(e,t,n,r){let i=t.getAttribute(n);if(!i){const[a,s]=this.isUsingSyncAPI()?await Promise.all([this.getBtaiHeader(),this.getXsrfToken()]):[null,null];t.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!1,detail:{threadId:e,ikValue:this.getIkValue(),btaiHeader:a,xsrfToken:s}})),i=t.getAttribute(n),i||(await(0,o.default)(t,{attributes:!0,attributeFilter:[n]}).take(1).toPromise(),i=t.getAttribute(n))}return i&&"error"!==i?JSON.parse(i):null}getThreadIdForThreadRowByDatabase(e){let t=e.getAttribute("data-inboxsdk-threadid");return t||(e.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByDatabase",{bubbles:!0,cancelable:!1,detail:null})),t=e.getAttribute("data-inboxsdk-threadid")),t}getThreadIdForThreadRowByClick(e){let t=e.getAttribute("data-inboxsdk-threadid");return t||(e.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByClick",{bubbles:!0,cancelable:!1,detail:null})),t=e.getAttribute("data-inboxsdk-threadid")),t}getCurrentThreadID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.dispatchEvent(new CustomEvent("inboxSDKtellMeCurrentThreadId",{bubbles:!0,cancelable:!1,detail:{isPreviewedThread:t}}));const n=e.getAttribute("data-inboxsdk-currentthreadid");if(null==n)throw new Error("Failed to read value");return n}getUserOriginalPreviewPaneMode(){return document.head.getAttribute("data-inboxsdk-user-preview-pane-mode")}getActionTokenValue(){const e=document.head.getAttribute("data-inboxsdk-action-token-value");if(null==e)throw new Error("Failed to read value");return e}isUsingSyncAPI(){const e=document.head.getAttribute("data-inboxsdk-using-sync-api");if(null==e)throw new Error("Failed to read value");return"true"===e}isConversationViewDisabled(){return new Promise((e=>{a.default.fromEvents(document,"inboxSDKgmonkeyResponse").take(1).onValue((t=>{e(t.detail)})),document.dispatchEvent(new CustomEvent("inboxSDKtellMeIsConversationViewDisabled",{bubbles:!1,cancelable:!1,detail:null}))}))}registerSuggestionsModifier(e){document.dispatchEvent(new CustomEvent("inboxSDKregisterSuggestionsModifier",{bubbles:!1,cancelable:!1,detail:{providerID:e}}))}provideAutocompleteSuggestions(e,t,n){document.dispatchEvent(new CustomEvent("inboxSDKprovideSuggestions",{bubbles:!1,cancelable:!1,detail:{providerID:e,query:t,suggestions:JSON.parse(JSON.stringify(n))}}))}setupCustomListResultsQuery(e){document.dispatchEvent(new CustomEvent("inboxSDKcustomListRegisterQuery",{bubbles:!1,cancelable:!1,detail:{query:e}}))}setCustomListNewQuery(e){document.dispatchEvent(new CustomEvent("inboxSDKcustomListNewQuery",{bubbles:!1,cancelable:!1,detail:e}))}setCustomListResults(e,t){document.dispatchEvent(new CustomEvent("inboxSDKcustomListResults",{bubbles:!1,cancelable:!1,detail:{query:e,newResults:t}}))}createCustomSearchTerm(e){document.dispatchEvent(new CustomEvent("inboxSDKcreateCustomSearchTerm",{bubbles:!1,cancelable:!1,detail:{term:e}}))}setSearchQueryReplacement(e,t){document.dispatchEvent(new CustomEvent("inboxSDKsearchReplacementReady",{bubbles:!1,cancelable:!1,detail:{query:e,newQuery:t}}))}registerComposeRequestModifier(e,t){const n=(new Date).getTime()+"_"+t+"_"+Math.random(),r={modifierId:n};return this.isUsingSyncAPI()?r.draftID=e:r.composeid=e,document.dispatchEvent(new CustomEvent("inboxSDKregisterComposeRequestModifier",{detail:r,bubbles:!1,cancelable:!1})),n}unregisterComposeRequestModifier(e,t){document.dispatchEvent(new CustomEvent("inboxSDKunregisterComposeRequestModifier",{detail:{keyId:e,modifierId:t},bubbles:!1,cancelable:!1}))}modifyComposeRequest(e,t,n){const r={modifierId:t,composeParams:n};this.isUsingSyncAPI()?r.draftID=e:r.composeid=e,document.dispatchEvent(new CustomEvent("inboxSDKcomposeRequestModified",{detail:r,bubbles:!1,cancelable:!1}))}}n.default=s},{"../../lib/common-page-communicator":647,"../../lib/dom/make-mutation-observer-chunked-stream":662,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],534:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.cleanupPeopleLine=w,n.deserialize=m,n.deserializeArray=_,n.extractGmailMessageIdFromSentEmail=c,n.extractGmailThreadIdFromMessageIdSearch=function(e){const t=m(e).value,n=S(t,"cs",(e=>"cs"===e[0]&&e.length>20));if(!n)return null;return n[1]},n.extractGmailThreadIdFromSentEmail=d,n.extractMessageIdsFromThreadBatchRequest=function(e){const{value:t}=m(e);return a.default.toObj(t,y)},n.extractMessages=function(e){let{value:t}=m(e);1===t.length&&(t=t[0]);const n=a.default.toArray(t,k),r=a.default.toArray(t,x),i={};return r.forEach((e=>{i[e.messageID]=e})),n.map((e=>{let{threadID:t,messageIDs:n}=e;return{threadID:t,messages:n.map((e=>i[e]))}}))},n.extractThreads=function(e){return v(m(e).value)},n.extractThreadsFromDeserialized=v,n.interpretSentEmailResponse=function(e){const t=m(e).value,n=c(t),r=d(t)||n;if(!n||!r)throw new Error("Failed to read email response");return{threadID:r,messageID:n}},n.readDraftId=function(e,t){const n=m(e).value,r=a.default.toArray(n,a.default.compose(a.default.cat,a.default.filter(Array.isArray),a.default.cat,a.default.filter((e=>"ms"===e[0]&&e[1]===t)),a.default.take(1),a.default.map((e=>e[60]))))[0];if(r){const e=r.match(/^msg-[^:]:(\S+)$/i);return e&&e[1]}return null},n.replaceThreadsInResponse=function(e,t,n){let{start:r,total:l}=n;const{value:u,options:c}=m(e),d=1===u.length&&2===u[0].length&&"string"==typeof u[0][1],f=d?u[0][0].map((e=>[e])):u,p=[],h=[];let _=[],g=[],v=!1;f.forEach((e=>{let t=!1;const n=[],r=[];e.forEach((e=>{if(l&&"ti"===e[0])if("number"==typeof l)e[2]=e[10]=l;else if("MANY"===l){e[2]=e[10]=1e5,e[3]=1;const t=e[5];e[6]?e[6][0]=[t,1]:console.error("replaceThreadsInResponse(): Missing item[6]")}"tb"===e[0]?(v=t=!0,n.length&&(_=n),g=r):v?r.push(e):n.push(e)})),t||(v?h.push(r):p.push(n))}));const y=function(e,t){const n=a.default.compose(a.default.map((e=>e._originalGmailFormat)),a.default.partition(10),(0,s.default)(((e,n)=>[["tb",t+10*n,e]])));return a.default.toArray(e,n)}(t,r);_.length&&(y[0]=_.concat(y[0]||[]));g.length&&(y.length?y[y.length-1]=y[y.length-1].concat(g):y.push(g));const w=(0,i.default)([p,y,h]),E=(0,i.default)(w),k=(0,o.default)(E);if("e"!==k[0])throw new Error("Failed to find end section");k[1]=E.length;return b(d?[[(0,i.default)(w),u[0][1]]]:w,c)},n.rewriteSingleQuotes=f,n.serialize=b;var i=r(e("lodash/flatten")),o=r(e("lodash/last")),a=r(e("transducers.js")),s=r(e("map-indexed-xf")),l=r(e("assert")),u=r(e("../../../common/html-to-text"));function c(e){const t=S(e,"a",(e=>e.length>3&&Array.isArray(e[3])&&e[3].length>0));return t?t[3][0]:null}function d(e){const t=S(e,"csd",(function(e){return 3==e.length&&Array.isArray(e[2])&&e[2].length>5}));return t?t[1]:null}function f(e){let t=0;const n=[];for(;;){const r=p(e,t);if(r<0){n.push(e.substr(t));break}if(n.push(e.substr(t,r-t)),n.push('"'),t=r+1,'"'===e[r]){const r=h(e,t,'"');if(r<0)throw new Error("Unclosed double quote");n.push(e.slice(t,r+1)),t=r+1}else{const r=h(e,t,"'");if(r<0)throw new Error("Unclosed single quote");const i=e.slice(t,r).replace(/"/g,'\\"').replace(/\\'/g,"'");n.push(i),n.push('"'),t=r+1}}return n.join("")}function p(e,t){for(let n=t,r=e.length;n<r;n++)if('"'===e[n]||"'"===e[n])return n;return-1}function h(e,t,n){for(let r=t,i=e.length;r<i;r++)if("\\"===e[r])r++;else if(e[r]===n)return r;return-1}function m(e){const t={includeLengths:!1,suggestionMode:/^5\n/.test(e),noArrayNewLines:!/^[,\]]/m.test(e),includeExplicitNulls:!0},n=[];let r;if(t.suggestionMode){if(r=e.indexOf("'\n"),-1===r)throw new Error("Message was missing beginning header");r+=2}else{if(r=e.indexOf("\n\n"),-1===r)throw new Error("Message was missing beginning newlines");r+=2}for(;r<e.length;){let i=e.indexOf("\n",r+1);-1===i?i=e.length:"\r"===e[i-1]&&(i+=1);const o=e.slice(r,i);let a;if(/^\d+\s*$/.test(o)){t.includeLengths=!0;const n=+o;a=e.slice(i,i+n),r=i+n}else a=e.slice(r),r=e.length;n.push(_(a))}return{value:n,options:t}}function _(e){e=function(e,t){const n=[];let r,i=0,o=!1;for(;-1!==(r=h(e,i,'"'));)o?n.push(e.slice(i,r+1)):n.push(t(e.slice(i,r+1))),i=r+1,o=!o;if(o)throw new Error("string ended inside quoted section");return n.push(t(e.slice(i))),n.join("")}(e=f(e=e.replace(/[\r\n\t]/g,"")),(e=>e.replace(/,\s*(?=,|\])/g,",null").replace(/\[\s*(?=,)/g,"[null")));try{return JSON.parse(e,((e,t)=>null==t?void 0:t))}catch(e){throw new Error("deserialization error")}}function b(e,t){return t.suggestionMode?((0,l.default)(t.includeLengths),function(e,t){let n="5\n)]}'\n";for(let r=0;r<e.length;r++){const i=g(e[r],!1,t);n+=i.length+"\r\n"+i}return n}(e,t.includeExplicitNulls)):function(e,t){const{includeLengths:n,noArrayNewLines:r,includeExplicitNulls:i}=t;let o=")]}'\n"+(r&&n?"":"\n");for(let t=0;t<e.length;t++){const a=g(e[t],r,i);if(n){o+=(r?"\n":"")+(a.length+(r?2:1))+"\n"+a}else o+=a}if(!n)if(r)o=o.replace(/"([0-9a-f]{8,16})"\]$/,"'$1']");else{const e=o.split(/\r|\n/),t=e.slice(0,-3),n=e.slice(-3);o=t.join("\n"),o+="\n"+n[0]+n[1].replace(/"/g,"'")}return o+(r&&n?"\n":"")}(e,t)}function g(e,t,n){let r="[";for(let i=0;i<e.length;i++){const o=e[i];let a;a=Array.isArray(o)?g(o,t,n):null==o?n?"null":"":JSON.stringify(o).replace(/</gim,"\\u003c").replace(/=/gim,"\\u003d").replace(/>/gim,"\\u003e").replace(/&/gim,"\\u0026"),i>0&&(r+=","),r+=a}return r+="]"+(t?"":"\n"),r}function v(e){return 1===e.length&&2===e[0].length&&"string"==typeof e[0][1]&&(e=[e[0][0]]),(t=e,a.default.toArray(t,E)).map((e=>Object.freeze(Object.defineProperty({subject:(0,u.default)(e[9]),shortDate:(0,u.default)(e[14]),timeString:(0,u.default)(e[15]),peopleHtml:w(e[7]),timestamp:e[16]/1e3,isUnread:e[9].indexOf("<b>")>-1,lastEmailAddress:e[28],bodyPreviewHtml:e[10],someGmailMessageIds:[e[1],e[2]],gmailThreadId:e[0]},"_originalGmailFormat",{value:e}))));var t}const y=a.default.compose(a.default.cat,a.default.cat,a.default.filter((e=>"cs"===e[0])),a.default.map((e=>[e[1],e[2]])));function w(e){return e.replace(/^[^<]*/,"").replace(/(<span[^>]*) class="[^"]*"/g,"$1")}const E=a.default.compose(a.default.cat,a.default.filter((e=>"tb"===e[0])),a.default.map((e=>e[2])),a.default.cat);const k=a.default.compose(a.default.cat,a.default.filter((e=>"cs"===e[0])),a.default.map((e=>({threadID:e[1],messageIDs:e[8]})))),x=a.default.compose(a.default.cat,a.default.filter((e=>"ms"===e[0])),a.default.map((e=>({messageID:e[1],date:e[7]}))));function S(e,t,n){const r=function(e,t,n){const r=[],i=[{el:e,path:[]}];for(;i.length>0;){const e=i.pop();if(e.path.length<=n)if(null!==e.el&&"object"==typeof e.el){const t=Object.keys(e.el);for(let n=0;n<t.length;n++){const r=t[n],o={el:e.el[r],path:e.path.concat([r])};i.push(o)}}else e.el===t&&r.push(e)}return r}(e,t,100);for(let t=0;t<r.length;t++){const i=C(e,r[t].path.slice(0,-1));if(n(i))return i}}function C(e,t){let n=e;for(let e=0;e<t.length;e++)n=n[t[e]];return n}},{"../../../common/html-to-text":478,"@babel/runtime/helpers/interopRequireDefault":15,assert:33,"lodash/flatten":318,"lodash/last":341,"map-indexed-xf":363,"transducers.js":452}],535:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.extractThreadsFromSearchResponse=function(e){const t=JSON.parse(e);if(Array.isArray(t))try{return a(t)}catch(e){return[]}const n=t&&t[3];return n?n.map(((e,n)=>{const r=e[1];return r?{subject:r[1],snippet:r[2],syncThreadID:r[4],oldGmailThreadID:null!=r[18]?new i.default(r[18]).toString(16):r[20],rawResponse:e,extraMetaData:{snippet:t[15]&&t[15][1]&&t[15][1][n]||"",syncMessageData:r[5].map((e=>({syncMessageID:e[1],oldMessageID:e[56],date:+e[7]})))}}:null})).filter(o.default):[]},n.extractThreadsFromSearchResponse_20220909=a,n.extractThreadsFromThreadResponse=function(e){const t=JSON.parse(e);if(Array.isArray(t))return function(e){const t=e&&e[1];if(!t)throw new Error("Failed to process thread response");return t.map((e=>{if("string"!=typeof e[0]||!Array.isArray(e[2])||e[1]&&e[1][0]&&e[1][0][13]&&Array.isArray(e[1][1])){const t=e[1]&&e[1][0];if(!t)return null;let n;const r=Array.isArray(e[2])&&e[2];if(r)n=r.map((e=>({syncMessageID:e[0],date:+e[1][16],recipients:l(e)})));else{n=(e[1]&&e[1][1]).map((e=>({syncMessageId:e[0],date:+e[15]})))}return{subject:t[1],snippet:t[2],syncThreadID:t[0],oldGmailThreadID:new i.default(t[13]).toString(16),rawResponse:e,extraMetaData:{syncMessageData:n,snippet:""}}}return{syncThreadID:e[0],oldGmailThreadID:e[1]&&e[1][0]&&e[1][0][15]||void 0,extraMetaData:{snippet:e[1]&&e[1][0]&&e[1][0][2]||void 0,syncMessageData:(e[2]||[]).filter((e=>Boolean(e[1]))).map((e=>({syncMessageID:e[0],date:+e[1][16],recipients:l(e)})))}}})).filter(o.default)}(t);const n=t&&t[2];if(!n)throw new Error("Failed to process thread response");return n.map((e=>{if("string"!=typeof e[1]||!Array.isArray(e[3])||e[2]&&e[2][1]&&e[2][1][14]&&Array.isArray(e[2][2])){const t=e[2]&&e[2][1];if(!t)return null;let n;const r=Array.isArray(e[3])&&e[3];if(r)n=r.map((e=>({syncMessageID:e[1],date:+e[2][17],recipients:s(e)})));else{n=(e[2]&&e[2][2]).map((e=>({syncMessageId:e[1],date:+e[16]})))}return{subject:t[2],snippet:t[3],syncThreadID:t[1],oldGmailThreadID:new i.default(t[14]).toString(16),rawResponse:e,extraMetaData:{syncMessageData:n,snippet:""}}}return{syncThreadID:e[1],oldGmailThreadID:e[2]&&e[2][1]&&e[2][1][16]||void 0,extraMetaData:{snippet:e[2]&&e[2][1]&&e[2][1][3]||void 0,syncMessageData:(e[3]||[]).filter((e=>Boolean(e[2]))).map((e=>({syncMessageID:e[1],date:+e[2][17],recipients:s(e)})))}}})).filter(o.default)},n.replaceThreadsInSearchResponse=function(e,t,n){const r=JSON.parse(e);if(Array.isArray(r))try{return u(r,t,n)}catch(t){return e}(r[3]||t.length)&&(r[3]=t.map(((e,t)=>{let{rawResponse:n}=e;return{...n,2:t}})));(r[15]||t.length)&&(r[15]={...r[15],1:t.map((e=>{let{extraMetaData:t}=e;return t.snippet})),2:t.map((e=>{let{extraMetaData:t}=e;return t.syncMessageData.map((e=>{let{syncMessageID:t}=e;return t}))}))});return JSON.stringify(r)},n.replaceThreadsInSearchResponse_20220909=u;var i=r(e("bignumber.js")),o=r(e("../../lib/isNotNil"));function a(e){const t=e&&e[2];return t?t.map(((t,n)=>{const r=t[0];return r?{subject:r[0],snippet:r[1],syncThreadID:r[3],oldGmailThreadID:null!=r[17]?new i.default(r[17]).toString(16):r[19],rawResponse:t,extraMetaData:{snippet:e[14]&&e[14][0]&&e[14][0][n]||"",syncMessageData:r[4].map((e=>({syncMessageID:e[0],oldMessageID:e[55],date:+e[6]})))}}:null})).filter(o.default):[]}function s(e){if(!e[2])return;const t=e[2][1]||[],n=e[2][2]||[],r=e[2][3]||[];return t.concat(n).concat(r).map((e=>({emailAddress:e[2],name:e[3]})))}function l(e){if(!e[1])return;const t=e[1][0]||[],n=e[1][1]||[],r=e[1][2]||[];return t.concat(n).concat(r).map((e=>({emailAddress:e[1],name:e[2]})))}function u(e,t,n){return(e[2]||t.length)&&(e[2]=t.map(((e,t)=>{let{rawResponse:n}=e;const r=[...n];return r[1]=t,r}))),(e[14]||t.length)&&(e[14]=[...e[14]],e[14][0]=t.map((e=>{let{extraMetaData:t}=e;return t.snippet})),e[14][1]=t.map((e=>{let{extraMetaData:t}=e;return t.syncMessageData.map((e=>{let{syncMessageID:t}=e;return t}))}))),JSON.stringify(e)}},{"../../lib/isNotNil":689,"@babel/runtime/helpers/interopRequireDefault":15,"bignumber.js":43}],536:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(0,r(e("lodash/once")).default)((()=>![...document.styleSheets].find((e=>{try{if(e.cssRules)return[...e.cssRules].find((e=>e instanceof CSSStyleRule&&".Hl"===e.selectorText&&"24px"===e.style.width))}catch(e){}return!1}))));n.default=i},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],537:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=new a.default,t=e.ajaxInterceptStream,n=(0,s.injectScript)().then((()=>e));return{xhrInterceptStream:i.merge([t.filter((function(e){return"emailSending"===e.type})).map((function(e){if(e.draftID)return e;var t=(0,o.parse)(e.body);return{type:"emailSending",composeId:t.composeid,draft:t.draft}})),t.filter((function(e){return"emailSent"===e.type})).map((function(e){if(e.draftID)return e;var t=(0,o.parse)(e.originalSendBody),n=e.responseText;return{type:"emailSent",composeId:t.composeid,draft:t.draft,response:n}})),t.filter((function(e){return"emailDraftSaveSending"===e.type})).map((function(e){if(e.draftID)return e;var t=(0,o.parse)(e.body);return{type:"emailDraftSaveSending",composeId:t.composeid,draft:t.draft}})),t.filter((function(e){return"emailDraftReceived"===e.type})).map((function(e){if(e.draftID)return e;var t=(0,o.parse)(e.originalSendBody),n=e.responseText;return{type:"emailDraftReceived",composeId:t.composeid,draft:t.draft,response:n,connectionDetails:e.connectionDetails}}))]),pageCommunicatorPromise:n}};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),o=e("querystring"),a=r(e("./gmail-page-communicator")),s=e("../../lib/inject-script");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}},{"../../lib/inject-script":685,"./gmail-page-communicator":533,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,querystring:409}],538:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=e;function r(e){return n?{...e,logError(e,t){const r={el:t,html:t?(0,s.default)(t):null};n.getLogger().errorSite(e,r)}}:e}const o=new i.default(t,r(a.default));return l.changes().onValue((e=>{console.log("replacing PageParserTree options"),o.replaceOptions(r(e))})),o};var i=r(e("page-parser-tree")),o=r(e("ud-kefir")),a=r(e("./pageParserOptions")),s=r(e("../../../common/censorHTMLtree"));const l=(0,o.default)(t,a.default)},{"../../../common/censorHTMLtree":470,"./pageParserOptions":539,"@babel/runtime/helpers/interopRequireDefault":15,"page-parser-tree":373,"ud-kefir":453}],539:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={tags:{},watchers:[{sources:[null],tag:"composeLinkPopOverContainer",selectors:["body",".Lf.a5s"]}],finders:{supportMenu:{fn:e=>e.querySelectorAll("header[role=banner] div:not([aria-label]):not([data-ogsr-up]) > div:not(.inboxsdk__appButton) > div[data-tooltip] + div[role=menu]")},composeLinkPopOverContainer:{fn:e=>e.querySelectorAll("body > .Lf.a5s")}}};n.default=r},{}],540:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.NATIVE_CLASS=n.INBOXSDK_CLASS=n.ICON_ELEMENT_SELECTOR=n.GmailAppMenuItemView=n.ELEMENT_CLASS=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("@babel/runtime/helpers/classPrivateFieldSet")),a=r(e("@babel/runtime/helpers/classPrivateFieldGet")),s=r(e("../../../lib/dom/querySelectorOrFail")),l=e("events"),u=r(e("classnames")),c=r(e("../gmail-element-getter")),d=e("../gmail-driver/track-gmail-styles"),f=r(e("fast-deep-equal"));function p(e,t){m(e,t),t.add(e)}function h(e,t,n){m(e,t),t.set(e,n)}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}n.NATIVE_CLASS="Xa";const g="inboxsdk__appMenuItem";n.INBOXSDK_CLASS=g;const v=`Xa ${g}`;n.ELEMENT_CLASS=v;const y="V6 CL",w="apW",E=".V6.CL";n.ICON_ELEMENT_SELECTOR=E;const k=".apW";var x=new WeakMap,S=new WeakMap,C=new WeakMap,I=new WeakMap,A=new WeakSet,D=new WeakSet,T=new WeakSet,M=new WeakSet,O=new WeakSet,P=new WeakSet,R=new WeakMap,L=new WeakMap;class j extends l.EventEmitter{get element(){return(0,a.default)(this,S)}set menuItemDescriptor(e){(0,o.default)(this,x,e),b(this,D,V).call(this)}get menuItemDescriptor(){return(0,a.default)(this,x)}constructor(e,t){super(),p(this,P),p(this,O),p(this,M),p(this,T),p(this,D),p(this,A),h(this,x,{writable:!0,value:void 0}),h(this,S,{writable:!0,value:void 0}),h(this,C,{writable:!0,value:!1}),h(this,I,{writable:!0,value:void 0}),h(this,R,{writable:!0,value:e=>{this.emit("blur",e)}}),h(this,L,{writable:!0,value:e=>{var t,n;this.emit("hover",e),null===(t=(0,a.default)(this,x))||void 0===t||null===(n=t.onHover)||void 0===n||n.call(t,e)}}),(0,o.default)(this,S,b(this,A,N).call(this)),(0,o.default)(this,I,e),(0,o.default)(this,x,t),b(this,D,V).call(this),d.stylesStream.skipDuplicates(((e,t)=>(0,f.default)(e,t))).onValue((e=>{let{type:t}=e;"theme"===t&&b(this,D,V).call(this)})),e.getStopper().onValue((()=>this.remove())),(0,a.default)(this,S).addEventListener("click",(e=>b(this,P,F).call(this,e))),(0,a.default)(this,S).addEventListener("mouseleave",(0,a.default)(this,R)),(0,s.default)((0,a.default)(this,S),E).addEventListener("mouseenter",(0,a.default)(this,L))}remove(){var e;(0,a.default)(this,C)||((0,o.default)(this,C,!0),null===(e=this.element)||void 0===e||e.remove(),this.emit("destroy"))}}function N(){const e=document.createElement("div");return e.className=v,e.innerHTML=`\n      <div class="${y}" aria-label="" role="link" tabindex="-1"></div>\n      <div class="${w}" role="heading" aria-level="2"></div>\n    `.trim(),e}function V(){var e;const t=this.element;if(!t)return;const n=Object.values(j.elementCss).filter((e=>t.classList.contains(e)));t.className=(0,u.default)(v,null===(e=(0,a.default)(this,x))||void 0===e?void 0:e.className,...n),b(this,T,B).call(this,t),b(this,M,q).call(this,t),b(this,O,U).call(this,t)}function B(e){var t;(0,s.default)(e,k).textContent=(null===(t=(0,a.default)(this,x))||void 0===t?void 0:t.name)??""}function q(e){const t=(0,s.default)(e,E),{iconUrl:n,iconClassName:r}=(0,a.default)(this,x)??{};if(n){const e=c.default.isDarkTheme()?n.darkTheme:n.lightTheme;if(!e)return;const r="string"==typeof e?e:e.default,o="string"==typeof e?e:e.active;for(const e of[r,o])if(!_(j,j,H).has(e)){_(j,j,H).add(e);var i=document.createElement("link");i.rel="preload",i.as="image",i.href=e,document.head.appendChild(i)}t.style.setProperty("--background-image",`url(${r})`),t.style.setProperty("--background-image--active",`url(${o})`)}t.className=(0,u.default)(y,r)}function U(e){var t;(0,s.default)(e,E).setAttribute("aria-label",(null===(t=(0,a.default)(this,x))||void 0===t?void 0:t.name)??"")}function F(e){var t,n,r;this.emit("click",e),null===(t=(0,a.default)(this,x))||void 0===t||null===(n=t.onClick)||void 0===n||n.call(t,e),null!==(r=(0,a.default)(this,x))&&void 0!==r&&r.routeID&&(0,a.default)(this,I).goto((0,a.default)(this,x).routeID,(0,a.default)(this,x).routeParams)}n.GmailAppMenuItemView=j,(0,i.default)(j,"elementCss",{HOVER:"aIk",ACTIVE:"apV"});var H={writable:!0,value:new Set}},{"../../../lib/dom/querySelectorOrFail":668,"../gmail-driver/track-gmail-styles":528,"../gmail-element-getter":530,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,events:137,"fast-deep-equal":141}],541:[function(e,t,n){(function(r){(function(){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/defineProperty")),a=e("ud"),s=i(e("ud-kefir")),l=i(e("kefir")),u=i(e("kefir-stopper")),c=i(e("./primary")),d=i(e("../../../../driver-common/sidebar/ContentPanelViewDriver"));const f=(0,s.default)(t,null);var p=(0,a.defn)(t,class{constructor(e,t){(0,o.default)(this,"_stopper",(0,u.default)()),this._driver=e;const n=t.getAttribute("data-sdk-sidebar-instance-id");if(null!=n)this._instanceId=n;else{let n=new c.default(e,t);this._instanceId=n.getInstanceId(),f.changes().onValue((()=>{n.destroy(),n=new c.default(e,t),this._instanceId=n.getInstanceId()}))}}destroy(){this._stopper.destroy()}getStopper(){return this._stopper}_getShouldThreadAppSidebarOpen(){return"false"!==r.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")}_setShouldThreadAppSidebarOpen(e){try{r.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}_getShouldGlobalAppSidebarOpen(){return"true"===r.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")}_setShouldGlobalAppSidebarOpen(e){try{r.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}addThreadSidebarContentPanel(e,t){const n=new d.default(this._driver,e,this._instanceId);return l.default.merge([t.getStopper(),this._stopper]).take(1).takeUntilBy(n.getStopper()).onValue((()=>n.remove())),n}addGlobalSidebarContentPanel(e){const t=new d.default(this._driver,e,this._instanceId,!0);return this._stopper.takeUntilBy(t.getStopper()).onValue((()=>t.remove())),t}});n.default=p}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../driver-common/sidebar/ContentPanelViewDriver":641,"./primary":545,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158,ud:454,"ud-kefir":453}],542:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud");r(e("../../../../../lib/dom/querySelectorOrFail"));const o=".brC-aT5-aOt-bsf-Jw";var a=(0,i.defn)(t,(function(e,t,n){const r=n.querySelector(o);if(!r)return void e.error(new Error("addCompanionGlobalIconArea: no sidebarIconArea"));const i=r.firstElementChild;i?i.insertAdjacentElement("beforebegin",t):e.error(new Error("addCompanionGlobalIconArea: no nativeIconArea"))}));n.default=a},{"../../../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],543:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud");r(e("kefir")),r(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),r(e("../../../../../lib/dom/querySelectorOrFail"));const o="[role=tablist],.J-KU-Jg";var a=(0,i.defn)(t,(function(e,t,n){const r=n.querySelector(o);if(!r)return void e.error(new Error("addCompanionThreadIconArea: no tablist"));const i=n.querySelector("[role=separator]");if(i){if(!i.parentElement)throw new Error;i.parentElement.insertBefore(t,i.nextElementSibling)}else e.error(new Error("addCompanionThreadIconArea: failed to find separator")),r.insertAdjacentElement("beforebegin",t)}));n.default=a},{"../../../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,ud:454}],544:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("lodash/findIndex")),a=r(e("../../../../../lib/dom/insert-element-in-order"));var s=(0,i.defn)(t,(function(e,t,n,r){[...r.querySelectorAll("[data-app-name]")].forEach((t=>{const n=t.getAttribute("data-app-name"),r=(0,o.default)(e.getOrderedItems(),(e=>{let{value:t}=e;return t.appName===n}));t.setAttribute("data-order-hint",r)}));const i=(0,o.default)(e.getOrderedItems(),(e=>{let{value:n}=e;return n.appName===t}));i>-1&&n.setAttribute("data-order-hint",i),(0,a.default)(r,n,["data-order-hint"])}));n.default=s},{"../../../../../lib/dom/insert-element-in-order":656,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/findIndex":315,ud:454}],545:[function(e,t,n){(function(r){(function(){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/defineProperty")),a=(i(e("lodash/find")),i(e("lodash/findIndex"))),s=e("ud"),l=i(e("auto-html")),u=i(e("asap")),c=i(e("kefir")),d=i(e("kefir-bus")),f=i(e("kefir-stopper")),p=i(e("order-manager")),h=i(e("react")),m=i(e("react-dom")),_=i(e("../../../../../driver-common/sidebar/AppSidebar")),b=i(e("../../../gmail-element-getter")),g=i(e("../../../../../lib/idMap")),v=i(e("../../../../../lib/incrementName")),y=i(e("../../../../../lib/dom/querySelectorOrFail")),w=i(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),E=(i(e("../../../../../lib/dom/make-element-child-stream")),e("../../../../../lib/dom/simulate-mouse-event")),k=i(e("../../../../../lib/fake-window-resize")),x=i(e("./add-companion-thread-icon-area")),S=i(e("./add-companion-global-icon-area")),C=i(e("./add-to-icon-area"));const I="brC-brG-btc";var A=(0,s.defn)(t,class{constructor(e,t){(0,o.default)(this,"_stopper",(0,f.default)()),(0,o.default)(this,"_instanceId",`${Date.now()}-${Math.random()}`),(0,o.default)(this,"_instanceIdsToDescriptors",new Map),(0,o.default)(this,"_threadSidebarComponent",null),(0,o.default)(this,"_threadIconArea",null),(0,o.default)(this,"_globalIconArea",null),(0,o.default)(this,"_globalButtonContainers",new Map),(0,o.default)(this,"_threadButtonContainers",new Map),(0,o.default)(this,"_contentContainers",new Map),(0,o.default)(this,"_threadSidebarContainerEl",null),(0,o.default)(this,"_currentIds",new Set),(0,o.default)(this,"_orderManager",new p.default({get(){try{return JSON.parse(r.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set(e){try{r.localStorage.setItem("inboxsdk__sidebar_ordering",JSON.stringify(e))}catch(e){console.error("failed to set sidebar order data",e)}}})),(0,o.default)(this,"_updateHighlightedAppThreadIconBus",(0,d.default)()),(0,o.default)(this,"_appSidebarRefSetter",(e=>{e&&(this._threadSidebarComponent=e)})),(0,o.default)(this,"_closeButton",null),this._driver=e,this._companionSidebarContentContainerEl=t,this._setupElement()}getInstanceId(){return this._instanceId}destroy(){this._stopper.destroy()}_getShouldGlobalAppSidebarOpen(){return"true"===r.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")}_setShouldGlobalAppSidebarOpen(e){try{r.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}_getShouldThreadAppSidebarOpen(){return"false"!==r.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")}_setShouldThreadAppSidebarOpen(e){try{r.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}_createThreadSidebarIfNeeded(){if(this._threadSidebarContainerEl)return this._threadSidebarContainerEl;const e=this._threadSidebarContainerEl=document.createElement("div");return e.classList.add("thread_app_sidebar",(0,g.default)("app_sidebar_container"),"addon_sidebar"),this._companionSidebarContentContainerEl.insertBefore(e,this._companionSidebarContentContainerEl.firstElementChild),this._containerProp=()=>e,this._updateHighlightedAppThreadIconBus.bufferWithTimeOrCount(150,100).filter((e=>e.length>0)).takeUntilBy(this._stopper).onValue((()=>{const t=e.getBoundingClientRect(),n=Array.from(e.querySelectorAll(`.${(0,g.default)("app_sidebar_content_panel")}.${(0,g.default)("expanded")} .${(0,g.default)("app_sidebar_content_panel_top_line")}`)),r=e.scrollTop,i=r+t.height/2;let o=n.find((e=>{const t=e.getBoundingClientRect().bottom+r;return t>r&&t<i}));if(!o){let e;for(let t=0;t<n.length;t++){const r=n[t],i=r.getBoundingClientRect().bottom;if(i<0)e=r;else if(i>0)break}o=e}if(o){o.getAttribute("data-instance-id");const e=o.getAttribute("data-app-name");if(!e)return;const t=this._threadButtonContainers.get(e);if(!t||!this._threadIconArea)return;const n=this._threadIconArea.querySelector(".sidebar_button_container_active");n&&n.classList.remove("sidebar_button_container_active"),t.classList.add("sidebar_button_container_active")}})),this._updateHighlightedAppThreadIconBus.plug(c.default.fromEvents(e,"scroll").map((()=>null))),this._renderThreadSidebar(),e}_renderThreadSidebarIfPresent(){this._threadSidebarContainerEl&&this._renderThreadSidebar()}_renderThreadSidebar(){const e=this._threadSidebarContainerEl;if(!e)throw new Error("_renderThreadSidebar should not be called when _threadSidebarContainerEl is unset");return new Promise((t=>{m.default.render(h.default.createElement(_.default,{ref:this._appSidebarRefSetter,panels:this._orderManager.getOrderedItems().map((e=>e.value)),onMoveEnd:(e,t,n,r)=>{this._orderManager.moveItem(n,r),this._renderThreadSidebar()},onExpandedToggle:()=>{this._updateHighlightedAppThreadIconBus.emit(null)},container:this._containerProp}),e,(()=>{if(!this._threadSidebarComponent)throw new Error("Should not happen");t(this._threadSidebarComponent),this._updateHighlightedAppThreadIconBus.emit(null)}))}))}_getActiveButtonContainer(){let e;return this._globalIconArea&&(e=this._globalIconArea.querySelector(".sidebar_button_container_active")),!e&&this._threadIconArea&&(e=this._threadIconArea.querySelector(".sidebar_button_container_active")),e}_addButton(e,t,n){var r=this;(0,u.default)((()=>{if(!e)throw new Error("should not happen");const i=t.detail.instanceId,o=n&&t.detail.iconUrl?t.detail.iconUrl:t.detail.appIconUrl,a=t.detail.appName,s=t.detail.iconClass||"",u=n?this._globalButtonContainers.get(a):this._threadButtonContainers.get(a);let c;if(u){const e=Number(u.getAttribute("data-count"))||1;u.setAttribute("data-count",String(e+1)),c=u}else{c=document.createElement("div"),c.className=(0,g.default)("sidebar_button_container"),c.setAttribute("data-app-name",a),c.innerHTML=l.default`
          <button class="inboxsdk__button_icon ${s}" type="button" data-tooltip="${a}">
            <img class="inboxsdk__button_iconImg" src="${o}">
          </button>
          <div class="inboxsdk__button_selectedIndicator"></div>
        `,t.detail.primaryColor&&((0,y.default)(c,".inboxsdk__button_selectedIndicator").style.backgroundColor=t.detail.primaryColor),n?this._globalButtonContainers.set(a,c):this._threadButtonContainers.set(a,c);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r._getActiveButtonContainer()===c){if(!r._closeButton)throw new Error;r._closeButton(!0)}else{if(r._closeButton&&r._closeButton(!0),n?r._setShouldGlobalAppSidebarOpen(!0):r._setShouldThreadAppSidebarOpen(!0),r._openSidebarAndActivateButton(c,n),n){const e=r._contentContainers.get(a);e&&(e.style.display=""),r._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible"),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:i}}))}else{const t=r._threadSidebarComponent;if(!t)throw new Error("sidebar not mounted");e||(t.openPanel(i),t.scrollPanelIntoView(i,!0))}r._closeButton=e=>{r._closeButton=null;const t=r._getActiveButtonContainer();if(!t)throw new Error("Expected activeButtonContainer");if(r._closeSidebarAndDeactivateButton(t),n){e&&r._setShouldGlobalAppSidebarOpen(!1);const t=r._contentContainers.get(a);t?t.style.display="none":r._driver.getLogger().error(new Error("Unexpected: contentEl not set")),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:i}}))}else e&&r._setShouldThreadAppSidebarOpen(!1);(0,k.default)()},(0,k.default)()}};(0,y.default)(c,"button").addEventListener("click",(e=>{e.stopPropagation(),u()}),!0),e&&(0,C.default)(this._orderManager,a,c,e);{const e=this._getActiveButtonContainer();if(n){if(this._getShouldGlobalAppSidebarOpen()){this._globalIconArea&&e&&this._globalIconArea.contains(e)||u(!0)}}else if(this._getShouldThreadAppSidebarOpen()){this._threadIconArea&&e&&this._threadIconArea.contains(e)||u(!0)}}}}))}_removeButton(e,t,n){const r=e.detail.appName,i=t.get(r);if(!n||!i)throw new Error("should not happen: tried to remove button without container or iconArea");const o=Number(i.getAttribute("data-count"));if(o<=1){if(i===n.querySelector(".sidebar_button_container_active")){if(!this._closeButton)throw new Error;this._closeButton(!1),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible");const e=this._companionSidebarOuterWrapper.previousElementSibling;e&&e.classList.remove("companion_container_app_sidebar_visible")}i.remove(),t.delete(r)}else 2===o?i.removeAttribute("data-count"):i.setAttribute("data-count",String(o-1))}_closeSidebarAndDeactivateButton(e){e.classList.remove("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add(I),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible","companion_global_app_sidebar_visible");const t=this._companionSidebarOuterWrapper.previousElementSibling;t&&t.classList.remove("companion_container_app_sidebar_visible")}_openSidebarAndActivateButton(e,t){const n=b.default.getCompanionSidebarIconContainerElement();if(!n)throw new Error("Could not find companion sidebar icon container element");if(this._getActiveButtonContainer())throw new Error("activeButtonContainer should not be true");{const e=n.querySelector(".aT5-aOt-I-KO");e&&(0,E.simulateClick)(e)}e.classList.add("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.add("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add("companion_app_sidebar_visible"),this._companionSidebarContentContainerEl.classList.remove(I);const r=this._companionSidebarOuterWrapper.previousElementSibling;r&&r.classList.add("companion_container_app_sidebar_visible"),t&&this._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible")}_setupElement(){const e=b.default.getCompanionSidebarIconContainerElement();if(!e)throw new Error("Could not find companion sidebar icon container element");if(this._companionSidebarContentContainerEl.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._companionSidebarOuterWrapper=this._companionSidebarContentContainerEl.classList.contains("bq9")?this._companionSidebarContentContainerEl:this._companionSidebarContentContainerEl.parentElement,!this._companionSidebarOuterWrapper)throw new Error("should not happen: failed to find companionSidebarOuterWrapper");const t=this._companionSidebarOuterWrapper.previousElementSibling;if(t&&t.classList.add((0,g.default)("companion_container_app_sidebar_in_use")),this._companionSidebarContentContainerEl.classList.add((0,g.default)("app_sidebar_in_use")),!document.body.querySelector("."+(0,g.default)("app_sidebar_waiting_platform"))){const e=document.createElement("div");e.className=(0,g.default)("app_sidebar_waiting_platform"),document.body.appendChild(e)}c.default.fromEvents(window,"storage").filter((e=>"inboxsdk__sidebar_ordering"===e.key)).takeUntilBy(this._stopper).onValue((()=>{this._orderManager.reload(),this._renderThreadSidebarIfPresent()})),c.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId&&!e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((t=>{this._createThreadSidebarIfNeeded();let n=t.detail.id;for(;this._currentIds.has(n);)n=(0,v.default)(n);this._currentIds.add(n);const r=t.detail.appName;this._orderManager.addItem({groupId:t.detail.appId,id:n,orderHint:t.detail.orderHint,value:{id:n,appName:r,appId:t.detail.appId,instanceId:t.detail.instanceId,title:t.detail.title,iconClass:t.detail.iconClass,iconUrl:t.detail.iconUrl,hideTitleBar:t.detail.hideTitleBar,el:t.target}}),this._renderThreadSidebar();let i=this._threadIconArea=e.querySelector(".sidebar_thread_iconArea");i||(i=this._threadIconArea=document.createElement("div"),i.className=(0,g.default)("sidebar_iconArea"),i.classList.add("sidebar_thread_iconArea"),(0,x.default)(this._driver.getLogger(),i,e)),this._addButton(i,t,!1)})),c.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId&&!e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{const t=this._orderManager.getOrderedItems(),n=(0,a.default)(t,(t=>t.value.instanceId===e.detail.instanceId));if(-1===n)throw new Error("should not happen: failed to find orderItem");this._orderManager.updateItemValueByIndex(n,{id:t[n].value.id,appId:e.detail.appId,appName:e.detail.appName||e.detail.title,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}),this._renderThreadSidebar()})),c.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId&&!e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{const t=this._orderManager.getOrderedItems(),n=(0,a.default)(t,(t=>t.value.instanceId===e.detail.instanceId));if(-1===n)throw new Error("should not happen: failed to find orderItem");this._currentIds.delete(t[n].id),this._orderManager.removeItemByIndex(n),this._renderThreadSidebar(),this._removeButton(e,this._threadButtonContainers,this._threadIconArea)})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").filter((e=>e.detail.sidebarId===this._instanceId&&!e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{this._threadSidebarComponent&&this._threadSidebarComponent.scrollPanelIntoView(e.detail.instanceId)})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter((e=>e.detail.sidebarId===this._instanceId&&!e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{this._threadSidebarComponent&&this._threadSidebarComponent.closePanel(e.detail.instanceId)})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter((e=>e.detail.sidebarId===this._instanceId&&!e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{this._renderThreadSidebar().then((t=>{const n=this._instanceIdsToDescriptors.get(e.detail.instanceId);if(!n)return;const r=this._threadButtonContainers.get(n.appName);if(!r)throw new Error("missing button container");this._getActiveButtonContainer()!==r&&(0,y.default)(r,"button").click()}))})),c.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId&&e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((t=>{let n=t.detail.id;for(;this._currentIds.has(n);)n=(0,v.default)(n);this._currentIds.add(n);const r=t.detail.appName;let i=this._globalIconArea=e.querySelector(".sidebar_global_iconArea");i||(i=this._globalIconArea=document.createElement("div"),i.className=(0,g.default)("sidebar_iconArea"),i.classList.add("sidebar_global_iconArea"),(0,S.default)(this._driver.getLogger(),i,e));const o=document.createElement("div");o.classList.add("addon_sidebar",(0,g.default)("app_sidebar_container"),"global_app_sidebar"),this._companionSidebarContentContainerEl.insertAdjacentElement("afterbegin",o),this._contentContainers.set(r,o),o.appendChild(t.target),o.style.display="none",this._addButton(i,t,!0)})),c.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId&&e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{const t=this._globalButtonContainers.get(e.detail.appName);if(!t)return;const n=e.detail.iconClass||"",r=e.detail.iconUrl||e.detail.appIconUrl;(0,y.default)(t,"img").setAttribute("src",r);(0,y.default)(t,"button").setAttribute("class",`inboxsdk__button_icon ${n}`)})),c.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId&&e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{this._currentIds.delete(e.detail.id),this._removeButton(e,this._globalButtonContainers,this._globalIconArea)})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter((e=>e.detail.sidebarId===this._instanceId&&e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{const t=this._instanceIdsToDescriptors.get(e.detail.instanceId);if(!t)return;const n=this._globalButtonContainers.get(t.appName);if(!n)return;if(this._getActiveButtonContainer()===n){if(!this._closeButton)throw new Error("Expected this._closeButton");this._closeButton(!0)}})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter((e=>e.detail.sidebarId===this._instanceId&&e.detail.isGlobal)).takeUntilBy(this._stopper).onValue((e=>{const t=this._instanceIdsToDescriptors.get(e.detail.instanceId);if(!t)return;const n=this._globalButtonContainers.get(t.appName);if(!n)return;this._getActiveButtonContainer()!==n&&(0,y.default)(n,"button").click()})),c.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId)).takeUntilBy(this._stopper).onValue((e=>{this._instanceIdsToDescriptors.set(e.detail.instanceId,e.detail)})),c.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId)).takeUntilBy(this._stopper).onValue((e=>{this._instanceIdsToDescriptors.delete(e.detail.instanceId)})),c.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId)).takeUntilBy(this._stopper).onValue((e=>{this._instanceIdsToDescriptors.set(e.detail.instanceId,e.detail)}));const n=this._companionSidebarContentContainerEl.children[0],r=this._companionSidebarContentContainerEl.children[1];c.default.merge([n,r].map((e=>(0,w.default)(e,{attributes:!0,attributeFilter:["style"]})))).filter((()=>n.style.display!==r.style.display)).takeUntilBy(this._stopper).onValue((()=>{const e=this._getActiveButtonContainer();e&&(0,y.default)(e,"button").click()}))}});n.default=A}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../../driver-common/sidebar/AppSidebar":640,"../../../../../lib/dom/make-element-child-stream":659,"../../../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../../../lib/dom/querySelectorOrFail":668,"../../../../../lib/dom/simulate-mouse-event":674,"../../../../../lib/fake-window-resize":677,"../../../../../lib/idMap":682,"../../../../../lib/incrementName":684,"../../../gmail-element-getter":530,"./add-companion-global-icon-area":542,"./add-companion-thread-icon-area":543,"./add-to-icon-area":544,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/find":314,"lodash/findIndex":315,"order-manager":367,react:436,"react-dom":414,ud:454}],546:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../../../lib/dom/querySelectorOrFail")),a=r(e("../../../../common/censorHTMLtree")),s=(r(e("kefir")),r(e("kefir-stopper"))),l=r(e("../../../driver-common/update-icon")),u=r(e("../gmail-element-getter")),c=r(e("../widgets/gmail-tooltip-view")),d=r(e("../../../widgets/buttons/dropdown-view")),f=r(e("./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react"));n.default=class{constructor(e,t){(0,i.default)(this,"_element",null),this._driver=e,this._stopper=(0,s.default)(),this._iconSettings={},t.takeUntilBy(this._stopper).onValue((e=>{try{this._handleButtonDescriptor(e)}catch(e){this._driver.getLogger().error(e)}})),(0,f.default)()}destroy(){this._stopper.destroy(),this._element&&this._element.remove(),this._activeDropdown&&this._activeDropdown.close()}getStopper(){return this._stopper}getElement(){return this._element}open(){try{this._activeDropdown||this._handleClick()}catch(e){this._driver.getLogger().error(e)}}close(){try{this._activeDropdown&&this._handleClick()}catch(e){this._driver.getLogger().error(e)}}_handleButtonDescriptor(e){if(!e)throw new Error("The application passed an invalid value for buttonDescriptor");const t=this._element=this._element||function(e,t){const n=document.createElement("div");n.setAttribute("class","inboxsdk__appButton"),n.innerHTML='<a href="#">\n               <span class="inboxsdk__appButton_title"></span>\n             </a>',n.addEventListener("click",(e=>{e.preventDefault(),t(e)}));const r=u.default.getTopAccountContainer();if(!r){const t=new Error("Could not make button"),n=document.querySelector("[role=banner]");throw e.getLogger().error(t,{type:"failed to make appToolbarButton",gbsfwPresent:!!document.getElementById("gbsfw"),bannerHtml:n&&(0,a.default)(n)}),t}const i=r;if(!i){const t=new Error("Could not make button");throw e.getLogger().error(t,{type:"failed to make appToolbarButton",topAccountContainerHTML:(0,a.default)(r)}),t}try{return u.default.isGplusEnabled()||n.classList.add("inboxsdk__appButton_noGPlus"),i.insertBefore(n,i.lastElementChild),n}catch(t){throw e.getLogger().error(t,{type:"failed to make appToolbarButton",insertionElementHTML:(0,a.default)(i)}),t}}(this._driver,(()=>{this._handleClick()}));this._buttonDescriptor=e,(0,l.default)(this._iconSettings,(0,o.default)(t,"a"),!1,e.iconClass,e.iconUrl),function(e,t){e.textContent=t.title,e.className=`inboxsdk__appButton_title ${t.titleClass||""}`}((0,o.default)(t,"span"),e)}_handleClick(){const e=this._element;if(!e)return;const t=this._buttonDescriptor;if(!t)throw new Error("app toolbar button clicked before receiving button descriptor");if(this._activeDropdown)this._activeDropdown.close();else{var n={},r=new c.default;r.getContainerElement().classList.add("inboxsdk__appButton_tooltip"),r.getContentElement().innerHTML="",t.arrowColor&&((0,o.default)(r.getContainerElement(),".T-P-atC").style.borderTopColor=t.arrowColor),n.dropdown=this._activeDropdown=new d.default(r,e,{manualPosition:!0}),n.dropdown.on("destroy",(()=>{this._activeDropdown=null})),t.onClick&&t.onClick.call(null,n),this._element&&r.anchor(this._element,{position:"bottom",offset:{top:8}})}}}},{"../../../../common/censorHTMLtree":470,"../../../driver-common/update-icon":642,"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/dropdown-view":744,"../gmail-element-getter":530,"../widgets/gmail-tooltip-view":610,"./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react":547,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158}],547:[function(e,t,n){(function(e){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const n=e.ResizeObserver;if(!n)return;const r=document.body;if(!r)return;const i=r.querySelector("[role=banner]");if(!i)return;if(i.hasAttribute("inboxsdk__resize_claimed"))return;i.setAttribute("inboxsdk__resize_claimed","true");new n((()=>{i.clientWidth<t?r.classList.add("inboxsdk__searchIsNarrow"):r.classList.remove("inboxsdk__searchIsNarrow")})).observe(i)};const t=900}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],548:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("./gmail-attachment-card-view")),a=r(e("../widgets/buttons/button-view")),s=r(e("../../../lib/dom/querySelectorOrFail")),l=r(e("../../../widgets/buttons/basic-button-view-controller"));var u=(0,i.defn)(t,class{constructor(e,t,n){this._driver=t,this._messageViewDriver=n,this._elsToCardViews=new WeakMap,e?this._element=e:this._setupElement()}destroy(){this.getAttachmentCardViews().forEach((e=>{e.destroy()}))}getElement(){return this._element}getAttachmentCardViews(){const e=this._element.querySelectorAll(".aQH > span");return Array.from(e).map((e=>{let t=this._elsToCardViews.get(e);return t||(t=new o.default({element:e},this._driver,this._messageViewDriver),this._elsToCardViews.set(e,t)),t}))}_setupElement(){this._element=document.createElement("div"),this._element.setAttribute("class","hq gt a10"),this._element.innerHTML=['<div class="hp"></div>','<div class="a3I">Attachments area</div>',"<div></div>",'<div class="aQH">','<div class="aZK"></div>',"</div>"].join("")}_createAreaToolbarIfNeeded(){const e=this._element.querySelector(".ho");if(e)return e;const t=document.createElement("div");return t.className="ho",t.innerHTML=`<span class="aVW"><span>${this.getAttachmentCardViews().length}</span> Attachments</span><div class="aZi J-J5-Ji"></div>`,this._element.insertBefore(t,this._element.lastElementChild),this._element.classList.remove("a10"),t}_updateToolbarCardCount(){const e=this.getAttachmentCardViews().length;if(e>1){const t=this._createAreaToolbarIfNeeded();(0,s.default)(t,".aVW > span").textContent=String(e)}}addGmailAttachmentCardView(e){const t=this._element.querySelector(".aXK, .aQH");t?(t.insertBefore(e.getElement(),t.lastElementChild),this._updateToolbarCardCount()):this._driver.getLogger().error(new Error("Could not find attachment zone"))}addButtonToDownloadAllArea(e){var t=new a.default({iconClass:"T-I-J3",iconUrl:e.iconUrl,tooltip:e.tooltip,hasButtonToLeft:!0});t.addClass("aZj"),t.getElement().children[0].className="asa";new l.default({activateFunction:()=>{e.onClick&&e.onClick()},buttonView:t});const n=this._createAreaToolbarIfNeeded();(0,s.default)(n,".aZi").appendChild(t.getElement())}});n.default=u},{"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/basic-button-view-controller":742,"../widgets/buttons/button-view":598,"./gmail-attachment-card-view":549,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],549:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/find")),a=r(e("kefir")),s=r(e("kefir-stopper")),l=(r(e("util")),r(e("auto-html"))),u=e("ud"),c=r(e("../../../lib/from-event-target-capture")),d=r(e("../../../lib/dom/querySelectorOrFail")),f=r(e("../widgets/buttons/button-view")),p=r(e("../../../widgets/buttons/basic-button-view-controller")),h=e("../../../lib/dom/simulate-mouse-event"),m=r(e("../../../lib/wait-for"));r(e("../../../lib/stream-wait-for"));var _=(0,u.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_stopper",(0,s.default)()),(0,i.default)(this,"_previewClicks",a.default.pool()),this._driver=t,this._messageViewDriver=n,e.element?this._element=e.element:this._createNewElement(e)}destroy(){this._stopper.destroy()}getElement(){return this._element}getMessageViewDriver(){return this._messageViewDriver}getStopper(){return this._stopper}getPreviewClicks(){return this._previewClicks.takeUntilBy(this._stopper)}_isStandardAttachment(){return"FILE"===this.getAttachmentType()}getAttachmentType(){if(this._cachedType)return this._cachedType;const e=this._readAttachmentType();return"UNLOADED"!==e&&(this._cachedType=e),e}_readAttachmentType(){if(this._element.classList.contains("inboxsdk__attachmentCard"))return"CUSTOM";if(1===this._element.children.length&&0===this._element.children[0].children.length)return"UNLOADED";const e=this._getDownloadLink();return!e||e.match(/^https?:\/\/mail\.google\.com\//)?"FILE":e.match(/^https?:\/\/([^/]*\.)?google(usercontent)?\.com\//)?"DRIVE":"UNKNOWN"}addButton(e){var t=new f.default({iconUrl:e.iconUrl,tooltip:e.tooltip});new p.default({activateFunction:()=>{e.onClick&&e.onClick({getDownloadURL:()=>this.getDownloadURL()})},buttonView:t});this._addButton(t)}getTitle(){const e=this._element.querySelector("span .aV3");return e?e.textContent:""}_getDownloadLink(){const e=this._element.firstElementChild;if(!e)throw new Error("Failed to find link");if("A"===e.tagName&&e.href){const t=e.href;return t?t.replace(/([?&])disp=inline(?=&|$)/,"$1disp=safe"):t}{const e=this._element.getAttribute("download_url");if(e){const t=/:(https:\/\/[^:]+)/.exec(e);return t?t[1]:null}}}async getDownloadURL(){try{if(this._isStandardAttachment()){const e=await(0,m.default)((()=>this._getDownloadLink()));if(!e)return null;const t=await this._driver.resolveUrlRedirects(e);if(!/^https:\/\/mail-attachment\.googleusercontent\.com\/attachment\//.test(t)){console.error("getDownloadURL returned unexpected url",t);const e=new Error("getDownloadURL returned unexpected url");if(this._driver.getLogger().error(e,{finalUrlCensored:t.replace(/\?[^/]+$/,"?[...]")}),/^https:\/\/mail\.google\.com\//.test(t))throw e}return t}{const e=this._element.querySelector("[data-inboxsdk-download-url]");return e?e.getAttribute("data-inboxsdk-download-url"):null}}catch(e){throw this._driver.getLogger().error(e),e}}_extractFileNameFromElement(){return(0,d.default)(this._element,".aQA > span").textContent}_createNewElement(e){this._element=document.createElement("span"),this._element.classList.add("aZo"),this._element.classList.add("inboxsdk__attachmentCard");var t=[l.default`
			<a target="_blank" role="link" class="aQy e" href="">
				<div aria-hidden="true">
					<div class="aSG"></div>
					<div class="aVY aZn">
						<div class="aZm"></div>
					</div>
					<div class="aSH">`];if(t=(t=e.iconThumbnailUrl?t.concat([l.default`
				<div class="aYv">
					<img class="aZG aYw" src="${e.iconThumbnailUrl}">
				</div>`]):t.concat([l.default`
				<img class="aQG aYB inboxsdk__attachmentCard_previewThumbnailUrl"
					src="${e.previewThumbnailUrl}">`])).concat([l.default`
			<div class="aYy">
				<div class="aYA">
					<img class="aSM" src="${e.fileIconImageUrl}">
				</div>
				<div class="aYz">
					<div class="a12">
						<div class="aQA">
							<span class="aV3 a6U"></span>
						</div>
						<div class="aYp">
							<span class="SaH2Ve"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="aSI">
			<div class="aSJ"></div>
		</div>
	</div>
</a>
<div class="aQw"></div>`]),this._element.innerHTML=t.join(""),this._element.children[0].href=e.previewUrl,e.mimeType&&"image"===e.mimeType.split("/")[0]&&this._element.children[0].classList.add("aZI"),(0,d.default)(this._element,"span .aV3").textContent=e.title,(0,d.default)(this._element,"div.aYp > span").textContent=e.description||"",(0,d.default)(this._element,"div.aSJ").style.borderColor=e.foldColor,this._addHoverEvents(),e.buttons){const t=(0,o.default)(e.buttons,(function(e){return e.downloadUrl}));t&&this._addDownloadButton(t),this._addMoreButtons(e.buttons)}if(this._previewClicks.plug(a.default.fromEvents(this._element,"click").map((e=>({preventDefault:()=>e.preventDefault()})))),e.previewThumbnailUrl&&e.failoverPreviewIconUrl){const t=(0,d.default)(this._element,".inboxsdk__attachmentCard_previewThumbnailUrl");t.onerror=n=>{var r=document.createElement("div");r.classList.add("aYv"),r.innerHTML='<img class="aZG aYw" src="'+e.failoverPreviewIconUrl+'">';const i=t.parentElement;if(!i)throw new Error("Could not find parent element");i.insertBefore(r,t.nextElementSibling),t.remove()}}}_addHoverEvents(){a.default.merge([a.default.fromEvents(this._element,"mouseenter"),(0,c.default)(this._element,"focus")]).onValue((()=>{this._element.classList.add("aZp")})),a.default.merge([a.default.fromEvents(this._element,"mouseleave"),(0,c.default)(this._element,"blur")]).onValue((()=>{this._element.classList.remove("aZp")}));const e=(0,d.default)(this._element,"a");a.default.fromEvents(e,"focus").onValue((()=>{e.classList.add("a1U")})),a.default.fromEvents(e,"blur").onValue((()=>{e.classList.remove("a1U")}))}_addDownloadButton(e){const t=new f.default({tooltip:"Download",iconClass:"aSK J-J5-Ji aYr"});t.getElement().setAttribute("data-inboxsdk-download-url",e.downloadUrl);new p.default({activateFunction:function(){let t=!1;if(e.onClick&&e.onClick({preventDefault:function(){t=!0}}),t)return;const n=document.createElement("a");n.href=e.downloadUrl,e.downloadFilename&&(n.download=e.downloadFilename),n.addEventListener("click",(function(e){e.stopPropagation()}),!0),e.openInNewTab&&n.setAttribute("target","_blank"),document.body.appendChild(n),(0,h.simulateClick)(n),n.remove()},buttonView:t});this._addButton(t)}_addMoreButtons(e){(e||[]).filter((function(e){return!e.downloadUrl})).forEach((e=>{this.addButton(e)}))}_addButton(e){e.addClass("aQv"),this._getButtonContainerElement().appendChild(e.getElement())}_getPreviewImageUrl(){var e=this._getPreviewImage();return e?e.src:null}_getPreviewImage(){return this._element.querySelector("img.aQG")}_getButtonContainerElement(){return(0,d.default)(this._element,".aQw")}});n.default=_},{"../../../lib/dom/querySelectorOrFail":668,"../../../lib/dom/simulate-mouse-event":674,"../../../lib/from-event-target-capture":678,"../../../lib/stream-wait-for":701,"../../../lib/wait-for":704,"../../../widgets/buttons/basic-button-view-controller":742,"../widgets/buttons/button-view":598,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:159,"kefir-stopper":158,"lodash/find":314,ud:454,util:52}],550:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir-stopper"));var a=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;(0,i.default)(this,"_stopper",(0,o.default)());const n=document.createElement("div");if(n.className="Kj-JD-Jh inboxsdk__modal_overlay",n.style.zIndex=String(e),!t)throw new Error("no target");t.appendChild(n),this._stopper.onValue((()=>{n.remove()}))}getStopper(){return this._stopper}destroy(){this._stopper.destroy()}};n.default=a},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":158}],551:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("lodash/escape")),s=r(e("kefir")),l=r(e("kefir-bus")),u=r(e("../../../../common/defer")),c=r(e("auto-html")),d=r(e("../../../lib/dom/querySelectorOrFail")),f=r(e("../widgets/buttons/inbox-dropdown-button-view")),p=r(e("../widgets/gmail-dropdown-view")),h=r(e("../../../widgets/buttons/dropdown-button-view-controller"));function m(e){const t=e.backgroundColor||"rgb(194, 194, 194)",n=e.foregroundColor||"rgb(255, 255, 255)",r=e.maxWidth||"90px",i=[c.default`<div class="ar as" data-tooltip="${e.title}">
      <div class="at" style="background-color: ${t}; border-color: ${t};">
        <div class="au" style="border-color: ${t};">`],o=e.iconBackgroundColor?c.default`style="background-color: ${e.iconBackgroundColor}"`:"";return null!=e.iconHtml?i.push(c.default`<div class="inboxsdk__resultsSection_label_icon inboxsdk__resultsSection_label_iconHtml"
        ${{__html:o}}
      >
        ${{__html:e.iconHtml}}
      </div>`):e.iconClass?i.push(c.default`<div
        class="inboxsdk__resultsSection_label_icon ${e.iconClass||""}"
        ${{__html:o}}
        >
      </div>`):e.iconUrl&&i.push(c.default`<img
        class="inboxsdk__resultsSection_label_icon"
        ${{__html:o}}
        src="${e.iconUrl}" />`),i.push(c.default`
          <div class="av" style="color: ${n}; max-width: ${r}">
            ${e.title}
          </div>
        </div>
      </div>
    </div>
    `),i.join("")}var _=(0,o.defn)(t,class{constructor(e,t,n,r){(0,i.default)(this,"_collapsibleSectionDescriptor",{}),(0,i.default)(this,"_element",null),(0,i.default)(this,"_headerElement",null),(0,i.default)(this,"_titleElement",null),(0,i.default)(this,"_bodyElement",null),(0,i.default)(this,"_contentElement",null),(0,i.default)(this,"_tableBodyElement",null),(0,i.default)(this,"_collapsedContainer",null),(0,i.default)(this,"_messageElement",null),(0,i.default)(this,"_footerElement",null),(0,i.default)(this,"_isCollapsed",!1),(0,i.default)(this,"_inboxDropdownButtonView",null),(0,i.default)(this,"_dropdownViewController",null),this._driver=e,this._isSearch=n,this._groupOrderHint=t,this._isCollapsible=r,this._eventStream=(0,l.default)(),this._isReadyDeferred=new u.default}destroy(){this._element&&this._element.remove(),this._eventStream&&this._eventStream.end(),this._headerElement&&this._headerElement.remove(),this._titleElement&&this._titleElement.remove(),this._bodyElement&&this._bodyElement.remove(),this._contentElement&&this._contentElement.remove(),this._tableBodyElement&&this._tableBodyElement.remove(),this._collapsedContainer&&this._collapsedContainer.remove(),this._messageElement&&this._messageElement.remove(),this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}getElement(){const e=this._element;if(!e)throw new Error("tried to access element that does not exist");return e}getEventStream(){return this._eventStream}setCollapsibleSectionDescriptorProperty(e){const t=e.takeUntilBy(this._eventStream.filter((()=>!1)).beforeEnd((()=>null)));t.onValue((e=>this._updateValues(e))),t.take(1).onValue((e=>this._isReadyDeferred.resolve(this)))}setCollapsed(e){this._isCollapsible&&this._isReadyDeferred.promise.then((()=>{e?this._collapse():this._expand()}))}_updateValues(e){const t=this._element;e?(t&&(t.style.display=""),t?this._updateElement(e):(this._setupElement(e),this._showLoadingMessage()),this._updateHeader(e),this._updateTitle(e),this._updateSubtitle(e),this._updateSummaryText(e),this._updateDropdown(e),this._updateContentElement(e),this._updateTableRows(e),this._updateMessageElement(e),this._updateFooter(e),this._collapsibleSectionDescriptor=e):t&&(t.style.display="none")}_setupElement(e){const t=this._element=document.createElement("div");t.setAttribute("class","inboxsdk__resultsSection"),t.setAttribute("data-group-order-hint",String(this._groupOrderHint)),t.setAttribute("data-order-hint",String("number"==typeof e.orderHint?e.orderHint:0)),this._isCollapsible||t.classList.add("inboxsdk__resultsSection_nonCollapsible"),this._setupHeader(e);const n=this._bodyElement=document.createElement("div"),r=document.createElement("div");r.classList.add("zE"),n.appendChild(r),t.appendChild(n);const i=this._contentElement=document.createElement("div");r.appendChild(i);const o=this._messageElement=document.createElement("div");r.appendChild(o);const a=this._tableBodyElement=document.createElement("div");r.appendChild(a),this._setupFooter(e),this._isCollapsible&&this._titleElement&&s.default.fromEvents(this._titleElement,"click").onValue((()=>this._toggleCollapseState())),s.default.fromEvents(t,"removeCollapsedContainer").onValue((()=>this._destroyCollapsedContainer())),s.default.fromEvents(t,"readdToCollapsedContainer").onValue((()=>this._addToCollapsedContainer())),this._eventStream.emit({type:"update",property:"orderHint",sectionDescriptor:e})}_setupHeader(e){const t=this._headerElement=document.createElement("div");t.classList.add("inboxsdk__resultsSection_header","Wg"),this._setupGmailv2Header(t,e),this._element&&this._element.appendChild(t)}_setupGmailv2Header(e,t){const n=this._titleElement=document.createElement("div");n.setAttribute("class","inboxsdk__resultsSection_title"),n.innerHTML=['<h3 class="Wr iR">','<img alt="" src="//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif" class="qi Wp Wq">','<div class="Wn">',(0,a.default)(t.title),"</div>","</h3>"].join("");const r=document.createElement("div");r.classList.add("Cr"),this._isSearch&&r.classList.add("Wg"),e.appendChild(n),e.appendChild(r)}_setupFooter(e){const t=this._footerElement=document.createElement("div");t.classList.add("inboxsdk__resultsSection_footer"),this._bodyElement&&this._bodyElement.appendChild(t)}_updateElement(e){if(this._collapsibleSectionDescriptor.orderHint!==e.orderHint){const t=this._element;t&&t.setAttribute("data-order-hint",""+("number"==typeof e.orderHint?e.orderHint:0)),this._eventStream.emit({type:"update",property:"orderHint"})}}_updateHeader(e){this._isCollapsible||e.title||e.subtitle||e.titleLinkText||e.hasDropdown?this._headerElement&&(this._headerElement.style.display=""):this._headerElement&&(this._headerElement.style.display="none")}_updateTitle(e){if(this._collapsibleSectionDescriptor.title!==e.title){const t="h3 > .Wn";this._titleElement&&((0,d.default)(this._titleElement,t).textContent=e.title)}}_updateSubtitle(e){const t=this._titleElement;if(!t)return;let n=t.querySelector(".inboxsdk__resultsSection_title_subtitle");if(e.subtitle){if(this._collapsibleSectionDescriptor.subtitle!==e.subtitle){if(!n&&(n=document.createElement("span"),n&&t)){n.classList.add("inboxsdk__resultsSection_title_subtitle");const e=t.querySelector(".Wn");e&&(n.classList.add("aw5"),e.appendChild(n))}n.textContent="("+e.subtitle+")"}}else n&&n.remove()}_updateSummaryText(e){const t=this._headerElement;if(!t)return;let n=t.querySelector(".inboxsdk__resultsSection_header_summaryText");if(e.titleLinkText){if(e.titleLinkText!==this._collapsibleSectionDescriptor.titleLinkText){if(!n){n=document.createElement("div"),n.setAttribute("class","inboxsdk__resultsSection_header_summaryText Wm"),n.innerHTML=['<span class="Di">&nbsp;','<div class="J-J5-Ji amH">','<span class="Dj">',"<span></span>","</span>","&nbsp;","</div>","</span>"].join(""),this._eventStream.plug(s.default.fromEvents(n,"click").map((()=>({eventName:"titleLinkClicked",sectionDescriptor:this._collapsibleSectionDescriptor}))));const e=n;n.addEventListener("mouseenter",(function(){e.classList.add("aqi")})),n.addEventListener("mouseleave",(function(){e.classList.remove("aqi")}));const r=t.querySelector(".Cr");r&&r.insertAdjacentElement("afterbegin",n)}(0,d.default)(n,".Dj > *").textContent=e.titleLinkText}}else n&&n.remove()}_updateDropdown(e){if(e.hasDropdown&&e.onDropdownClick){if(e.hasDropdown&&e.onDropdownClick)if(this._inboxDropdownButtonView&&this._dropdownViewController)e.onDropdownClick!==this._collapsibleSectionDescriptor.onDropdownClick&&this._dropdownViewController&&this._dropdownViewController.setDropdownShowFunction(e.onDropdownClick);else{const t=this._inboxDropdownButtonView=new f.default;this._dropdownViewController=new h.default({buttonView:t,dropdownViewDriverClass:p.default,dropdownShowFunction:e.onDropdownClick});const n=this._headerElement;if(n){const e=n.querySelector(".Cr");e&&e.appendChild(t.getElement())}}}else this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}_updateContentElement(e){const t=this._contentElement;t&&(t.innerHTML="",e.contentElement?(t.style.display="",t.appendChild(e.contentElement)):t.style.display="none")}_updateTableRows(e){const{tableRows:t}=e,n=this._tableBodyElement;n&&(n.innerHTML="",t&&0!==t.length?(n.style.display="",this._renderTable(t)):n.style.display="none")}_renderTable(e){const t=document.createElement("table");t.setAttribute("class","F cf zt"),t.innerHTML=["<colgroup>",'<col class="k0vOLb">','<col class="Ci">','<col class="y5">','<col class="WA">','<col class="yY">',"<col>",'<col class="xX">',"</colgroup>","<tbody>","</tbody>"].join(""),this._tableBodyElement&&this._tableBodyElement.appendChild(t);const n=t.querySelector("tbody"),r=this._eventStream;e.forEach((e=>{const t=document.createElement("tr");if(t.setAttribute("class","inboxsdk__resultsSection_tableRow zA "+(e.isRead?"yO":"zE")),t.innerHTML=function(e){let t="";null!=e.iconHtml?t=c.default`<div class="inboxsdk__resultsSection_result_icon inboxsdk__resultsSection_result_iconHtml">
        ${{__html:e.iconHtml}}
      </div>`:e.iconUrl?t=c.default`<img class="inboxsdk__resultsSection_result_icon ${e.iconClass||""}" src="${e.iconUrl}">`:e.iconClass&&(t=c.default`<div class="${e.iconClass}"></div>`);const n=Array.isArray(e.labels)?e.labels.map(m).join(""):"",r=['<td class="xY PF"></td>','<td class="xY oZ-x3"></td>','<td class="xY WA">',t,"</td>",'<td class="xY WA"></td>','<td class="xY yX inboxsdk__resultsSection_result_title">','<div class="yW">',"<span "+(e.isRead?"":'class="zF"')+">",(0,a.default)(e.title),"</span>","</div>","</td>",'<td class="xY a4W">','<div class="xS">','<div class="xT">','<div class="yi">',n,"</div>",'<div class="y6">','<span class="bog">',e.isRead?"":"<b>",(0,a.default)(e.body||""),e.isRead?"":"</b>","</span>","</div>","</div>","</div>","</td>",'<td class="xY xW">',"<span"+(e.isRead?"":' class="bq3"')+">",(0,a.default)(e.shortDetailText||""),"</span>","</td>"];return r.join("")}(e),!n)throw new Error("should not happen");n.appendChild(t),r.plug(s.default.fromEvents(t,"click").map((()=>({eventName:"rowClicked",rowDescriptor:e}))))}))}_updateMessageElement(e){const t=this._messageElement;e.tableRows&&e.tableRows.length>0||e.contentElement?t&&(t.innerHTML="",t.style.display="none"):e.tableRows&&0===e.tableRows.length&&!e.contentElement&&this._showEmptyMessage()}_showLoadingMessage(){const e=this._messageElement;e&&(e.setAttribute("class","TB TC inboxsdk__resultsSection_loading"),e.innerHTML="loading...",e.style.display="")}_showEmptyMessage(){const e=this._messageElement;e&&(e.setAttribute("class","TB TC"),e.innerHTML="No results found",e.style.display="")}_updateFooter(e){const t=this._footerElement;if(t)if(t.innerHTML="",e.footerLinkText||e.footerLinkIconUrl||e.footerLinkIconClass){t.style.display="";const n=document.createElement("span");n.setAttribute("class","e Wb"),n.textContent=e.footerLinkText,this._eventStream.plug(s.default.fromEvents(n,"click").map((()=>({eventName:"footerClicked",sectionDescriptor:this._collapsibleSectionDescriptor})))),t.appendChild(n),t.insertAdjacentHTML("beforeend",'<br style="clear:both;">')}else t.style.display="none"}_toggleCollapseState(){this._isCollapsed?this._expand():this._collapse()}_collapse(){const e=this._element;if(!e)return;e.classList.add("inboxsdk__resultsSection_collapsed"),this._isSearch||this._addToCollapsedContainer();if(this._titleElement){const e=(0,d.default)(this._titleElement,"h3 > img.Wp");e&&(e.classList.remove("Wq"),e.classList.add("Wo"))}this._bodyElement&&(this._bodyElement.style.display="none"),this._isCollapsed=!0,this._eventStream.emit({eventName:"collapsed"})}_expand(){const e=this._element;if(!e)return;e.classList.remove("inboxsdk__resultsSection_collapsed"),this._isSearch||this._removeFromCollapsedContainer();if(this._titleElement){const e=(0,d.default)(this._titleElement,"h3 > img.Wp");e&&(e.classList.remove("Wo"),e.classList.add("Wq"))}this._bodyElement&&(this._bodyElement.style.display=""),this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}_addToCollapsedContainer(){const e=this._element;if(e)if(this._headerElement&&this._headerElement.classList.remove("Wg"),this._isCollapsedContainer(e.previousElementSibling)&&this._isCollapsedContainer(e.nextElementSibling)){const t=e.nextElementSibling,n=e.previousElementSibling;if(!n)throw new Error("previousSibling does not exist");if(!t)throw new Error("otherCollapseContainer does not exist");n.children[0].appendChild(e);const r=Array.from(t.children[0].children).concat(Array.from(t.children[1].children));t&&this._pulloutSectionsFromCollapsedContainer(t),this._recollapse(r)}else this._readdToCollapsedContainer()}_removeFromCollapsedContainer(){this._headerElement&&this._headerElement.classList.add("Wg");const e=this._element;if(!e)return;const t=e.parentElement;if(!t)return;const n=t.parentElement;if(!n||!n.classList.contains("inboxsdk__results_collapsedContainer"))return;const r=Array.from(n.children[0].children).concat(Array.from(n.children[1].children));this._pulloutSectionsFromCollapsedContainer(n),this._destroyCollapsedContainer(),this._recollapse(r.filter((t=>t!==e)))}_pulloutSectionsFromCollapsedContainer(e){Array.from(e.children[0].children).forEach((t=>e.insertAdjacentElement("beforebegin",t)));Array.from(e.children[1].children).reverse().forEach((t=>e.insertAdjacentElement("afterend",t)))}_readdToCollapsedContainer(){const e=this._element;if(!e)return;if(this._collapsedContainer)return void this._collapsedContainer.children[0].insertBefore(e,this._collapsedContainer.children[1].firstElementChild);let t,n;this._isCollapsedContainer(e.previousElementSibling)?(n=!1,t=e.previousElementSibling):this._isCollapsedContainer(e.nextElementSibling)?(n=!0,t=e.nextElementSibling):(n=!0,this._createCollapsedContainer(),t=this._collapsedContainer),n&&t?t.children[0].insertBefore(e,t.children[0].firstElementChild):t&&t.children[0].appendChild(e)}_isCollapsedContainer(e){return e&&e.classList.contains("inboxsdk__results_collapsedContainer")}_recollapse(e){e.forEach((e=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("removeCollapsedContainer",!1,!1,null),e.dispatchEvent(t);const n=document.createEvent("CustomEvent");n.initCustomEvent("readdToCollapsedContainer",!1,!1,null),e.dispatchEvent(n)}))}_createCollapsedContainer(){const e=this._collapsedContainer=document.createElement("div");e.setAttribute("class","inboxsdk__results_collapsedContainer Wg"),e.innerHTML='<div class="inboxsdk__results_collapsedContainer_prepend"></div><div class="inboxsdk__results_collapsedContainer_append"></div>';const t=this._element;t&&t.insertAdjacentElement("afterend",e)}_destroyCollapsedContainer(){this._collapsedContainer&&(this._collapsedContainer.remove(),this._collapsedContainer=null)}});n.default=_},{"../../../../common/defer":472,"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/dropdown-button-view-controller":743,"../widgets/buttons/inbox-dropdown-button-view":601,"../widgets/gmail-dropdown-view":606,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:159,"kefir-bus":156,"lodash/escape":312,ud:454}],552:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("auto-html")),a=r(e("transducers.js")),s=r(e("lodash/once")),l=r(e("lodash/escape")),u=r(e("lodash/includes")),c=r(e("lodash/constant")),d=r(e("lodash/find")),f=r(e("asap")),p=r(e("pdelay")),h=de(e("kefir")),m=de(e("ud")),_=r(e("closest-ng")),b=r(e("kefir-bus")),g=r(e("kefir-stopper")),v=r(e("../../../lib/delay-asap")),y=e("../../../lib/dom/simulate-mouse-event"),w=r(e("../../../lib/dom/simulate-key")),E=r(e("../../../lib/dom/querySelectorOrFail")),k=r(e("../../../../common/isElementVisible")),x=r(e("../../../lib/dom/make-element-child-stream")),S=e("../../../lib/dom/simulate-drag-and-drop"),C=de(e("../gmail-response-processor")),I=r(e("../gmail-element-getter")),A=r(e("../../../lib/dom/set-css")),D=r(e("../../../lib/wait-for")),T=r(e("../../../lib/stream-wait-for")),M=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),O=r(e("../../../lib/handle-compose-link-chips")),P=r(e("../../../lib/insert-link-chip-into-body")),R=r(e("./gmail-compose-view/add-compose-notice")),L=r(e("./gmail-compose-view/add-status-bar")),j=r(e("../../../lib/dom/insert-html-at-cursor")),N=r(e("./gmail-compose-view/ensure-grouping-is-open")),V=r(e("./gmail-compose-view/ensure-app-button-toolbars-are-closed")),B=r(e("./gmail-compose-view/size-fixer")),q=r(e("./gmail-compose-view/add-tooltip-to-button")),U=r(e("./gmail-compose-view/add-recipient-row")),F=r(e("./gmail-compose-view/add-button")),H=r(e("./gmail-compose-view/set-recipients")),z=r(e("./gmail-compose-view/focus")),W=r(e("./gmail-compose-view/monitor-selection-range")),$=r(e("./gmail-compose-view/manage-button-grouping")),G=e("../../../lib/dom/get-selection"),K=r(e("./gmail-compose-view/get-minimized-stream")),J=r(e("../../../../common/censorHTMLstring")),Y=r(e("./gmail-compose-view/insert-link-into-body")),Q=r(e("./gmail-compose-view/get-address-changes-stream")),Z=r(e("./gmail-compose-view/get-body-changes-stream")),X=r(e("./gmail-compose-view/get-recipients")),ee=r(e("./gmail-compose-view/get-response-type-changes-stream")),te=r(e("../../../driver-common/compose/getPresendingStream")),ne=r(e("../../../driver-common/compose/getDiscardStream")),re=r(e("./gmail-compose-view/update-insert-more-area-left")),ie=r(e("./gmail-compose-view/setupLinkPopovers")),oe=r(e("./gmail-compose-view/get-formatting-area-offset-left")),ae=r(e("./gmail-compose-view/override-edit-subject")),se=r(e("./gmail-compose-view/detectClassicRecipientsArea")),le=(r(e("../../../../common/censorHTMLtree")),e("./gmail-compose-view/page-parser")),ue=(r(e("page-parser-tree")),e("tag-tree"),de(e("./gmail-compose-view/from-manager")));function ce(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ce=function(e){return e?n:t})(e)}function de(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ce(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}let fe=!1;var pe=m.defn(t,class{constructor(e,t,n,r){let o;(0,i.default)(this,"_closedProgrammatically",!1),(0,i.default)(this,"_destroyed",!1),(0,i.default)(this,"_hasSetupLinkPopOvers",!1),this._element=e,this._element.classList.add("inboxsdk__compose"),r.isInlineReplyForm&&this._element.classList.add("inboxsdk__compose_inlineReply"),this._isInlineReplyForm=r.isInlineReplyForm,this._isStandalone=r.isStandalone,this._isFullscreen=!1,this._emailWasSent=!1,this._messageId=null,this._finalMessageId=null,this._draftSaving=!1,this._draftIDpromise=null,this._driver=n,this._stopper=(0,g.default)(),this._managedViewControllers=[],this._requestModifiers={},this._isListeningToAjaxInterceptStream=!1,this._eventStream=(0,b.default)(),this._removedFromDOMStopper=(0,g.default)(),this._isTriggeringADraftSavePending=!1,this._page=(0,le.makePageParser)(e,n.getLogger()),this.tagTree=this._page.tree,o=this._driver.isUsingSyncAPI()?t.filter((e=>e.draftID===this._getDraftIDfromForm())).map((e=>{switch(e.type){case"emailSending":return{eventName:"sending"};case"emailSent":{let t=e.threadID,r=e.messageID;return e.oldMessageID&&(this._messageId=e.oldMessageID),e.oldThreadID&&(this._threadID=e.oldThreadID),n.removeCachedGmailMessageIdForSyncMessageId(r),n.removeCachedOldGmailThreadIdFromSyncThreadId(t),{eventName:"sent",data:{getThreadID:(0,s.default)((async()=>e.oldThreadID?e.oldThreadID:await n.getOldGmailThreadIdFromSyncThreadId(t))),getMessageID:(0,s.default)((async()=>e.oldMessageID?e.oldMessageID:await n.getGmailMessageIdForSyncMessageId(r)))}}}case"emailSendFailed":return{eventName:"sendCanceled"};case"emailDraftReceived":return this._messageId=e.oldMessageID,this._threadID=e.oldThreadID,{eventName:"draftSaved",data:{getThreadID:()=>Promise.resolve(e.oldThreadID),getMessageID:()=>Promise.resolve(e.oldMessageID)}};default:return null}})).filter(Boolean):t.filter((e=>e.composeId===this.getComposeID())).map((e=>{switch(e.type){case"emailSending":return[{eventName:"sending"}];case"emailSent":{const t=C.interpretSentEmailResponse(e.response);if((0,u.default)(["tr","eu"],t.messageID))return[{eventName:"sendCanceled"}];this._emailWasSent=!0,t.messageID&&(this._finalMessageId=t.messageID),this._messageId=null;const n={getThreadID:()=>Promise.resolve(t.threadID),getMessageID:()=>Promise.resolve(t.messageID)};return["threadID","gmailThreadId"].forEach((e=>{Object.defineProperty(n,e,{get:()=>(this._driver.getLogger().deprecationWarning(`composeView sent event.${e}`,"composeView sent event.getThreadID()"),t.threadID)})})),["messageID","gmailMessageId"].forEach((e=>{Object.defineProperty(n,e,{get:()=>(this._driver.getLogger().deprecationWarning(`composeView sent event.${e}`,"composeView sent event.getMessageID()"),t.messageID)})})),[{eventName:"sent",data:n}]}case"emailDraftSaveSending":return this._draftSaving=!0,[{eventName:"draftSaving"}];case"emailDraftReceived":{let t;this._draftSaving=!1;try{t=C.interpretSentEmailResponse(e.response)}catch(t){throw"sdk_streak_21e9788951"===this._driver.getAppId()?(this._driver.getLogger().error(t,{connectionDetails:e.connectionDetails,response:e.response}),t):t}if("eu"===t.messageID)return[];const n=[{eventName:"draftSaved",data:t}];return t.messageID?t.messageID&&this._messageId!==t.messageID&&(/^[0-9a-f]+$/i.test(t.messageID)?(this._messageId=t.messageID,n.push({eventName:"messageIDChange",data:this._messageId})):this._driver.getLogger().error(new Error("Invalid message id from emailDraftReceived"),{value:t.messageID})):this._driver.getLogger().error(new Error("Missing message id from emailDraftReceived")),n}default:return[]}})).flatten().map((e=>(this._driver.getLogger().shouldTrackEverything()&&n.getLogger().eventSite("compose.debug.xhr",{eventName:e.eventName}),e))),this._eventStream.plug(h.merge([o,h.fromEvents(this._element,"buttonAdded").map((()=>({eventName:"buttonAdded"}))),h.fromEvents(this._element,"resize").map((()=>({eventName:"resize"}))),h.fromEvents(this._element,"composeFullscreenStateChanged").map((()=>(this._updateComposeFullscreenState(),{eventName:"fullscreenChanged",data:{fullscreen:this._isFullscreen}})))])),h.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue((()=>{this._closedProgrammatically=!0})),this._buttonViewControllerTooltipMap=new WeakMap;const a=this.getMaybeBodyElement();this.ready=(0,c.default)((a?h.constant(a):(0,T.default)((()=>this.getMaybeBodyElement()),18e4)).takeUntilBy(this._stopper).map((e=>(this._seenBodyElement=e,this._composeID=this._element.querySelector('input[name="composeid"]').value,this._messageIDElement=this._element.querySelector('input[name="draft"]'),this._messageIDElement||(n.getLogger().error(new Error("Could not find compose message id field")),this._messageIDElement=document.createElement("input")),this._setupIDs(),this._setupStreams(),this._setupConsistencyCheckers(),this._updateComposeFullscreenState(),this.getEventStream().filter((e=>{let{eventName:t}=e;return"presending"===t})).takeUntilBy(this._stopper).onValue((()=>{(0,x.default)(document.body).map((e=>e.el)).filter((e=>e.getAttribute&&"alertdialog"===e.getAttribute("role"))).takeUntilBy(h.merge([this.getEventStream().filter((e=>{let{eventName:t}=e;return"sendCanceled"===t||"sending"===t})),h.later(15)])).onValue((()=>{this._eventStream.emit({eventName:"sendCanceled"})}))})),this))).toProperty()),this.ready().onError((e=>{n.getLogger().error(e,{hasForm:!!this.getElement().querySelector("form"),class:this.getElement().getAttribute("class")})})),this._driver.isUsingSyncAPI()?h.merge([this._removedFromDOMStopper.filterBy(this._eventStream.filter((e=>{let{eventName:t}=e;return"presending"===t||"sendCanceled"===t})).map((e=>{let{eventName:t}=e;return"sendCanceled"===t})).toProperty((()=>!0))),h.combine([this._removedFromDOMStopper,this._eventStream.filter((e=>{let{eventName:t}=e;return"sent"===t}))])]).take(1).flatMap((()=>(0,v.default)(null))).onValue((()=>this._destroy())):this._removedFromDOMStopper.onValue((()=>this._destroy())),(0,se.default)()}destroy(){this._removedFromDOMStopper.destroy(),this._page.dump()}_destroy(){this._eventStream.emit({eventName:"destroy",data:{messageID:this.getMessageID(),closedByInboxSDK:this._closedProgrammatically}}),this._eventStream.end(),this._managedViewControllers.forEach((e=>{e.destroy()})),this._requestModifiers={},this._managedViewControllers.length=0,this._stopper.destroy(),this._destroyed=!0}getStopper(){return this._stopper}getEventStream(){return this._eventStream}getGmailDriver(){return this._driver}isDestroyed(){return this._destroyed}_setupStreams(){let e;this._eventStream.plug((0,Q.default)(this)),this._eventStream.plug((0,Z.default)(this)),this._eventStream.plug((0,ee.default)(this)),this._eventStream.plug((0,te.default)({element:this.getElement(),sendButton:this.getSendButton(),sendAndArchive:this.getSendAndArchiveButton()}));try{e=this.getDiscardButton()}catch(e){this._driver.getLogger().errorSite(new Error("Failed to find discard button"),{html:(0,J.default)(this._element.outerHTML)})}e&&this._eventStream.plug((0,ne.default)({element:this.getElement(),discardButton:e})),this._eventStream.plug(h.fromEvents(this.getElement(),"inboxSDKsendCanceled").map((()=>({eventName:"sendCanceled"})))),this._eventStream.plug(h.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map((()=>({eventName:"discardCanceled"})))),this._eventStream.plug(h.later(10).flatMap((()=>(0,K.default)(this))).changes().map((e=>({eventName:e?"minimized":"restored"})))),this._driver.isUsingSyncAPI()||(0,M.default)(this._messageIDElement,{attributes:!0,attributeFilter:["value"]}).takeUntilBy(this._eventStream.filter((()=>!1)).beforeEnd((()=>null))).map((()=>this._getMessageIDfromForm())).filter((e=>e&&!this._emailWasSent&&this._messageId!==e)).onValue((e=>{this._messageId=e,this._eventStream.emit({eventName:"messageIDChange",data:this._messageId})}))}_setupConsistencyCheckers(){try{(0,O.default)(this),(0,W.default)(this),(0,$.default)(this),(0,B.default)(this._driver,this)}catch(e){this._driver.getLogger().error(e)}}_setupIDs(){if(this._driver.isUsingSyncAPI()){const e=this._getTargetMessageID();e&&this._driver.getGmailMessageIdForSyncMessageId(e).then((e=>this._targetMessageID=e));const t=this._getMessageIDfromForm();t?(this._driver.getGmailMessageIdForSyncDraftId(t).then((e=>{this._initialMessageId=e,this._messageId=e})).catch((()=>{})),this._driver.reportRecentSyncDraftId(t),this._stopper.onValue((()=>{this._driver.reportDraftClosed(t)}))):this._driver.getLogger().error(new Error("Draft is missing sync draft id"));const n=this._element.querySelector('input[name="lts"]');n&&"string"==typeof n.value&&(this._threadID=n.value)}else this._targetMessageID=this._getTargetMessageID(),this._messageId=this._initialMessageId=this._getMessageIDfromForm(),this._threadID=this._getThreadID()}_updateComposeFullscreenState(){if(this._isInlineReplyForm)this._isFullscreen=!1;else if(this._isStandalone)this._isFullscreen=!0;else{const e=I.default.getFullscreenComposeWindowContainer();this._isFullscreen=!!e&&e.contains(this._element)}}focus(){(0,z.default)(this)}insertBodyTextAtCursor(e){return this.insertBodyHTMLAtCursor((0,l.default)(e).replace(/\n/g,"<br>"))}insertBodyHTMLAtCursor(e){var t=(0,j.default)(this.getBodyElement(),e,this.getLastSelectionRange());return this._triggerDraftSave(),(0,w.default)(this.getBodyElement(),13,13),t}insertLinkIntoBody(e,t){var n=(0,Y.default)(this,e,t);return this._triggerDraftSave(),n}insertLinkChipIntoBody(e){var t=(0,P.default)(this,e);return this._triggerDraftSave(),t}setSubject(e){this._element.querySelector("input[name=subjectbox]").value=e,this._triggerDraftSave()}setBodyHTML(e){this.getBodyElement().innerHTML=e,this._triggerDraftSave()}setBodyText(e){this.getBodyElement().textContent=e,this._triggerDraftSave()}setToRecipients(e){(0,H.default)(this,"to",e),this._triggerDraftSave()}setCcRecipients(e){(0,H.default)(this,"cc",e),this._triggerDraftSave()}setBccRecipients(e){(0,H.default)(this,"bcc",e),this._triggerDraftSave()}addRecipientRow(e){return(0,U.default)(this,e)}forceRecipientRowsOpen(){return this._element.classList.add("inboxsdk__compose_forceRecipientsOpen"),()=>{this._element.classList.remove("inboxsdk__compose_forceRecipientsOpen")}}hideNativeRecipientRows(){const e=(0,le.getRecipientRowElements)(this._element);return e.forEach((e=>{e.classList.add("inboxsdk__compose_forceRecipientRowHidden")})),()=>{e.forEach((e=>{e.classList.remove("inboxsdk__compose_forceRecipientRowHidden")}))}}hideRecipientArea(){return this._element.classList.add("inboxsdk__compose_hideRecipientArea"),()=>{this._element.classList.remove("inboxsdk__compose_hideRecipientArea")}}getFromContact(){return ue.getFromContact(this._driver,this)}getFromContactChoices(){return ue.getFromContactChoices(this._driver,this)}setFromEmail(e){ue.setFromEmail(this._driver,this,e)}addButton(e,t,n){return(0,F.default)(this,e,t,n)}addTooltipToButton(e,t,n){var r=(0,q.default)(this,e,t,n);this._buttonViewControllerTooltipMap.set(e,r)}closeButtonTooltip(e){if(this._buttonViewControllerTooltipMap){var t=this._buttonViewControllerTooltipMap.get(e);t&&(t.destroy(),this._buttonViewControllerTooltipMap.delete(e))}}addComposeNotice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,R.default)(this,e);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),h.fromEvents(t,"destroy").flatMap(v.default).takeUntilBy(this._stopper).onValue((()=>{this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))})),t}addStatusBar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,L.default)(this,e);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),h.fromEvents(t,"destroy").flatMap(v.default).takeUntilBy(this._stopper).onValue((()=>{this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))})),t}hideNativeStatusBar(){const e=this.getStatusArea(),t=(0,E.default)(e,"table"),n=this.getFormattingToolbar(),r=n&&"none"!==n.style.display;return t.style.display="none",n&&r&&(n.style.display="none"),()=>{t.style.display="",n&&r&&(n.style.display="")}}replaceSendButton(e){const t=this.getSendButtonGroup(),n=this.getSendAndArchiveButton();t.style.display="none";const r=n&&n.parentElement;r instanceof HTMLElement&&(r.style.display="none");const i=document.createElement("div");i.classList.add("inboxsdk__compose_customSendContainer"),i.appendChild(e),t.insertAdjacentElement("afterend",i),this._element.setAttribute("data-inboxsdk-send-replaced","");const o=(0,g.default)();return h.fromEvents(this.getBodyElement(),"keydown").takeUntilBy(this._stopper).takeUntilBy(o).filter((e=>(9===e.which||9===e.keyCode)&&!e.shiftKey)).onValue((e=>{const t=this.getStatusArea().querySelectorAll("[tabindex]");if(0===t.length)return;const n=Array.from(t).find((e=>null!==e.offsetParent));n&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n.focus())})),()=>{o.destroy(),i.remove(),this._element.removeAttribute("data-inboxsdk-send-replaced"),t.style.display="",r instanceof HTMLElement&&(r.style.display="")}}hideDiscardButton(){const e=this.getDiscardButton();return e.style.display="none",()=>{e.style.display=""}}ensureFormattingToolbarIsHidden(){const e=this.getFormattingToolbarToggleButton(),t=this.getFormattingToolbar();e&&t&&""===t.style.display&&(0,y.simulateClick)(e)}close(){this.isInlineReplyForm()?console.warn("Trying to close an inline reply which doesn't work."):(this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),this._isFullscreen?(this._eventStream.filter((e=>{let{eventName:t}=e;return"fullscreenChanged"===t})).onValue((()=>(0,y.simulateClick)(this.getCloseButton()))),(0,y.simulateClick)(this.getMoleSwitchButton())):(0,y.simulateClick)(this.getCloseButton()))}send(e){let{sendAndArchive:t}=e;(0,f.default)((()=>{const e=this.getSendAndArchiveButton();t&&e?(0,y.simulateClick)(e):(0,y.simulateClick)(this.getSendButton())}))}discard(){(0,y.simulateClick)(this.getDiscardButton())}popOut(){if(!this.isInlineReplyForm())throw new Error("Can only pop out inline reply compose views");const e=(0,E.default)(this._element,".M9 > [role=menu]:first-child > .SK > [role=menuitem]:last-child");(0,y.simulateClick)(e)}overrideEditSubject(){(0,ae.default)(this._driver,this)}_hideDropzones(){(0,A.default)("compose dropzone hider","body > .aC7 .aC9 {visibility: hidden;}")}_reenableDropzones(){(0,A.default)("compose dropzone hider",null)}_dropzonesVisible(){return null!=(0,d.default)(document.querySelectorAll("body > .aC7:not(.aWP)"),k.default)}_findDropzoneForThisCompose(e){const t=this._element.getBoundingClientRect(),n=e?"body > .aC7:not(.aWP)":"body > .aC7.aWP",r=a.default.toArray(Array.prototype.slice.call(document.querySelectorAll(n)),a.default.compose(a.default.filter(k.default),a.default.filter((e=>{const n=parseInt(e.style.top,10),r=n+parseInt(e.style.height,10),i=parseInt(e.style.left,10),o=i+parseInt(e.style.width,10);return n>=t.top&&i>=t.left&&o<=t.right&&r<=t.bottom})),a.default.take(1)))[0];if(!r)throw new Error("Failed to find dropzone");return r}async _attachFiles(e,t){this._hideDropzones();const n=(0,s.default)((()=>(0,S.simulateDragEnd)(this._element,e)));try{let r=!0;for(let i of a.default.partition(e,3)){r?r=!1:await(0,p.default)(500),(0,S.simulateDragOver)(this._element,i),await(0,D.default)((()=>this._dropzonesVisible()),2e4);const e=this._findDropzoneForThisCompose(t);(0,S.simulateDrop)(e,i),n(),await(0,D.default)((()=>!this._dropzonesVisible()),2e4)}}catch(e){this._driver.getLogger().error(e)}finally{n(),this._reenableDropzones()}}attachFiles(e){return this._attachFiles(e,!1)}attachInlineFiles(e){return this._attachFiles(e,!0)}isForward(){return Boolean(this._element.querySelector(".Un.J-JN-M-I .mI"))}isReply(){return this._isInlineReplyForm||!!this._element.querySelector(".HQ")}isInlineReplyForm(){return this._isInlineReplyForm}getBodyElement(){const e=this.getMaybeBodyElement();if(!e)throw new Error("Could not find body element");return e}getMaybeBodyElement(){return this._element.querySelector(".Ap [g_editable=true]")}getTopFormElement(){return(0,E.default)(this._element,"td > form")}getHTMLContent(){return this.getBodyElement().innerHTML}getTextContent(){return this.getBodyElement().textContent}getSelectedBodyHTML(){return(0,G.getSelectedHTMLInElement)(this.getBodyElement(),this.getLastSelectionRange())}getSelectedBodyText(){return(0,G.getSelectedTextInElement)(this.getBodyElement(),this.getLastSelectionRange())}getSubject(){return this.getSubjectInput().value}getSubjectInput(){return this._element.querySelector("input[name=subjectbox]")}getMetadataFormElement(){const e=this.getBodyElement().closest(".aoP");if(!e)throw new Error("Could not find compose container");return(0,E.default)(e,"form.bAs")}getToRecipients(){return(0,X.default)(this,"to")}getCcRecipients(){return(0,X.default)(this,"cc")}getBccRecipients(){return(0,X.default)(this,"bcc")}getAdditionalActionToolbar(){return e("./gmail-compose-view/get-additional-action-toolbar").default(this)}updateInsertMoreAreaLeft(e){(0,re.default)(this,e)}_getFormattingAreaOffsetLeft(){return(0,oe.default)(this)}getFormattingArea(){let e=this._formattingArea;return e||(e=this._formattingArea=this._element.querySelector(".oc")),e}getFormattingToolbar(){return this._element.querySelector(".aX")}getFormattingToolbarArrow(){const e=this.getFormattingToolbar();if(!e)throw new Error("Failed to find formatting toolbar");return(0,E.default)(e,".aA4")}getFormattingToolbarToggleButton(){const e=(0,E.default)(this._element,"[role=button] .dv"),t=(0,_.default)(e,"[role=button]");if(!t)throw new Error("failed to find button");return t}getStatusBarPrependContainer(){return this._element.querySelector(".inboxsdk__compose_statusBarPrependContainer")}getScrollBody(){var e=this._element.querySelector("table .GP");if(!e)throw new Error("Failed to find scroll body");return e}getStatusArea(){let e=this._element.querySelector(".aDg .aDj > .aDh");if(!e)throw new Error("Failed to find status area");return e}getInsertMoreArea(){return(0,E.default)(this._element,".eq")}getInsertLinkButton(){return(0,E.default)(this._element,".e5.aaA.aMZ")}getSendButton(){return(0,E.default)(this._element,".IZ .Up div > div[role=button]:not(.Uo):not([aria-haspopup=true]):not([class^=inboxsdk_])")}getSendButtonGroup(){const e=this._element.querySelector(".IZ .Up div > [role=button][aria-haspopup=true]:not([class^=inboxsdk_])");return e?e.parentElement:this.getSendButton()}getSendAndArchiveButton(){if(!this.isReply())return null;const e=this._element.querySelector(".IZ .Up div > div[role=button].Uo:not([aria-haspopup=true]):not([class^=inboxsdk_])");if(e)return e;const t=this.getSendButton(),n=t.parentElement;if(!(n instanceof HTMLElement))throw new Error("should not happen");if(n.childElementCount<=1)return this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find, childElementCount <= 1"),null;const r=n.children[0]!==t?n.children[0]:n.children[1],i=r?r.querySelector("[role=button]"):null;return i?this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - found"):this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find"),i}getCloseButton(){return this._element.querySelectorAll(".Hm > img")[2]}getMoleSwitchButton(){return this._element.querySelectorAll(".Hm > img")[1]}getBottomBarTable(){return(0,E.default)(this._element,".aoP .aDh > table")}getBottomToolbarContainer(){return(0,E.default)(this._element,".aoP .aDj")}getDiscardButton(){return(0,E.default)(this._element,".gU .oh")}getComposeID(){return this._composeID}getInitialMessageID(){return this._initialMessageId}_getDraftIDfromForm(){const e=this._messageIDElement&&this._messageIDElement.value||null;if("string"==typeof e&&"undefined"!==e&&"null"!==e){if(this._driver.isUsingSyncAPI())return e.replace("#","").replace("msg-a:","");this._driver.getLogger().error(new Error("Invalid draft id in element"),{value:e})}return null}_getMessageIDfromForm(){const e=this._messageIDElement&&this._messageIDElement.value||null;if("string"==typeof e&&"undefined"!==e&&"null"!==e){if(this._driver.isUsingSyncAPI())return e.replace("#","");if(/^[0-9a-f]+$/i.test(e))return e;this._driver.getLogger().error(new Error("Invalid message id in element"),{value:e})}return null}getMessageID(){return this._messageId}getTargetMessageID(){return this._targetMessageID}getThreadID(){return this._threadID}async getCurrentDraftID(){if(!this._driver.isUsingSyncAPI())return this.getMessageID()?this.getDraftID():null;{const e=this._getDraftIDfromForm();if(this._messageId)return e;{const t=this._getMessageIDfromForm();if(t){try{await this._driver.getGmailMessageIdForSyncDraftId(t)}catch(e){return null}return e}}}}getDraftID(){let e=this._draftIDpromise;return e||(e=this._draftIDpromise=this._getDraftIDimplementation()),e}async _getDraftIDimplementation(){if(this._driver.isUsingSyncAPI()){const e=this._getDraftIDfromForm();if(this._messageId)return e;{const t=this._getMessageIDfromForm();if(t){try{await this._driver.getGmailMessageIdForSyncDraftId(t)}catch(e){await this._eventStream.filter((e=>{let{eventName:t}=e;return"draftSaved"===t})).beforeEnd((()=>null)).map((()=>this._getDraftIDfromForm())).take(1).toPromise()}return e}}}else{let e=-1,t=null;try{if(!this._messageId&&(await this._eventStream.filter((e=>"messageIDChange"===e.eventName)).beforeEnd((()=>null)).take(1).toPromise(),!this._messageId))return null;let n=null;for(;;){e++;const r=this._messageId;if(!r)throw new Error("Should not happen");if(n===r){if(this._draftSaving){await this._eventStream.filter((e=>"messageIDChange"===e.eventName)).beforeEnd((()=>null)).take(1).toPromise();continue}throw setTimeout((async()=>{const e=this._messageId;if(!e)throw new Error("Should not happen");const{draftID:t,debugData:n}=await this._driver.getDraftIDForMessageID(e,!0),i=new Error("Failed to read draft ID -- after check");this._driver.getLogger().error(i,{message:"getDraftID error -- after check",messageIdChanged:r!==e,gotDraftID:null!=t,debugData:t?null:n})}),1e4),new Error("Failed to read draft ID")}n=r;const{draftID:i,debugData:o}=await this._driver.getDraftIDForMessageID(r);if(t=o,i)return i}}catch(n){throw this._driver.getLogger().error(n,{message:"getDraftID error",removedFromDOM:!document.contains(this._element),destroyed:this._destroyed,isFullscreen:this._isFullscreen,isStandalone:this._isStandalone,emailWasSent:this._emailWasSent,i:e,lastDebugData:t}),n}}}addManagedViewController(e){this._managedViewControllers.push(e)}ensureGroupingIsOpen(e){(0,N.default)(this._element,e)}ensureAppButtonToolbarsAreClosed(){(0,V.default)(this._element)}isMinimized(){const e=this.getElement(),t=this.getMaybeBodyElement(),n=(0,d.default)(e.children,(e=>e.contains(t)));return n?""!==n.style.display:(fe||(fe=!0,this._driver.getLogger().error(new Error("isMinimized failed to find bodyContainer"),{bodyElement:!!t,hasMessageIDElement:!!this._messageIDElement,ended:this._eventStream.ended,bodyElStillInCompose:this._element.contains(this._seenBodyElement),seenBodyElHtml:(0,J.default)(this._seenBodyElement.outerHTML),composeHtml:(0,J.default)(e.outerHTML)})),!1)}setMinimized(e){if(e!==this.isMinimized()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");const e=(0,E.default)(this._element,".Hm > img");(0,y.simulateClick)(e)}}setFullscreen(e){if(e!==this.isFullscreen()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");const e=(0,E.default)(this._element,".Hm > img:nth-of-type(2)");(0,y.simulateClick)(e)}}setTitleBarColor(e){const t=(0,E.default)(this._element,".nH.Hy.aXJ table.cf.Ht td.Hm"),n=[(0,E.default)(this._element,".nH.Hy.aXJ .pi > .l.o"),(0,E.default)(this._element,".nH.Hy.aXJ .l.m"),(0,E.default)(this._element,".nH.Hy.aXJ .l.m > .l.n")];return t.classList.add("inboxsdk__compose_customTitleBarColor"),n.forEach((t=>{t.style.backgroundColor=e})),()=>{t.classList.remove("inboxsdk__compose_customTitleBarColor"),n.forEach((e=>{e.style.backgroundColor=""}))}}setTitleBarText(e){if(this.isInlineReplyForm())throw new Error("setTitleBarText() is not supported on inline compose views");const t=(0,E.default)(this._element,".nH.Hy.aXJ table.cf.Ht");if(t.classList.contains("inboxsdk__compose_hasCustomTitleBarText"))throw new Error("Custom title bar text is already registered for this compose view");const n=(0,E.default)(t,"div.Hp").parentElement;if(!(n instanceof HTMLElement))throw new Error("Could not locate title bar text parent");t.classList.add("inboxsdk__compose_hasCustomTitleBarText"),n.classList.add("inboxsdk__compose_nativeTitleBarText");const r=document.createElement("td");return r.classList.add("inboxsdk__compose_customTitleBarText"),r.innerHTML=o.default`
      <div class="Hp">
        <h2 class="a3E">
          <div class="aYF">${e}</div>
        </h2>
      </div>
    `,n.insertAdjacentElement("afterend",r),()=>{r.remove(),t.classList.remove("inboxsdk__compose_hasCustomTitleBarText"),n.classList.remove("inboxsdk__compose_nativeTitleBarText")}}_triggerDraftSave(){this._isTriggeringADraftSavePending||(this._isTriggeringADraftSavePending=!0,h.later(0).takeUntilBy(this._stopper).onValue((()=>{this._isTriggeringADraftSavePending=!1;const e=this.getMaybeBodyElement();if(e){const t=this._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,w.default)(e,190,0)}finally{t()}}})))}_getTargetMessageID(){const e=this._element.querySelector('input[name="rm"]');return e&&"string"==typeof e.value&&"undefined"!=e.value?e.value.replace("#",""):null}_getThreadID(){const e=this.getTargetMessageID();try{return e?this._driver.getThreadIDForMessageID(e):null}catch(e){return this._driver.getLogger().error(e),null}}getElement(){return this._element}isFullscreen(){return this._isFullscreen}getLastSelectionRange(){const e=this._lastSelectionRange;return e&&!this.getBodyElement().contains(e.commonAncestorContainer)&&(this._lastSelectionRange=void 0),this._lastSelectionRange}setLastSelectionRange(e){this._lastSelectionRange=e}registerRequestModifier(e){const t=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!t)throw new Error("keyId should be set here");const n=this._driver.getPageCommunicator().registerComposeRequestModifier(t,this._driver.getAppId());this._requestModifiers[n]=e,this._startListeningForModificationRequests(),this._stopper.onValue((()=>{this._driver.getPageCommunicator().unregisterComposeRequestModifier(t,n)}))}_startListeningForModificationRequests(){if(this._isListeningToAjaxInterceptStream)return;const e=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!e)throw new Error("keyId should be set here");this._driver.getPageCommunicator().ajaxInterceptStream.filter((t=>{let{type:n,composeid:r,draftID:i,modifierId:o}=t;return"inboxSDKmodifyComposeRequest"===n&&(r===e||e===i)&&Boolean(this._requestModifiers[o])})).takeUntilBy(this._stopper).onValue((t=>{let{modifierId:n,composeParams:r}=t;this._driver.getLogger().shouldTrackEverything()&&this._driver.getLogger().eventSite("inboxSDKmodifyComposeRequest");const i=this._requestModifiers[n];new Promise((e=>e(i(r)))).then((t=>this._driver.getPageCommunicator().modifyComposeRequest(e,n,t||r))).then((e=>(this._driver.getLogger().shouldTrackEverything()&&this._driver.getLogger().eventSite("composeRequestModified"),e))).catch((t=>{this._driver.getPageCommunicator().modifyComposeRequest(e,n,r),this._driver.getLogger().error(t)}))})),this._isListeningToAjaxInterceptStream=!0}setupLinkPopOvers(){this._hasSetupLinkPopOvers||(this._hasSetupLinkPopOvers=!0,this._eventStream.plug((0,ie.default)(this)))}});n.default=pe},{"../../../../common/censorHTMLstring":469,"../../../../common/censorHTMLtree":470,"../../../../common/isElementVisible":479,"../../../driver-common/compose/getDiscardStream":631,"../../../driver-common/compose/getPresendingStream":632,"../../../lib/delay-asap":650,"../../../lib/dom/get-selection":655,"../../../lib/dom/insert-html-at-cursor":657,"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/dom/set-css":670,"../../../lib/dom/simulate-drag-and-drop":672,"../../../lib/dom/simulate-key":673,"../../../lib/dom/simulate-mouse-event":674,"../../../lib/handle-compose-link-chips":680,"../../../lib/insert-link-chip-into-body":686,"../../../lib/stream-wait-for":701,"../../../lib/wait-for":704,"../gmail-element-getter":530,"../gmail-response-processor":534,"./gmail-compose-view/add-button":553,"./gmail-compose-view/add-compose-notice":554,"./gmail-compose-view/add-recipient-row":555,"./gmail-compose-view/add-status-bar":556,"./gmail-compose-view/add-tooltip-to-button":557,"./gmail-compose-view/detectClassicRecipientsArea":558,"./gmail-compose-view/ensure-app-button-toolbars-are-closed":559,"./gmail-compose-view/ensure-grouping-is-open":560,"./gmail-compose-view/focus":561,"./gmail-compose-view/from-manager":562,"./gmail-compose-view/get-additional-action-toolbar":563,"./gmail-compose-view/get-address-changes-stream":564,"./gmail-compose-view/get-body-changes-stream":566,"./gmail-compose-view/get-formatting-area-offset-left":567,"./gmail-compose-view/get-minimized-stream":568,"./gmail-compose-view/get-recipients":569,"./gmail-compose-view/get-response-type-changes-stream":570,"./gmail-compose-view/insert-link-into-body":572,"./gmail-compose-view/manage-button-grouping":573,"./gmail-compose-view/monitor-selection-range":574,"./gmail-compose-view/override-edit-subject":575,"./gmail-compose-view/page-parser":576,"./gmail-compose-view/set-recipients":578,"./gmail-compose-view/setupLinkPopovers":579,"./gmail-compose-view/size-fixer":580,"./gmail-compose-view/update-insert-more-area-left":581,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,"closest-ng":57,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/constant":307,"lodash/escape":312,"lodash/find":314,"lodash/includes":323,"lodash/once":346,"page-parser-tree":373,pdelay:375,"tag-tree":451,"transducers.js":452,ud:454}],553:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){return new Promise(((i,o)=>{let a;t.takeUntilBy(e.getStopper()).onValue((t=>{const o=function(e,t,n){if(!e)return null;const r={type:"MODIFIER",...e},i=r.onClick;r.onClick=function(e){n.getLogger().eventSdkActive("composeView.addedButton.click"),i({...t,...e})},r.hasDropdown?r.dropdownShowFunction=r.onClick:r.activateFunction=r.onClick;r.noArrow=!0,r.tooltip=r.tooltip||r.title,delete r.title,"MODIFIER"===r.type?r.buttonColor="flatIcon":"SEND_ACTION"===r.type&&(r.buttonColor="blue");return r}(t,r,e.getGmailDriver());a?a.update(o):o&&(a=function(e,t,n){if(!e.getElement()||!e.getFormattingToolbar())return;let r;"MODIFIER"===t.type?r=function(e,t,n){var r=u(t);r.getView().getElement().setAttribute("tabindex","1"),r.getView().getElement().setAttribute("data-order-hint",String(t.orderHint||0)),r.getView().getElement().setAttribute("data-group-order-hint",n);var i=e._getFormattingAreaOffsetLeft(),o=r.getView().getElement(),a=e.getAdditionalActionToolbar();return(0,l.default)(a,o),e.updateInsertMoreAreaLeft(i),e.addManagedViewController(r),r}(e,t,n):"SEND_ACTION"===t.type&&(r=function(e,t){const n=u(t);n.getView().removeClass("inboxsdk__composeButton"),n.getView().addClass("inboxsdk__compose_sendButton"),n.getView().getElement().setAttribute("tabindex","1");const r=e.getSendButtonGroup(),i=n.getView().getElement();return r.parentElement.insertBefore(i,r.nextSibling),e.addManagedViewController(n),n}(e,t));return e.getElement().dispatchEvent(new CustomEvent("buttonAdded",{bubbles:!1,cancelable:!1,detail:null})),r}(e,o,n),i({buttonViewController:a,buttonDescriptor:t}))})).onEnd((()=>{i(null)}))}))};r(e("kefir"));var i=r(e("./gmail-compose-button-view")),o=r(e("../../../../widgets/buttons/basic-button-view-controller")),a=r(e("../../../../widgets/buttons/dropdown-button-view-controller")),s=r(e("../../widgets/gmail-dropdown-view")),l=r(e("../../../../lib/dom/insert-element-in-order"));function u(e){const t={buttonView:new i.default(e),...e};let n;return e.hasDropdown?(Object.assign(t,{dropdownViewDriverClass:s.default,dropdownPositionOptions:{vAlign:"top"}}),n=new a.default(t)):n=new o.default(t),n}},{"../../../../lib/dom/insert-element-in-order":656,"../../../../widgets/buttons/basic-button-view-controller":742,"../../../../widgets/buttons/dropdown-button-view-controller":743,"../../widgets/gmail-dropdown-view":606,"./gmail-compose-button-view":571,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],554:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const{orderHint:n}={orderHint:0,...t},r=new d(e,n);return e.getStopper().takeUntilBy(o.default.fromEvents(r,"destroy")).onValue((()=>r.destroy())),r};var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=r(e("kefir-stopper")),s=r(e("../../../../lib/dom/insert-element-in-order")),l=r(e("../../../../lib/logger")),u=r(e("../../../../lib/dom/querySelectorOrFail")),c=r(e("../../../../views/SimpleElementView"));class d extends c.default{constructor(e,t){let n=document.createElement("div");n.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",n.style.fontSize="14px",super(n),(0,i.default)(this,"_stopper",(0,a.default)()),this._gmailComposeView=e,this._orderHint=t,n.className="inboxsdk__compose_notice",n.setAttribute("data-order-hint",String(t)),this._setComposeNotice()}destroy(){this.destroyed||(super.destroy(),this._stopper.destroy())}_setComposeNotice(){try{const e=(0,u.default)(this._gmailComposeView.getElement(),".iN");(0,s.default)(e,this.el,["data-order-hint"],!0)}catch(e){l.default.error(e)}}}},{"../../../../lib/dom/insert-element-in-order":656,"../../../../lib/dom/querySelectorOrFail":668,"../../../../lib/logger":691,"../../../../views/SimpleElementView":721,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158}],555:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){let n;return t.takeUntilBy(e.getStopper()).onValue((t=>{n&&(n.remove(),n=null),t&&(n=function(e,t){var n=document.createElement("tr"),r=document.createElement("td"),i=document.createElement("td");if(n.appendChild(r),n.appendChild(i),n.setAttribute("class","inboxsdk__recipient_row"),t.labelText){r.setAttribute("class","ok");var a=document.createElement("span");a.setAttribute("class","gO"),r.appendChild(a),a.textContent=t.labelText,t.labelClass&&r.classList.add(t.labelClass),t.labelTextClass&&a.classList.add(t.labelTextClass)}t.el&&(i.setAttribute("class","az3"),i.appendChild(t.el));var s=(0,o.getRecipientRowElements)(e.getElement())[0],l=s.parentElement;l.insertBefore(n,s.nextSibling);const u=l.closest(".fX");return u&&u.classList.add("inboxsdk__compose_addressList"),n}(e,t),(0,i.default)(n)),e.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))})),()=>{n&&(n.remove(),n=null,e.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})))}};r(e("kefir"));var i=r(e("../../../../lib/dom/block-and-reemit-keyboard-events")),o=e("./page-parser")},{"../../../../lib/dom/block-and-reemit-keyboard-events":651,"./page-parser":576,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],556:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("kefir")),s=r(e("kefir-stopper")),l=r(e("classnames")),u=r(e("../../../../lib/dom/insert-element-in-order")),c=r(e("../../../../lib/logger")),d=r(e("../../../../lib/dom/querySelectorOrFail")),f=r(e("../../../../views/SimpleElementView")),p=(0,o.defn)(t,(function(e,t){const{height:n,orderHint:r,addAboveNativeStatusBar:i}={height:40,orderHint:0,addAboveNativeStatusBar:!1,...t},o=new h(e,n,r,i);return e.getStopper().takeUntilBy(a.default.fromEvents(o,"destroy")).onValue((()=>o.destroy())),o}));n.default=p;class h extends f.default{constructor(e,t,n,r){super(function(e,t){const n=document.createElement("div");return n.className=(0,l.default)("aDh","inboxsdk__compose_statusbar",{inboxsdk__addAboveNative:t}),n.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",n.style.fontSize="15.6px",n.setAttribute("data-order-hint",String(e)),n}(n,r)),(0,i.default)(this,"_prependContainer",null),(0,i.default)(this,"_stopper",(0,s.default)()),this._addAboveNativeStatusBar=r,this._gmailComposeView=e,this._nativeStatusContainer=(0,d.default)(e.getElement(),".iN > tbody .aDj"),this._setStatusBar(),this.setHeight(t)}destroy(){this.destroyed||(super.destroy(),this._stopper.destroy(),this._prependContainer&&0===this._prependContainer.children.length&&this._prependContainer.remove(),this._updateTotalHeight())}setHeight(e){this.el.style.height=e+"px",this._updateTotalHeight()}_updateTotalHeight(){const e=Array.from(this._gmailComposeView.getElement().querySelectorAll(".inboxsdk__compose_statusbar")).map((e=>e.getBoundingClientRect().height)).reduce(((e,t)=>e+t),0);this._gmailComposeView.getElement().style.setProperty("--inboxsdk-total-added-statusbar-height",e+"px")}_setStatusBar(){try{const e=this._gmailComposeView.getStatusArea();if(this._gmailComposeView.getElement().classList.add("inboxsdk__compose_statusbarActive"),this._addAboveNativeStatusBar){const t=this._prependContainer=e.querySelector(".inboxsdk__compose_statusBarPrependContainer")||document.createElement("div");t.classList.add("inboxsdk__compose_statusBarPrependContainer"),e.insertAdjacentElement("afterbegin",t),(0,u.default)(t,this.el)}else if(this._gmailComposeView.isInlineReplyForm()){const e=(0,d.default)(this._gmailComposeView.getElement(),".iN > tbody .aDj .aDh .IZ");(0,u.default)(e,this.el)}else(0,u.default)(e,this.el)}catch(e){c.default.error(e)}}}},{"../../../../lib/dom/insert-element-in-order":656,"../../../../lib/dom/querySelectorOrFail":668,"../../../../lib/logger":691,"../../../../views/SimpleElementView":721,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:159,"kefir-stopper":158,ud:454}],557:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){var o=new a.default(r),l=o.getStopper().merge(e.getStopper());e.getStopper().takeUntilBy(o.getStopper()).onValue((()=>o.destroy())),document.body.appendChild(o.getElement()),s(o,e,t,n),e.getEventStream().filter((e=>"buttonAdded"===e.eventName||"fullscreenChanged"===e.eventName)).merge(o.getEventStream().filter((e=>{let{eventName:t}=e;return"imageLoaded"===t}))).debounce(10).takeUntilBy(l).onValue(s.bind(null,o,e,t,n)),t.getView().getEventStream().takeUntilBy(l).filter((function(e){return"click"===e.eventName})).onValue(o.destroy.bind(o));var u=i.default.interval(50).takeUntilBy(l),c=0,d=0;return u.takeWhile((()=>!!t.getView()&&!!o.getElement())).map((()=>t.getView().getElement().getBoundingClientRect())).filter((e=>e.left!==c||e.top!==d)).map((e=>(c=e.left,d=e.top,e))).onValue(o.anchor.bind(o,t.getView().getElement(),{position:"top"})),u.filter((()=>!t.getView()||!t.getView().getElement().offsetParent)).onValue(o.destroy.bind(o)),o};var i=r(e("kefir")),o=r(e("../../../../lib/logger")),a=r(e("../../widgets/gmail-tooltip-view"));function s(e,t,n,r){try{t.ensureGroupingIsOpen(r.type),setTimeout((function(){e.anchor(n.getView().getElement(),{position:"top"})}),10)}catch(e){o.default.error(e)}}},{"../../../../lib/logger":691,"../../widgets/gmail-tooltip-view":610,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],558:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(0,r(e("lodash/once")).default)((function(){const e=[...document.styleSheets].find((e=>{try{if(e.cssRules)return[...e.cssRules].find((e=>e instanceof CSSStyleRule&&".aoI"===e.selectorText&&e.style.fontSize&&e.style.color))}catch(e){}return!1}));if(e){if([...e.cssRules].some((e=>e instanceof CSSStyleRule&&".aoI"===e.selectorText&&"visible"===e.style.overflowY)))return;if([...e.cssRules].some((e=>e instanceof CSSStyleRule&&".aaZ > .M9 > .aoI"===e.selectorText&&"auto"===e.style.overflowY)))return;document.body.classList.add("inboxsdk__classic_gmail_recipients_area")}}));n.default=i},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":346}],559:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.querySelector(".inboxsdk__compose_groupedActionButton");if(!t)return;e.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")&&(0,r.simulateClick)(t)};var r=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":674}],560:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if("SEND_ACTION"===t)return;var n=e.querySelector(".inboxsdk__compose_groupedActionButton");if(!n)return;if(e.classList.contains("inboxsdk__compose_groupedActionToolbar_visible"))return;(0,r.simulateClick)(n)};var r=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":674}],561:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.getBodyElement().focus();const t=e.getLastSelectionRange(),n=document.getSelection();if(!n)throw new Error;t&&n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset&&(n.removeAllRanges(),n.addRange(t))}},{}],562:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getFromContact=function(e,t){const n=t.getElement().querySelector('input[name="from"]'),r=n?n.value:null;if(!r)return e.getUserContact();const o=a(e,t),s=(0,i.default)(o,(e=>e.emailAddress===r));let l;s?l=s.name:(l=r,e.getLogger().error(new Error("getFromContact failed to find name"),{fromContactChoicesLength:o.length}));return{emailAddress:r,name:l}},n.getFromContactChoices=a,n.setFromEmail=function(e,t,n){if(t.getFromContact().emailAddress===n)return;const r=t.getElement().querySelector("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX");if(!r){if(e.getUserContact().emailAddress!=n)throw new Error("Chosen email from choice was not found");return}const a=(0,i.default)(r.children,(e=>e.getAttribute("value")==n));if(!a)throw new Error("Chosen email from choice was not found");(0,o.simulateClick)(a)};var i=r(e("lodash/find")),o=e("../../../../lib/dom/simulate-mouse-event");function a(e,t){const n=t.getElement().querySelectorAll("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX > div[value][role=menuitem]");return 0==n.length?[e.getUserContact()]:Array.from(n).map((e=>({emailAddress:e.getAttribute("value")||"",name:e.textContent.replace(/<.*/,"").trim()})))}},{"../../../../lib/dom/simulate-mouse-event":674,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":314}],563:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar > div");if(t)return t;let n=e.getElement().querySelector(".inboxsdk__compose_actionToolbar > div");if(n)return n;if(n=r.get(e),!n){const t=n=function(e){const t=document.createElement("td");t.setAttribute("class","inboxsdk__compose_actionToolbar gU");const n=e.getFormattingArea();if(!n)throw new Error("formatting area missing");n.insertAdjacentElement("beforebegin",t);let r=t.parentElement;for(;r&&"TABLE"!==r.tagName;)r=r.parentElement;if(r){const e=r.querySelector("colgroup col");if(e){const t=document.createElement("col");t.setAttribute("class","inboxsdk__compose_actionToolbarColumn");const n=document.createElement("col");n.setAttribute("class","inboxsdk__compose_separatorColumn"),e.insertAdjacentElement("afterend",n),e.insertAdjacentElement("afterend",t)}}var i=document.createElement("div");return t.appendChild(i),i}(e);e.getStopper().onValue((()=>{t.remove()})),r.set(e,n)}return n};const r=new WeakMap},{}],564:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=(0,s.getRecipientRowElements)(e.getElement());if(!t||0===t.length)return i.default.never();const n=i.default.merge([u("to",e),u("cc",e),u("bcc",e)]),r=n.map(c);return i.default.merge([n,r,d(e)])};var i=r(e("kefir")),o=(r(e("transducers.js")),r(e("../../../../lib/logger")),r(e("../../../../lib/dom/make-mutation-observer-stream"))),a=r(e("./get-address-information-extractor")),s=e("./page-parser"),l=(r(e("../../../../lib/dom/make-element-child-stream")),r(e("../../../../lib/toItemWithLifetimeStream")));function u(e,t){const n=t.tagTree.getAllByTag(`${e}Recipient`);return(0,l.default)(n).flatMap((n=>{let{el:r,removalStream:o}=n;const s=function(e,t,n){return"option"===e.getAttribute("role")?{name:e.getAttribute("data-name"),emailAddress:e.getAttribute("data-hovercard-id")}:(0,a.default)(t,n)(e)}(r.getValue(),e,t);return s?i.default.constant({eventName:`${e}ContactAdded`,data:{contact:s}}).merge(o.map((()=>({eventName:`${e}ContactRemoved`,data:{contact:s}})))):i.default.never()}))}function c(e){const t={to:{added:[],removed:[]},cc:{added:[],removed:[]},bcc:{added:[],removed:[]}},n=e.eventName.split("Contact");return t[n[0]][n[1].toLowerCase()].push(e.data.contact),{eventName:"recipientsChanged",data:t}}function d(e){return i.default.later(0,null).flatMap((()=>{const t=e.getElement().querySelector('input[name="from"]');return i.default.constant(f("fromContactChanged",e.getFromContact())).merge(t?(0,o.default)(t,{attributes:!0,attributeFilter:["value"]}).map((()=>f("fromContactChanged",e.getFromContact()))):i.default.never())}))}function f(e,t){return{eventName:e,data:{contact:t}}}},{"../../../../lib/dom/make-element-child-stream":659,"../../../../lib/dom/make-mutation-observer-stream":663,"../../../../lib/logger":691,"../../../../lib/toItemWithLifetimeStream":702,"./get-address-information-extractor":565,"./page-parser":576,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"transducers.js":452}],565:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return function(n){const r=n instanceof HTMLInputElement&&n.getAttribute("name")===e?n:n.querySelector(`input[name='${e}']`);if(!r)return i.default.error(new Error("contactNode can't be found"),{addressType:e,composeViewHtml:(0,a.default)(t.getElement().outerHTML)}),null;var s=r.value;try{return(0,o.default)(s)}catch(e){return null}}};var i=r(e("../../../../lib/logger")),o=r(e("../../../../lib/extract-contact-from-email-contact-string")),a=r(e("../../../../../common/censorHTMLstring"))},{"../../../../../common/censorHTMLstring":469,"../../../../lib/extract-contact-from-email-contact-string":676,"../../../../lib/logger":691,"@babel/runtime/helpers/interopRequireDefault":15}],566:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.getBodyElement();return(0,i.default)(t,{childList:!0,subtree:!0,characterData:!0}).map((function(){return{eventName:"bodyChanged"}}))};r(e("kefir"));var i=r(e("../../../../lib/dom/make-mutation-observer-stream"))},{"../../../../lib/dom/make-mutation-observer-stream":663,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],567:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(!t){let t=o.get(e);if(null!=t)return t}const n=e.getFormattingArea();if(!n)return 0;const r=n.getBoundingClientRect().left;return o.set(e,r),(0,i.default)((()=>o.delete(e))),r};var i=r(e("asap"));const o=new WeakMap},{"@babel/runtime/helpers/interopRequireDefault":15,asap:31}],568:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return s.flatMapLatest((t=>t(e)))};var i=r(e("lodash/find")),o=(r(e("kefir")),r(e("ud-kefir"))),a=r(e("../../../../lib/dom/make-mutation-observer-stream"));const s=(0,o.default)(t,(function(e){const t=e.getElement(),n=e.getBodyElement(),r=(0,i.default)(t.children,(e=>e.contains(n)));return(0,a.default)(r,{attributes:!0,attributeFilter:["style"]}).map((()=>e.isMinimized()))}))},{"../../../../lib/dom/make-mutation-observer-stream":663,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/find":314,"ud-kefir":453}],569:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=(0,i.getRecipientChips)(e.getElement(),t);return Array.from(n).map((n=>"option"===n.getAttribute("role")?{name:n.getAttribute("data-name"),emailAddress:n.getAttribute("data-hovercard-id")}:(0,o.default)(t,e)(n))).filter(a.default)};var i=e("./page-parser"),o=r(e("./get-address-information-extractor")),a=r(e("../../../../lib/isNotNil"))},{"../../../../lib/isNotNil":689,"./get-address-information-extractor":565,"./page-parser":576,"@babel/runtime/helpers/interopRequireDefault":15}],570:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let t;try{return t=(0,s.default)(e.getElement(),".J-J5-Ji .J-JN-M-I-Jm > img"),(0,a.default)(t,{attributeFilter:["class"],attributes:!0}).map((()=>({data:{isForward:e.isForward()},eventName:"responseTypeChanged"})))}catch(e){return o.default.error(e),i.default.never()}};var i=r(e("kefir")),o=r(e("../../../../lib/logger")),a=r(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),s=r(e("../../../../lib/dom/querySelectorOrFail"))},{"../../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../../lib/dom/querySelectorOrFail":668,"../../../../lib/logger":691,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],571:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/includes")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),s=r(e("kefir-bus")),l=r(e("../../../../lib/logger")),u=e("../../../../lib/dom/simulate-mouse-event"),c=r(e("../../../../lib/dom/keyboard-shortcut-stream"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}n.default=class{constructor(e){(0,i.default)(this,"_element",document.createElement("div")),(0,i.default)(this,"_iconElement",document.createElement("div")),this._isEnabled=!1!==e.enabled,this._iconClass=e.iconClass,this._iconUrl=e.iconUrl,this._tooltip=e.tooltip||e.title||e.text,this._hasDropdown=!!e.hasDropdown,this._keyboardShortcutHandle=e.keyboardShortcutHandle,this._createElement(e),this._eventStream=(0,s.default)(),this._setupEventStream(),this._setupAestheticEvents(),!1!==e.enabled&&this._setupKeyboardShortcutEvent()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){this.addClass("inboxsdk__composeButton_active")}deactivate(){this.removeClass("inboxsdk__composeButton_active")}addClass(e){this._element.classList.add(e)}removeClass(e){this._element.classList.remove(e)}simulateHover(){(0,u.simulateHover)(this._element)}setEnabled(e){this._setEnabled(e)}isEnabled(){return this._isEnabled}update(e){if(!e)return void(this._element.style.display="none");"none"===this._element.style.display&&(this._element.style.display="");const t=e.tooltip||e.title||e.text;t!=this._tooltip&&this._updateTooltip(t),e.iconUrl!=this._iconUrl&&this._updateIconUrl(e.iconUrl),e.iconClass!=this._iconClass&&this._updateIconClass(e.iconClass),!1!==e.enabled&&!0!==e.enabled||this._setEnabled(e.enabled)}_createElement(e){this._createMainElement(e),this._createIconElement()}_createMainElement(e){this._element.setAttribute("class","inboxsdk__composeButton"),e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0");const t=e.tooltip||e.title||e.text;t&&this._element.setAttribute("data-tooltip",t),!1===e.enabled&&this._element.classList.add("inboxsdk__button_disabled"),e.noOverflow&&this._element.setAttribute("data-no-overflow","")}_createIconElement(){const e=this._iconElement;this._iconClass&&(e.innerHTML="&nbsp;",e.setAttribute("class",this._iconClass)),e.classList.add("inboxsdk__button_icon"),this._element.appendChild(e),this._iconUrl&&this._createIconImgElement()}_createIconImgElement(){this._iconElement.innerHTML="";const e=this._iconImgElement=document.createElement("img");e.classList.add("inboxsdk__button_iconImg"),this._iconUrl?e.src=this._iconUrl:l.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),this._iconElement.appendChild(e)}_updateTooltip(e){this._tooltip=e,e?this._element.setAttribute("data-tooltip",e):this._element.removeAttribute("data-tooltip")}_updateIconUrl(e){this._iconUrl=e,!e&&this._iconImgElement?(this._iconImgElement.remove(),this._iconImgElement=null):e&&!this._iconImgElement?this._createIconImgElement():e&&this._iconImgElement&&(this._iconImgElement.src=e)}_updateIconClass(e){this._iconClass=e,this._iconElement.setAttribute("class","inboxsdk__button_icon "+(e||""))}_setEnabled(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}_setupEventStream(){const e=a.fromEvents(this._element,"click");e.onValue((function(e){e.stopPropagation(),e.preventDefault()})),this._eventStream.plug(e.filter((()=>this.isEnabled())).map((function(e){return{eventName:"click",domEvent:e}})));const t=a.fromEvents(this._element,"keydown").filter((()=>this.isEnabled())).filter((e=>(0,o.default)([32,13],e.which)));this._eventStream.plug(t.map((function(e){return{eventName:"click",domEvent:e}}))),t.onValue((function(e){e.stopPropagation(),e.preventDefault()}))}_setupKeyboardShortcutEvent(){const e=this._keyboardShortcutHandle;e&&this._eventStream.plug((0,c.default)(e.chord).takeUntilBy(this._eventStream.filter((function(e){return"enabledChanged"===e.eventName&&!1===e.isEnabled}))).map((function(e){return{eventName:"click",domEvent:e}})))}_setupAestheticEvents(){a.fromEvents(this._element,"mouseenter").filter((()=>this.isEnabled())).onValue((()=>{this._element.classList.add("inboxsdk__button_hover")})),a.fromEvents(this._element,"mouseleave").onValue((()=>{this._element.classList.remove("inboxsdk__button_hover")}))}}},{"../../../../lib/dom/keyboard-shortcut-stream":658,"../../../../lib/dom/simulate-mouse-event":674,"../../../../lib/logger":691,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"lodash/includes":323}],572:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return function(e,t,n){e.focus(),e.getBodyElement().focus();const r=document.getSelection();if(!r)throw new Error("selection does't exist, what?");const i=r.getRangeAt(0),o=document.createElement("a");return o.href=n,i.extractContents(),i.insertNode(o),o.textContent=t,r.selectAllChildren(o),r.collapseToEnd(),o}(e,t,n)};e("../../../../lib/dom/simulate-mouse-event"),r(e("../../../../lib/dom/set-value-and-dispatch-event"))},{"../../../../lib/dom/set-value-and-dispatch-event":671,"../../../../lib/dom/simulate-mouse-event":674,"@babel/runtime/helpers/interopRequireDefault":15}],573:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;r(e("asap"));var i=e("ud"),o=r(e("./gmail-compose-button-view")),a=r(e("../../../../widgets/buttons/basic-button-view-controller")),s=(r(e("../../../../widgets/buttons/dropdown-button-view-controller")),r(e("../../widgets/gmail-dropdown-view")),r(e("../../../../lib/dom/insert-element-in-order"))),l=e("../../../../lib/dom/simulate-mouse-event"),u=r(e("../../../../lib/wait-for")),c=r(e("../../../../lib/logger")),d=r(e("../../../../lib/dom/querySelectorOrFail")),f=r(e("../../../../../common/censorHTMLtree")),p=r(e("./position-formatting-toolbar")),h=r(e("../../../../../common/get-or-fail"));const m=(0,i.defonce)(t,(()=>new Map));var _=(0,i.defn)(t,(function(e){if("true"!==e.getElement().getAttribute("data-button-grouping-managed")){m.set(e,{}),e.getElement().setAttribute("data-button-grouping-managed","true"),e.getEventStream().filter((e=>"fullscreenChanged"===e.eventName)).debounce(10).onValue((()=>{!function(e){e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&function(e){const t=(0,h.default)(m,e);t.groupedToolbarButtonViewController&&t.groupedToolbarButtonViewController.destroy();t.formattingToolbarMutationObserver&&t.formattingToolbarMutationObserver.disconnect();const n=t.groupedActionToolbarContainer.firstElementChild;if(n){w(e,n),n.remove();const t=(0,d.default)(e.getElement(),".inboxsdk__compose_actionToolbar");t.innerHTML="",t.appendChild(n)}}(e);b(e)}(e)})),e.getEventStream().filter((function(e){return"buttonAdded"===e.eventName})).onValue((()=>{b(e)})),e.getEventStream().filter((e=>"resize"===e.eventName||"restored"===e.eventName)).onValue((()=>{b(e)}));var t=e.getElement();e.getStopper().onValue((function(){m.delete(e),t.setAttribute("data-button-grouping-managed","false")}))}}));function b(e){!function(e){if(g.has(e))return;g.add(e),window.requestAnimationFrame((()=>{if(g.delete(e),!e.isDestroyed()&&(v(e),function(e){return!e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&(!(e.getElement().querySelectorAll(".inboxsdk__composeButton:not([data-no-overflow])").length<2)&&y(e)>e.getBottomToolbarContainer().clientWidth)}(e))){var t=function(e){var t=document.createElement("div");return t.classList.add("inboxsdk__compose_groupedActionToolbar"),t.innerHTML='<div class="inboxsdk__compose_groupedActionToolbar_arrow"> </div>',(0,h.default)(m,e).groupedActionToolbarContainer=t,t.style.display="none",t}(e),n=function(e){var t=(0,h.default)(m,e),n=function(){var e=new o.default({tooltip:"More Tools",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAADxJREFUOBFjYKASYISa8x/NPJLFmdAMIJs7+Awi2ys000hy7EBdghHLgy+wqeYimgU+2QaPxhrZQUe6RgBYwgkWqJftAwAAAABJRU5ErkJggg=="});return e.addClass("inboxsdk__compose_groupedActionButton"),e.getElement().setAttribute("tabindex","1"),e}(),r=new a.default({buttonView:n,activateFunction:function(){!function(e,t){k()?function(e,t){(0,h.default)(m,e).groupedActionToolbarContainer.style.display="none",e.getElement().classList.remove("inboxsdk__compose_groupedActionToolbar_visible"),t.getView().deactivate(),localStorage.inboxsdk__compose_groupedActionButton_state="collapsed";const n=e.getBottomBarTable();n.style.position="";const r=e.getElement().querySelector(".qz");r&&(r.scrollTop=r.scrollTop-1)}(e,t):E(e,t)}(e,r),k()&&(0,h.default)(m,e).groupedActionToolbarContainer.querySelectorAll(".inboxsdk__composeButton")[0].focus()}});return t.groupedActionToolbarContainer.addEventListener("keydown",(function(e){27===e.which&&(r.activate(),n.getElement().focus(),e.preventDefault(),e.stopPropagation())})),(0,h.default)(m,e).groupedToolbarButtonViewController=r,r}(e);!function(e,t){const n=(0,d.default)(e.getElement(),".inboxsdk__compose_actionToolbar > div"),r=n.parentElement,i=document.createElement("div");i.appendChild(t.getView().getElement()),r.appendChild(i);const o=(0,h.default)(m,e).groupedActionToolbarContainer;o.insertBefore(n,o.firstElementChild),r.appendChild(o),function(e){const t=(0,d.default)(e.getElement(),".inboxsdk__compose_actionToolbar > div");w(e,t)}(e)}(e,n),function(e,t){k()&&E(e,t)}(e,n),function(e,t){(0,u.default)((function(){if(e.isDestroyed())throw"skip";return e.getFormattingToolbar()})).then((n=>{const r=new MutationObserver((function(e){const n=e[0].target;n instanceof HTMLElement&&""===n.style.display&&"expanded"===localStorage.inboxsdk__compose_groupedActionButton_state&&t.activate()}));r.observe(n,{attributes:!0,attributeFilter:["style"]}),(0,h.default)(m,e).formattingToolbarMutationObserver=r,e.getStopper().onValue((()=>r.disconnect()))})).catch((e=>{if("skip"!==e)throw c.default.error(e),e}))}(e,n),e.getElement().classList.remove("inboxsdk__compose_narrow_buttons"),v(e),e.getStopper().onValue((function(){t.remove(),n.destroy()}))}}))}(e),function(e){if(x.has(e))return;x.add(e),window.requestAnimationFrame((()=>{if(x.delete(e),!e.isDestroyed()){(0,p.default)(e);var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");t&&"none"!==t.style.display&&S(e)}}))}(e)}n.default=_;const g=new WeakSet;function v(e){e.getElement().clientWidth>y(e)||0===e.getElement().querySelectorAll(".inboxsdk__composeButton").length||e.getElement().classList.contains("inboxsdk__compose_narrow_buttons")||(e.getElement().classList.add("inboxsdk__compose_narrow_buttons"),e.getElement().offsetTop)}function y(e){const t=e.getBottomBarTable();return Array.from(t.querySelectorAll(".btC > td")).reduce(((e,t)=>e+t.clientWidth),0)}function w(e,t){const n=e.getElement().querySelectorAll(".inboxsdk__composeButton[data-no-overflow]");Array.from(n).forEach((e=>(0,s.default)(t,e,void 0,!0)))}function E(e,t){(0,h.default)(m,e).groupedActionToolbarContainer.style.display="",e.getElement().classList.add("inboxsdk__compose_groupedActionToolbar_visible"),t.getView().activate(),localStorage.inboxsdk__compose_groupedActionButton_state="expanded",S(e);const n=e.getFormattingToolbar();n&&""===n.style.display&&(0,l.simulateClick)(e.getFormattingToolbarToggleButton());const r=e.getElement().querySelector(".qz");r&&(r.scrollTop=r.scrollTop+1)}function k(){return"expanded"===localStorage.inboxsdk__compose_groupedActionButton_state}const x=new WeakSet;function S(e){if(e.isMinimized())return;var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");if(!t)return;const n=(0,d.default)(e.getElement(),".inboxsdk__compose_groupedActionButton"),r=(0,d.default)(t,".inboxsdk__compose_groupedActionToolbar_arrow");if(t.style.display="",n.offsetLeft+n.clientWidth>t.offsetWidth){var i=n.clientWidth/2-t.offsetWidth/2-3;t.style.left=n.offsetLeft+i+"px",r.style.left=-(i+1)+"px"}else t.style.left="",r.style.left=n.offsetLeft-1+"px";e.getBottomBarTable().style.position="relative";const o=e.getBottomBarTable().clientHeight;if(t.style.bottom=`${o+1}px`,o<1){const t=e.getElement().querySelectorAll("td.HE");c.default.error(new Error("bottom toolbar had bad height"),{bottomToolbarHeight:o,heElementHeights:Array.from(t).map((e=>e.clientHeight)),heElementsHTML:Array.from(t).map(f.default)})}}},{"../../../../../common/censorHTMLtree":470,"../../../../../common/get-or-fail":475,"../../../../lib/dom/insert-element-in-order":656,"../../../../lib/dom/querySelectorOrFail":668,"../../../../lib/dom/simulate-mouse-event":674,"../../../../lib/logger":691,"../../../../lib/wait-for":704,"../../../../widgets/buttons/basic-button-view-controller":742,"../../../../widgets/buttons/dropdown-button-view-controller":743,"../../widgets/gmail-dropdown-view":606,"./gmail-compose-button-view":571,"./position-formatting-toolbar":577,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,ud:454}],574:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){i.default.merge([(0,o.default)(document.body,"mousedown"),(0,o.default)(e.getBodyElement(),"keydown"),e.getEventStream().filter((e=>"bodyChanged"===e.eventName))]).takeUntilBy(e.getStopper()).onValue((t=>{var n=e.getMaybeBodyElement(),r=document.getSelection();n&&r.rangeCount>0&&n.contains(r.anchorNode)&&e.setLastSelectionRange(r.getRangeAt(0))}))};var i=r(e("kefir")),o=r(e("../../../../lib/from-event-target-capture"))},{"../../../../lib/from-event-target-capture":678,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],575:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(!t.isReply())return;const n=t.getElement().querySelector("div.J-M.jQjAxd.HX[role=menu] > div.SK.AX > [role=menuitem]:nth-last-child(2)");if(!n)return void(a||(e.getLogger().error(new Error("could not find edit subject item"),{composeElement:(0,i.default)(t.getElement())}),a=!0));n.addEventListener("click",(e=>{e.stopPropagation()}),!0),n.addEventListener("mouseup",(n=>{n.stopPropagation(),function(e,t){const n=t.getToRecipients(),r=t.getCcRecipients(),i=t.getBccRecipients(),a=t.getFromContact(),s=t.getSubject();!function(e){if(e.getBodyElement().querySelector(".gmail_extra"))return;const t=e.getElement().querySelector(".ajR");t&&(0,o.simulateClick)(t)}(t);const l=t.getHTMLContent();t.discard(),e.openNewComposeViewDriver().then((e=>{n.length>0&&e.setToRecipients(n.map((e=>e.emailAddress))),r.length>0&&e.setCcRecipients(r.map((e=>e.emailAddress))),i.length>0&&e.setBccRecipients(i.map((e=>e.emailAddress))),e.setFromEmail(a.emailAddress),e.setSubject(s),e.setBodyHTML(l),setTimeout((function(){e.getSubjectInput().select()}),1)}))}(e,t)}),!0)};var i=r(e("../../../../../common/censorHTMLtree")),o=e("../../../../lib/dom/simulate-mouse-event");let a=!1},{"../../../../../common/censorHTMLtree":470,"../../../../lib/dom/simulate-mouse-event":674,"@babel/runtime/helpers/interopRequireDefault":15}],576:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getOldRecipientRowForType=l,n.getRecipientChips=s,n.getRecipientRowElements=function(e){return Array.prototype.filter.call(e.querySelectorAll(".GS tr, .GS .anm[name] [role=listbox]"),(e=>!e.classList.contains("inboxsdk__recipient_row")))},n.getRecipientRowForType=function(e,t){return e.querySelector(`.GS .anm[name="${t}"] [role=listbox]`)},n.makePageParser=function(e,t){return new o.default(e,{logError(e,n){const r={el:n,html:n?(0,a.default)(n):null};t.errorSite(e,r)},tags:{},watchers:[{sources:[null],tag:"recipientsCommon",selectors:["div","div","div[jsaction]","div[role=region]","table","tbody","tr","td","form","div","table.GS","tbody","tr.bzf","td.eV","div","div"]},{sources:[null],tag:"recipientsCommon",selectors:["div[role=region]","table","tbody","tr","td","form","div","table[role=presentation]","tbody","tr","td.Iy","div.fX","table.GS","tbody","tr.bzf","td.eV","div","div"]},{sources:["recipientsCommon"],tag:"toRecipient",selectors:[{$or:[['div.anm[name="to"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:e=>e.querySelector("textarea.vO[name=to], input[name=to]")},{$map:e=>e.closest("tr")},"td.eV","div","div",".vR","input[type=hidden]",{$map:e=>e.parentElement}]]}]},{sources:["recipientsCommon"],tag:"ccRecipient",selectors:[{$or:[['div.anm[name="cc"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:e=>e.querySelector("textarea.vO[name=cc], input[name=cc]")},{$map:e=>e.closest("tr")},"td.eV","div","div",".vR","input[type=hidden]",{$map:e=>e.parentElement}]]}]},{sources:["recipientsCommon"],tag:"bccRecipient",selectors:[{$or:[['div.anm[name="bcc"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:e=>e.querySelector("textarea.vO[name=bcc], input[name=bcc]")},{$map:e=>e.closest("tr")},"td.eV","div","div",".vR","input[type=hidden]",{$map:e=>e.parentElement}]]}]}],finders:{toRecipient:{fn:e=>s(e,"to")},ccRecipient:{fn:e=>s(e,"cc")},bccRecipient:{fn:e=>s(e,"bcc")}}})};var i=r(e("closest-ng")),o=r(e("page-parser-tree")),a=r(e("../../../../../common/censorHTMLtree"));function s(e,t){const n=l(e,t);return n?Array.from(n.querySelectorAll(".vR > input[type=hidden]")).map((e=>e.parentElement)):e.querySelectorAll(`.GS .anm[name="${t}"] [role=listbox] [role=option][data-name]`)}function l(e,t){const n=e.querySelector(`.GS tr textarea.vO[name="${t}"], .GS tr input[name="${t}"]`);return n?(0,i.default)(n,"tr"):null}},{"../../../../../common/censorHTMLtree":470,"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,"page-parser-tree":373}],577:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=e.getFormattingToolbar();if(t&&""===t.style.display){const n=e.getFormattingToolbarArrow(),r=e.getFormattingToolbarToggleButton(),i=r.offsetLeft+r.clientWidth/2-n.offsetWidth/2;n.style.left=i+"px";const o=e.getStatusBarPrependContainer();t.style.bottom=o?-1*o.offsetHeight+"px":""}}},{}],578:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r){if(function(e,t,n){const r=(0,a.default)(e,t).map((e=>e.emailAddress));if(!n)return!!r;if(!r)return!!n;if(n.length!==r.length)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(-1===n.indexOf(t))return!1}return!0}(t,n,r))return;const c=t.getLastSelectionRange();let d=(0,u.getRecipientRowForType)(t.getElement(),n);function f(e){const n=e.closest(".fX.aiL");if(n&&"none"===n.style.display){(0,o.default)(t.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus"))}}if("cc"===n){const e=t.getElement().querySelector("span.pE[role=link]");e&&(f(e),e.click(),d=(0,u.getRecipientRowForType)(t.getElement(),n))}else if("bcc"===n){const e=t.getElement().querySelector("span.pB[role=link]");e&&(f(e),e.click(),d=(0,u.getRecipientRowForType)(t.getElement(),n))}const p=d;if(p){const i=(0,o.default)(p,"input[role=combobox][aria-autocomplete=list]");if(!(i instanceof HTMLInputElement))throw new Error;Array.from(p.querySelectorAll("div[role=option][data-name] div.afX[aria-label]")).forEach((e=>{e.click()})),i.value="";const a=new DataTransfer;a.setData("text/plain",r.join(",")),i.dispatchEvent(new ClipboardEvent("paste",{clipboardData:a}));const s=p.closest("div.anm[name]");if(r.length>0&&s&&!s.hasAttribute("data-inboxsdk-handled-reset")){const i=String(Number(s.getAttribute("data-inboxsdk-tracking-fresh-compose")||0)+1);s.setAttribute("data-inboxsdk-tracking-fresh-compose",i),setTimeout((()=>{s.getAttribute("data-inboxsdk-tracking-fresh-compose")===i&&(s.removeAttribute("data-inboxsdk-tracking-fresh-compose"),0===p.querySelectorAll("div[role=option][data-name] div.afX[aria-label]").length&&(s.setAttribute("data-inboxsdk-handled-reset","true"),e(t,n,r)))}),100)}}else{let e;try{if(e=(0,u.getOldRecipientRowForType)(t.getElement(),n),!e)throw new Error("getOldRecipientRowForType failed")}catch(e){return void i.default.error(e,{addressType:n})}const a=e.querySelector("textarea.vO");if(!(a&&a instanceof HTMLTextAreaElement))return;Array.from(e.querySelectorAll(".vR .vM")).forEach((e=>{(0,s.simulateClick)(e)})),a.value=r.join(","),(0,l.default)(a,13,0);if((0,o.default)(t.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus")),"cc"===n){const e=(0,o.default)(t.getElement(),"span.aB.gQ.pE");(0,s.simulateClick)(e)}else if("bcc"===n){const e=(0,o.default)(t.getElement(),"span.aB.gQ.pB");(0,s.simulateClick)(e)}}document.activeElement instanceof HTMLElement&&document.activeElement.blur();if(c){const e=document.getSelection();if(!e)throw new Error;e.removeAllRanges(),e.addRange(c)}};var i=r(e("../../../../lib/logger")),o=r(e("../../../../lib/dom/querySelectorOrFail")),a=r(e("./get-recipients")),s=e("../../../../lib/dom/simulate-mouse-event"),l=r(e("../../../../lib/dom/simulate-key")),u=e("./page-parser")},{"../../../../lib/dom/querySelectorOrFail":668,"../../../../lib/dom/simulate-key":673,"../../../../lib/dom/simulate-mouse-event":674,"../../../../lib/logger":691,"./get-recipients":569,"./page-parser":576,"@babel/runtime/helpers/interopRequireDefault":15}],579:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,a.default)(e.getGmailDriver().getTagTree().getAllByTag("composeLinkPopOverContainer")).flatMap((t=>{let{el:n,removalStream:r}=t;const i=n.getValue();let a=null;return r.onValue((()=>{a&&(a.emit("close"),a=null)})),(0,s.default)(i,{attributes:!0,attributeFilter:["style"]}).toProperty((()=>null)).takeUntilBy(r).flatMap((()=>{if(a&&(a.emit("close"),a=null),"visible"===i.style.visibility){const t=function(e){var t;const n=null===(t=document.getSelection())||void 0===t?void 0:t.focusNode;if(!n)return null;var r;if(n instanceof Text){if(n.previousSibling instanceof HTMLAnchorElement&&0===(null===(r=document.getSelection())||void 0===r?void 0:r.anchorOffset))return n.previousSibling;if(n.nextSibling instanceof HTMLAnchorElement)return n.nextSibling}return f(n,e.getBodyElement())}(e);if(t&&e.getElement().contains(t)){const e=new c(t,i);return a=e,o.constant({eventName:"linkPopOver",data:e})}}return o.never()}))}))};var i=r(e("@babel/runtime/helpers/defineProperty")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("../../../../lib/toItemWithLifetimeStream")),s=r(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),l=r(e("../../../../lib/safe-event-emitter"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class c extends l.default{constructor(e,t){super(),this._linkEl=e,this._popOverEl=t}getLinkElement(){return this._linkEl}addSection(){let e=this._popOverEl.querySelector(".inboxsdk__linkPopOver_section_container");return e||(e=document.createElement("div"),e.className="inboxsdk__linkPopOver_section_container",this._popOverEl.appendChild(e)),new d(this,e)}}class d{constructor(e,t){(0,i.default)(this,"_el",document.createElement("div")),this._el.className="inboxsdk__linkPopOver_section",t.appendChild(this._el),e.on("close",(()=>{this.remove()}))}getElement(){return this._el}remove(){this._el.remove()}}function f(e,t){return e instanceof HTMLAnchorElement?e:e&&e!==t?f(e.parentElement,t):null}},{"../../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../../lib/safe-event-emitter":698,"../../../../lib/toItemWithLifetimeStream":702,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],580:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(t.isInlineReplyForm()||t.getElement().classList.contains("inboxsdk__size_fixer"))return;t.getElement().classList.add("inboxsdk__size_fixer");var n=t.getEventStream(),r=n.filter((()=>!1)).beforeEnd((()=>null)),s=n.filter((e=>(0,i.default)(["resize","fullscreenChanged"],e.eventName))).merge((0,l.default)(null)),c=t.getStatusArea().parentElement,_=t.getScrollBody(),b=h(),g=t.getTopFormElement(),v=t.getElement().id;v||(v=t.getElement().id=`x${Math.random()}x${Date.now()}`);function y(e,t){const n=p+m(v)+" "+e,r=(0,a.default)(b.cssRules,(e=>e.selectorText===n));-1!==r&&b.deleteRule(r),b.insertRule(n+" { "+t+" }",0)}(0,u.default)(c,{attributes:!0}).takeUntilBy(r).onValue((()=>{t.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))})),s.bufferBy(s.flatMap((e=>(0,l.default)(null)))).filter((e=>e.length>0)).merge((0,u.default)(_,{attributes:!0})).takeUntilBy(r).onValue((()=>{const e=Math.max(c.offsetHeight-d,0)+Math.max(g.offsetHeight-f,0),n=t.getMaybeBodyElement(),r=_.querySelector(".qz"),i=(null==r?void 0:r.offsetHeight)||_.offsetHeight,o=parseInt(_.style.getPropertyValue("max-height"),10),a=t.isFullscreen(),s=o-e,l=i>s?s:null,u=[`max-height: ${s}px !important;`];let p;if(l&&u.push(`height: ${l}px !important;`),a){u.push(`min-height: ${s}px !important;`);p=`min-height: ${(parseInt(null==n?void 0:n.style.minHeight,10)||o)-e}px !important;`}u.length>0&&y(m(_.id),u.join("\n")),p&&n&&y(m(n.id),p)})),r.onValue((()=>{for(let e=b.cssRules.length-1;e>=0;e--)(0,o.default)(b.cssRules[e].selectorText,p+m(v)+" ")&&b.deleteRule(e)}))};var i=r(e("lodash/includes")),o=r(e("lodash/startsWith")),a=r(e("lodash/findIndex")),s=r(e("lodash/once")),l=(r(e("kefir")),r(e("../../../../lib/delay-asap"))),u=r(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),c=r(e("../../../../lib/css-selector-escape"));const d=60,f=72,p="body:not(.inboxsdk_hack_disableComposeSizeFixer) ";var h=(0,s.default)((()=>{const e=document.createElement("style");e.type="text/css",e.className="inboxsdk__compose_size_fixer",document.head.appendChild(e);var t=e.sheet;if(!(t instanceof CSSStyleSheet))throw new Error("Could not add stylesheet");return t}));function m(e){return"#"+(0,c.default)(e)}},{"../../../../lib/css-selector-escape":649,"../../../../lib/delay-asap":650,"../../../../lib/dom/make-mutation-observer-chunked-stream":662,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/findIndex":315,"lodash/includes":323,"lodash/once":346,"lodash/startsWith":350}],581:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(r.has(e))return;r.add(e),window.requestAnimationFrame((()=>{if(r.delete(e),!e.isDestroyed()){var n=e._getFormattingAreaOffsetLeft(),i=parseInt(e.getInsertMoreArea().style.left,10),o=n-t;e.getInsertMoreArea().style.left=i+o+"px"}}))};const r=new WeakSet},{}],582:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/sortBy")),a=r(e("lodash/once")),s=r(e("auto-html")),l=(r(e("asap")),e("ud")),u=r(e("kefir")),c=r(e("kefir-bus")),d=r(e("kefir-stopper")),f=r(e("kefir-cast")),p=r(e("./gmail-attachment-area-view")),h=r(e("./gmail-attachment-card-view")),m=r(e("./gmail-message-view/get-updated-contact")),_=r(e("./gmail-message-view/attachment-icon")),b=(r(e("../../../lib/delay-asap")),r(e("../../../lib/wait-for")),r(e("../../../lib/dom/make-mutation-observer-stream"))),g=r(e("../../../lib/dom/querySelectorOrFail")),v=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),y=e("../../../lib/dom/simulate-mouse-event"),w=r(e("../../../../common/censorHTMLtree")),E=r(e("../../../../common/find-parent")),k=r(e("../../../lib/dom/reemitClickEventForReact"));let x=!1;class S{constructor(e,t,n){let r;if((0,i.default)(this,"_eventStream",(0,c.default)()),(0,i.default)(this,"_stopper",(0,d.default)()),(0,i.default)(this,"_messageLoaded",!1),(0,i.default)(this,"_sender",null),(0,i.default)(this,"_recipients",null),(0,i.default)(this,"_recipientEmailAddresses",null),(0,i.default)(this,"_recipientsFull",null),this._element=e,this._threadViewDriver=t,this._driver=n,this._moreMenuItemDescriptors=[],this._moreMenuAddedElements=[],this._replyElement=null,this._replyElementStream=this._eventStream.filter((function(e){return"replyElement"===e.eventName})).map((e=>e.change)),this._setupMessageStateStream(),this._monitorEmailAddressHovering(),this._setupMoreMenuWatching(),n.isUsingSyncAPI()){const e=this._element.querySelector("[data-message-id]");if(e){const t=e.getAttribute("data-message-id");if(!t)throw new Error("data-message-id attribute has no value");r=e.hasAttribute("data-legacy-message-id")&&!this._driver.isRecentSyncDraftId(t.replace("#",""))?u.default.constant(null):u.default.fromPromise((async()=>{for(let n=0;n<10;n++)try{const n=await this._driver.getGmailMessageIdForSyncMessageId(t.replace("#",""));return e.setAttribute("data-legacy-message-id",n),null}catch(e){await new Promise((e=>setTimeout(e,200*n)))}throw new Error("gmail message id never became available")})())}else r=u.default.constant(null)}else r=u.default.constant(null);this._readyStream=r.takeUntilBy(this._stopper).onValue((()=>this._processInitialState()))}destroy(){this._stopper.destroy(),this._eventStream.end(),this._gmailAttachmentAreaView&&this._gmailAttachmentAreaView.destroy(),this._moreMenuAddedElements.forEach((e=>{e.remove()}))}getEventStream(){return this._eventStream}getReplyElementStream(){return this._replyElementStream}getElement(){return this._element}getThreadViewDriver(){return this._threadViewDriver}isLoaded(){return this._messageLoaded}getContentsElement(){if(!this._messageLoaded)throw new Error("tried to get message contents before message is loaded");try{return(0,g.default)(this._element,"div.ii.gt")}catch(e){return this._driver.getLogger().error(e),(0,g.default)(this._element,".adP")}}isElementInQuotedArea(e){return null!=(0,E.default)(e,(e=>"BLOCKQUOTE"===e.nodeName))}getSender(){let e=this._sender;if(e)return e;const t=(0,g.default)(this._element,"td.gF span[email]"),n=t.getAttribute("email");if(!n)throw new Error("Could not find email address");return e=this._sender={name:t.getAttribute("name"),emailAddress:n},e}getRecipients(){let e=this._recipients;if(e)return e;const t=Array.from(this._element.querySelectorAll(".hb span[email]"));return e=this._recipients=t.map((e=>this._getUpdatedContact({name:e.getAttribute("name"),emailAddress:e.getAttribute("email")||""}))),e}getRecipientEmailAddresses(){let e=this._recipientEmailAddresses;if(e)return e;const t=Array.from(this._element.querySelectorAll(".hb span[email]"));return e=this._recipientEmailAddresses=t.map((e=>e.getAttribute("email")||"")),e}async getRecipientsFull(){let e=this._recipientsFull;if(e)return e;if(this._driver.isUsingSyncAPI()){const t=this._threadViewDriver.getInternalID();e=this._recipientsFull=await this._driver.getPageCommunicator().getMessageRecipients(t,this._element),e||(this._driver.getLogger().error(new Error("Failed to find message recipients from response"),{threadID:t}),e=this._recipientsFull=this.getRecipients())}else{const t=Array.from(this._element.querySelectorAll(".hb span[email]"));e=this._recipientsFull=t.map((e=>this._getUpdatedContact({name:e.getAttribute("name"),emailAddress:e.getAttribute("email")||""})))}return e}getDateString(){return(0,g.default)(this._element,".ads .gK .g3").title}async getDate(){const e=this._threadViewDriver.getInternalID();return await this._driver.getPageCommunicator().getMessageDate(e,this._element)}getAttachmentCardViewDrivers(){return this._gmailAttachmentAreaView?this._gmailAttachmentAreaView.getAttachmentCardViews():[]}addButtonToDownloadAllArea(e){var t=this._getAttachmentArea();t&&t.addButtonToDownloadAllArea(e)}addMoreMenuItem(e){this._moreMenuItemDescriptors=(0,o.default)(this._moreMenuItemDescriptors.concat([e]),(e=>e.orderHint)),this._updateMoreMenu()}_setupMoreMenuWatching(){this._openMoreMenu=null,this._eventStream.filter((e=>"viewStateChange"===e.eventName)).toProperty((()=>null)).flatMapLatest((()=>{const e=this._getMoreButton();return e?(0,v.default)(e,{attributes:!0,attributeFilter:["aria-expanded"]}).map((()=>"true"===e.getAttribute("aria-expanded")?this._getOpenMoreMenu():null)):u.default.constant(null)})).takeUntilBy(this._stopper).onValue((e=>{this._openMoreMenu=e,this._updateMoreMenu()}))}_getMoreButton(){return"EXPANDED"!==this.getViewState()?null:this._element.querySelector("tr.acZ div.T-I.J-J5-Ji.aap.L3[role=button][aria-haspopup]")}_getOpenMoreMenu(){return document.body.querySelector("td > div.nH.a98.iY > div.nH.aHU .b7.J-M[aria-haspopup=true]")||document.body.querySelector("td > div.nH.if > div.nH.aHU div.b7.J-M[aria-haspopup=true]")}_closeActiveEmailMenu(){const e=this._getMoreButton();e&&(0,y.simulateClick)(e)}_updateMoreMenu(){this._moreMenuAddedElements.forEach((e=>{e.remove()})),this._moreMenuAddedElements.length=0;const e=this._openMoreMenu;if(e&&this._moreMenuItemDescriptors.length){const t=e.offsetHeight,n=e.offsetWidth,r=document.createElement("div");r.className="J-Kh",this._moreMenuAddedElements.push(r),e.appendChild(r),this._moreMenuItemDescriptors.forEach((t=>{const n=document.createElement("div");if(n.className="J-N",n.setAttribute("role","menuitem"),n.innerHTML=s.default`<div class="J-N-Jz">${t.title}</div>`,n.addEventListener("mouseenter",(e=>n.classList.add("J-N-JT"))),n.addEventListener("mouseleave",(e=>n.classList.remove("J-N-JT"))),n.addEventListener("click",(e=>{this._closeActiveEmailMenu(),t.onClick()})),t.iconUrl||t.iconClass){const e=document.createElement("img");e.className=`f4 J-N-JX inboxsdk__message_more_icon ${t.iconClass||""}`,e.src=t.iconUrl||"images/cleardot.gif";const r=n.firstElementChild;r&&r.appendChild(e)}this._moreMenuAddedElements.push(n),e.appendChild(n)}));const i=e.getBoundingClientRect(),o=i.width-n;o>0&&(e.style.left=Math.max(0,parseInt(e.style.left)-o)+"px");const a=this._getMoreButton();if(a){const n=a.getBoundingClientRect();if(i.top<n.top){const n=i.height-t;e.style.top=Math.max(0,parseInt(e.style.top)-n)+"px"}}}}getMessageID(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!this._messageLoaded)throw new Error("tried to get message id before message is loaded");const e=this._element.querySelector("[data-legacy-message-id]");if(e){const t=e.getAttribute("data-legacy-message-id");if(!t)throw new Error("message id attribute with no value, wtf?");return t}const t=this._element.querySelector("div.ii.gt");if(!t){const e=new Error("Could not find message id element");throw this._driver.getLogger().error(e,{elementHtml:(0,w.default)(this._element)}),e}let n=t.className.match(/\bm([0-9a-f]+)\b/);if(n)return x||(x=!0,this._driver.getLogger().eventSite("old messageid location")),n[1];{const e=t.firstElementChild;if(!e){const e=new Error("Could not find message id value");throw this._driver.getLogger().error(e,{reason:"Could not find element",messageHtml:(0,w.default)(t)}),e}const n=e.className.match(/\bm([0-9a-f]+)\b/);if(!n){const e=new Error("Could not find message id value");throw this._driver.getLogger().error(e,{reason:"Element was missing message className",messageHtml:(0,w.default)(t)}),e}return n[1]}}async getMessageIDAsync(){return this.getMessageID()}addAttachmentIcon(e){const t=new _.default;if(!this._element)return console.warn("addDateIcon called on destroyed message"),t;this._element.setAttribute("inboxsdk__message_added_attachment_icon","true");const n=(0,a.default)((()=>{const e=document.createElement("img");return e.src="images/cleardot.gif",e})),r=(0,a.default)((()=>document.createElement("div"))),i=(0,a.default)((()=>document.createElement("div")));let o=!1,s=null;return this._stopper.onValue((()=>{o&&(r().remove(),i().remove(),n().remove(),o=!1)})),(0,f.default)(u.default,e).combine(this._eventStream.filter((e=>"viewStateChange"===e.eventName)).toProperty((()=>null)),(e=>e)).takeUntilBy(this._stopper).onValue((e=>{if(e){let a;a="COLLAPSED"===this.getViewState()?(0,g.default)(this._element,".adf.ads td.gH span"):(0,g.default)(this._element,"td.gH div.gK span");const l=null!=e.iconHtml?r():n(),u=e.onClick;if(u?(l.onclick=function(e){e.preventDefault(),e.stopPropagation(),u()},l.style.cursor="pointer"):(l.onclick=null,l.style.cursor=""),e.tooltip&&"object"==typeof e.tooltip&&e.tooltip instanceof HTMLElement){const n=i();n.className="inboxsdk__message_attachment_tooltipWrapper",n.onclick=function(e){e.stopPropagation(),(0,k.default)(e)},n.appendChild(e.tooltip),l.onmouseenter=function(e){e.preventDefault(),e.stopPropagation(),l.appendChild(n),t.emit("tooltipShown")},l.onmouseleave=function(e){e.preventDefault(),e.stopPropagation(),l.removeChild(n),t.emit("tooltipHidden")},l.removeAttribute("data-tooltip")}else e.tooltip&&"string"==typeof e.tooltip?l.setAttribute("data-tooltip",e.tooltip):l.removeAttribute("data-tooltip");l.className=null!=e.iconHtml?`inboxsdk__message_attachment_iconWrapper ${e.iconClass||""}`:"inboxsdk__message_attachment_icon "+(e.iconClass||""),null!=e.iconHtml?(a.contains(n())&&n().remove(),l.innerHTML=e.iconHtml):s!=e.iconUrl&&(a.contains(r())&&r().remove(),l.style.background=e.iconUrl?"url("+e.iconUrl+") no-repeat 0 0":"",s=e.iconUrl),a.contains(l)||(a.appendChild(l),o=!0)}else o&&(r().remove(),n().remove(),i().remove(),o=!1)})),t}getViewState(){return this._element.classList.contains("kQ")||this._element.classList.contains("kx")?"HIDDEN":this._element.classList.contains("kv")?"COLLAPSED":"EXPANDED"}hasOpenReply(){return Boolean(this._replyElement)}addAttachmentCard(e){var t=new h.default(e,this._driver,this);return this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._getAttachmentArea()),this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._createAttachmentArea()),this._gmailAttachmentAreaView.addGmailAttachmentCardView(t),t}_setupMessageStateStream(){var e=this;this._eventStream.plug((0,b.default)(this._element,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}).takeUntilBy(this._stopper).map((function(e){const t=e.target.classList,n=e.oldValue;let r,i;return n.indexOf("kQ")>-1||n.indexOf("kx")>-1?r="HIDDEN":n.indexOf("kv")>-1||n.indexOf("ky")>-1?r="COLLAPSED":n.indexOf("h7")>-1&&(r="EXPANDED"),t.contains("kQ")||t.contains("kx")?i="HIDDEN":t.contains("kv")||t.contains("ky")?i="COLLAPSED":t.contains("h7")&&(i="EXPANDED"),{oldValue:r,newValue:i,currentClassList:t}})).map((function(t){return"EXPANDED"===t.newValue&&"EXPANDED"!==t.oldValue&&e._checkMessageOpenState(t.currentClassList),t})).filter((function(e){return e.newValue!==e.oldValue&&!!e.oldValue&&!!e.newValue})).map((function(e){return{eventName:"viewStateChange",oldValue:e.oldValue,newValue:e.newValue}})))}_processInitialState(){this._checkMessageOpenState(this._element.classList)}_checkMessageOpenState(e){if(!e.contains("h7"))return;if(this._messageLoaded)return;let t;try{t=this.getMessageID(!0)}catch(e){return void this._driver.getLogger().error(e)}this._messageLoaded=!0;try{this._driver.associateThreadAndMessageIDs(this._threadViewDriver.getThreadID(),t)}catch(e){this._driver.getLogger().error(e)}this._gmailAttachmentAreaView=this._getAttachmentArea(),this._eventStream.emit({type:"internal",eventName:"messageLoad"}),this._setupReplyStream()}_setupReplyStream(){const e=this._element.querySelector(".ip");if(e){var t=this,n=null;u.default.combine([(0,v.default)(e,{attributes:!0,attributeFilter:["class"]}),u.default.later(1,null)]).merge(u.default.later(1)).takeUntilBy(this._stopper).beforeEnd((()=>"END")).onValue((r=>{if("END"!==r&&e.classList.contains("adB")){if(!n){const r=e.firstElementChild;t._replyElement=r,r&&(n=(0,c.default)(),t._eventStream.emit({type:"internal",eventName:"replyElement",change:{el:r,removalStream:n}}))}}else if(n){var i=n;n=null,i.emit(null),i.end(),t._replyElement=null}}))}}_monitorEmailAddressHovering(){var e=this;this._eventStream.plug(u.default.fromEvents(this._element,"mouseover").map((e=>e.target)).filter((function(e){return e&&e.getAttribute("email")})).map((function(t){let n=null;return n=e._element.classList.contains("h7")?e._element.querySelector("h3.iw").contains(t)?"sender":"recipient":"sender",{get contact(){return e._getUpdatedContact({name:(n=t).getAttribute("name"),emailAddress:n.getAttribute("email")});var n},contactType:n,eventName:"contactHover",messageViewDriver:e}})))}_getAttachmentArea(){return this._element.querySelector(".hq")?new p.default(this._element.querySelector(".hq"),this._driver,this):null}_createAttachmentArea(){const e=new p.default(null,this._driver,this),t=(0,g.default)(this._element,".hi"),n=t.parentNode;if(!n)throw new Error("parentNode not found");return n.insertBefore(e.getElement(),t),e}_getUpdatedContact(e){return(0,m.default)(e,this._element)}getReadyStream(){return this._readyStream}}var C=(0,l.defn)(t,S);n.default=C},{"../../../../common/censorHTMLtree":470,"../../../../common/find-parent":473,"../../../lib/delay-asap":650,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/make-mutation-observer-stream":663,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/dom/reemitClickEventForReact":669,"../../../lib/dom/simulate-mouse-event":674,"../../../lib/wait-for":704,"./gmail-attachment-area-view":548,"./gmail-attachment-card-view":549,"./gmail-message-view/attachment-icon":583,"./gmail-message-view/get-updated-contact":584,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,kefir:159,"kefir-bus":156,"kefir-cast":157,"kefir-stopper":158,"lodash/once":346,"lodash/sortBy":349,ud:454}],583:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("../../../../lib/safe-event-emitter"));class a extends o.default{}var s=(0,i.defn)(t,a);n.default=s},{"../../../../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],584:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){let n=s[e.emailAddress];if(n){if(n.headerContact.name===e.name)return n.modalContact;delete s[e.emailAddress]}const r=t.querySelector(".ajA.SK"),l=r&&"hidden"===r.style.visibility,u=t.querySelector(".ajy[aria-haspopup=true]");if(u&&l){const r=e=>{e.stopPropagation()},l=e=>{e.shouldIgnore=!0};t.addEventListener("click",r),document.addEventListener("focus",l,!0),(0,o.simulateClick)(u);try{!function(e){const t=document.querySelectorAll(".ajC [email]");for(let n=0;n<t.length;n++){const r=t[n];let i=r.getAttribute("email");if(!i)continue;if(s[i])continue;let o={emailAddress:i,name:null},l=r.getAttribute("name");if(l)o.name=l;else{const e=(0,a.default)(r.textContent);i===e.emailAddress&&(o=e)}s[i]={headerContact:e,modalContact:o}}}(e)}catch(e){i.default.error(e)}finally{(0,o.simulateClick)(u),t.removeEventListener("click",r),document.removeEventListener("focus",l,!0)}if(n=s[e.emailAddress],n)return n.modalContact}return e};var i=r(e("../../../../lib/logger")),o=e("../../../../lib/dom/simulate-mouse-event"),a=r(e("../../../../lib/extract-contact-from-email-contact-string"));const s={}},{"../../../../lib/dom/simulate-mouse-event":674,"../../../../lib/extract-contact-from-email-contact-string":676,"../../../../lib/logger":691,"@babel/runtime/helpers/interopRequireDefault":15}],585:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.getLeftIndentationPaddingValue=I;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("auto-html")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),s=r(e("kefir-bus")),l=r(e("../gmail-element-getter")),u=r(e("../../../lib/dom/get-insert-before-element")),c=r(e("../../../lib/dom/querySelectorOrFail")),d=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=r(e("../widgets/buttons/button-view")),p=r(e("../widgets/buttons/more-dropdown-button-view")),h=r(e("../widgets/buttons/more-parent-accessory-button-view")),m=r(e("../widgets/buttons/create-accessory-button-view")),_=r(e("../widgets/buttons/create-parent-accessory-button-view")),b=r(e("../widgets/gmail-dropdown-view")),g=r(e("../../../widgets/buttons/dropdown-button-view-controller")),v=r(e("../../../widgets/buttons/basic-button-view-controller")),y=r(e("../../../driver-common/update-icon")),w=r(e("../../../driver-common/render-custom-icon")),E=r(e("../../../constants/nav-item-types"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}let x=0;const S=12;class C{constructor(e,t,n){(0,i.default)(this,"_accessory",null),(0,i.default)(this,"_accessoryViewController",null),(0,i.default)(this,"_expandoElement",null),(0,i.default)(this,"_iconSettings",{}),(0,i.default)(this,"_isActive",!1),(0,i.default)(this,"_isCollapsed",!1),(0,i.default)(this,"_itemContainerElement",null),(0,i.default)(this,"_name",""),(0,i.default)(this,"_type",null),(0,i.default)(this,"_collapseKey",null),this._driver=e,this._eventStream=(0,s.default)(),this._level=n||0,this._navItemNumber=++x,this._orderGroup=t,this._isNewLeftNavParent=!l.default.shouldAddNavItemsInline()&&1===this._level,this._isNewLeftNavParent?this._element=this._setupParentElement():this._element=this._setupChildElement()}addNavItem(e,t){const n=this._type===E.default.GROUPER?this._level:this._level+1,r=new C(this._driver,e,n);return r.getEventStream().filter((e=>"orderChanged"===e.eventName)).onValue((()=>this._addNavItemElement(r))),r.setNavItemDescriptor(t),this._isNewLeftNavParent&&this._createExpandoParent(),r}destroy(){this._element.remove(),this._accessoryViewController&&this._accessoryViewController.destroy(),this._eventStream&&this._eventStream.end(),this._expandoElement&&this._expandoElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}getElement(){return this._element}getEventStream(){return this._eventStream}getNavItemDescriptor(){return this._navItemDescriptor}getOrderGroup(){return this._orderGroup}getOrderHint(){return this._orderHint}getName(){return this._name}isCollapsed(){return this._isCollapsed}remove(){this.destroy()}setActive(e){if(!this._element||this._type===E.default.LINK||this._type===E.default.MANAGE||this._isActive===e||this._isNewLeftNavParent)return;const t=(0,c.default)(this._element,".TO");e?(this._element.classList.add("ain"),t.classList.add("nZ"),t.classList.add("aiq")):(this._element.classList.remove("ain"),t.classList.remove("nZ"),t.classList.remove("aiq")),this._setHeights(),this._isActive=e}setCollapsed(e){this._isCollapsed=e,this._isCollapsible()&&(e?this._collapse():this._expand());try{const e="inboxsdk__navitem_collapsed__"+this._collapseKey;this._isCollapsed?localStorage.setItem(e,"true"):localStorage.removeItem(e)}catch(e){console.error("Caught error",e)}}setNavItemDescriptor(e){e.takeUntilBy(this._eventStream.filter((()=>!1)).beforeEnd((()=>null))).onValue((e=>this._updateValues(e)))}toggleCollapse(){this.setCollapsed(!this._isCollapsed)}_addNavItemElement(e){const t=this._getItemContainerElement(),n=(0,u.default)(e.getElement(),t.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);t.insertBefore(e.getElement(),n);const r=this._type===E.default.GROUPER||this._isNewLeftNavParent?this._level-1:this._level,i=e.getElement();l.default.shouldAddNavItemsInline()?(0,c.default)(i,".TN").style.marginLeft=I()*r+"px":(0,c.default)(i,".TN").style.marginLeft=6*r+"px",this._setHeights()}_collapse(){if(this._isCollapsed=!0,this._isNewLeftNavParent)this._element.classList.remove("Xr");else{const e=this._expandoElement;if(e)e.classList.remove("aih"),e.classList.add("aii");else if(this._type===E.default.GROUPER){const e=this._element.firstElementChild;e&&e.classList.remove("air")}this._itemContainerElement&&(this._itemContainerElement.style.display="none"),this._setHeights()}this._eventStream.emit({eventName:"collapsed"})}_createAccessory(e){switch(e.type){case"CREATE":this._createCreateAccessory(e);break;case"ICON_BUTTON":this._createIconButtonAccessory(e);break;case"DROPDOWN_BUTTON":this._createDropdownButtonAccessory(e);break;case"SETTINGS_BUTTON":this._driver.getLogger().deprecationWarning("SettingsButtonAccessoryDescriptor","DropdownButtonAccessoryDescriptor"),this._createDropdownButtonAccessory({...e,type:"DROPDOWN_BUTTON"})}}_createCreateAccessory(e){this._createPlusButtonAccessory(e)}_createDropdownButtonAccessory(e){if(this._isNewLeftNavParent){const t={...e};t.buttonView=new h.default,t.dropdownViewDriverClass=b.default,t.dropdownPositionOptions={position:"right",hAlign:"left",vAlign:"top"},t.dropdownShowFunction=e=>{let{dropdown:n}=e;n.el.style.marginLeft="24px",t.onClick({dropdown:n})};const n=new g.default(t);this._accessoryViewController=n;const r=(0,c.default)(this._element,".Yh"),i=r.parentNode;return void(i&&(t.buttonView.getElement().classList.add(...r.classList),i.replaceChild(t.buttonView.getElement(),r),this._iconSettings.iconElement=null))}const t={...e};t.buttonView=new p.default,t.dropdownViewDriverClass=b.default,t.dropdownPositionOptions={position:"bottom",hAlign:"left",vAlign:"top"};const n=l.default.getLeftNavContainerElement();if(!n)throw new Error("leftNavContainer not found");t.dropdownShowFunction=e=>{if(n.classList.contains("bhZ")){const t=a.fromEvents(e.dropdown,"destroy");(0,d.default)(n,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(t).toProperty((()=>null)).onValue((()=>{n.classList.contains("bym")||n.classList.add("bym")})),t.onValue((()=>{n.classList.remove("bym")}))}t.onClick(e),e.dropdown.on("destroy",(()=>{t.buttonView.deactivate()}))};const r=new g.default(t);this._accessoryViewController=r;const i=(0,c.default)(this._element,".TO");i.addEventListener("mouseenter",(()=>i.classList.add("inboxsdk__navItem_hover"))),i.addEventListener("mouseleave",(()=>i.classList.remove("inboxsdk__navItem_hover")));(0,c.default)(this._element,".TN").appendChild(t.buttonView.getElement()),this._setupContextClickHandler(r)}_createExpando(){if(this._type===E.default.GROUPER)return;const e=this._expandoElement=document.createElement("div");e.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),e.setAttribute("role","link"),e.title=`Expand ${this._name||""}`,e.addEventListener("click",(e=>{this.toggleCollapse(),e.stopPropagation()}));const t=this._element.querySelector(".TN.aik");t&&t.insertAdjacentElement("afterbegin",e),this._isCollapsed?this._collapse():this._expand()}_createExpandoParent(){const e=(0,c.default)(this._element,".XR");e.style.visibility="visible",this._expandoElement=e,this._isCollapsed?this._collapse():this._expand()}_createIconButtonAccessory(e){if(this._driver.getLogger().deprecationWarning("IconButtonAccessoryDescriptor accessory for a parent level NavItemView","CreateAccessoryDescriptor or DropdownButtonAccessoryDescriptor"),this._isNewLeftNavParent)return;const t={...e,buttonColor:"pureIcon"};t.buttonView=new f.default(t),this._accessoryViewController=new v.default(t);(0,c.default)(this._element,".TN").appendChild(t.buttonView.getElement())}_createItemContainerElement(){const e=this._itemContainerElement=document.createElement("div");return e.classList.add("inboxsdk__navItem_container"),this._element.appendChild(e),this._isCollapsible()&&(this._isCollapsed?this._collapse():this._expand()),e}_createLinkButtonAccessory(e){const t=document.createElement("div");t.setAttribute("class","inboxsdk__navItem_link");const n=document.createElement("a");n.classList.add("CK"),n.textContent=e.name,t.appendChild(n),n.href="#",n.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),e.onClick()})),(0,c.default)(this._element,".aio").appendChild(t)}_createPlusButtonAccessory(e){if(this._isNewLeftNavParent){const t={...e};t.buttonView=new _.default,this._accessoryViewController=new v.default(t);const n=(0,c.default)(this._element,".Yh"),r=n.parentNode;return void(r&&(t.buttonView.getElement().classList.add(...n.classList),r.replaceChild(t.buttonView.getElement(),n),this._iconSettings.iconElement=null))}const t={...e};t.buttonView=new m.default,this._accessoryViewController=new v.default(t);(0,c.default)(this._element,".TN").appendChild(t.buttonView.getElement())}_expand(){if(this._isNewLeftNavParent)this._element.classList.add("Xr");else{const e=this._expandoElement;if(e)e.classList.add("aih"),e.classList.remove("aii");else if(this._type===E.default.GROUPER){const e=this._element.firstElementChild;e&&e.classList.add("air")}this._itemContainerElement&&(this._itemContainerElement.style.display=""),this._setHeights()}this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}_getItemContainerElement(){if(this._isNewLeftNavParent)return(0,c.default)(this._element,".TK");{let e=this._itemContainerElement;return e||(e=this._createItemContainerElement(),this._createExpando()),e}}_isCollapsible(){return Boolean(this._expandoElement)||this._type===E.default.GROUPER}_makeEventMapper(e){return function(t){return t.stopPropagation(),t.preventDefault(),{eventName:e,domEvent:t}}}_setHeights(){if(1==this._level)return;const e=(0,c.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";const t=this._element.clientHeight,n=e.clientHeight;this._element.style.height=n+"px",this._element.style.overflow="visible",this._element.style.marginBottom=t-n+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}_setHighlight(e){this._element&&this._type!==E.default.LINK&&this._type!==E.default.MANAGE&&(e?(0,c.default)(this._element,".TO").classList.add("NQ"):(0,c.default)(this._element,".TO").classList.remove("NQ"))}_setupContextClickHandler(e){a.fromEvents(this._element,"contextmenu").takeWhile((()=>this._accessoryViewController===e)).onValue((t=>{t.stopPropagation(),t.preventDefault(),e.showDropdown()}))}_setupChildElement(){const e=document.createElement("div");e.setAttribute("class","aim inboxsdk__navItem"),e.innerHTML=['<div class="TO">','<div class="TN aik">','<div class="qj" style="">',"</div>",'<div class="aio aip">','<span class="nU" role="link">',"</span>",'<span class="bsU">',"</span>","</div>","</div>","</div>"].join("");const t=(0,c.default)(e,".TO");return a.merge([a.fromEvents(t,"mouseenter").map(this._makeEventMapper("mouseenter")),a.fromEvents(t,"mouseleave").map(this._makeEventMapper("mouseleave"))]).onValue((e=>{this._updateHighlight(e)})),this._eventStream.plug(a.fromEvents(t,"click").map(this._makeEventMapper("click"))),e}_setupParentElement(){const e=document.createElement("div");e.className="Xa wT W8 XJ inboxsdk__navItem",e.innerHTML=['<div class="V6 CL Y2">','<div class="XR" role="button" tabindex="0" type="button" style="visibility: hidden">',"</div>",'<span class="XS">','<span class="WW inboxsdk__navItem_name" role="heading" aria-level="2">',"</span>",'<span class="XU" aria-hidden="true" style="display: none">',"</span>","</span>",'<div class="Yh">',"</div>","</div>",'<div class="V3 ada">','<div class="wT">','<div class="TK">',"</div>","</div>","</div>"].join("");const t=(0,c.default)(e,".V3");a.fromEvents(t,"scroll").debounce(10).onValue((()=>{t.scrollTop>0?t.classList.add("adh"):t.classList.remove("adh")}));const n=(0,c.default)(e,".XR");a.fromEvents(n,"click").map(this._makeEventMapper("click")).onValue((()=>{this.toggleCollapse()}));const r=(0,c.default)(e,".V6.CL");return this._eventStream.plug(a.fromEvents(r,"click").map(this._makeEventMapper("click"))),e}_setupGrouper(){const e=this._element.firstElementChild;e&&(e.classList.add("n4"),e.addEventListener("click",(e=>{e.stopPropagation(),this.toggleCollapse()})),this._isCollapsed?this._collapse():this._expand());(0,c.default)(this._element,".qj").innerHTML='<div class="G-asx T-I-J3 J-J5-Ji">&nbsp;</div>'}_updateAccessory(e){this._accessory!==e&&(this._accessoryViewController&&(this._accessoryViewController.destroy(),this._accessoryViewController=null),e&&this._createAccessory(e),this._accessory=e)}_updateClickability(e){e.type===E.default.LINK||e.type===E.default.MANAGE?this._element.classList.add("inboxsdk__navItem_nonClickable"):this._element.classList.remove("inboxsdk__navItem_nonClickable")}_updateHighlight(e){let{eventName:t}=e;switch(t){case"mouseenter":this._setHighlight(!0);break;case"mouseleave":this._setHighlight(!1)}}_updateIcon(e){const t=this._isNewLeftNavParent?(0,c.default)(this._element,".Yh"):(0,c.default)(this._element,".qj");if(e.iconElement)(0,w.default)(t,e.iconElement,"BEFORE_NAME"!==e.iconPosition);else if((0,y.default)(this._iconSettings,t,"BEFORE_NAME"!==e.iconPosition,e.iconClass,e.iconUrl),e.backgroundColor){const n=e.backgroundColor;t.style.borderColor=n}}_updateName(e){var t;if(this._name===e)return;const n=(0,c.default)(this._element,".inboxsdk__navItem_name");if(n.textContent=e,n.setAttribute("title",e),this._expandoElement&&(this._expandoElement.title=`Expand ${e}`),null!==(t=this._navItemDescriptor)&&void 0!==t&&t.tooltipAlignment){var r,i,o;const t=null===(r=this._navItemDescriptor)||void 0===r?void 0:r.tooltipAlignment[0];null===(i=this._element.firstElementChild)||void 0===i||i.setAttribute("data-tooltip",e),null===(o=this._element.firstElementChild)||void 0===o||o.setAttribute("data-tooltip-align",t)}this._name=e}_updateOrder(e){this._element.setAttribute("data-group-order-hint",""+this._orderGroup),this._element.setAttribute("data-insertion-order-hint",""+this._navItemNumber),e.orderHint=e.orderHint||0===e.orderHint?e.orderHint:Number.MAX_SAFE_INTEGER,e.orderHint!==this._orderHint&&(this._element.setAttribute("data-order-hint",""+e.orderHint),this._eventStream.emit({eventName:"orderChanged"})),this._orderHint=e.orderHint}_updateRole(e){const t=(0,c.default)(this._element,".V6.CL");e?t.setAttribute("role","link"):(t.setAttribute("role","group"),t.classList.add("X9"))}_updateSubtitle(e){this._isNewLeftNavParent||e.accessory&&!["SETTINGS_BUTTON","DROPDOWN_BUTTON"].includes(e.accessory.type)&&e.type!==E.default.GROUPER||((0,c.default)(this._element,".bsU").innerHTML+=o.default`${e.subtitle||""}`)}_updateType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.default.NAVIGATION;if(!this._element)return;if(e=e||E.default.NAVIGATION,this._type===e)return;const t=this._element.querySelector(".inboxsdk__navItem_name");switch(e){case E.default.GROUPER:case E.default.NAVIGATION:t&&"SPAN"===t.tagName||((0,c.default)(this._element,".nU").innerHTML+=o.default`<span class="inboxsdk__navItem_name">${this._name}</span>`);break;case E.default.LINK:case E.default.MANAGE:t&&"A"===t.tagName||((0,c.default)(this._element,".nU").innerHTML+=o.default`<a href="#" class="CK inboxsdk__navItem_name">${this._name}</a>`)}this._type=e}_updateValues(e){this._navItemDescriptor=e,null==this._collapseKey&&(this._collapseKey=e.key||`${e.name}`,this._isCollapsed="true"===localStorage.getItem("inboxsdk__navitem_collapsed__"+this._collapseKey)),this._updateType(e.type),this._updateName(e.name),this._updateSubtitle(e),this._updateOrder(e),this._isNewLeftNavParent&&this._updateRole(e.routeID),this._type!==E.default.GROUPER?(this._updateAccessory(e.accessory),this._updateIcon(e),this._updateClickability(e)):this._setupGrouper()}}function I(){return S}n.default=C},{"../../../constants/nav-item-types":489,"../../../driver-common/render-custom-icon":639,"../../../driver-common/update-icon":642,"../../../lib/dom/get-insert-before-element":654,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/basic-button-view-controller":742,"../../../widgets/buttons/dropdown-button-view-controller":743,"../gmail-element-getter":530,"../widgets/buttons/button-view":598,"../widgets/buttons/create-accessory-button-view":599,"../widgets/buttons/create-parent-accessory-button-view":600,"../widgets/buttons/more-dropdown-button-view":603,"../widgets/buttons/more-parent-accessory-button-view":604,"../widgets/gmail-dropdown-view":606,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:159,"kefir-bus":156}],586:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=a;var i=r(e("lodash/includes")),o=e("../../../../constants/router");function a(){this._routeNameToRouteIDMap=null,this._compatibleRouteIDMap=null,this._setupRouteNameToRouteIDMap(),this._setupCompatibleRouteIDMap()}Object.assign(a.prototype,{NativeRouteIDs:o.NATIVE_ROUTE_IDS,NativeListRouteIDs:o.NATIVE_LIST_ROUTE_IDS,RouteTypes:o.ROUTE_TYPES,isListRouteName:function(e){var t=this.getRouteID(e);return!!t&&(0,i.default)(Object.values(o.NATIVE_LIST_ROUTE_IDS),t)},isSettingsRouteName:function(e){return this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.SETTINGS},isContactRouteName:function(e){return this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.CONTACTS||this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.CONTACT},getRouteID:function(e){var t=this._routeNameToRouteIDMap[e];return t||null},getRouteName:function(e){for(var t in this._routeNameToRouteIDMaps)if(this._routeNameToRouteIDMap[t]===e)return t;return null},isNativeRoute:function(e){return!!this._routeNameToRouteIDMap[e]},getCompatibleRouteID:function(e){return this._compatibleRouteIDMap[e]||e},_setupRouteNameToRouteIDMap:function(){this._routeNameToRouteIDMap={inbox:this.NativeRouteIDs.INBOX,section_query:this.NativeRouteIDs.SEARCH,all:this.NativeRouteIDs.ALL_MAIL,imp:this.NativeRouteIDs.IMPORTANT,contacts:this.NativeRouteIDs.CONTACTS,contact:this.NativeRouteIDs.CONTACT,sent:this.NativeRouteIDs.SENT,starred:this.NativeRouteIDs.STARRED,snoozed:this.NativeRouteIDs.SNOOZED,drafts:this.NativeRouteIDs.DRAFTS,label:this.NativeRouteIDs.LABEL,category:this.NativeRouteIDs.LABEL,search:this.NativeRouteIDs.SEARCH,"advanced-search":this.NativeRouteIDs.SEARCH,trash:this.NativeRouteIDs.TRASH,spam:this.NativeRouteIDs.SPAM,apps:this.NativeRouteIDs.SEARCH,circle:this.NativeRouteIDs.LABEL,settings:this.NativeRouteIDs.SETTINGS,chats:this.NativeRouteIDs.CHATS,scheduled:this.NativeRouteIDs.SCHEDULED,chat:this.NativeRouteIDs.CHAT_WELCOME,rooms:this.NativeRouteIDs.SPACES_WELCOME,calls:this.NativeRouteIDs.MEET}},_setupCompatibleRouteIDMap:function(){this._compatibleRouteIDMap={},this._compatibleRouteIDMap[this.NativeRouteIDs.INBOX]="inbox/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.ALL_MAIL]="all/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SENT]="sent/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.STARRED]="starred/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.DRAFTS]="drafts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.LABEL]="label/:labelName/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.TRASH]="trash/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SPAM]="spam/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.IMPORTANT]="imp/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SEARCH]="search/:query/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.THREAD]=this.NativeRouteIDs.THREAD,this._compatibleRouteIDMap[this.NativeRouteIDs.CHATS]="chats/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CHAT]=this.NativeRouteIDs.CHAT,this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACTS]="contacts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACT]=this.NativeRouteIDs.CONTACT,this._compatibleRouteIDMap[this.NativeRouteIDs.SETTINGS]=this.NativeRouteIDs.SETTINGS}})},{"../../../../constants/router":490,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/includes":323}],587:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/includes")),a=r(e("lodash/last")),s=r(e("lodash/once")),l=r(e("kefir")),u=r(e("kefir-stopper")),c=r(e("kefir-bus")),d=e("querystring"),f=r(e("asap")),p=e("ud"),h=r(e("../../../../lib/dom/make-element-child-stream")),m=r(e("../../../../lib/dom/make-element-view-stream")),_=r(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),b=r(e("../../../../lib/dom/get-insert-before-element")),g=r(e("../gmail-row-list-view")),v=r(e("../gmail-thread-view")),y=r(e("../gmail-collapsible-section-view")),w=r(e("../../gmail-element-getter")),E=e("../../../../lib/dom/simulate-mouse-event"),k=r(e("../../../../lib/dom/querySelectorOrFail"));var x=(0,p.defn)(t,class{constructor(e,t,n){let{urlObject:r,type:a,routeID:d,cachedRouteData:f}=e;(0,i.default)(this,"_stopper",(0,u.default)()),(0,i.default)(this,"getParams",(0,s.default)((()=>{let e;if(this._customRouteID)e=this._getCustomParams();else{e=this._getNativeParams();const t=this.getRouteID();if(t){const n=this._extractParamKeysFromRouteID(t),r={};n.forEach((function(t){e[t]&&(r[t]=e[t])})),e=r}}return Object.freeze(e)}))),(0,i.default)(this,"_getThreadContainerElement",(0,s.default)((()=>w.default.getThreadContainerElement()))),this._type=a,this._hash=r.hash,this._name=r.name,this._paramsArray=r.params,this._customRouteID=d,this._cachedRouteData=f,this._stopper=(0,u.default)(),this._rowListViews=[],this._gmailRouteProcessor=t,this._driver=n,this._eventStream=(0,c.default)(),this._hasAddedCollapsibleSection=!1,"CUSTOM"===this._type?(this._setupCustomViewElement(),n.getStopper().takeUntilBy(this._stopper.delay(0)).onValue((()=>{n.showNativeRouteView(),window.location.hash="#inbox"}))):(0,o.default)(["NATIVE","CUSTOM_LIST"],this._type)&&this._setupSubViews(),"CUSTOM_LIST"===this._type&&l.default.later(500).takeUntilBy(this._stopper).onValue((()=>{var e=n.getLastCustomThreadListActivity();(!e||e.customRouteID!==this._customRouteID||Date.now()-e.timestamp>5e3)&&this.refresh()}))}destroy(){this._stopper.destroy(),this._eventStream.end(),this._customViewElement&&this._customViewElement.remove();var e=this._rowListViews;this._rowListViews=[],e.forEach((e=>{e.destroy()})),this._threadView&&(this._threadView.destroy(),this._threadView=null)}getHash(){return this._hash}getEventStream(){return this._eventStream}getStopper(){return this._stopper}getCustomViewElement(){return this._customViewElement}getRowListViews(){return this._rowListViews}getThreadView(){return this._threadView}getType(){return"OTHER_APP_CUSTOM"===this._type?"CUSTOM":this._type}isCustomRouteBelongingToApp(){return"CUSTOM"===this._type}addCollapsibleSection(e,t){return this._addCollapsibleSection(e,t,!0)}addSection(e,t){return this._addCollapsibleSection(e,t,!1)}_addCollapsibleSection(e,t,n){this._hasAddedCollapsibleSection=!0;var r=new y.default(this._driver,t,this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH,n),i=this._getSectionsContainer();return r.getEventStream().filter((function(e){return"update"===e.type&&"orderHint"===e.property})).onValue((function(){var e=i.children,t=(0,b.default)(r.getElement(),e,["data-group-order-hint","data-order-hint"]);t?i.insertBefore(r.getElement(),t):i.appendChild(r.getElement())})),r.setCollapsibleSectionDescriptorProperty(e),r}_setupCustomViewElement(){this._customViewElement=document.createElement("div"),this._customViewElement.classList.add("inboxsdk__custom_view_element"),this._monitorLeftNavHeight(),this._setCustomViewElementHeight()}_monitorLeftNavHeight(){var e=w.default.getLeftNavHeightElement();e&&(0,_.default)(e,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue((()=>{this._setCustomViewElementHeight()}))}_setCustomViewElementHeight(){const e=w.default.getLeftNavHeightElement(),t=w.default.getGtalkButtons(),n=this._customViewElement;if(!e||!n)throw new Error("Should not happen");const r=w.default.getContentSectionElement(),i=r?parseInt(getComputedStyle(r).marginBottom,10):0;n.style.height=parseInt(e.style.height,10)+(t?t.offsetHeight:0)-i+"px"}_setupSubViews(){(0,f.default)((()=>{this._eventStream&&(this._setupRowListViews(),this._setupContentAndSidebarView(),this._setupScrollStream())}))}_setupRowListViews(){var e=w.default.getRowListElements();Array.prototype.forEach.call(e,(e=>{this._processRowListElement(e)}))}_processRowListElement(e){var t=e.parentElement;if(!t)throw new Error("no rootElement");var n=new g.default(t,this,this._driver);this._rowListViews.push(n),this._eventStream.emit({eventName:"newGmailRowListView",view:n})}_setupContentAndSidebarView(){const e=this._getThreadContainerElement();if(e){var t=new v.default(e,this,this._driver);this._threadView=t,this._eventStream.emit({eventName:"newGmailThreadView",view:t})}else{const e=document.querySelector("div[role=main] .aia");e&&this._startMonitoringPreviewPaneForThread(e)}}_setupScrollStream(){const e=w.default.getScrollContainer(),{scrollTop:t}=this._cachedRouteData;e&&this._hasAddedCollapsibleSection&&(t&&(e.scrollTop=t),l.default.fromEvents(e,"scroll").throttle(100).map((e=>e.target.scrollTop)).takeUntilBy(this._stopper).onValue((e=>{this._cachedRouteData.scrollTop=e})))}_startMonitoringPreviewPaneForThread(e){const t=(0,k.default)(e,"table.Bs > tr"),n=(0,h.default)(t).filter((e=>!!e.el.querySelector(".if")||!!e.el.querySelector(".PeIF1d")||!!e.el.querySelector(".a98.iY")));this._eventStream.plug(n.flatMap((0,m.default)((e=>new v.default(e,this,this._driver,!0)))).map((e=>(this._threadView=e,{eventName:"newGmailThreadView",view:e}))))}_getSectionsContainer(){const e=document.querySelector("div[role='main']");if(!e)throw new Error("should not happen");let t=e.querySelector(".inboxsdk__custom_sections");return t?t.classList.contains("Wc")&&!this._isSearchRoute()&&t.classList.remove("Wc"):(t=this._sectionsContainer=document.createElement("div"),t.classList.add("inboxsdk__custom_sections"),e.insertBefore(t,e.firstChild)),t}_getCustomParams(){var e=Object.create(null);if(!this._customRouteID)throw new Error("Should not happen, can't get custom params for non-custom view");return this._customRouteID.split("/").slice(1).forEach(((t,n)=>{":"===t[0]&&(t=t.substring(1),this._paramsArray[n]&&(e[t]=this._paramsArray[n]))})),e}_getNativeParams(){return this._isSearchRoute()?this._getSearchRouteParams():this._isListRoute()?this._getListRouteParams():this._isThreadRoute()?this._getThreadRouteParams():this._isSettingsRoute()?this._getSettingsRouteParams():{}}_isSearchRoute(){return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH}_isChatWelcomeRoute(){return this._hash===this._gmailRouteProcessor.NativeRouteIDs.CHAT_WELCOME}_isChatDmRoute(){var e,t;return"chat"===this._name&&"dm"===(null===(e=this._paramsArray)||void 0===e?void 0:e[0])&&!(null===(t=this._paramsArray)||void 0===t||!t[1])}_isSpacesWelcomeRoute(){return this._hash===this._gmailRouteProcessor.NativeRouteIDs.SPACES_WELCOME}_isSpaceRoute(){var e,t;return"chat"===this._name&&"space"===(null===(e=this._paramsArray)||void 0===e?void 0:e[0])&&!(null===(t=this._paramsArray)||void 0===t||!t[1])}_isMeetRoute(){return this._hash===this._gmailRouteProcessor.NativeRouteIDs.MEET}getRouteType(){return(0,o.default)(["CUSTOM","OTHER_APP_CUSTOM"],this._type)?this._gmailRouteProcessor.RouteTypes.CUSTOM:this._isListRoute()?this._gmailRouteProcessor.RouteTypes.LIST:this._isThreadRoute()?this._gmailRouteProcessor.RouteTypes.THREAD:this._isSettingsRoute()?this._gmailRouteProcessor.RouteTypes.SETTINGS:this._isChatWelcomeRoute()||this._isChatDmRoute()?this._gmailRouteProcessor.RouteTypes.CHAT:this._isSpacesWelcomeRoute()||this._isSpaceRoute()?this._gmailRouteProcessor.RouteTypes.SPACE:this._isMeetRoute()?this._gmailRouteProcessor.RouteTypes.MEET:this._gmailRouteProcessor.RouteTypes.UNKNOWN}_isThreadRoute(){return!!this._getThreadContainerElement()}_isListRoute(){var e=w.default.getRowListElements();return("CUSTOM_LIST"===this._type||this._gmailRouteProcessor.isListRouteName(this._name))&&e&&e.length>0}_isSettingsRoute(){return this._gmailRouteProcessor.isSettingsRouteName(this._name)}_getSearchRouteParams(){return{query:this._paramsArray[0],includesDriveResults:"apps"===this._name,page:this._getPageParam()}}_getListRouteParams(){var e={page:this._getPageParam()};return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.LABEL&&this._paramsArray[0]&&(e.labelName=this._paramsArray[0]),e}_getThreadRouteParams(){if(this._paramsArray&&this._paramsArray.length>0){const e=(0,a.default)(this._paramsArray);if(e&&(16===e.length||"#"===e[0]))return{threadID:e.replace("#","")}}const e=this._getThreadContainerElement();let t;if(e)try{t=this._driver.getPageCommunicator().getCurrentThreadID(e)}catch(e){}return t||(t=(0,d.parse)(document.location.search,null,null).th||""),{threadID:t}}_getSettingsRouteParams(){return{tabName:this._paramsArray[0]}}_getPageParam(){for(var e=1;e<this._paramsArray.length;e++)if(this._paramsArray[e].match(/p\d+/))return parseInt(this._paramsArray[e].replace(/[a-zA-Z]/,""),10);return 1}getRouteID(){return this._customRouteID?this._customRouteID:this._isThreadRoute()?this._gmailRouteProcessor.NativeRouteIDs.THREAD:this._isChatWelcomeRoute()?this._gmailRouteProcessor.NativeRouteIDs.CHAT_WELCOME:this._isChatDmRoute()?this._gmailRouteProcessor.NativeRouteIDs.CHAT_DM:this._isSpacesWelcomeRoute()?this._gmailRouteProcessor.NativeRouteIDs.SPACES_WELCOME:this._isSpaceRoute()?this._gmailRouteProcessor.NativeRouteIDs.SPACE:this._gmailRouteProcessor.getRouteID(this._name)}refresh(){var e=w.default.getToolbarElement().querySelector("div.T-I.nu");if(e){var t=document.activeElement,n=e.className;(0,E.simulateClick)(e),e.className=n,t?t.focus():e.blur()}}setFullWidth(e){}_extractParamKeysFromRouteID(e){return e.split("/").filter((e=>":"===e[0])).map((e=>e.substring(1)))}});n.default=x},{"../../../../lib/dom/get-insert-before-element":654,"../../../../lib/dom/make-element-child-stream":659,"../../../../lib/dom/make-element-view-stream":661,"../../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../../lib/dom/querySelectorOrFail":668,"../../../../lib/dom/simulate-mouse-event":674,"../../gmail-element-getter":530,"../gmail-collapsible-section-view":551,"../gmail-row-list-view":588,"../gmail-thread-view":593,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/includes":323,"lodash/last":341,"lodash/once":346,querystring:409,ud:454}],588:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("lodash/find")),s=r(e("lodash/zip")),l=(r(e("asap")),r(e("assert"))),u=r(e("kefir")),c=r(e("kefir-bus")),d=(r(e("../../../../common/get-or-fail")),r(e("../../../lib/delay-asap"))),f=r(e("../../../lib/dom/querySelectorOrFail")),p=r(e("./gmail-toolbar-view")),h=r(e("./gmail-thread-row-view")),m=(r(e("../../../lib/stream-wait-for")),r(e("../../../lib/dom/make-element-child-stream")));r(e("../../../lib/dom/make-element-view-stream"));const _=/\bx7\b/;var b=(0,o.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_threadRowViewDrivers",new Set),(0,i.default)(this,"_elementsToViews",new Map),(0,i.default)(this,"_selectedThreadRowViews",new Set),(0,i.default)(this,"_batchedSignalThreadRowViewSelectionChangeScheduled",!1),this._eventStreamBus=(0,c.default)(),this._stopper=this._eventStreamBus.ignoreValues().beforeEnd((()=>null)),this._gmailDriver=n,this._element=e,this._routeViewDriver=t,this._selectionMutationObserver=new MutationObserver((e=>{let t=!1;for(let n=0,r=e.length;n<r;n++){const r=e[n],i=r.target,o=_.test(r.oldValue),a=_.test(i.className);if(o!==a){const e=this._elementsToViews.get(i);e&&(t=!0,a?this._selectedThreadRowViews.add(e):this._selectedThreadRowViews.delete(e))}}t&&this._gmailDriver.signalThreadRowViewSelectionChange()})),this._pendingExpansions=new Map,this._pendingExpansionsSignal=(0,c.default)(),this._pendingExpansionsSignal.bufferBy(this._pendingExpansionsSignal.flatMap(d.default)).filter((e=>e.length>0)).takeUntilBy(this._stopper).onValue(this._expandColumnJob.bind(this)),this._setupToolbarView(),this._startWatchingForRowViews()}destroy(){this._selectionMutationObserver.disconnect(),this._threadRowViewDrivers.forEach((e=>e.destroy())),this._eventStreamBus.end(),this._toolbarView&&this._toolbarView.destroy(),this._selectedThreadRowViews.size&&(this._selectedThreadRowViews.clear(),this._gmailDriver.signalThreadRowViewSelectionChange())}getElement(){return this._element}getRouteViewDriver(){return this._routeViewDriver}getToolbarView(){return this._toolbarView}getSelectedThreadRowViewDrivers(){return this._selectedThreadRowViews}getThreadRowViewDrivers(){return this._threadRowViewDrivers}getRowViewDriverStream(){return this._rowViewDriverStream}getEventStream(){return this._eventStreamBus}_setupToolbarView(){var e=this._findToolbarElement();this._toolbarView=e?new p.default(e,this._gmailDriver,this._routeViewDriver,this):null}_findToolbarElement(){const e=this._element.querySelector("[gh=mtb]");if(e)return e;const t=(0,a.default)(document.querySelectorAll("[gh=tm]"),(e=>e.parentElement.parentElement===this._element.parentElement.parentElement.parentElement.parentElement.parentElement||e.parentElement.parentElement===this._element.parentElement));return t?t.querySelector("[gh=mtb]"):null}_fixColumnWidths(e){if(!e||!e.parentElement)return;const t=e.parentElement.firstElementChild;if(t!==e&&t){const n=t.querySelectorAll("table.cf > colgroup > col"),r=e.querySelectorAll("table.cf > colgroup > col");l.default.strictEqual(n.length,r.length),(0,s.default)(n,r).forEach((e=>{let[t,n]=e;n.style.width=t.style.width}))}}expandColumn(e,t){const n=this._pendingExpansions.get(e);(!n||t>n)&&(this._pendingExpansions.set(e,t),this._pendingExpansionsSignal.emit())}_expandColumnJob(){this._pendingExpansions.forEach(((e,t)=>{Array.prototype.forEach.call(this._element.querySelectorAll("table.cf > colgroup > "+t),(t=>{const n=parseInt(t.style.width,10);(isNaN(n)||n<e)&&(t.style.width=e+"px")}))})),this._pendingExpansions.clear()}_batchedSignalThreadRowViewSelectionChange(){this._batchedSignalThreadRowViewSelectionChangeScheduled||(this._batchedSignalThreadRowViewSelectionChangeScheduled=!0,(0,d.default)(null).takeUntilBy(this._stopper).onValue((()=>{this._batchedSignalThreadRowViewSelectionChangeScheduled=!1,this._gmailDriver.signalThreadRowViewSelectionChange()})))}_startWatchingForRowViews(){const e=Array.from(this._element.querySelectorAll("div.Cp")),t=u.default.merge(e.map(m.default)).flatMap((e=>{this._fixColumnWidths(e.el);const t=(0,f.default)(e.el,"table > tbody");return(0,m.default)(t).takeUntilBy(e.removalStream).filter((e=>e.el.id))})),n=u.default.later(2);this._rowViewDriverStream=t.map((e=>{const t=e.el;this._selectionMutationObserver.observe(t,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0});const n=new h.default(t,this,this._gmailDriver);return this._elementsToViews.set(t,n),t.classList.contains("x7")&&(this._selectedThreadRowViews.add(n),this._batchedSignalThreadRowViewSelectionChange()),e.removalStream.take(1).onValue((()=>{this._selectedThreadRowViews.has(n)&&(this._selectedThreadRowViews.delete(n),this._batchedSignalThreadRowViewSelectionChange()),this._elementsToViews.delete(t),n.destroy()})),n})).flatMap((e=>e.getAlreadyHadModifications()?n.flatMap((()=>e.waitForReady())).takeUntilBy(e.getStopper()):e.waitForReady().takeUntilBy(e.getStopper()))).takeUntilBy(this._stopper),this._rowViewDriverStream.onValue((e=>this._addThreadRowView(e)))}_addThreadRowView(e){this._threadRowViewDrivers.add(e),e.getStopper().takeUntilBy(this._stopper).onValue((()=>{this._threadRowViewDrivers.delete(e)}))}});n.default=b},{"../../../../common/get-or-fail":475,"../../../lib/delay-asap":650,"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-element-view-stream":661,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/stream-wait-for":701,"./gmail-thread-row-view":590,"./gmail-toolbar-view":595,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,assert:33,kefir:159,"kefir-bus":156,"lodash/find":314,"lodash/zip":362,ud:454}],589:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir-stopper"));n.default=class{constructor(e,t){(0,i.default)(this,"_stopper",(0,o.default)()),(0,i.default)(this,"_insertElementContainer",null),this._driver=e,this._setup(t)}destroy(){this._stopper.destroy(),this._insertElementContainer&&(this._insertElementContainer.remove(),this._insertElementContainer=null)}_setup(e){const t=this._driver.getTagTree().getAllByTag("supportMenu").subscribe((t=>{t.forEach((t=>{"add"===t.type?this._addSupportElement(t.value.getValue(),e):"remove"===t.type&&this._insertElementContainer&&(this._insertElementContainer.remove(),this._insertElementContainer=null)}))}));this._stopper.onValue((()=>t.unsubscribe()))}_addSupportElement(e,t){const n=document.createElement("div"),r=e.children.item(0).attributes;for(const e of r)if("aria-label"!==e.name)if("class"!==e.name)n.setAttribute(e.name,e.value);else{const t=`${e.value} inboxsdk__support_menuItem`;n.setAttribute(e.name,t)}n.append(t.element);let i=null;for(const t of e.children)"separator"===t.getAttribute("role")&&(i=t);i?i.insertAdjacentElement("beforebegin",n):e.append(n),n.onclick=n=>{n.preventDefault(),n.stopPropagation(),t.onClick(),this._closeSupportMenu(e)},n.onkeypress=n=>{"Enter"===n.key&&(t.onClick(),this._closeSupportMenu(e))}}_closeSupportMenu(e){if("true"!=e.getAttribute("aria-hidden")){const t=e.previousElementSibling;t&&t.click()}}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":158}],590:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.removeAllThreadRowUnclaimedModifications=function(){setTimeout((()=>{const e=document.querySelectorAll("tr[data-inboxsdk-thread-row]");Array.prototype.forEach.call(e,(e=>{const t=C.get(e);t&&T(t)}))}),15)};var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/once")),a=r(e("lodash/flatten")),s=r(e("lodash/includes")),l=r(e("lodash/intersection")),u=r(e("lodash/uniqBy")),c=r(e("lodash/flatMap")),d=e("ud"),f=r(e("assert")),p=r(e("kefir")),h=r(e("asap")),m=(r(e("kefir-bus")),r(e("../../../lib/dom/querySelectorOrFail"))),_=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),b=r(e("../../../lib/dom/insert-element-in-order")),g=r(e("kefir-cast")),v=r(e("../../../lib/delay-asap")),y=r(e("kefir-stopper")),w=r(e("../widgets/gmail-dropdown-view")),E=r(e("../../../widgets/buttons/dropdown-view")),k=r(e("../widgets/gmail-label-view")),x=r(e("../widgets/gmail-action-button-view")),S=r(e("../../../driver-common/update-icon"));const C=(0,d.defonce)(t,(()=>new WeakMap));function I(e){this.focus(),e.stopImmediatePropagation()}function A(e){const t=this.firstElementChild.contains(e.target),n=!t&&this!==e.target;if(!t&&(e.stopImmediatePropagation(),!n||"mouseover"==e.type)){const t=document.createEvent("MouseEvents");t.initMouseEvent(e.type,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.parentElement.dispatchEvent(t)}}var D=(0,d.defn)(t,class{constructor(e,t,n){if((0,i.default)(this,"_stopper",(0,y.default)()),(0,i.default)(this,"_isDestroyed",!1),(0,f.default)(e.hasAttribute("id"),"check element is main thread row"),this._isVertical=2===(0,l.default)(Array.from(e.classList),["zA","apv"]).length,this._isVertical){const t=e.nextElementSibling;if(!t)throw new Error("threadRow2 not found");const n=t.nextElementSibling,r=n&&n.classList.contains("apw");this._elements=r?[e,e.nextElementSibling,e.nextElementSibling.nextElementSibling]:[e,e.nextElementSibling]}else this._elements=[e];const r=C.get(this._elements[0]);r?(this._modifications=r,this._alreadyHadModifications=!0):(this._alreadyHadModifications=!1,this._modifications={label:{unclaimed:[],claimed:[]},action:{unclaimed:[],claimed:[]},button:{unclaimed:[],claimed:[]},image:{unclaimed:[],claimed:[]},replacedDate:{unclaimed:[],claimed:[]},replacedDraftLabel:{unclaimed:[],claimed:[]}},C.set(this._elements[0],this._modifications)),this._rowListViewDriver=t,this._driver=n,this._userView=null,this._cachedThreadID=null,this._refresher=null,this._subjectRefresher=null,this._imageRefresher=null,this._counts=null,this._elements[0].setAttribute("data-inboxsdk-thread-row","true")}destroy(){this._elements.length&&(this._isDestroyed=!0,this._modifications.label.unclaimed=this._modifications.label.claimed.concat(this._modifications.label.unclaimed),this._modifications.label.claimed.length=0,this._modifications.action.unclaimed=this._modifications.action.claimed.concat(this._modifications.action.unclaimed),this._modifications.action.claimed.length=0,this._modifications.button.unclaimed=this._modifications.button.claimed.concat(this._modifications.button.unclaimed),this._modifications.button.claimed.length=0,this._modifications.image.unclaimed=this._modifications.image.claimed.concat(this._modifications.image.unclaimed),this._modifications.image.claimed.length=0,this._modifications.replacedDate.unclaimed=this._modifications.replacedDate.claimed.concat(this._modifications.replacedDate.unclaimed),this._modifications.replacedDate.claimed.length=0,this._modifications.replacedDraftLabel.unclaimed=this._modifications.replacedDraftLabel.claimed.concat(this._modifications.replacedDraftLabel.unclaimed),this._modifications.replacedDraftLabel.claimed.length=0,(0,c.default)(this._elements,(e=>Array.from(e.getElementsByClassName("inboxsdk__thread_row_addition")))).forEach((e=>{e.remove()})),this._stopper.destroy(),this._elements.length=0)}getElement(){return this._elements[0]}_removeUnclaimedModifications(){T(this._modifications)}getAlreadyHadModifications(){return this._alreadyHadModifications}waitForReady(){const e=[0,10,100,1e3,15e3],t=()=>{if(this._threadIdReady())return(0,h.default)((()=>{this._elements.length&&this._removeUnclaimedModifications()})),p.default.constant(this);{const n=e.shift();return null==n?(console.log("Should not happen: ThreadRowViewDriver never became ready",this),p.default.never()):p.default.later(n).flatMap(t)}};return t()}setUserView(e){this._userView=e}getCounts(){let e=this._counts;if(!e){const t=(0,m.default)(this._elements[0],"td div.yW");if(this._driver.isUsingSyncAPI()){const n=t.querySelectorAll(".boq").length,r=t.querySelector(".bx0"),i=r&&r.innerHTML?+r.innerHTML:n?0:1;e=this._counts={messageCount:i,draftCount:n}}else{const[n,r]=t.innerHTML.split(/<font color=[^>]+>[^>]+<\/font>/),i=n.replace(/<span\b[^>]*>.*?<\/span>/g,"").match(/\((\d+)\)/),o=i?+i[1]:n?1:0,a=r&&r.match(/\((\d+)\)/),s=a?+a[1]:null!=r?1:0;e=this._counts={messageCount:o,draftCount:s}}}return e}_expandColumn(e,t){this._rowListViewDriver.expandColumn(e,t)}addLabel(e){if(!this._elements.length)return void console.warn("addLabel called on destroyed thread row");const t=(0,g.default)(p.default,e).takeUntilBy(this._stopper).toProperty();let n=null;t.combine(this._getRefresher()).takeUntilBy(this._stopper).onValue((e=>{let[t]=e;if(t){if(!n){if(n=this._modifications.label.unclaimed.shift(),!n){const e=new k.default({classes:["inboxsdk__thread_row_label"]}),t=e.getElement();n={gmailLabelView:e,remove:t.remove.bind(t)}}this._modifications.label.claimed.push(n)}n.gmailLabelView.updateLabelDescriptor(t);const e=this._getLabelParent();e!==n.gmailLabelView.getElement().parentElement&&e.insertAdjacentElement("afterbegin",n.gmailLabelView.getElement())}else n&&(n.remove(),this._modifications.label.claimed.splice(this._modifications.label.claimed.indexOf(n),1),n=null)}))}addImage(e){if(!this._elements.length)return void console.warn("addImage called on destroyed thread row");const t=(0,g.default)(p.default,e).toProperty().combine(p.default.merge([this._getRefresher(),this._getSubjectRefresher(),this._getImageContainerRefresher()])).takeUntilBy(this._stopper);let n=null;t.onValue((e=>{let[t]=e;if(t){n||(n=this._modifications.image.unclaimed.shift(),n||(n={iconSettings:{},iconWrapper:document.createElement("div"),remove(){this.iconWrapper.remove()}},n.iconWrapper.className="inboxsdk__thread_row_icon_wrapper"),this._modifications.image.claimed.push(n));const{iconSettings:e,iconWrapper:r}=n;(0,S.default)(e,r,!1,t.imageClass,t.imageUrl);(3===this._elements.length?this._elements[2]:this._elements[0]).classList.add("inboxsdk__thread_row_image_added"),t.tooltip?r.setAttribute("data-tooltip",t.tooltip):r.removeAttribute("data-tooltip");const i=this._getLabelParent();i.contains(r)||(0,m.default)(i,".y6").insertAdjacentElement("beforebegin",r)}else n&&(n.remove(),this._modifications.image.claimed.splice(this._modifications.image.claimed.indexOf(n),1),n=null)}))}addButton(e){if(!this._elements.length)return void console.warn("addButton called on destroyed thread row");if(1!=this._elements.length)return;let t=null,n=null;const r=(0,g.default)(p.default,e).toProperty().takeUntilBy(this._stopper);r.merge(this._stopper).onValue((e=>{e||t&&(t.close(),t=null)})),this._stopper.onValue((()=>{n&&n.buttonSpan&&(n.buttonSpan.onclick=null)})),r.combine(this._getRefresher()).onValue((e=>{let[r]=e;const i=r;if(i){let e,r;i.className&&(i.iconClass=i.className,delete i.className);const o=this._elements[0].querySelector("ul[role=toolbar]");n||(n=this._modifications.button.unclaimed.shift(),n||(o?(e=document.createElement("li"),e.classList.add("bqX")):(e=document.createElement("span"),e.classList.add("T-KT")),e.classList.add("inboxsdk__thread_row_button"),i.title?e.setAttribute("title",i.title):e.removeAttribute("title"),e.setAttribute("tabindex","-1"),e.setAttribute("data-order-hint",String(i.orderHint||0)),e.addEventListener("onmousedown",I),r={},n={buttonSpan:e,iconSettings:r,remove:e.remove.bind(e)}),this._modifications.button.claimed.push(n));const a=o?null:(0,m.default)(this._elements[0],"td.apU.xY, td.aqM.xY");e=n.buttonSpan,r=n.iconSettings,i.onClick&&(e.onclick=n=>{const r={dropdown:null,threadRowView:this._userView};if(i.hasDropdown){if(t)return this._elements[0].classList.remove("inboxsdk__dropdown_active"),this._elements[0].classList.remove("buL"),t.close(),void(t=null);{this._elements[0].classList.add("inboxsdk__dropdown_active"),this._elements[0].classList.add("buL"),r.dropdown=t=new E.default(new w.default,e,null),t.setPlacementOptions({position:"bottom",hAlign:"left",vAlign:"top"});const n=this._elements[0];t.on("destroy",(()=>{setTimeout((()=>{n.classList.remove("inboxsdk__dropdown_active"),n.classList.remove("buL"),t=null}),1)}))}}i.onClick.call(null,r)}),(0,S.default)(r,e,!1,i.iconClass,i.iconUrl),o&&e.parentElement!==o?(0,b.default)(o,e,void 0,!0):a&&e.parentElement!==a&&((0,b.default)(a,e),this._expandColumn("col.y5",26*a.children.length),a.onmouseover=a.onclick=A)}else n&&(n.remove(),this._modifications.button.claimed.splice(this._modifications.button.claimed.indexOf(n),1),n=null)}))}addActionButton(e){if(1!==this._elements.length)return;const t=(0,g.default)(p.default,e).takeUntilBy(this._stopper).toProperty();let n=null;this._stopper.onEnd((()=>{n&&n.gmailActionButtonView.setOnClick(null)})),t.takeUntilBy(this._stopper).onValue((e=>{if(e&&"LINK"!==e.type)console.error("Only type=LINK is currently supported");else if(e){if(!n){if(n=this._modifications.action.unclaimed.shift(),!n){const e=new x.default,t=e.getElement();n={gmailActionButtonView:e,remove:t.remove.bind(t)}}this._modifications.action.claimed.push(n)}n.gmailActionButtonView.updateDescriptor(e);const{url:t,onClick:r}=e;n.gmailActionButtonView.setOnClick((e=>{e.stopPropagation(),window.open(t,"_blank"),r&&r.call(null,{})}));const i=this._elements[0].querySelector("td.a4W .a4X .aKS")||this._elements[0].querySelector("td.a4W div.xS");if(!i)throw new Error("Failed to find actionParentDiv");(0,s.default)(i.children,n.gmailActionButtonView.getElement())||i.insertBefore(n.gmailActionButtonView.getElement(),i.firstChild)}else n&&(n.remove(),this._modifications.action.claimed.splice(this._modifications.action.claimed.indexOf(n),1),n=null)}))}addAttachmentIcon(e){if(!this._elements.length)return void console.warn("addAttachmentIcon called on destroyed thread row");const t=(0,o.default)((()=>{const e=document.createElement("img");return e.src="images/cleardot.gif",e})),n=(0,o.default)((()=>document.createElement("div")));var r,i=!1;(0,g.default)(p.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue((e=>{let[o]=e;const a=(0,m.default)(this._elements[0],"td.yf.xY");if(o){const e=null!=o.iconHtml?n():t();o.tooltip?e.setAttribute("data-tooltip",o.tooltip):e.removeAttribute("data-tooltip"),e.className=null!=o.iconHtml?"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_iconWrapper "+(o.iconClass||""):"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_icon "+(o.iconClass||""),null!=o.iconHtml?(a.contains(t())&&t().remove(),e.innerHTML=o.iconHtml):r!=o.iconUrl&&(a.contains(n())&&n().remove(),e.style.background=o.iconUrl?"url("+o.iconUrl+") no-repeat 0 0":"",r=o.iconUrl),a.contains(e)||(a.appendChild(e),i=!0,this._expandColumn("col.yg",16*a.children.length),this._elements.length>1&&this._fixDateColumnWidth()),a.classList.add("inboxsdk__thread_row_attachment_icons_present")}else i&&(n().remove(),t().remove(),i=!1,a.querySelector(".inboxsdk__thread_row_attachment_icon")||a.classList.remove("inboxsdk__thread_row_attachment_icons_present"))}))}_fixDateColumnWidth(){(0,h.default)((()=>{if(!this._elements.length)return;const e=this._elements[0].querySelector("td.xW, td.yf > div.apm");if(!e)return;const t=e.querySelector(".inboxsdk__thread_row_custom_date")||e.firstElementChild;if(!(t&&t instanceof HTMLElement))return;const n=this._elements[0].querySelectorAll("td.yf > img").length;this._expandColumn("col.xX",t.offsetWidth+8+2+20+16*n)}))}replaceDraftLabel(e){if(!this._elements.length)return void console.warn("replaceDraftLabel called on destroyed thread row");let t,n,r;(0,g.default)(p.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue((e=>{let[i]=e;const o=(0,m.default)(this._elements[0],"td > div.yW"),a=o.parentElement;if(!a)throw new Error("Should not happen");if(i){i=Object.assign({count:1},i),t||(t=this._modifications.replacedDraftLabel.unclaimed.shift(),t||(t={el:Object.assign(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_label"}),remove(){this.el.remove()}}),this._modifications.replacedDraftLabel.claimed.push(t));const e=!(0,s.default)(a.children,t.el);if(e||!n){t.el.innerHTML=o.innerHTML;const e=Array.from(t.el.querySelectorAll(".boq"));if(e.length>0)e.forEach((e=>e.remove())),n=Object.assign(document.createElement("span"),{className:"boq"}),t.el.appendChild(n);else{if(n=t.el.querySelector("font"),!n)return;const e=n.nextElementSibling;e&&e.remove()}n.classList.add("inboxsdk__thread_row_custom_draft_part"),r=Object.assign(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_count"}),t.el.appendChild(r)}n.textContent=i.text,r.textContent=1!==i.count?` (${i.count})`:"",e&&a.insertBefore(t.el,o)}else t&&(t.remove(),this._modifications.replacedDraftLabel.claimed.splice(this._modifications.replacedDraftLabel.claimed.indexOf(t),1),t=null)}))}replaceDate(e){if(!this._elements.length)return void console.warn("replaceDate called on destroyed thread row");let t;(0,g.default)(p.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue((e=>{let[n]=e;const r=(0,m.default)(this._elements[0],"td.xW, td.yf > div.apm");r.firstElementChild;n?(t||(t=this._modifications.replacedDate.unclaimed.shift(),t||(t={el:Object.assign(document.createElement("span"),{className:"inboxsdk__thread_row_custom_date"}),remove(){this.el.remove(),r.classList.remove("inboxsdk__thread_row_custom_date_container")}}),this._modifications.replacedDate.claimed.push(t)),t.el.textContent=n.text,n.tooltip?(t.el.setAttribute("data-tooltip",n.tooltip),t.el.setAttribute("aria-label",n.tooltip)):(t.el.removeAttribute("data-tooltip"),t.el.removeAttribute("aria-label")),t.el.style.color=n.textColor||"",(0,s.default)(r.children,t.el)||(r.insertBefore(t.el,r.firstChild),r.classList.add("inboxsdk__thread_row_custom_date_container")),this._fixDateColumnWidth()):t&&(t.remove(),this._modifications.replacedDate.claimed.splice(this._modifications.replacedDate.claimed.indexOf(t),1),t=null)}))}getEventStream(){return this._stopper}getStopper(){return this._stopper}getSubject(){return this._elements.length>1?(0,m.default)(this._elements[1],"div.xS div.xT div.y6 > span[id]").textContent:(0,m.default)(this._elements[0],"td.a4W div.xS div.xT div.y6 > span[id]").textContent}getDateString(){return(0,m.default)(this._elements[0],"td.xW > span[title]:not(.inboxsdk__thread_row_custom_date), td.yf.apt > div.apm > span[title]:not(.inboxsdk__thread_row_custom_date)").title}_threadIdReady(){return!!this._getThreadID()}_getThreadID(){if(this._cachedThreadID)return this._cachedThreadID;if(this._driver.isUsingSyncAPI()){const e=(0,a.default)(this._elements.map((e=>Array.from(e.querySelectorAll("[data-thread-id][data-legacy-thread-id]"))))).filter(Boolean)[0];if(e)return this._cachedSyncThreadID=e.getAttribute("data-thread-id").replace("#",""),this._cachedThreadID=e.getAttribute("data-legacy-thread-id").replace("#",""),this._cachedThreadID;{const e=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);this._cachedSyncThreadID=e,e&&this._driver.getOldGmailThreadIdFromSyncThreadId(e).then((e=>{this._cachedThreadID=e}))}}else this._cachedThreadID=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);return this._cachedThreadID}getThreadID(){const e=this._getThreadID();if(!e)throw new Error("Should not happen: thread id was null");return e}getSyncThreadID(){return Promise.resolve(this._cachedSyncThreadID)}async getThreadIDAsync(){return this.getThreadID()}getDraftID(){if(this._cachedSyncDraftIDPromise)return this._cachedSyncDraftIDPromise;if(this._driver.isUsingSyncAPI()){const e=(0,a.default)(this._elements.map((e=>Array.from(e.querySelectorAll("[data-standalone-draft-id]"))))).filter(Boolean)[0];this._cachedSyncDraftIDPromise=Promise.resolve(e?e.getAttribute("data-standalone-draft-id").replace("#msg-a:",""):null)}else this._cachedSyncDraftIDPromise=this._driver.getThreadRowIdentifier().getDraftIdForThreadRow(this);return this._cachedSyncDraftIDPromise}getVisibleDraftCount(){return this.getCounts().draftCount}getVisibleMessageCount(){return this.getCounts().messageCount}getContacts(){const e=this._elements[0].querySelectorAll("[email]"),t=Array.from(e).map((e=>({emailAddress:e.getAttribute("email"),name:e.getAttribute("name")})));return(0,u.default)(t,(e=>e.emailAddress))}isSelected(){return!!this._elements[0].querySelector("div[role=checkbox][aria-checked=true]")}_getLabelParent(){return this._elements.length>1?(0,m.default)(this._elements[2===this._elements.length?0:2],"div.apu"):(0,m.default)(this._elements[0],"td.a4W div.xS div.xT")}_getWatchElement(){return 1===this._elements.length?this._elements[0]:this._elements[0].children[2]}_getRefresher(){let e=this._refresher;return e||(e=this._refresher=(0,_.default)(this._getWatchElement(),{childList:!0}).map((()=>null)).takeUntilBy(this._stopper).toProperty((()=>null))),e}_getSubjectRefresher(){let e=this._subjectRefresher;if(!e)if(this._isVertical)e=this._subjectRefresher=p.default.constant(null);else{const t=this._getWatchElement(),n=(0,m.default)(t,".y6");e=this._subjectRefresher=(0,_.default)(n,{childList:!0}).map((()=>null)).takeUntilBy(this._stopper).toProperty((()=>null))}return e}_getImageContainerRefresher(){let e=this._imageRefresher;if(!e)if(this._isVertical){const t=3===this._elements.length?this._elements[2]:this._elements[0],n=(0,_.default)(t,{attributes:!0,attributeFilter:["class"]});e=this._imageRefresher=n.bufferBy(n.flatMapLatest((()=>(0,v.default)()))).filter((()=>t.querySelectorAll(".inboxsdk__thread_row_icon_wrapper").length>0&&!t.classList.contains("inboxsdk__thread_row_image_added"))).map((()=>null)).takeUntilBy(this._stopper).toProperty((()=>null))}else e=this._imageRefresher=p.default.constant(null);return e}});function T(e){for(let t=0;t<e.label.unclaimed.length;t++){e.label.unclaimed[t].remove()}e.label.unclaimed.length=0;for(let t=0;t<e.button.unclaimed.length;t++){e.button.unclaimed[t].remove()}e.button.unclaimed.length=0;for(let t=0;t<e.image.unclaimed.length;t++){e.image.unclaimed[t].remove()}e.image.unclaimed.length=0;for(let t=0;t<e.replacedDate.unclaimed.length;t++){e.replacedDate.unclaimed[t].remove()}e.replacedDate.unclaimed.length=0;for(let t=0;t<e.replacedDraftLabel.unclaimed.length;t++){e.replacedDraftLabel.unclaimed[t].remove()}e.replacedDraftLabel.unclaimed.length=0}n.default=D},{"../../../driver-common/update-icon":642,"../../../lib/delay-asap":650,"../../../lib/dom/insert-element-in-order":656,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/dropdown-view":744,"../widgets/gmail-action-button-view":605,"../widgets/gmail-dropdown-view":606,"../widgets/gmail-label-view":607,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,assert:33,kefir:159,"kefir-bus":156,"kefir-cast":157,"kefir-stopper":158,"lodash/flatMap":317,"lodash/flatten":318,"lodash/includes":323,"lodash/intersection":324,"lodash/once":346,"lodash/uniqBy":359,ud:454}],591:[function(e,t,n){(function(r){(function(){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/defineProperty")),a=i(e("lodash/findIndex")),s=i(e("asap")),l=e("ud"),u=i(e("auto-html")),c=i(e("kefir")),d=i(e("kefir-stopper")),f=i(e("kefir-bus")),p=i(e("react")),h=i(e("react-dom")),m=i(e("../../../../common/find-parent")),_=(i(e("../../../lib/delay-asap")),i(e("../../../lib/from-event-target-capture")),i(e("order-manager"))),b=i(e("../../../lib/idMap")),g=i(e("../../../lib/incrementName")),v=i(e("../../../lib/dom/querySelectorOrFail")),y=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),w=i(e("../../../lib/dom/make-element-child-stream")),E=e("../../../lib/dom/simulate-mouse-event"),k=i(e("../../../lib/fake-window-resize")),x=i(e("../../../driver-common/sidebar/AppSidebar")),S=i(e("../../../driver-common/sidebar/ContentPanelViewDriver")),C=i(e("../gmail-element-getter")),I=i(e("./gmail-thread-sidebar-view/add-icon-area")),A=i(e("./gmail-app-sidebar-view/primary/add-to-icon-area"));const D=".J-KU-Jz",T=".J-KU-KO";var M=(0,l.defn)(t,class{constructor(e,t,n,r){(0,o.default)(this,"_stopper",(0,d.default)()),this._driver=e;const i=n||t;if(!i)throw new Error("should not happen");const a=i.getAttribute("data-sdk-sidebar-instance-id");null!=a?this._instanceId=a:this._createElement(t,n,r)}destroy(){this._stopper.destroy()}getStopper(){return this._stopper}_getShouldAppSidebarOpen(){return"false"!==r.localStorage.getItem("inboxsdk__app_sidebar_should_open")}_setShouldAppSidebarOpen(e){try{r.localStorage.setItem("inboxsdk__app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}_createElement(e,t,n){let i,o,l;this._instanceId=`${Date.now()}-${Math.random()}`;{const n=t||e;if(!n)throw new Error("should not happen");n.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._stopper.onValue((()=>{n.removeAttribute("data-sdk-sidebar-instance-id")}))}const d=document.createElement("div");d.className=(0,b.default)("app_sidebar_container");const S=new Map;let M,O=!1,P=!1;const R=(0,f.default)();if(this._stopper.onEnd((()=>{R.end()})),t){const e=C.default.getMainContentBodyContainerElement();if(e){if(M=e.parentElement,!M)throw new Error("should not happen");M.classList.add("container_app_sidebar_in_use"),(0,v.default)(t,D).insertAdjacentElement("beforebegin",d),t.classList.add("app_sidebar_visible"),t.classList.add((0,b.default)("app_sidebar_in_use")),M.classList.add("container_app_sidebar_visible"),d.textContent="x";const n=d.getBoundingClientRect();d.textContent="",t.classList.remove("app_sidebar_visible"),M.classList.remove("container_app_sidebar_visible");const i=window.innerWidth>=1024&&window.innerHeight>=600;!r._APP_SIDEBAR_TEST&&(0==n.width||0==n.height||i&&Math.floor(n.right)>Math.floor(window.innerWidth))?this._driver.getLogger().error(new Error("SDK sidebar inserted into add-ons sidebar was not visible"),{rect:{top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.width,height:n.height},window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight}}):P=!0,P||(M&&M.classList.remove("container_app_sidebar_in_use"),t.classList.remove((0,b.default)("app_sidebar_in_use")))}}const L=P?t:null,j=P?t:e;if(!j)throw new Error("should not happen");if(P||(j.insertBefore(d,j.firstElementChild),j.classList.add((0,b.default)("app_sidebar_in_use"))),!document.body.querySelector("."+(0,b.default)("app_sidebar_waiting_platform"))){const e=document.createElement("div");e.className=(0,b.default)("app_sidebar_waiting_platform"),document.body.appendChild(e)}if(L)i=()=>d,d.classList.add("addon_sidebar");else{const e=(0,m.default)(j,(e=>"visible"!==window.getComputedStyle(e).overflowY));i=e?()=>e:void 0}const N=new Set,V=new _.default({get(){try{return JSON.parse(r.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set(e){try{r.localStorage.setItem("inboxsdk__sidebar_ordering",JSON.stringify(e))}catch(e){console.error("failed to set sidebar order data",e)}}});R.bufferWithTimeOrCount(150,100).filter((e=>e.length>0)).takeUntilBy(this._stopper).onValue((()=>{const e=d.getBoundingClientRect(),t=e.top+d.scrollTop,n=t+e.height,r=Array.from(d.querySelectorAll(`.${(0,b.default)("app_sidebar_content_panel")}.${(0,b.default)("expanded")} .${(0,b.default)("app_sidebar_content_panel_top_line")}`)).find((e=>{const r=e.getBoundingClientRect();return r.bottom>t&&r.bottom<n}));if(r){r.getAttribute("data-instance-id");const e=r.getAttribute("data-app-name");if(!e)return;const t=S.get(e);if(!t||!o)return;const n=o.querySelector(".sidebar_button_container_active");n&&n.classList.remove("sidebar_button_container_active"),t.classList.add("sidebar_button_container_active")}}));const B=e=>{e&&(l=e)},q=()=>{h.default.render(p.default.createElement(x.default,{ref:B,panels:V.getOrderedItems().map((e=>e.value)),onMoveEnd:(e,t,n,r)=>{V.moveItem(n,r),q()},onExpandedToggle:()=>{R.emit(null)},container:i}),d,(()=>{R.emit(null)}))};if(q(),c.default.fromEvents(window,"storage").filter((e=>"inboxsdk__sidebar_ordering"===e.key)).takeUntilBy(this._stopper).onValue((()=>{V.reload(),q()})),this._stopper.onValue((()=>{h.default.unmountComponentAtNode(d),d.remove(),j.classList.remove((0,b.default)("app_sidebar_in_use")),j.classList.remove("app_sidebar_visible"),o&&o.remove();const e=C.default.getMainContentBodyContainerElement();e&&(M=e.parentElement,M&&(M.classList.remove("container_app_sidebar_in_use"),M.classList.remove("container_app_sidebar_visible")))})),c.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId)).takeUntilBy(this._stopper).onValue((e=>{let t=e.detail.id;for(;N.has(t);)t=(0,g.default)(t);N.add(t);const r=e.detail.appName;V.addItem({groupId:e.detail.appId,id:t,orderHint:e.detail.orderHint,value:{id:t,appName:r,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}}),q(),L&&(o=L.querySelector("."+(0,b.default)("sidebar_iconArea")),o||(o=document.createElement("div"),o.className=(0,b.default)("sidebar_iconArea"),(0,I.default)(o,L,this._stopper)),(0,s.default)((()=>{if(!o)throw new Error("should not happen");const t=e.detail.instanceId,i=e.detail.appIconUrl,a=S.get(r);let s;if(a){const e=Number(a.getAttribute("data-count"))||1;a.setAttribute("data-count",String(e+1)),s=a}else if(s=document.createElement("div"),s.className=(0,b.default)("sidebar_button_container"),s.setAttribute("data-app-name",r),s.setAttribute("data-count",String(1)),s.innerHTML=u.default`
              <button class="inboxsdk__button_icon" type="button" data-tooltip="${r}">
                <img class="inboxsdk__button_iconImg" src="${i}">
              </button>
              <div class="inboxsdk__button_selectedIndicator"></div>
            `,e.detail.primaryColor&&((0,v.default)(s,".inboxsdk__button_selectedIndicator").style.backgroundColor=e.detail.primaryColor),S.set(r,s),(0,v.default)(s,"button").addEventListener("click",(e=>{e.stopPropagation();const n=o?o.querySelector(".sidebar_button_container_active"):null;if(n&&n.classList.remove("sidebar_button_container_active"),n===s)L&&L.classList.remove("app_sidebar_visible"),M&&M.classList.remove("container_app_sidebar_visible"),this._setShouldAppSidebarOpen(!1);else{if(L&&L.classList.add("app_sidebar_visible"),s.classList.add("sidebar_button_container_active"),M&&M.classList.add("container_app_sidebar_visible"),this._setShouldAppSidebarOpen(!0),L){const e=L.querySelector(T);e&&(0,E.simulateClick)(e),(0,k.default)();const t=L.firstElementChild;if(!t)return;const n=t.firstElementChild;if(!n)return;"none"!==n.style.display&&(O=!0,(0,y.default)(n,{attributes:!0,attributeFilter:["style"]}).toProperty((()=>null)).map((()=>"none"===n.style.display)).filter(Boolean).take(1).delay(150).takeUntilBy(this._stopper).onValue((()=>{O=!1})))}l.openPanel(t),l.scrollPanelIntoView(t,!0)}}),!0),o&&(0,A.default)(V,r,s,o),n&&n.fixWidths(),this._getShouldAppSidebarOpen()){o.querySelector(".sidebar_button_container_active")||(s.classList.add("sidebar_button_container_active"),L&&L.classList.add("app_sidebar_visible"),M&&M.classList.add("container_app_sidebar_visible"),(0,k.default)())}})))})),c.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId)).takeUntilBy(this._stopper).onValue((e=>{const t=V.getOrderedItems(),n=(0,a.default)(t,(t=>t.value.instanceId===e.detail.instanceId));if(-1===n)throw new Error("should not happen: failed to find orderItem");V.updateItemValueByIndex(n,{id:t[n].value.id,appId:e.detail.appId,appName:e.detail.appName||e.detail.title,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}),q()})),c.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter((e=>e.detail.sidebarId===this._instanceId)).takeUntilBy(this._stopper).onValue((e=>{const t=V.getOrderedItems(),r=(0,a.default)(t,(t=>t.value.instanceId===e.detail.instanceId));if(-1===r)throw new Error("should not happen: failed to find orderItem");if(N.delete(t[r].id),V.removeItemByIndex(r),0===V.getOrderedItems().length?this.destroy():q(),!L)return;if(o=L.querySelector("."+(0,b.default)("sidebar_iconArea")),!o)return;n&&n.fixWidths();const i=e.detail.appName,s=S.get(i);if(s){const e=Number(s.getAttribute("data-count"));if(e<=1){const e=d.querySelector(".sidebar_button_container_active");s.remove(),S.delete(i),s===e&&(L&&(L.classList.remove("app_sidebar_visible"),M&&M.classList.remove("container_app_sidebar_visible")),this._setShouldAppSidebarOpen(!1))}else 2===e?s.removeAttribute("data-count"):s.setAttribute("data-count",String(e-1))}})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue((e=>{l.scrollPanelIntoView(e.detail.instanceId)})),c.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").takeUntilBy(this._stopper).onValue((e=>{l.closePanel(e.detail.instanceId)})),L){const e=(0,v.default)(L,D);(0,w.default)(e).flatMap((e=>{let{el:t,removalStream:n}=e;return(0,y.default)(t,{attributes:!0,attributeFilter:["style"]}).toProperty((()=>null)).map((()=>"none"!==t.style.display))})).takeUntilBy(this._stopper).onValue((e=>{if(e){if(M&&M.classList.add("container_addon_sidebar_visible"),O){const e=L.querySelector(T);return void(e&&(0,E.simulateClick)(e))}this._setShouldAppSidebarOpen(!1);const e=o?o.querySelector(".sidebar_button_container_active"):null;e&&(L.classList.remove("app_sidebar_visible"),e.classList.remove("sidebar_button_container_active"),M&&M.classList.remove("container_app_sidebar_visible"))}else M&&M.classList.remove("container_addon_sidebar_visible")}))}L&&c.default.fromEvents(d,"scroll").takeUntilBy(this._stopper).onValue((()=>{R.emit(null)}))}addSidebarContentPanel(e){const t=new S.default(this._driver,e,this._instanceId);return this._stopper.takeUntilBy(t.getStopper()).onValue((()=>{t.remove()})),t}});n.default=M}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../common/find-parent":473,"../../../driver-common/sidebar/AppSidebar":640,"../../../driver-common/sidebar/ContentPanelViewDriver":641,"../../../lib/delay-asap":650,"../../../lib/dom/make-element-child-stream":659,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/dom/simulate-mouse-event":674,"../../../lib/fake-window-resize":677,"../../../lib/from-event-target-capture":678,"../../../lib/idMap":682,"../../../lib/incrementName":684,"../gmail-element-getter":530,"./gmail-app-sidebar-view/primary/add-to-icon-area":544,"./gmail-thread-sidebar-view/add-icon-area":592,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/findIndex":315,"order-manager":367,react:436,"react-dom":414,ud:454}],592:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("kefir")),a=(r(e("kefir-stopper")),r(e("../../../../lib/dom/make-mutation-observer-chunked-stream")));r(e("../../../../lib/dom/querySelectorOrFail"));const s="[role=tablist],.J-KU-Jg";var l=(0,i.defn)(t,(function(e,t,n){const r=t.firstElementChild;if(!r)return;const i=r.firstElementChild;if(!i)return;const l=t.querySelector(s);if(!l)return;const u=(0,a.default)(i,{attributes:!0,attributeFilter:["style"]}).toProperty((()=>null)).map((()=>"none"!==i.style.display)).takeUntilBy(n),c=(0,a.default)(l,{attributes:!0,attributeFilter:["role"]}).toProperty((()=>null)).filter((()=>"tablist"===l.getAttribute("role"))).takeUntilBy(n);l.insertAdjacentElement("beforebegin",e),o.default.combine([u.filter((e=>!e)),c]).onValue((()=>{l.insertAdjacentElement("afterbegin",e),function(e,t,n){(0,a.default)(t,{childList:!0}).filter((()=>e.parentElement!==t)).takeUntilBy(n).onValue((()=>{t.insertAdjacentElement("afterbegin",e)}))}(e,l,o.default.merge([u.filter(Boolean),n]))})),u.filter(Boolean).onValue((()=>{const t=document.createElement("div");t.innerHTML=i.innerHTML,t.classList.add("inboxsdk__addon_icon_loading"),l.insertAdjacentElement("beforebegin",e),e.insertAdjacentElement("afterend",t),o.default.merge([u.filter((e=>!e)),n]).take(1).onValue((()=>{t.remove()}))}))}));n.default=l},{"../../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158,ud:454}],593:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("lodash/constant")),r(e("asap")),r(e("pdelay"))),a=e("ud"),s=(r(e("util")),r(e("kefir"))),l=(e("querystring"),r(e("kefir-bus"))),u=r(e("kefir-stopper")),c=r(e("../../../../common/find-parent")),d=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=r(e("../../../lib/dom/querySelectorOrFail")),p=r(e("../../../lib/idMap")),h=r(e("../../../views/SimpleElementView")),m=r(e("../../../views/conversations/custom-message-view")),_=(r(e("../../../lib/delay-asap")),r(e("../gmail-element-getter"))),b=r(e("./gmail-message-view")),g=r(e("./gmail-toolbar-view")),v=(r(e("./gmail-thread-sidebar-view")),r(e("./gmail-thread-view/width-manager")));let y=!1;var w=(0,a.defn)(t,class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,i.default)(this,"_stopper",(0,u.default)()),(0,i.default)(this,"_threadSidebar",null),(0,i.default)(this,"_widthManager",null),(0,i.default)(this,"_customMessageViews",new Set),(0,i.default)(this,"_hiddenCustomMessageViews",new Set),(0,i.default)(this,"_subjectContainerSelectors",{"2022_10_21":".a98.iY > .nH","2022_10_12":".PeIF1d > .nH",2018:".if > .nH"}),this._element=e,this._routeViewDriver=t,this._driver=n,this._isPreviewedThread=r,this._eventStream=(0,l.default)(),this._messageViewDrivers=[],this._logAddonElementInfo().catch((e=>this._driver.getLogger().error(e)));const o=this._driver.waitForGlobalSidebarReady().merge(this._driver.delayToTimeAfterReady(15e3).flatMap((()=>s.default.constantError(new Error("15 second timeout while waiting for sidebar fired"))))).take(1).takeErrors(1).flatMapErrors((e=>(this._driver.getLogger().error(e),s.default.constant(null)))).toProperty();let a;a=1===n.getOpts().REQUESTED_API_VERSION&&n.isUsingSyncAPI()?s.default.combine([o,s.default.fromPromise(this.getThreadIDAsync())]):o,this._readyStream=a.map((()=>(this._setupToolbarView(),this._setupMessageViewStream(),null))).takeUntilBy(this._stopper).toProperty(),this._listenToExpandCollapseAll(),this._stopper.take(1).onValue((()=>{this._resolveUnmountHiddenNoticePromise&&this._resolveUnmountHiddenNoticePromise()}))}getMessageViewDriverStream(){return s.default.constant(this._messageViewDrivers).flatten().merge(this._eventStream.filter((e=>"internal"===e.type&&"messageCreated"===e.eventName)).map((e=>e.view)))}isLoadingStub(){return!1}getStopper(){return this._stopper}getEventStream(){return this._eventStream}getElement(){return this._element}getRouteViewDriver(){return this._routeViewDriver}getIsPreviewedThread(){return this._isPreviewedThread}getToolbarView(){return this._toolbarView}getMessageViewDrivers(){return this._messageViewDrivers}destroy(){this._eventStream.end(),this._stopper.destroy(),this._toolbarView&&this._toolbarView.destroy(),this._threadSidebar&&this._threadSidebar.destroy(),this._messageViewDrivers.forEach((e=>{e.destroy()})),this._messageViewDrivers.length=0,this._newMessageMutationObserver&&this._newMessageMutationObserver.disconnect();for(let e of this._customMessageViews)e.destroy()}addSidebarContentPanel(e){return this._driver.getGlobalSidebar().addThreadSidebarContentPanel(e,this)}addNoticeBar(){const e=document.createElement("div");let t,n;e.className=(0,p.default)("thread_noticeBar");for(const[e,r]of Object.entries(this._subjectContainerSelectors)){const i=this._element.querySelector(r);if(i){t=e,n=i;break}}if(!n)throw new Error("Failed to find subject container");this._driver.getLogger().eventSdkPassive("addNoticeBar subjectContainer",{version:t}),n.insertAdjacentElement("afterend",e);const r=new h.default(e);return this._stopper.takeUntilBy(s.default.fromEvents(r,"destroy")).onValue((()=>r.destroy())),r}registerHiddenCustomMessageNoticeProvider(e){this._hiddenCustomMessageNoticeProvider=e}addCustomMessage(e){const t=this._element.parentElement;if(!t)throw new Error("missing parent element");const n=new m.default(e,(()=>{this._readyStream.onValue((async()=>{const e=this._element.querySelector("[role=list]");if(!e)return;let r,i=Number.MIN_SAFE_INTEGER,o=!1;const a=[...await Promise.all(this._messageViewDrivers.map((async e=>({sortDatetime:await e.getDate()||0,isHidden:"HIDDEN"===e.getViewState(),element:e.getElement()})))),...Array.from(this._customMessageViews).filter((e=>e!==n&&e.getElement().parentElement)).map((e=>{const t=e.getSortDate();return{sortDatetime:(t?t.getTime():null)||0,isHidden:e.getElement().classList.contains("inboxsdk__custom_message_view_hidden"),element:e.getElement()}}))].sort(((e,t)=>e.sortDatetime-t.sortDatetime)),s=n.getSortDate();if(s){for(let e of a){if(o=e.isHidden,s.getTime()>=i&&s.getTime()<=e.sortDatetime){r=e.element;break}i=e.sortDatetime}r?r.insertAdjacentElement("beforebegin",n.getElement()):e.insertAdjacentElement("beforeend",n.getElement()),o&&this._setupHiddenCustomMessage(n),t.classList.add("inboxsdk__thread_view_with_custom_view")}}))}));return this._customMessageViews.add(n),n.on("destroy",(()=>{this._customMessageViews.delete(n),this._customMessageViews.size>0?t.classList.add("inboxsdk__thread_view_with_custom_view"):t.classList.remove("inboxsdk__thread_view_with_custom_view")})),n}_setupHiddenCustomMessage(e){this._hiddenCustomMessageViews.add(e),e.getElement().classList.add("inboxsdk__custom_message_view_hidden");let t=this._element.querySelector(".adv"),n=!0;if(!t){n=!1;const e=Array.from(this._element.querySelectorAll(".kQ"));if(e.length<2)return;t=e[1]}(0,d.default)(t,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(s.default.merge([this._stopper,s.default.fromEvents(e,"destroy")])).filter((()=>t&&!t.classList.contains("kQ"))).onValue((()=>{e.getElement().classList.remove("inboxsdk__custom_message_view_hidden"),this._hiddenCustomMessageNoticeElement&&this._hiddenCustomMessageNoticeElement.remove(),this._hiddenCustomMessageNoticeElement=null})),this._updateHiddenNotice(t,n),s.default.fromEvents(e,"destroy").takeUntilBy(this._stopper).take(1).onValue((()=>{this._hiddenCustomMessageViews.delete(e),t&&this._updateHiddenNotice(t,n)}))}_updateHiddenNotice(e,t){const n=this._hiddenCustomMessageNoticeElement;n&&(n.remove(),this._hiddenCustomMessageNoticeElement=null,this._resolveUnmountHiddenNoticePromise&&this._resolveUnmountHiddenNoticePromise());const r=this._hiddenCustomMessageNoticeProvider;if(!r)return;const i=this._hiddenCustomMessageNoticeElement=document.createElement("span");i.classList.add("inboxsdk__custom_message_view_app_notice_content");const o=this._hiddenCustomMessageViews.size;let a=null;if(t){const t=(0,f.default)(e,".adx span");if(a=Number(t.innerHTML),isNaN(a))throw new Error("Couldn't find number of native hidden messages in dom structure")}const s=r(o,a,new Promise((e=>{this._resolveUnmountHiddenNoticePromise=e})));if(!s)return;if(i.appendChild(s),!t){const t=document.createElement("span");t.classList.add("adx");(0,f.default)(e,".G3").appendChild(t)}const l=(0,f.default)(e,".adx");l.classList.add("inboxsdk__custom_message_view_app_notice_container"),l.appendChild(i)}getSubject(){var e=this._element.querySelector(".ha h2");return e?e.querySelector("img[data-emoji]")?Array.from(e.childNodes).map((e=>{if(e instanceof HTMLElement&&"IMG"===e.nodeName){return e.getAttribute("data-emoji")}if("#text"===e.nodeName)return e.wholeText})).filter((e=>null!=e)).join(""):e.textContent:""}getInternalID(){return this._syncThreadID||this.getThreadID()}getThreadID(){if(this._threadID)return this._threadID;let e;if(this._driver.isUsingSyncAPI()){const t=this._element.querySelector("[data-thread-perm-id]");if(!t)throw new Error("threadID element not found");if(!(this._syncThreadID=t.getAttribute("data-thread-perm-id")))throw new Error("syncThreadID attribute with no value");if(e=t.getAttribute("data-legacy-thread-id"),!e){const e=new Error("Failed to get id for thread: data-legacy-thread-id attribute missing");this._driver.getLogger().error(e)}}if(!e)if(this._isPreviewedThread)e=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0);else{const t=this._routeViewDriver?this._routeViewDriver.getParams():null;if(!t||!t.threadID){const e=new Error("Failed to get id for thread");throw this._driver.getLogger().error(e),e}e=t.threadID}return this._threadID=e,e}async getThreadIDAsync(){let e;if(this._driver.isUsingSyncAPI()){const t=this._element.querySelector("[data-thread-perm-id]");if(!t)throw new Error("threadID element not found");const n=this._syncThreadID=t.getAttribute("data-thread-perm-id");if(!n)throw new Error("syncThreadID attribute with no value");this._threadID=e=t.getAttribute("data-legacy-thread-id"),e||(this._threadID=e=await this._driver.getOldGmailThreadIdFromSyncThreadId(n))}else{if(this._isPreviewedThread)e=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0);else{const t=this._routeViewDriver?this._routeViewDriver.getParams():null;if(!t||!t.threadID){const e=new Error("Failed to get id for thread");throw this._driver.getLogger().error(e),e}e=t.threadID}this._threadID=e}if(this._threadID)return this._threadID;throw new Error("Failed to get id for thread")}addLabel(){const e=this._element.querySelector(".ha .J-J5-Ji");if(!e)throw new Error("Thread view label container not found");const t=document.createElement("span");e.appendChild(t);const n=new h.default(t),r=new MutationObserver((n=>{n.some((e=>"childList"===e.type&&e.removedNodes&&e.removedNodes.length&&e.removedNodes.length>0))&&(e.contains(t)||e.appendChild(t))}));return r.observe(e,{childList:!0}),this._stopper.takeUntilBy(s.default.fromEvents(n,"destroy")).onValue((()=>n.destroy())),s.default.fromEvents(n,"destroy").take(1).onValue((()=>{r.disconnect()})),n}_setupToolbarView(){const e=this._findToolbarElement();if(!e)throw new Error("No toolbar element found");const t=e.parentElement;t&&t.classList.add("inboxsdk__thread_toolbar_parent"),this._toolbarView=new g.default(e,this._driver,this._routeViewDriver,this)}_findToolbarElement(){for(var e=document.querySelectorAll("[gh=tm]"),t=0;t<e.length;t++)if(this._isToolbarContainerRelevant(e[t]))return e[t].querySelector("[gh=mtb]");return null}_isToolbarContainerRelevant(e){if(e.parentElement.parentElement===this._element.parentElement.parentElement)return!0;if("main"!==e.parentElement.getAttribute("role")&&"main"!==this._element.parentElement.getAttribute("role"))return!0;if("main"===e.parentElement.getAttribute("role")&&e.parentElement.querySelector(".if, .PeIF1d, .a98.iY")&&e.parentElement.querySelector(".if, .PeIF1d, .a98.iY").parentElement===this._element){let t="2018";return e.parentElement.querySelector(".a98.iY")?t="2022-10-20":e.parentElement.querySelector(".PeIF1d")&&(t="2022-10-12"),this._driver.getLogger().eventSdkPassive("gmailThreadView_isToolbarContainerRelevant",{version:t}),!0}return!1}_setupMessageViewStream(){var e=this._element.querySelector(".h7");if(e){var t=e.parentElement;this._initializeExistingMessages(t),this._observeNewMessages(t)}else{var n=this;setTimeout((function(){n._element&&n._setupMessageViewStream()}),500)}}_initializeExistingMessages(e){var t=this,n=e.children;Array.prototype.forEach.call(n,(function(e){t._createMessageView(e)}))}_observeNewMessages(e){this._newMessageMutationObserver=new MutationObserver(this._handleNewMessageMutations.bind(this)),this._newMessageMutationObserver.observe(e,{childList:!0})}_handleNewMessageMutations(e){var t=this;e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,(function(e){e.classList.contains("inboxsdk__custom_message_view")||t._createMessageView(e)}))}))}_createMessageView(e){var t=new b.default(e,this,this._driver);this._eventStream.plug(t.getEventStream()),this._messageViewDrivers.push(t),this._eventStream.emit({type:"internal",eventName:"messageCreated",view:t})}_setupWidthManager(){let e=this._widthManager;if(!e){const t=_.default.getAddonSidebarContainerElement();if(!t)throw new Error("addonSidebarElement not found");const n=_.default.getMainContentBodyContainerElement();if(!n)throw new Error("mainContentBodyContainerElement not found");const r=n.parentElement;if(!r)throw new Error("mainContentBodyContainerElement has no parent element");this._widthManager=e=new v.default(r,t)}return e}getReadyStream(){return this._readyStream}async _logAddonElementInfo(){if(y)return;function e(){const e=_.default.getAddonSidebarContainerElement();if(!e)return null;const t={parent:e.parentElement?"none"===e.parentElement.style.display:null,self:"none"===e.style.display,children:Array.from(e.children).map((e=>e.style?"none"===e.style.display:null))},n=e.getBoundingClientRect();return{isDisplayNone:t,size:{width:n.width,height:n.height}}}const t={time:{}};t.time[0]=e(),await Promise.all([30,5e3].map((async n=>{await(0,o.default)(n),this._stopper.stopped||(t.time[n]=e())}))),this._stopper.stopped||(this._driver.getLogger().eventSdkPassive("gmailSidebarElementInfo",t),y=!0)}_listenToExpandCollapseAll(){const e=this._element.querySelector("img.gx");if(e){const t=(0,c.default)(e,(e=>"button"===e.getAttribute("role")));t&&s.default.merge([s.default.fromEvents(t,"click"),s.default.fromEvents(t,"keydown").filter((e=>13===e.which))]).takeUntilBy(this._stopper).onValue((()=>{for(let e of this._customMessageViews)e.expand()}))}const t=this._element.querySelector("img.gq");if(t){const e=(0,c.default)(t,(e=>"button"===e.getAttribute("role")));e&&s.default.merge([s.default.fromEvents(e,"click"),s.default.fromEvents(e,"keydown").filter((e=>13===e.which))]).takeUntilBy(this._stopper).onValue((()=>{for(let e of this._customMessageViews)e.collapse()}))}}});n.default=w},{"../../../../common/find-parent":473,"../../../lib/delay-asap":650,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/idMap":682,"../../../views/SimpleElementView":721,"../../../views/conversations/custom-message-view":730,"../gmail-element-getter":530,"./gmail-message-view":582,"./gmail-thread-sidebar-view":591,"./gmail-thread-view/width-manager":594,"./gmail-toolbar-view":595,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/constant":307,pdelay:375,querystring:409,ud:454,util:52}],594:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../../../lib/idMap"));n.default=class{constructor(e,t){this._contentContainerEl=e,this._addonSidebarContainerEl=t}fixWidths(){const e=this._addonSidebarContainerEl.querySelector("[role=tablist]");if(!e)return;if(this._addonSidebarContainerEl.classList.contains((0,i.default)("app_sidebar_in_use")))return void this._contentContainerEl.classList.remove((0,i.default)("container_app_sidebar_no_icons"));![...e.children].some((e=>"none"!==e.style.display))?this._contentContainerEl.classList.add((0,i.default)("container_app_sidebar_no_icons")):this._contentContainerEl.classList.remove((0,i.default)("container_app_sidebar_no_icons"))}}},{"../../../../lib/idMap":682,"@babel/runtime/helpers/interopRequireDefault":15}],595:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("lodash/uniq")),r(e("lodash/escape"))),a=r(e("asap")),s=e("ud"),l=r(e("kefir")),u=r(e("kefir-stopper")),c=r(e("../../../lib/stream-wait-for")),d=r(e("../../../lib/dom/make-mutation-observer-stream")),f=r(e("../../../lib/dom/insert-element-in-order")),p=r(e("../../../../common/isElementVisible")),h=r(e("../gmail-element-getter")),m=r(e("../widgets/buttons/button-view")),_=r(e("../widgets/gmail-dropdown-view")),b=r(e("../../../widgets/buttons/basic-button-view-controller")),g=r(e("../../../widgets/buttons/dropdown-button-view-controller")),v=r(e("./gmail-thread-view")),y=r(e("./gmail-row-list-view")),w=e("../../../constants/toolbars"),E=r(e("../../../lib/logger"));var k=(0,s.defn)(t,class{constructor(e,t,n,r){if((0,i.default)(this,"_buttonViewControllers",new Set),(0,i.default)(this,"_moreMenuItems",[]),(0,i.default)(this,"_isUpdateButtonClassesScheduled",!1),(0,i.default)(this,"_moreMenuItemsContainer",null),this._element=e,this._driver=t,this._stopper=(0,u.default)(),this._routeViewDriver=n,this._getMoveSectionElement()?this._ready=l.default.constant(this):this._ready=(0,c.default)((()=>!!this._getMoveSectionElement())).takeUntilBy(this._stopper).map((()=>this)).toProperty(),this._ready.onValue((()=>{this._startMonitoringMoreMenu(),this._determineToolbarState(),this._determineToolbarIconMode(),this._setupToolbarStateMonitoring()})),r instanceof v.default)this._threadViewDriver=r,this._ready.onValue((()=>{this._element.setAttribute("data-thread-toolbar","true")}));else{if(!(r instanceof y.default))throw new Error("Invalid parent");this._rowListViewDriver=r,this._ready.onValue((()=>{this._element.setAttribute("data-rowlist-toolbar","true")}))}}getStopper(){return this._stopper}getElement(){return this._element}getRouteViewDriver(){return this._routeViewDriver}getThreadViewDriver(){return this._threadViewDriver}isForRowList(){return null!=this._rowListViewDriver}isForThread(){return null!=this._threadViewDriver}getThreadRowViewDrivers(){return this._rowListViewDriver?this._rowListViewDriver.getThreadRowViewDrivers():(console.error("missing this._rowListViewDriver"),new Set)}addButton(e,t){const n=(0,u.default)();this._stopper.takeUntilBy(n).onValue((()=>{n.destroy()}));this._driver.getAppId();const r=w.SECTION_NAMES;return this._ready.takeUntilBy(n).onValue((()=>{if(e.section===r.OTHER){const t={buttonDescriptor:e};this._moreMenuItems.push(t),this._addToOpenMoreMenu(e),n.onValue((()=>{this._moreMenuItems=this._moreMenuItems.filter((e=>e!==t)),this._addMoreItems()}))}else{const i=this._getSectionElement(e.section,r);if(i){const r=this._createButtonViewController(e);this._buttonViewControllers.add(r),n.onValue((()=>{this._buttonViewControllers.delete(r),r.destroy()})),r.getView().getElement().__addButton_ownedByExtension=!0,r.getView().getElement().setAttribute("data-add-button-debug",JSON.stringify({id:t,title:e.title,hasThreadViewDriver:this.isForThread(),hasRowListViewDriver:this.isForRowList()})),r.getView().getElement().setAttribute("data-order-hint",String(e.orderHint||0)),(0,f.default)(i,r.getView().getElement()),l.default.merge([l.default.constant(-1),l.default.later(1e3,1e3)]).map((t=>({delay:t,duplicates:Array.from(i.children).filter((e=>r.getView().getElement().getAttribute("data-rowlist-toolbar")===e.getAttribute("data-rowlist-toolbar")&&r.getView().getElement().getAttribute("data-toolbar-expanded")===e.getAttribute("data-toolbar-expanded"))).filter((e=>e.hasAttribute("data-add-button-debug"))).map((e=>Object.assign({ownedByExtension:!!e.__addButton_ownedByExtension},JSON.parse(e.getAttribute("data-add-button-debug")||"null")))).filter((t=>{let{title:n}=t;return n===e.title}))}))).filter((e=>{let{duplicates:t}=e;return t.length>1})).take(1).takeUntilBy(this._stopper).onValue((e=>{let{delay:t,duplicates:n}=e;E.default.error(new Error("Duplicate toolbar button"),{delay:t,duplicates:n,dataThreadToolbar:this._element.getAttribute("data-thread-toolbar"),dataRowlistToolbar:this._element.getAttribute("data-rowlist-toolbar")})})),this._updateButtonClasses(this._element),r.getView().setEnabled("EXPANDED"===this._toolbarState)}}})),{getStopper:()=>n,destroy:()=>{n.destroy()}}}waitForReady(){return this._ready}_createButtonViewController(e){const t=this._getButtonView(e);e.buttonView=t;let n=null;return n=e.hasDropdown?new g.default({buttonView:t,dropdownViewDriverClass:_.default,dropdownShowFunction:e.onClick,dropdownPositionOptions:{position:"bottom",hAlign:"left"}}):new b.default(e),n}_getButtonView(e){const t=new m.default({...e,noArrow:!0});return this._rowListViewDriver?(t.getElement().setAttribute("data-rowlist-toolbar","true"),t.getElement().setAttribute("data-toolbar-expanded","true")):this._threadViewDriver&&t.getElement().setAttribute("data-thread-toolbar","true"),t.getElement().setAttribute("role","button"),t}_startMonitoringMoreMenu(){const e=this._element.querySelector(".nf[role=button]");e&&(0,d.default)(e,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty((()=>null)).takeUntilBy(this._stopper).map((()=>e.getAttribute("aria-expanded"))).onValue((e=>{"true"!==e?this._clearMoreItems():this._addMoreItems()}))}_determineToolbarState(){const e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");"none"===e.style.display?this._toolbarState="COLLAPSED":this._toolbarState="EXPANDED"}_determineToolbarIconMode(){const e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");const t=Array.from(e.querySelectorAll("[role=button]:not(.inboxsdk__button)")).some((e=>e.hasAttribute("title")||e.hasAttribute("data-tooltip")));this._element.setAttribute("data-toolbar-icononly",t?"true":"false")}_setupToolbarStateMonitoring(){const e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");(0,d.default)(e,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue((e=>{e.target instanceof HTMLElement&&"none"===e.target.style.display?this._toolbarState="COLLAPSED":this._toolbarState="EXPANDED",this._updateButtonClasses(this._element),this._updateButtonEnabledState()}))}_getSectionElement(e,t){switch(e){case t.INBOX_STATE:return this._getArchiveSectionElement();case t.METADATA_STATE:return this._getMoveSectionElement();default:return null}}_getArchiveSectionElement(){return this._getSectionElementForButtonSelector(".ar9, .aFh, .aFj, .lR, .nN, .nX, .aFk")}_getCheckboxSectionElement(){return this._getSectionElementForButtonSelector(".T-Jo-auh")}_getMoveSectionElement(){return this._getSectionElementForButtonSelector(".asb, .ase, .ns, .mw")}_getSectionElementForButtonSelector(e){const t=this._element.querySelectorAll(".G-Ni");for(let n=0;n<t.length;n++)if(t[n].querySelector(e))return t[n];return null}_updateButtonClasses(e){this._isUpdateButtonClassesScheduled||(this._isUpdateButtonClassesScheduled=!0,(0,a.default)((()=>{"EXPANDED"===this._toolbarState?e.setAttribute("data-toolbar-expanded","true"):"COLLAPSED"===this._toolbarState&&e.setAttribute("data-toolbar-expanded","false");const t=e.querySelectorAll(".G-Ni > [role=button]");Array.prototype.forEach.call(t,(e=>{let t=e;for(let n=0;n<1e5;n++){if(!t.previousElementSibling){e.classList.remove("T-I-Js-Gs");break}if(!t.previousElementSibling.classList.contains("inboxsdk__button")){e.classList.add("T-I-Js-Gs");break}if((0,p.default)(t.previousElementSibling)){e.classList.add("T-I-Js-Gs");break}t=t.previousElementSibling}t=e;for(let n=0;n<1e5;n++){if(!t.nextElementSibling){e.classList.remove("T-I-Js-IF");break}if(!t.nextElementSibling.classList.contains("inboxsdk__button")){e.classList.add("T-I-Js-IF");break}if((0,p.default)(t.nextElementSibling)){e.classList.add("T-I-Js-IF");break}t=t.nextElementSibling}})),this._isUpdateButtonClassesScheduled=!1})))}_updateButtonEnabledState(){const e="EXPANDED"===this._toolbarState;this._buttonViewControllers.forEach((t=>{t.getView().setEnabled(e)}))}_addMoreItems(){this._clearMoreItems(),"EXPANDED"===this._toolbarState&&this._moreMenuItems.forEach((e=>{this._addToOpenMoreMenu(e.buttonDescriptor)}))}_clearMoreItems(){this._moreMenuItemsContainer&&(this._moreMenuItemsContainer.remove(),this._moreMenuItemsContainer=null)}_addToOpenMoreMenu(e){const t=h.default.getActiveMoreMenu();if(!t)return;const n=this._getMoreMenuItemsContainer(t),r=this._getMoreMenuItemElement(e);(0,f.default)(n,r)}_getMoreMenuItemsContainer(e){if(this._moreMenuItemsContainer)return this._moreMenuItemsContainer;const t=this._moreMenuItemsContainer=document.createElement("div");return t.setAttribute("data-group-order-hint",this._driver.getAppId()),t.innerHTML='<div class="J-Kh"></div>',(0,f.default)(e,t),t}_getMoreMenuItemElement(e){const t=document.createElement("div");return t.setAttribute("class","J-N inboxsdk__menuItem"),t.setAttribute("role","menuitem"),t.setAttribute("data-order-hint",String(e.orderHint||0)),t.innerHTML=['<div class="J-N-Jz" style="-webkit-user-select: none;">',e.iconUrl?'<img class="J-N-JX" src="'+(0,o.default)(e.iconUrl)+'" />':"",e.iconClass?'<span class="inboxsdk__icon J-N-JX '+(0,o.default)(e.iconClass)+'"></span>':"",(0,o.default)(e.title),"</div>"].join(""),t.addEventListener("mouseenter",(e=>t.classList.add("J-N-JT"))),t.addEventListener("mouseleave",(e=>t.classList.remove("J-N-JT"))),t.addEventListener("click",(t=>{e.onClick&&e.onClick({})})),t}destroy(){const e=this._element;this._threadViewDriver?this._element.removeAttribute("data-thread-toolbar"):this._rowListViewDriver&&this._element.removeAttribute("data-rowlist-toolbar"),this._clearMoreItems(),this._stopper.destroy(),this._updateButtonClasses(e)}});n.default=k},{"../../../../common/isElementVisible":479,"../../../constants/toolbars":491,"../../../lib/dom/insert-element-in-order":656,"../../../lib/dom/make-mutation-observer-stream":663,"../../../lib/logger":691,"../../../lib/stream-wait-for":701,"../../../widgets/buttons/basic-button-view-controller":742,"../../../widgets/buttons/dropdown-button-view-controller":743,"../gmail-element-getter":530,"../widgets/buttons/button-view":598,"../widgets/gmail-dropdown-view":606,"./gmail-row-list-view":588,"./gmail-thread-view":593,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159,"kefir-stopper":158,"lodash/escape":312,"lodash/uniq":358,ud:454}],596:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=r(e("kefir-bus")),s=r(e("../../../lib/dom/get-insert-before-element")),l=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),u=(r(e("../../../lib/dom/make-mutation-observer-stream")),r(e("../../../lib/dom/querySelectorOrFail"))),c=r(e("../../../../common/find-parent")),d=(r(e("../gmail-element-getter")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("./gmail-nav-item-view")));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.default=class{constructor(e,t,n){(0,i.default)(this,"_activeMarkerElement",null),(0,i.default)(this,"_isActive",!1),(0,i.default)(this,"_itemContainerElement",null),this._driver=e,this._element=t,this._eventStream=(0,a.default)(),this._elementBus=(0,a.default)(),this._elementStream=this._elementBus.toProperty((()=>this._element)),this._navItemName=n;const r=this._element.parentElement;r&&(0,l.default)(r,{childList:!0}).map((()=>r.querySelector(`.aim a[href*="#${this._navItemName}"]`))).filter(Boolean).map((e=>(0,c.default)(e,(e=>e.classList.contains("aim"))))).filter(Boolean).filter((e=>e!==this._element)).onValue((e=>{if(e){const t=this._itemContainerElement;t&&(t.remove(),this._itemContainerElement=null),this._elementBus.emit(e)}})),this._elementStream.onValue((e=>{this._element=e,this._monitorElementForActiveChanges(),this.setActive(this._isActive)}))}destroy(){this._element.classList.remove("inboxsdk__navItem_claimed"),this._eventStream.end(),this._elementBus.end(),this._activeMarkerElement&&this._activeMarkerElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}getElement(){return this._element}getEventStream(){return this._eventStream}addNavItem(e,t){const n=new d.default(this._driver,e,2);return o.default.merge([n.getEventStream().filter((e=>"orderChanged"===e.eventName)),this._elementStream]).onValue((()=>this._addNavItemElement(n))),n.setNavItemDescriptor(t),n}setActive(e){this._isActive=e;const t=(0,u.default)(this._element,".TO");e?(this._element.classList.add("ain"),t.classList.add("nZ"),t.classList.add("aiq")):(this._element.classList.remove("ain"),t.classList.remove("nZ"),t.classList.remove("aiq")),this._setHeights()}toggleCollapse(){this._toggleCollapse()}setCollapsed(e){localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]=e,this._element.querySelector(".inboxsdk__expando")&&(e?this._collapse():this._expand())}remove(){}_monitorElementForActiveChanges(){this._element.classList.add("inboxsdk__navItem_claimed");const e=this._element,t=(0,l.default)(e,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(this._eventStream.filter((()=>!1)).beforeEnd((()=>null))).toProperty((()=>[])).map((()=>e));t.filter((e=>e.classList.contains("ain"))).onValue((()=>this._createActiveMarkerElement())),t.filter((e=>!e.classList.contains("ain"))).onValue((()=>this._removeActiveMarkerElement()))}_addNavItemElement(e){const t=this._getItemContainerElement(),n=(0,s.default)(e.getElement(),t.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);t.insertBefore(e.getElement(),n);const r=e.getElement();(0,u.default)(r,".TN").style.marginLeft=(0,d.getLeftIndentationPaddingValue)()+"px",this._setHeights()}_getItemContainerElement(){let e=this._itemContainerElement;return e||(e=this._itemContainerElement=this._element.querySelector(".inboxsdk__navItem_container"),e||(e=this._createItemContainerElement(),this._createExpando())),e}_createItemContainerElement(){const e=this._itemContainerElement=document.createElement("div");return e.classList.add("inboxsdk__navItem_container"),this._element.appendChild(e),e}_createExpando(){const e=this._element.querySelector("a"),t=document.createElement("div");t.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),t.setAttribute("role","link"),t.title=`Expand ${e?e.title||e.textContent:""}`,t.addEventListener("click",(e=>{this._toggleCollapse(),e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()}),!0);const n=this._element.querySelector(".TN");n&&n.insertAdjacentElement("afterbegin",t),"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?this._collapse():this._expand()}_toggleCollapse(){this._element.querySelector(".inboxsdk__expando")?"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?this._expand():this._collapse():"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="expanded":localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="collapsed"}_collapse(){const e=(0,u.default)(this._element,".inboxsdk__expando");e.classList.remove("aih"),e.classList.add("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display="none"),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"collapsed"),this._eventStream.emit({eventName:"collapsed"}),this._setHeights()}_expand(){const e=(0,u.default)(this._element,".inboxsdk__expando");e.classList.add("aih"),e.classList.remove("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display=""),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"expanded"),this._eventStream.emit({eventName:"expanded"}),this._setHeights()}_isExpanded(){return!!this._element.querySelector(".inboxsdk__expando.aih")}_setHeights(){const e=(0,u.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";const t=this._element.clientHeight,n=e.clientHeight;this._element.style.height=n+"px",this._element.style.overflow="visible",this._element.style.marginBottom=t-n+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}_createActiveMarkerElement(){this._removeActiveMarkerElement();const e=this._activeMarkerElement=document.createElement("div");e.classList.add("inboxsdk__navItem_marker"),e.classList.add("ain"),e.innerHTML="&nbsp;",this._element.insertBefore(e,this._element.firstElementChild)}_removeActiveMarkerElement(){const e=this._activeMarkerElement;e&&(e.remove(),this._activeMarkerElement=null)}}},{"../../../../common/find-parent":473,"../../../lib/dom/get-insert-before-element":654,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/make-mutation-observer-stream":663,"../../../lib/dom/querySelectorOrFail":668,"../gmail-element-getter":530,"./gmail-nav-item-view":585,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156}],597:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={default:{INACTIVE_CLASS:"T-I-ax7",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-Kq"},flatIcon:{INACTIVE_CLASS:"J-Z-I",HOVER_CLASS:"J-Z-I-JW",ACTIVE_CLASS:"J-Z-I-KO"},pureIcon:{INACTIVE_CLASS:"inboxsdk__button_pureIcon_inactive",HOVER_CLASS:"inboxsdk__button_pureIcon_hover",ACTIVE_CLASS:"inboxsdk__button_pureIcon_active"},blue:{INACTIVE_CLASS:"T-I-atl",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},red:{INACTIVE_CLASS:"T-I-KE",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},green:{INACTIVE_CLASS:"inboxsdk__button_green_inactive",HOVER_CLASS:"inboxsdk__button_green_hover",ACTIVE_CLASS:"inboxsdk__button_green_active"}};n.default=r},{}],598:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/includes")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),s=r(e("kefir-bus")),l=r(e("../../../../lib/logger")),u=e("../../../../lib/dom/simulate-mouse-event"),c=r(e("../../../../lib/dom/keyboard-shortcut-stream")),d=r(e("./button-color-classes"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.default=class{constructor(e){(0,i.default)(this,"_element",document.createElement("div")),(0,i.default)(this,"_innerElement",document.createElement("div")),this._hasDropdown=!1,this._isEnabled=!1!==e.enabled,this._iconClass=e.iconClass,this._iconUrl=e.iconUrl,this._title=e.text||e.title,this._tooltip=e.tooltip||e.title,this._hasDropdown=!!e.hasDropdown,this._buttonColor=e.buttonColor||"default",this._keyboardShortcutHandle=e.keyboardShortcutHandle,this._createElement(e),this._eventStream=(0,s.default)(),this._setupEventStream(),this._setupAestheticEvents(),!1!==e.enabled&&this._setupKeyboardShortcutEvent()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){this.addClass(d.default[this._buttonColor].ACTIVE_CLASS),this.addClass(d.default[this._buttonColor].HOVER_CLASS)}deactivate(){this.removeClass(d.default[this._buttonColor].ACTIVE_CLASS),this.removeClass(d.default[this._buttonColor].HOVER_CLASS)}addClass(e){this._element.classList.add(e)}removeClass(e){this._element.classList.remove(e)}simulateHover(){(0,u.simulateHover)(this._element)}setEnabled(e){this._setEnabled(e)}isEnabled(){return this._isEnabled}update(e){e?("none"===this._element.style.display&&(this._element.style.display=""),e.buttonColor!=this._buttonColor&&this._buttonColor&&this._updateButtonColor(e.buttonColor),e.title!=this._title&&this._updateTitle(e.title),e.tooltip!=this._tooltip&&this._updateTooltip(e.tooltip),e.iconUrl!=this._iconUrl&&this._updateIconUrl(e.iconUrl),e.iconClass!=this._iconClass&&this._updateIconClass(e.iconClass),!1!==e.enabled&&!0!==e.enabled||this._setEnabled(e.enabled)):this._element.style.display="none"}_createElement(e){this._setupMainElement(e),this._setupInnerElement(e),this._createTextElement(),this._createIconElement()}_setupMainElement(e){this._element.setAttribute("class","T-I J-J5-Ji ar7 inboxsdk__button "+d.default[this._buttonColor].INACTIVE_CLASS),e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),e.hasButtonToRight&&this._element.classList.add("T-I-Js-IF"),e.hasButtonToLeft&&this._element.classList.add("T-I-Js-Gs"),(e.tooltip||e.title)&&this._element.setAttribute("data-tooltip",String(e.tooltip||e.title)),!1===e.enabled&&this._element.classList.add("inboxsdk__button_disabled")}_setupInnerElement(e){this._innerElement.classList.add("asa"),this._hasDropdown&&!e.noArrow&&(this._innerElement.innerHTML='<div class="G-asx T-I-J3 - J-J5-Ji">&nbsp;</div>'),this._element.appendChild(this._innerElement)}_createTextElement(){if(this._title)if(this._textElement=document.createElement("span"),this._textElement.setAttribute("class","inboxsdk__button_text"),this._textElement.textContent=this._title,this._iconElement){const e=this._iconElement.parentElement;if(!e)throw new Error("Could not find parent");e.insertBefore(this._textElement,this._iconElement.nextSibling)}else this._innerElement.insertBefore(this._textElement,this._innerElement.firstElementChild)}_createIconElement(){if(!this._iconClass&&!this._iconUrl)return;const e=this._iconElement=document.createElement("div");e.classList.add("inboxsdk__button_icon"),this._iconClass&&(e.innerHTML="&nbsp;",e.setAttribute("class","inboxsdk__button_icon "+this._iconClass)),this._iconUrl&&this._createIconImgElement(),this._innerElement.insertBefore(e,this._innerElement.firstElementChild)}_createIconImgElement(){this._iconElement||this._createIconElement();const e=this._iconElement;if(!e)throw new Error("Should not happen");""!==e.innerHTML&&(e.innerHTML="");const t=this._iconImgElement=document.createElement("img");t.classList.add("inboxsdk__button_iconImg"),this._iconUrl?t.src=this._iconUrl:l.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),e.appendChild(t)}_updateButtonColor(e){this._element.classList.remove(d.default[this._buttonColor].INACTIVE_CLASS),this._buttonColor=e,this._element.classList.add(d.default[this._buttonColor].INACTIVE_CLASS)}_updateTitle(e){!this._title&&e?(this._title=e,this._createTextElement()):this._title&&!e&&this._textElement?(this._textElement.remove(),this._textElement=void 0,this._title=e):this._textElement&&(this._textElement.textContent=e,this._title=e)}_updateTooltip(e){this._tooltip=e,e?this._element.setAttribute("data-tooltip",e):this._element.removeAttribute("data-tooltip")}_updateIconUrl(e){this._iconUrl=e,this._iconImgElement&&!e?(this._iconImgElement.remove(),this._iconImgElement=void 0):!this._iconImgElement&&e&&this._createIconImgElement(),this._iconImgElement&&e&&(this._iconImgElement.src=e)}_updateIconClass(e){!this._iconElement||e||this._iconUrl?!this._iconElement&&e&&this._createIconElement():(this._iconElement.remove(),this._iconElement=void 0),this._iconClass=e,this._iconElement&&this._iconElement.setAttribute("class","inboxsdk__button_icon "+(e||""))}_setEnabled(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}_setupEventStream(){const e=a.fromEvents(this._element,"click");e.onValue((function(e){e.stopPropagation(),e.preventDefault()})),this._eventStream.plug(e.filter((()=>this.isEnabled())).map((function(e){return{eventName:"click",domEvent:e}})));const t=a.fromEvents(this._element,"keydown").filter((()=>this.isEnabled())).filter((e=>(0,o.default)([32,13],e.which)));this._eventStream.plug(t.map((function(e){return{eventName:"click",domEvent:e}}))),t.onValue((function(e){e.stopPropagation(),e.preventDefault()}))}_setupKeyboardShortcutEvent(){const e=this._keyboardShortcutHandle;e&&this._eventStream.plug((0,c.default)(e.chord).takeUntilBy(this._eventStream.filter((function(e){return"enabledChanged"===e.eventName&&!1===e.isEnabled}))).map((function(e){return{eventName:"click",domEvent:e}})))}_setupAestheticEvents(){a.fromEvents(this._element,"mouseenter").filter((()=>this.isEnabled())).onValue((()=>{this._element.classList.add(d.default[this._buttonColor].HOVER_CLASS),this._element.classList.add("inboxsdk__button_hover")})),a.fromEvents(this._element,"mouseleave").onValue((()=>{this._element.classList.remove(d.default[this._buttonColor].HOVER_CLASS),this._element.classList.remove("inboxsdk__button_hover")})),a.fromEvents(this._element,"focus").onValue((()=>{this._element.classList.add("T-I-JO")})),a.fromEvents(this._element,"blur").onValue((()=>{this._element.classList.remove("T-I-JO")}))}}},{"../../../../lib/dom/keyboard-shortcut-stream":658,"../../../../lib/dom/simulate-mouse-event":674,"../../../../lib/logger":691,"./button-color-classes":597,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"lodash/includes":323}],599:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("kefir-bus")),s=r(e("kefir-stopper"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=class{constructor(){(0,i.default)(this,"_element",document.createElement("div")),(0,i.default)(this,"_eventStream",(0,a.default)()),(0,i.default)(this,"_stopper",(0,s.default)()),this._setupElement(),this._setupEventStream()}update(){}setEnabled(){throw new Error("not implemented")}destroy(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){const e=this._element.firstElementChild;e&&e.classList.add("aj1")}deactivate(){const e=this._element.firstElementChild;e&&e.classList.remove("aj1")}_setupElement(){this._element.setAttribute("class","nL aig"),this._element.setAttribute("style","left: 7px"),this._element.innerHTML=['<div class="pM aRw" style="display: inline-flex; margin-left: 16px;" role="button">','<div class="p6">','<div class="p8">▼</div>',"</div>","</div>"].join("")}_setupEventStream(){const e=o.fromEvents(this._element,"click");e.onValue((e=>{e.stopPropagation(),e.preventDefault()})),this._eventStream.plug(e.map((e=>({eventName:"click",domEvent:e}))))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158}],600:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("kefir-bus")),s=r(e("kefir-stopper"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=class{constructor(){(0,i.default)(this,"_element",document.createElement("div")),(0,i.default)(this,"_eventStream",(0,a.default)()),(0,i.default)(this,"_stopper",(0,s.default)()),this._setupElement(),this._setupEventStream()}activate(){const e=this._element.firstElementChild;e&&e.classList.add("aj1")}deactivate(){const e=this._element.firstElementChild;e&&e.classList.remove("aj1")}destroy(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}getElement(){return this._element}getEventStream(){return this._eventStream}setEnabled(){throw new Error("not implemented")}update(){}_setupElement(){this._element.setAttribute("class","Yh inboxsdk__navItem_parent_accessory_button"),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),this._element.setAttribute("type","button")}_setupEventStream(){const e=o.fromEvents(this._element,"click");e.onValue((e=>{e.stopPropagation(),e.preventDefault()})),this._eventStream.plug(e.map((e=>({eventName:"click",domEvent:e}))))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158}],601:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../../../lib/dom/generic-button-view"));class o extends i.default{constructor(){const e=document.createElement("div");e.setAttribute("class","aAE qi J-J5-Ji J-JN-M-I"),e.innerHTML='<div class="J-J5-Ji J-JN-M-I-JG">&nbsp;</div>',e.addEventListener("mouseenter",(function(){e.classList.add("J-JN-M-I-JW")})),e.addEventListener("mouseleave",(function(){e.classList.remove("J-JN-M-I-JW")})),super(e)}activate(){this.getElement().classList.add("J-JN-M-I-JO"),this.getElement().classList.add("J-JN-M-I-Kq")}deactivate(){this.getElement().classList.remove("J-JN-M-I-JO"),this.getElement().classList.remove("J-JN-M-I-Kq")}}n.default=o},{"../../../../lib/dom/generic-button-view":653,"@babel/runtime/helpers/interopRequireDefault":15}],602:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/includes")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),s=r(e("kefir-bus"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=class{constructor(e){(0,i.default)(this,"_element",document.createElement("button")),(0,i.default)(this,"_eventStream",(0,s.default)()),this._isEnabled=!1!==e.enabled,this._title=e.text||e.title,this._tooltip=e.tooltip||e.title,this._buttonColor=e.buttonColor||"default",this._createElement(e),this._eventStream=(0,s.default)(),this._setupEventStream()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}setEnabled(e){this._setEnabled(e)}update(){throw new Error("not implemented")}isEnabled(){return this._isEnabled}_createElement(e){e.isPrimary&&this._element.classList.add("J-at1-auR"),this._element.innerText=e.text||e.title||"",e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),(e.tooltip||e.title)&&this._element.setAttribute("data-tooltip",String(e.tooltip||e.title))}_setEnabled(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}))}_setupEventStream(){const e=a.fromEvents(this._element,"click");e.onValue((function(e){e.stopPropagation(),e.preventDefault()})),this._eventStream.plug(e.filter((()=>this.isEnabled())).map((function(e){return{eventName:"click",domEvent:e}})));const t=a.fromEvents(this._element,"keydown").filter((()=>this.isEnabled())).filter((e=>(0,o.default)([32,13],e.which)));this._eventStream.plug(t.map((function(e){return{eventName:"click",domEvent:e}}))),t.onValue((function(e){e.stopPropagation(),e.preventDefault()}))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"lodash/includes":323}],603:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../../../../lib/dom/generic-button-view"));class a extends o.default{constructor(){super(document.createElement("div")),(0,i.default)(this,"_isActive",!1);const e=this._element;e.setAttribute("class","nL aig");const t=document.createElement("div");t.setAttribute("class","pM aj0"),e.appendChild(t),e.addEventListener("click",(()=>{this._isActive=!0})),e.addEventListener("mouseenter",(()=>{t.classList.add("aj1")})),e.addEventListener("mouseleave",(()=>{this._isActive||t.classList.remove("aj1")}))}activate(){this.getElement().children[0].classList.add("aj1")}deactivate(){this.getElement().children[0].classList.remove("aj1"),this._isActive=!1}}n.default=a},{"../../../../lib/dom/generic-button-view":653,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],604:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("./create-parent-accessory-button-view"));class o extends i.default{constructor(){super(),this.getElement().style.backgroundImage="url(https://www.gstatic.com/images/icons/material/system_gm/2x/more_vert_black_20dp.png)"}}n.default=o},{"./create-parent-accessory-button-view":600,"@babel/runtime/helpers/interopRequireDefault":15}],605:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("lodash/isEqual")),a=r(e("../../../lib/dom/querySelectorOrFail"));var s=(0,i.defn)(t,class{constructor(){this._element=document.createElement("div"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.className="inboxsdk__gmail_action ",this._element.innerHTML="\n\t\t\t<div>\n\t\t\t</div>",this._actionDescriptor=null}getElement(){return this._element}updateDescriptor(e){e?(0,o.default)(this._actionDescriptor,e)||(this._updateTitle(e.title),this._element.className="inboxsdk__gmail_action "+(e.className||""),this._actionDescriptor=e):this._actionDescriptor=e}setOnClick(e){this._element.onclick=e}_updateTitle(e){this._actionDescriptor&&this._actionDescriptor.title===e||((0,a.default)(this._element,"div").textContent=e)}});n.default=s},{"../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isEqual":331,ud:454}],606:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../../lib/dom/block-and-reemit-keyboard-events"));n.default=class{constructor(){this._containerElement=document.createElement("div"),this._containerElement.setAttribute("class","inboxsdk__menu"),this._contentElement=document.createElement("div"),this._contentElement.setAttribute("class","inboxsdk__menuContent"),this._containerElement.appendChild(this._contentElement),(0,i.default)(this._containerElement)}destroy(){this._containerElement.remove()}getContainerElement(){return this._containerElement}getContentElement(){return this._contentElement}}},{"../../../lib/dom/block-and-reemit-keyboard-events":651,"@babel/runtime/helpers/interopRequireDefault":15}],607:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("lodash/isEqual")),a=r(e("../../../driver-common/update-icon")),s=r(e("../../../lib/dom/querySelectorOrFail"));var l=(0,i.defn)(t,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._element=document.createElement("div"),this._element.className="inboxsdk__gmail_label ar as "+(e.classes||[]).join(" "),this._element.innerHTML='\n\t\t\t<div class="at">\n\t\t\t\t<div class="au">\n\t\t\t\t\t<div class="av"></div>\n\t\t\t\t</div>\n\t\t\t</div>',this._labelDescriptor={},this._iconSettings={}}getElement(){return this._element}updateLabelDescriptor(e){this._handleNewLabelDescriptor(e)}_handleNewLabelDescriptor(e){e?(e=Object.assign({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)",maxWidth:"90px"},e),(0,o.default)(this._labelDescriptor,e)||((0,a.default)(this._iconSettings,(0,s.default)(this._element,".at"),!1,e.iconClass,e.iconUrl,void 0,e.iconHtml),e.iconClass||e.iconUrl||e.iconHtml?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(e.backgroundColor),this._updateForegroundColor(e.foregroundColor),this._updateIconBackgroundColor(e.iconBackgroundColor),this._updateTitle(e.title,e.titleHtml),this._updateTextMaxWidth(e.maxWidth),this._labelDescriptor=e)):this._labelDescriptor={}}_updateTextMaxWidth(e){if(this._labelDescriptor.maxWidth===e)return;const t=this._element.querySelector(".av");t&&(t.style.maxWidth=e)}_updateBackgroundColor(e){if(this._labelDescriptor.backgroundColor===e)return;const t=(0,s.default)(this._element,".at");t.style.backgroundColor=e,t.style.borderColor=e,(0,s.default)(this._element,".au").style.borderColor=e}_updateForegroundColor(e){this._labelDescriptor.foregroundColor!==e&&((0,s.default)(this._element,".at").style.color=e)}_updateIconBackgroundColor(e){const t=this.getElement().querySelector(".inboxsdk__button_icon");t&&(t.style.backgroundColor=e||"")}_updateTitle(e,t){if(this._labelDescriptor.title===e&&this._labelDescriptor.titleHtml===t)return;if(t)return void((0,s.default)(this._element,".au").innerHTML=t||"");let n;try{n=(0,s.default)(this._element,".av")}catch(e){const t=(0,s.default)(this._element,".au");t.innerHTML="",n=document.createElement("div"),n.setAttribute("class","av"),t.appendChild(n)}n.textContent=e,this._element.children[0].setAttribute("data-tooltip",e)}});n.default=l},{"../../../driver-common/update-icon":642,"../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isEqual":331,ud:454}],608:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/sortBy")),o=r(e("kefir-bus")),a=r(e("./buttons/modal-button-view")),s=r(e("../../../widgets/buttons/basic-button-view-controller")),l=r(e("../../../lib/dom/querySelectorOrFail"));var u=class{constructor(e){this._setupModalContainerElement(e),this._processOptions(e),this._eventStream=(0,o.default)(),this._setupEventStream()}destroy(){this._modalContainerElement.remove(),this._eventStream.end()}getModalContainerElement(){return this._modalContainerElement}getEventStream(){return this._eventStream}_processOptions(e){this.setTitle(e.title),this.setContentElement(e.el),this.setButtons(e.buttons||[]),this.setChromeClass(e.chrome,e.showCloseButton,(e.buttons||[]).length>0)}setTitle(e){const t=(0,l.default)(this._modalContainerElement,"[role=heading]");e?(t.style.display="",t.textContent=e):t.style.display="none"}setContentElement(e){const t=(0,l.default)(this._modalContainerElement,".inboxsdk__modal_content");t.innerHTML="","string"==typeof e?t.innerHTML=e:e instanceof Element&&t.appendChild(e)}setButtons(e){const t=(0,l.default)(this._modalContainerElement,".inboxsdk__modal_buttons");t.innerHTML="",0===e.length?(t.style.display="none",this._modalContainerElement.classList.add("inboxsdk__modal_content_no_buttons")):(t.style.display="",this._modalContainerElement.classList.remove("inboxsdk__modal_content_no_buttons")),(0,i.default)(e,(e=>e.orderHint||0)).forEach(this._addButton.bind(this,t))}setChromeClass(e,t,n){this._modalContainerElement.classList.remove("inboxsdk__modal_hideSides"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideTop"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideBottom"),!1===e&&(this._modalContainerElement.classList.add("inboxsdk__modal_hideSides"),t||this._modalContainerElement.classList.add("inboxsdk__modal_hideTop"),n||this._modalContainerElement.classList.add("inboxsdk__modal_hideBottom"))}_setupModalContainerElement(e){const t=e.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var n=`\n    <div class="Kj-JD inboxsdk__modal_container" tabindex="0" role="alertdialog">\n      <div class="Kj-JD-K7 Kj-JD-K7-GIHV4 inboxsdk__modal_toprow ${t}">\n        <span class="Kj-JD-K7-K0" role="heading"></span>\n        <span class="Kj-JD-K7-Jq inboxsdk__modal_close" tabindex="0" role="button"></span>\n      </div>\n      <div class="Kj-JD-Jz inboxsdk__modal_content">\n      </div>\n      <div class="Kj-JD-Jl inboxsdk__modal_buttons"></div>\n    </div>\n    `;this._modalContainerElement.innerHTML=n}_addButton(e,t){const n={...t};["blue","red","green"].includes(t.color)&&t.color;n.isPrimary="PRIMARY_ACTION"===t.type;const r=new a.default(n);n.buttonView=r;new s.default(n);"PRIMARY_ACTION"===t.type?e.insertBefore(r.getElement(),e.firstElementChild):e.appendChild(r.getElement())}_setupEventStream(){(0,l.default)(this._modalContainerElement,".inboxsdk__modal_close").addEventListener("click",(e=>{this._eventStream.emit({eventName:"closeClick",domEvent:e})}))}};n.default=u},{"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/basic-button-view-controller":742,"./buttons/modal-button-view":602,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-bus":156,"lodash/sortBy":349}],609:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/last")),a=e("ud"),s=r(e("kefir")),l=r(e("kefir-bus")),u=r(e("kefir-stopper")),c=r(e("../../../lib/stream-wait-for")),d=r(e("../../../lib/dom/querySelectorOrFail")),f=r(e("../../../../common/find-parent")),p=r(e("../gmail-element-getter")),h=r(e("../is-compose-titlebar-light-color"));var m=(0,a.defn)(t,class{constructor(e,t){if((0,i.default)(this,"_eventStream",(0,l.default)()),(0,i.default)(this,"_stopper",(0,u.default)()),this._driver=e,this._element=Object.assign(document.createElement("div"),{className:"inboxsdk__mole_view "+(t.className||""),innerHTML:_(t)}),!1===t.chrome)this._element.classList.add("inboxsdk__mole_view_chromeless");else{(0,d.default)(this._element,".inboxsdk__mole_view_titlebar").addEventListener("click",(e=>{this.setMinimized(!this.getMinimized()),e.preventDefault(),e.stopPropagation()}));(0,d.default)(this._element,".Hl").addEventListener("click",(e=>{this.setMinimized(!0),e.preventDefault(),e.stopPropagation()}));(0,d.default)(this._element,".Hk").addEventListener("click",(e=>{this.setMinimized(!1),e.preventDefault(),e.stopPropagation()}));(0,d.default)(this._element,".Ha").addEventListener("click",(e=>{this.destroy(),e.preventDefault(),e.stopPropagation()})),t.titleEl?this._setTitleEl(t.titleEl):this.setTitle(t.title||""),t.minimizedTitleEl&&this._setMinimizedTitleEl(t.minimizedTitleEl);const e=t.titleButtons;if(e){const t=(0,d.default)(this._element,".inboxsdk__mole_title_buttons"),n=t.lastElementChild;e.forEach((e=>{const r=document.createElement("img");e.iconClass&&(r.className=e.iconClass),r.setAttribute("data-tooltip",e.title),r.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.onClick.call(null)})),r.src=e.iconUrl,t.insertBefore(r,n)}))}}(0,d.default)(this._element,".inboxsdk__mole_view_content").appendChild(t.el)}show(){const e=e=>{e.insertBefore(this._element,(0,o.default)(e.children));const t=(0,f.default)(e,(e=>"DIV"===e.nodeName&&e.classList.contains("dw")));t&&t.classList.add("inboxsdk__moles_in_use")},t=p.default.getMoleParent();if(t)e(t);else{const t=(0,c.default)((()=>p.default.getMoleParent())).takeUntilBy(this._stopper).onValue(e);s.default.fromPromise(p.default.waitForGmailModeToSettle()).flatMap((()=>this._driver.delayToTimeAfterReady(1e4))).takeUntilBy(t).takeUntilBy(this._stopper).onValue((()=>{this._driver.getLogger().eventSdkActive("mole parent force load"),this._driver.openNewComposeViewDriver().then((e=>{e.close()}))}))}}setMinimized(e){if(e)this._element.classList.add("inboxsdk__minimized"),this._eventStream.emit({eventName:"minimize"});else{this._element.classList.remove("inboxsdk__minimized");const e=this._element.parentElement;e&&this._element.getBoundingClientRect().left<0&&e.insertBefore(this._element,(0,o.default)(e.children)),this._eventStream.emit({eventName:"restore"})}}getMinimized(){return this._element.classList.contains("inboxsdk__minimized")}setTitle(e){const t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");t&&(t.textContent=e)}_setTitleEl(e){const t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");t&&(t.textContent="",t.appendChild(e))}_setMinimizedTitleEl(e){const t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_minimized");t&&(this._element.classList.add("inboxsdk__mole_use_minimize_title"),t.textContent="",t.appendChild(e))}getEventStream(){return this._eventStream}destroy(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}});function _(e){const t=!(0,h.default)();return`\n    <div class="inboxsdk__mole_view_inner ${t?"inboxsdk__original_view":""}">\n      ${function(e){if(!1===e.chrome)return"";{const e=!(0,h.default)();return`\n      <div class="inboxsdk__mole_view_titlebar${e?" inboxsdk__original_view":""}">\n        <div class="inboxsdk__mole_title_buttons${e?" inboxsdk__original_view":""}">\n          <img class="Hl" src="images/cleardot.gif" alt="Minimize" aria-label="Minimize" data-tooltip-delay="800" data-tooltip="Minimize"><img class="Hk" id=":rp" src="images/cleardot.gif" alt="Minimize" aria-label="Maximize" data-tooltip-delay="800" data-tooltip="Maximize">\x3c!--<img class="Hq aUG" src="images/cleardot.gif" alt="Pop-out" aria-label="Full-screen (Shift for Pop-out)" data-tooltip-delay="800" data-tooltip="Full-screen (Shift for Pop-out)">--\x3e<img class="Ha" src="images/cleardot.gif" alt="Close" aria-label="Close" data-tooltip-delay="800" data-tooltip="Close">\n        </div>\n        <h2 class="inboxsdk__mole_default"></h2>\n        <h2 class="inboxsdk__mole_minimized"></h2>\n      </div>`}}(e)}\n      <div class="inboxsdk__mole_view_content ${t?"inboxsdk__original_view":""}"></div>\n    </div>\n  `}n.default=m},{"../../../../common/find-parent":473,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/stream-wait-for":701,"../gmail-element-getter":530,"../is-compose-titlebar-light-color":536,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/last":341,ud:454}],610:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/sortBy")),a=r(e("lodash/escape")),s=r(e("asap")),l=(r(e("kefir")),r(e("kefir-bus"))),u=r(e("kefir-stopper")),c=r(e("../../../lib/dom/querySelectorOrFail")),d=r(e("./buttons/button-view")),f=r(e("../../../widgets/buttons/basic-button-view-controller"));n.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,"_eventStream",(0,l.default)()),(0,i.default)(this,"_stopper",(0,u.default)()),this._setupElement(e)}destroy(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}getElement(){return this._element}getStopper(){return this._stopper}getEventStream(){return this._eventStream}anchor(e,t){if(e&&this._element){var n,r=e.getBoundingClientRect(),i=this._element.getBoundingClientRect();if(t&&t.position)switch(t.position){case"top":n={type:"top",value:this._getTopPositionBoundingBox(r,i)};break;case"bottom":n={type:"bottom",value:this._getBottomPositionBoundingBox(r,i)}}n||(n=this._getAutomaticPlacementBoundingBox(r,i));var o=this._containBoundingBox(n.value,t&&t.offset);this._setPositionAtBoundingBox(o),this._setArrowPosition(n.type,o,r)}}getContainerElement(){return this._element}getContentElement(){return(0,c.default)(this._element,".aRM")}close(){this.destroy()}_setupElement(e){if(this._element=document.createElement("div"),this._element.setAttribute("class","inboxsdk__tooltip"),e.el){let t='<div class="T-P aRL">\n\t\t\t\t\t\t<div class="T-P-Jz-UR">\n\t\t\t\t\t\t\t<div class="aRM" tabindex="0">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">\n\t\t\t\t\t\t\t<div class="T-P-atD"></div>\n\t\t\t\t\t\t\t<div class="T-P-atC"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>';this._element.innerHTML=t,this._element.classList.add("inboxdk__tooltip_content"),(0,c.default)(this._element,".aRM").appendChild(e.el)}else{let t=['<div class="T-P aRL">','<div class="T-P-Jz-UR">','<div class="aRM" tabindex="0">','<div class="aVn inboxsdk__tooltip_image">',"</div>",'<div class="aRR">',(0,a.default)(e.title||""),"</div>",'<div class="aRQ">',(0,a.default)(e.subtitle||""),"</div>",'<div class="inboxsdk__tooltip_button">',"</div>","</div>","</div>",'<div class="T-P-aut-UR T-P-aut inboxsdk__tooltip_close" aria-label="Close" role="button"></div>','<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">','<div class="T-P-atD"></div>','<div class="T-P-atC"></div>',"</div>","</div>"].join("");this._element.innerHTML=t;let n=this._element.querySelector(".inboxsdk__tooltip_close");if(n&&n.addEventListener("click",(e=>{this.destroy()})),e.imageUrl){const t=document.createElement("img");t.src=e.imageUrl,(0,c.default)(this._element,".inboxsdk__tooltip_image").appendChild(t),t.addEventListener("load",(e=>{(0,s.default)((()=>{this._eventStream.emit({eventName:"imageLoaded"})}))}))}if(e.button){const t=Object.assign({},e.button);t.buttonColor="blue";const n=t.onClick;t.onClick=()=>{this.destroy(),n&&n()},t.buttonView=new d.default(t);new f.default(t);(0,c.default)(this._element,".inboxsdk__tooltip_button").appendChild(t.buttonView.getElement())}}}_getAutomaticPlacementBoundingBox(e,t){var n=[{type:"top",value:this._getTopPositionBoundingBox(e,t)},{type:"left",value:this._getLeftPositionBoundingBox(e,t)},{type:"right",value:this._getRightPositionBoundingBox(e,t)},{type:"bottom",value:this._getBottomPositionBoundingBox(e,t)}];return this._figureOutBestBoundingBox(n)}_getTopPositionBoundingBox(e,t){var n=e.top-t.height-9,r=e.left+e.width/2-t.width/2;return[{x:r,y:n},{x:r+t.width,y:n+t.height}]}_getRightPositionBoundingBox(e,t){var n=e.right+9,r=e.top+e.height/2-t.height/2;return[{x:n,y:r},{x:n+t.width,y:r+t.height}]}_getBottomPositionBoundingBox(e,t){var n=e.bottom+9,r=e.left+e.width/2-t.width/2;return[{x:r,y:n},{x:r+t.width,y:n+t.height}]}_getLeftPositionBoundingBox(e,t){var n=e.left-9-t.width,r=e.top+e.height/2-t.height/2;return[{x:n,y:r},{x:n+t.width,y:r+t.height}]}_figureOutBestBoundingBox(e){for(var t=0;t<e.length;t++)e[t].smallestDistance=this._getSmallestDistance(e[t]);return(0,o.default)(e,(function(e){return e.smallestDistance})).reverse()[0]}_getSmallestDistance(e){var t=[e.value[0].y,e.value[0].x,document.body.clientWidth-e.value[1].x,document.body.clientHeight-e.value[1].y];return(0,o.default)(t,(function(e){return e}))[0]}_containBoundingBox(e,t){var n=e[1].y-e[0].y,r=e[1].x-e[0].x;return e[0].y<-1?(e[0].y=0,e[1].y=e[0].y+n):e[1].y>document.body.clientHeight&&(e[0].y=document.body.clientHeight-n,e[1].y=e[0].y+n),e[0].x<-1?(e[0].x=0,e[1].x=e[0].x+r):e[1].x>document.body.clientWidth&&(e[0].x=document.body.clientWidth-r-20,e[1].x=e[0].x+r),t&&(t.left&&(e[0].x+=t.left,e[1].x+=t.left),t.top&&(e[0].y+=t.top,e[1].y+=t.top)),e}_setPositionAtBoundingBox(e){this._element.style.left=e[0].x+"px",this._element.style.top=e[0].y+"px"}_setArrowPosition(e,t,n){var r={};switch(e){case"top":r.top=t[1].y,r.left=n.left+n.width/2;break;case"left":r.top=(t[0].y+t[1].y)/2-9,r.left=t[1].x;break;case"right":r.top=(t[0].y+t[1].y)/2-9,r.left=t[0].x-9+1;break;case"bottom":r.top=t[0].y-9+1,r.left=(t[0].x+t[1].x)/2}const i=(0,c.default)(this._element,".inboxsdk__tooltip_arrow");i.style.left=r.left+"px",i.style.top=r.top+"px"}}},{"../../../lib/dom/querySelectorOrFail":668,"../../../widgets/buttons/basic-button-view-controller":742,"./buttons/button-view":598,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/escape":312,"lodash/sortBy":349}],611:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("kefir-bus")),o=r(e("../../../lib/fake-window-resize"));n.default=class{constructor(e){this._eventStream=(0,i.default)();const n=t.ResizeObserver;n&&(this._resizeObserver=new n((()=>{this.setTopMessageBarHeight()}))),e.takeUntilBy(this._eventStream.filter((()=>!1)).beforeEnd((()=>null))).onValue((e=>{if(e){if(e){var t=this._element;t||((t=this._element=document.createElement("div")).classList.add("inboxsdk__topMessageBar"),document.body.insertBefore(t,document.body.firstChild),document.body.classList.add("inboxsdk__hasTopMessageBar"),(0,o.default)()),e.el!==t.children[0]&&(t.innerHTML="",e.el&&(t.appendChild(e.el),this._resizeObserver&&this._resizeObserver.observe(t),this.setTopMessageBarHeight()))}}else this._element&&(this._element.remove(),this._element=null)}))}destroy(){this._element&&(this._element.remove(),this._element=null),this._eventStream.end(),this._resizeObserver&&this._resizeObserver.disconnect(),0===document.querySelectorAll(".inboxsdk__topMessageBar").length?document.body.classList.remove("inboxsdk__hasTopMessageBar"):this.setTopMessageBarHeight(),(0,o.default)()}getEventStream(){return this._eventStream}remove(){this.destroy()}setTopMessageBarHeight(){const e=[...document.querySelectorAll(".inboxsdk__topMessageBar")].reduce(((e,t)=>e+t.offsetHeight),0);document.body.style.setProperty("--inboxsdk__topMessageBar-height",`${e}px`)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../lib/fake-window-resize":677,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-bus":156}],612:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){let n=null;const r=e.getBCCRow(),a=(0,i.default)();return t.takeUntilBy(e.getStopper()).takeUntilBy(a).onValue((e=>{n&&(n.remove(),n=null),e&&(n=o(e),r.insertAdjacentElement("afterend",n))})),a.merge(e.getStopper()).take(1).onValue((()=>{n&&(n.remove(),n=null)})),()=>{a.destroy()}};r(e("closest-ng")),r(e("kefir"));var i=r(e("kefir-stopper"));const o=e=>{let{labelText:t,el:n}=e;const r=document.createElement("div"),i=document.createElement("span"),o=document.createElement("div");return r.classList.add("inboxsdk__recipient_row"),i.classList.add("inboxsdk__recipient_label"),o.classList.add("inboxsdk__recipient_content"),t&&(i.textContent=t,r.appendChild(i)),n&&(o.appendChild(n),r.appendChild(o)),r}},{"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,kefir:159,"kefir-stopper":158}],613:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=new o.default("compose");t.run("tabindex",(()=>{if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")}));const n=t.run("message id",(()=>{const t=/msg-[^:]+:[^:\d]*\d+/.exec(e.getAttribute("data-msg-id")||"");if(!t)throw new Error("message id regex failed");return t[0]})),r=t.run("heading",(()=>{const t=e.querySelector("div[role=heading]");if(!t)throw new Error("failed to find heading");return t})),s=e.querySelector("div[role=heading] ~ div:not(:empty)"),l=e.querySelector('div[jsaction$=".message_toggle_collapse"]'),u=null!=s&&(null==l||"heading"===l.getAttribute("role")),c=u?"EXPANDED":null!=s?"COLLAPSED":"HIDDEN",d=u&&r&&!r.querySelector("span[email]"),f=!d&&r&&s?t.run("sender",(()=>(0,a.default)(r,"[email]:first-child"))):null,p=d?null:e.querySelectorAll("[role=heading] [email]:not(:first-child), [role=heading] + div [email]"),h=d||!s||"EXPANDED"!==c?null:t.run("attachments area",(()=>{const e=(0,i.default)(s.parentElement.querySelectorAll("section:last-child"));if(!e)throw new Error("element not found");return e})),m={heading:r,body:s,sender:f,toggleCollapse:l,attachmentsArea:h},_=1-t.errorCount()/t.runCount();return{elements:m,attributes:{loaded:u,viewState:c,inboxMessageId:n,recipientElements:p,isDraft:d},score:_,errors:t.getErrorLogs()}};var i=r(e("lodash/last")),o=r(e("../../../../lib/ErrorCollector")),a=r(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":643,"../../../../lib/dom/querySelectorOne":667,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/last":341}],614:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=new i.default("thread"),n=!e.hasAttribute("aria-multiselectable");t.run("tabindex",(()=>{if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")}));const r=t.run("thread id",(()=>{const t=/thread-[^:]+:[^:\d]*(\d+)/.exec(e.getAttribute("data-item-id")||"");if(!t)throw new Error("thread id regex failed");return t[0]})),a=t.run("heading",(()=>e.querySelector("div[role=heading]"))),s=a?t.run("stickyHeading",(()=>{const e=a.firstElementChild;if(e instanceof HTMLDivElement)return e;throw new Error("child missing")})):null,l=s?t.run("toolbar",(()=>(0,o.default)(s,"ul"))):null,u=t.run("list",(()=>e.querySelector("div[role=list]"))),c={heading:a,stickyHeading:s,toolbar:l,list:u},d=1-t.errorCount()/t.runCount();return{elements:c,attributes:{inBundle:n,inboxThreadId:r},score:d,errors:t.getErrorLogs()}};var i=r(e("../../../../lib/ErrorCollector")),o=r(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":643,"../../../../lib/dom/querySelectorOne":667,"@babel/runtime/helpers/interopRequireDefault":15}],615:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/difference")),o=r(e("lodash/once")),a=r(e("lodash/flatMap")),s=r(e("lodash/last")),l=r(e("transducers.js")),u=r(e("postcss-selector-parser")),c=r(e("../../lib/logger")),d=r(e("../../lib/dom/querySelectorOrFail"));const f=(0,u.default)();var p=(0,o.default)((()=>{const e=Array.from((0,d.default)(document,"[role=application]").classList).map((e=>new RegExp("\\."+e+"\\b")));if(0===e.length)throw new Error("no class names on element");const t=l.default.toArray(Array.prototype.slice.call(document.styleSheets),l.default.compose(l.default.filter((e=>{try{return e.cssRules&&e.cssRules.length}catch(e){return!1}})),l.default.mapcat((e=>Array.prototype.slice.call(e.cssRules||[]))),l.default.mapcat(h),l.default.filter((t=>e.some((e=>e.test(t.selectorText))))),l.default.filter((e=>e.style["margin-left"]&&e.style["margin-right"])))),n=l.default.toArray(Array.prototype.slice.call(t),l.default.compose(l.default.filter((e=>parseFloat(e.style["margin-left"])>parseFloat(e.style["margin-right"]))),l.default.take(1)))[0],r=l.default.toArray(Array.prototype.slice.call(t),l.default.compose(l.default.filter((e=>parseFloat(e.style["margin-left"])<parseFloat(e.style["margin-right"]))),l.default.take(1)))[0];if(!n||!r){const e=new Error("Failed to parse element CSS rules");throw c.default.error(e,{rulesCount:t.length,hasOnlyNavSidebarRule:!!n,hasOnlyChatSidebarRule:!!r}),e}function o(e){switch(e.type){case"root":case"selector":return(0,a.default)(e.nodes,o);case"class":return[e.value];default:return[]}}const u=o(f.process(n.selectorText).res),p=o(f.process(r.selectorText).res),m=(0,i.default)(p,u),_=(0,i.default)(u,p),b=(0,s.default)(u)===(0,s.default)(p)?(0,s.default)(u):null;return 1===m.length&&1===_.length&&b||c.default.error(new Error("Failed to find sidebar classnames"),{onlyNavSidebarRuleClassNames:u,onlyChatSidebarRuleClassNames:p,chatSidebarClassNames:m,navSidebarClassNames:_,centerListClassName:b}),{chat:m[0],nav:_[0],centerList:b}}));function h(e){return e instanceof window.CSSMediaRule?(0,a.default)(e.cssRules,h):e instanceof window.CSSStyleRule?[e]:[]}n.default=p},{"../../lib/dom/querySelectorOrFail":668,"../../lib/logger":691,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/difference":310,"lodash/flatMap":317,"lodash/last":341,"lodash/once":346,"postcss-selector-parser":377,"transducers.js":452}],616:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("lodash/isEqual")),a=r(e("../../../driver-common/update-icon")),s=r(e("../../../lib/dom/querySelectorOrFail"));var l=(0,i.defn)(t,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._element=document.createElement("div"),this._element.className="inboxsdk__inbox_thread_row_label "+(e.classes||[]).join(" "),this._element.innerHTML="<span></span>",this._labelDescriptor={},this._iconSettings={}}getElement(){return this._element}updateLabelDescriptor(e){this._handleNewLabelDescriptor(e)}_handleNewLabelDescriptor(e){e?(e=Object.assign({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)"},e),(0,o.default)(this._labelDescriptor,e)||((0,a.default)(this._iconSettings,this._element,!1,e.iconClass,e.iconUrl),e.iconClass||e.iconUrl?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(e.backgroundColor),this._updateForegroundColor(e.foregroundColor),this._updateIconBackgroundColor(e.iconBackgroundColor),this._updateTitle(e.title),this._labelDescriptor=e)):this._labelDescriptor={}}_updateBackgroundColor(e){this._labelDescriptor.backgroundColor!==e&&(this._element.style.backgroundColor=e)}_updateForegroundColor(e){this._labelDescriptor.foregroundColor!==e&&(this._element.style.color=e)}_updateIconBackgroundColor(e){const t=this.getElement().querySelector(".inboxsdk__button_icon");t&&(t.style.backgroundColor=e||"")}_updateTitle(e){this._labelDescriptor.title!==e&&((0,s.default)(this._element,"span").textContent=e)}});n.default=l},{"../../../driver-common/update-icon":642,"../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isEqual":331,ud:454}],617:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("lodash/includes")),s=r(e("kefir")),l=r(e("kefir-stopper")),u=r(e("../../../lib/from-event-target-capture")),c=r(e("../../../widgets/buttons/dropdown-view")),d=r(e("./inbox-dropdown-view")),f=r(e("../../../lib/dom/insert-element-in-order"));let p=0;var h=(0,o.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_stopper",(0,l.default)());const r=this._buttonEl=document.createElement("li");r.setAttribute("role","button"),r.setAttribute("data-insertion-order-hint",String(p++)),r.setAttribute("data-group-order-hint",t),r.tabIndex=0,r.className="inboxsdk__button_icon";const o=document.createElement("img");o.className="inboxsdk__button_iconImg";let h=e=>{},m=!1,_=null;s.default.merge([s.default.fromEvents(r,"click"),(0,u.default)(r,"keyup").filter((e=>(0,a.default)([32,13],e.which)))]).onValue((e=>{if(e.preventDefault(),e.stopPropagation(),m){if(_)return void _.close();this._buttonEl.classList.add("inboxsdk__active"),_=new c.default(new d.default,r),_.setPlacementOptions({position:"bottom",hAlign:"right",vAlign:"top",buffer:10}),_.on("destroy",(()=>{this._buttonEl.classList.remove("inboxsdk__active"),_=null}))}h({dropdown:_})}));let b=null;{m=e.hasDropdown,r.title=e.title,r.className="inboxsdk__button_icon "+(e.iconClass||""),h=e.onClick,e.iconUrl?(o.src=e.iconUrl,r.appendChild(o)):o.remove();const t=e.orderHint||0;b!==t&&(b=t,r.setAttribute("data-order-hint",String(t)),(0,f.default)(n,r,void 0,!0))}this._stopper.onValue((()=>{r.remove(),_&&_.close()}))}destroy(){this._stopper.destroy()}getStopper(){return this._stopper}});n.default=h},{"../../../lib/dom/insert-element-in-order":656,"../../../lib/from-event-target-capture":678,"../../../widgets/buttons/dropdown-view":744,"./inbox-dropdown-view":624,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158,"lodash/includes":323,ud:454}],618:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/includes")),a=e("ud"),s=r(e("auto-html")),l=r(e("kefir")),u=(r(e("kefir-bus")),r(e("kefir-stopper"))),c=r(e("../../../../common/find-parent")),d=r(e("../../../lib/dom/querySelectorOrFail"));var f=(0,a.defn)(t,class{constructor(e,t){(0,i.default)(this,"_stopper",(0,u.default)()),(0,i.default)(this,"_previewClicks",l.default.pool()),(0,i.default)(this,"_addedButtonDescriptors",[]),(0,i.default)(this,"_overlayView",null),this._driver=t,e.element?(this._element=e.element,this._p=e.parsed,this._type=e.parsed.attributes.type,l.default.merge([l.default.fromEvents(this._element,"click"),l.default.fromEvents(this._element,"keydown")]).takeUntilBy(this._stopper).onValue((()=>{this._driver.setLastInteractedAttachmentCardView(this)}))):(this._type="CUSTOM",this._createNewElement(e)),this._messageViewDriver=this._findMessageView(),this._messageViewDriver&&this._messageViewDriver.addAttachmentCardViewDriver(this)}destroy(){this._p||this._element.remove(),this._stopper.destroy()}_findMessageView(){const e=this._driver.getMessageViewElementsMap(),t=(0,c.default)(this._element,(t=>e.has(t)));return t?e.get(t):null}_createNewElement(e){e.previewUrl?(this._element=document.createElement("a"),this._element.href=e.previewUrl):(this._element=document.createElement("div"),this._element.tabIndex=0),this._element.title=e.title;const t=e=>{e.previewThumbnailUrl?(this._element.className="inboxsdk__attachment_card inboxsdk__attachment_card_with_preview",this._element.innerHTML=s.default`
          <img alt="" aria-hidden="true"
            style="width: 100%"
            src="${e.previewThumbnailUrl}"
            >
          <div class="inboxsdk__attachment_card_hover_overlay">
            <div class="inboxsdk__attachment_card_title">${e.title}</div>
            <div class="inboxsdk__attachment_card_buttons"></div>
          </div>
        `,e.failoverPreviewIconUrl&&l.default.fromEvents((0,d.default)(this._element,"img"),"error").take(1).takeUntilBy(this._stopper).onValue((()=>{t({...e,previewThumbnailUrl:null,iconThumbnailUrl:e.failoverPreviewIconUrl})}))):(this._element.className="inboxsdk__attachment_card",this._element.innerHTML=s.default`
          <div class="inboxsdk__attachment_card_nohover">
            <div class="inboxsdk__attachment_card_title">${e.title}</div>
            <div class="inboxsdk__attachment_card_description">
              <img alt="" aria-hidden="true" src="${e.fileIconImageUrl}">
              <span>${e.description||""}</span>
            </div>
          </div>
          <div class="inboxsdk__attachment_card_hover_overlay">
            <div class="inboxsdk__attachment_card_title">${e.title}</div>
            <div class="inboxsdk__attachment_card_buttons"></div>
          </div>
        `),e.buttons.forEach((e=>{this.addButton(e)}))};t(e),this._previewClicks.plug(l.default.merge([l.default.fromEvents(this._element,"click"),l.default.fromEvents(this._element,"keypress").filter((e=>(0,o.default)([32,13],e.which)))])),e.container.appendChild(this._element)}getElement(){return this._element}getMessageViewDriver(){return this._messageViewDriver}getStopper(){return this._stopper}getPreviewClicks(){return this._previewClicks.takeUntilBy(this._stopper)}getAttachmentType(){return this._type}getAddedButtonDescriptors(){return this._addedButtonDescriptors}addButton(e){if(this._addedButtonDescriptors.push(e),!this._p){const t=(0,d.default)(this._element,".inboxsdk__attachment_card_buttons"),n=document.createElement("button");n.className="inboxsdk__attachment_card_button",e.downloadUrl?(n.setAttribute("data-inboxsdk-download-url",e.downloadUrl),n.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault();let n=!1;if(e.onClick&&e.onClick({preventDefault(){n=!0}}),n)return;const r=document.createElement("a");r.href=e.downloadUrl,e.downloadFilename&&(r.download=e.downloadFilename),r.addEventListener("click",(function(e){e.stopPropagation()}),!0),e.openInNewTab&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),r.remove()})),n.innerHTML='\n          <div style="background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYElEQVQ4y+2UMQ6AQAgEwfhQnnJP4adjc4UxB0ehhXqbULE7BRAUkLu1yQP6OXQveEab1DXTD0O9b53kIui+QReicnJ5lM2gArQA2LLcDCqAXYA2y1SgZ7BV/Lr+6TugB0K2GxxDXjEZAAAAAElFTkSuQmCC)"></div>\n        '):(n.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),e.onClick&&e.onClick({getDownloadURL(){throw new Error("not implemented for artificial sdk-added cardViews!")}})})),n.innerHTML=s.default`
          <img src="${e.iconUrl}">
        `,n.title=e.tooltip),t.appendChild(n)}}getTitle(){return this._element.title}async getDownloadURL(){const e=this._overlayView;if(!e)throw new Error("This method only works during a button onClick callback in Inbox");return e.getDownloadURL()}setOverlay(e){this._overlayView=e}});n.default=f},{"../../../../common/find-parent":473,"../../../lib/dom/querySelectorOrFail":668,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/includes":323,ud:454}],619:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("kefir")),s=r(e("kefir-bus")),l=r(e("kefir-stopper"));var u=(0,o.defn)(t,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;(0,i.default)(this,"_preAutoCloseStream",(0,s.default)()),(0,i.default)(this,"_stopper",(0,l.default)());const n=this._el=document.createElement("div");if(n.className="inboxsdk__inbox_backdrop",n.style.zIndex=String(e),a.default.fromEvents(n,"click").filter((e=>{let t=!1;const n={type:"outsideInteraction",cause:e,cancel:()=>{t=!0}};return this._preAutoCloseStream.emit(n),!t})).onValue((e=>{this.destroy()})),!t)throw new Error("no target");t.appendChild(n),this._stopper.onValue((()=>{n.classList.remove("inboxsdk__active"),a.default.fromEvents(n,"transitionend").merge(a.default.later(200)).take(1).onValue((()=>{n.remove()}))})),n.offsetHeight,n.classList.add("inboxsdk__active")}getElement(){return this._el}getPreAutoCloseStream(){return this._preAutoCloseStream}getStopper(){return this._stopper}destroy(){this._preAutoCloseStream.end(),this._stopper.destroy()}});n.default=u},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158,ud:454}],620:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/includes")),o=e("ud"),a=r(e("kefir")),s=r(e("../../../lib/from-event-target-capture")),l=r(e("../../../lib/dom/insert-element-in-order")),u=r(e("../../../widgets/buttons/dropdown-view")),c=r(e("./inbox-dropdown-view")),d=r(e("./inbox-tooltip-view"));let f=0;var p=(0,o.defn)(t,class{constructor(e,t,n,r){this._tooltip=null,this._composeView=e;const o=this._buttonEl=document.createElement("div");o.setAttribute("role","button"),o.setAttribute("data-insertion-order-hint",String(f++)),o.setAttribute("data-group-order-hint",n),o.tabIndex=0,o.className="inboxsdk__button_icon";const d=document.createElement("img");d.className="inboxsdk__button_iconImg";let p=e=>{},h=!1,m=null;a.default.merge([a.default.fromEvents(o,"click"),(0,s.default)(o,"keyup").filter((e=>(0,i.default)([32,13],e.which)))]).onValue((e=>{if(e.preventDefault(),e.stopPropagation(),this.closeTooltip(),h){if(m)return void m.close();this._buttonEl.classList.add("inboxsdk__active"),m=new u.default(new c.default,o),m.setPlacementOptions({position:"top",hAlign:"left",vAlign:"bottom",buffer:5}),m.on("destroy",(()=>{this._buttonEl.classList.remove("inboxsdk__active"),m=null}))}p(Object.assign({dropdown:m},r))}));let _=null;t.takeUntilBy(e.getStopper()).onValue((t=>{if(!t)return o.remove(),void(_=null);h=t.hasDropdown,o.title=t.title,o.className="inboxsdk__button_icon "+(t.iconClass||""),p=t.onClick,t.iconUrl?(d.src=t.iconUrl,o.appendChild(d)):d.remove();const n=t.orderHint||0;_!==n&&(_=n,o.setAttribute("data-order-hint",String(n)),(0,l.default)(e.getModifierButtonContainer(),o))})),e.getStopper().onValue((()=>{this.closeTooltip(),o.remove(),m&&m.close()}))}showTooltip(e){this._composeView.isInlineReplyForm()&&this._composeView.getElement().focus(),this._tooltip&&this.closeTooltip();const t=this._tooltip=new d.default(this._buttonEl,e);t.getStopper().onValue((()=>{this._tooltip===t&&(this._tooltip=null)}))}closeTooltip(){this._tooltip&&this._tooltip.destroy()}});n.default=p},{"../../../lib/dom/insert-element-in-order":656,"../../../lib/from-event-target-capture":678,"../../../widgets/buttons/dropdown-view":744,"./inbox-dropdown-view":624,"./inbox-tooltip-view":630,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/includes":323,ud:454}],621:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/escape")),a=r(e("lodash/find")),s=e("ud"),l=(r(e("closest-ng")),r(e("kefir"))),u=r(e("kefir-stopper")),c=r(e("kefir-bus")),d=r(e("auto-html")),f=(r(e("../../../../common/censorHTMLstring")),r(e("../../../lib/delay-asap"))),p=r(e("../../../lib/array-to-lifetimes")),h=r(e("../../../lib/dom/querySelectorOrFail")),m=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),_=e("../../../lib/dom/simulate-mouse-event"),b=r(e("../../../lib/dom/simulate-key")),g=r(e("../../../lib/dom/insert-html-at-cursor")),v=(r(e("../../../lib/dom/querySelectorOne")),r(e("../../../lib/ErrorCollector")),r(e("../../../lib/handle-compose-link-chips"))),y=r(e("../../../lib/insert-link-chip-into-body")),w=r(e("../../../driver-common/compose/getPresendingStream")),E=r(e("../../../driver-common/compose/getDiscardStream")),k=r(e("../addRecipientRow")),x=r(e("./inbox-compose-button-view")),S=e("../../../lib/dom/get-selection"),C=r(e("../../../driver-common/getGmailThreadIdForRfcMessageId"));let I=null;var A=(0,s.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_eventStream",(0,c.default)()),(0,i.default)(this,"_stopper",(0,u.default)()),(0,i.default)(this,"_isMinimized",!1),(0,i.default)(this,"_isFullscreenMode",!1),(0,i.default)(this,"_isPresending",!1),(0,i.default)(this,"_closedProgrammatically",!1),this._element=t,this._driver=e,this._modifierButtonContainer=null,this._lastBodySelectionRange=null,this._p=n,this._els=n.elements;const r=this._els.sendBtn&&this._els.sendBtn.parentElement&&this._els.sendBtn.parentElement.childElementCount;this._driver.getLogger().eventSite("compose open",{errorCount:this._p.errors.length,bottomAreaElementCount:r,isInline:this._p.attributes.isInline});const o=(0,c.default)();this._queueDraftSave=()=>{o.emit(null)};const a=this._els.body;a&&(o.bufferBy(o.flatMap((()=>(0,f.default)(null)))).filter((e=>e.length>0)).takeUntilBy(this._stopper).onValue((()=>{var e=this._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,b.default)(a,13,0)}finally{e()}})),l.default.merge([l.default.fromEvents(document.body,"mousedown"),l.default.fromEvents(document.body,"keydown")]).takeUntilBy(this.getStopper()).onValue((e=>{const t=document.getSelection();t.rangeCount>0&&a.contains(t.anchorNode)&&(this._lastBodySelectionRange=t.getRangeAt(0))})),this._eventStream.plug((0,m.default)(a,{childList:!0,subtree:!0,characterData:!0}).map((()=>({eventName:"bodyChanged"}))))),l.default.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue((()=>{this._closedProgrammatically=!0})),this._draftID=this._driver.getPageCommunicator().getDraftIDForComposeView(this.getElement()),this._ajaxInterceptStream=this._driver.getPageCommunicator().ajaxInterceptStream.takeUntilBy(this._stopper).filter((e=>{let{draftID:t}=e;return t===this._draftID})),this._setupStreams(),this.getEventStream().takeUntilBy(this._stopper).onValue((e=>{let{eventName:t}=e;if("presending"===t){this._isPresending=!0;const e=this.getEventStream().filter((e=>{let{eventName:t}=e;return"sendCanceled"===t}));this._sendingStream=l.default.merge([l.default.combine([this.getEventStream().filter((e=>{let{eventName:t}=e;return"sending"===t})),this.getEventStream().filter((e=>{let{eventName:t}=e;return"sent"===t}))]),this._ajaxInterceptStream.filter((e=>{let{type:t}=e;return"emailSendFailed"===t})),l.default.later(6e4).flatMap((()=>l.default.constantError(new Error("Timed out waiting for ComposeView send"))))]).takeUntilBy(e).takeUntilBy(this._stopper).take(1).takeErrors(1),this._sendingStream.onValue((()=>{this._isPresending=!1})).onError((e=>{this._driver.getLogger().error(e)})),this._driver.getPageCommunicator().notifyEmailSending(),this._p.attributes.isInline||l.default.later(5e3).takeUntilBy(this.getEventStream().filter((e=>{let{eventName:t}=e;return-1!==["sendCanceled","presending"].indexOf(t)}))).onValue((()=>{document.contains(this._element)&&this._eventStream.emit({eventName:"sendCanceled"})}))}else"sendCanceled"===t&&(this._isPresending=!1,this._driver.getPageCommunicator().notifyEmailSendCanceled())})),(0,v.default)(this);const{fromPickerEmailSpan:s}=this._els;s&&this._eventStream.plug((0,m.default)(s,{childList:!0,subtree:!0,characterData:!0}).map((()=>({eventName:"fromContactChanged",data:{contact:this.getFromContact()}}))));const{minimizeBtnImage:d}=this._els;if(d){const e=()=>/_maximize_/.test(d.src),t=(0,m.default)(d,{attributes:!0});t.toProperty((()=>null)).takeUntilBy(this._stopper).onValue((()=>{this._isMinimized=e()})),this._eventStream.plug(t.map((()=>({eventName:e()?"minimized":"restored"}))))}const{toggleFullscreenButtonImage:p}=this._els;if(p){const e=()=>!/_enter_full_screen/.test(p.src),t=(0,m.default)(p,{attributes:!0});t.toProperty((()=>null)).takeUntilBy(this._stopper).onValue((()=>{this._isFullscreenMode=e()})),this._eventStream.plug(t.map((()=>({eventName:"fullscreenChanged",data:{fullscreen:e()}}))))}}removedFromDOM(){this._element.removeAttribute("data-inboxsdk-draft-id");const e=()=>{this._eventStream.emit({eventName:"destroy",data:{closedByInboxSDK:this._closedProgrammatically}}),this._eventStream.end(),this._stopper.destroy()};this._isPresending?this._sendingStream&&this._sendingStream.onEnd(e):e()}getEventStream(){return this._eventStream}getStopper(){return this._stopper}getElement(){return this._element}_informBodyChanged(){this._els.bodyPlaceholder&&this._els.body&&this._els.body.textContent.length>0&&(this._els.bodyPlaceholder.style.display="none"),this._queueDraftSave()}_getAddressChangesStream(){const{toInput:e,ccInput:t,bccInput:n}=this._els;function r(e,t,n){if(!t)return l.default.never();const r=(0,m.default)(t.parentElement,{childList:!0,attributes:!0,subtree:!0}).merge(l.default.later(0)).map(n);return(0,p.default)(r,(e=>e.emailAddress)).flatMap((t=>{let{el:n,removalStream:r}=t;return l.default.constant({eventName:e+"ContactAdded",data:{contact:n}}).merge(r.map((()=>({eventName:e+"ContactRemoved",data:{contact:n}}))))}))}return l.default.merge([r("to",e,(()=>this.getToRecipients())),r("cc",t,(()=>this.getCcRecipients())),r("bcc",n,(()=>this.getBccRecipients()))]).takeUntilBy(this._stopper)}_setupStreams(){this._eventStream.plug(this._getAddressChangesStream()),this._eventStream.plug((0,w.default)({element:this.getElement(),sendButton:this.getSendButton()})),this._eventStream.plug((0,E.default)({element:this.getElement(),discardButton:this.getDiscardButton()})),this._eventStream.plug(l.default.fromEvents(this.getElement(),"inboxSDKsendCanceled").map((()=>({eventName:"sendCanceled"})))),this._eventStream.plug(l.default.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map((()=>({eventName:"discardCanceled"})))),this._eventStream.plug(this._ajaxInterceptStream.filter((e=>{let{type:t}=e;return"emailSending"===t})).map((()=>({eventName:"sending"})))),this._eventStream.plug(this._ajaxInterceptStream.filter((e=>{let{type:t}=e;return"emailSent"===t})).map((e=>{const t={getThreadID:()=>(0,C.default)(this._driver,e.rfcID),getMessageID:()=>this._driver.getGmailMessageIdForSyncMessageId(`msg-a:${e.draftID}`)};return["gmailThreadId","gmailMessageId","threadID","messageID"].forEach((e=>{Object.defineProperty(t,e,{get:()=>{throw this._driver.getLogger().deprecationWarning(`ComposeView sent event.${e}`,"ComposeView sent event.getThreadID() or event.getMessageID()"),new Error("Not supported")}})})),{eventName:"sent",data:t}})))}getFromContact(){const{fromPickerEmailSpan:e}=this._els;if(!e)return this._driver.getUserContact();const t=e.textContent,n=(0,a.default)(this.getFromContactChoices(),(e=>e.emailAddress===t));if(!n)throw new Error("Failed to find from contact");return n}getFromContactChoices(){if(this._p.attributes.isInline)throw new Error("Can't get from values of inline compose");if(I)return I;const{fromPicker:e}=this._els;if(!e)return I=[this._driver.getUserContact()],I;const t=document.activeElement,n=this._element.parentElement.parentElement.firstElementChild;let r=n.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]');const i=0===r.length;try{if(i&&((0,_.simulateClick)(e),r=n.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]')),0===r.length)return I=[this._driver.getUserContact()],I;I=Array.from(r).map((e=>({name:(0,h.default)(e,"span[title]").title,emailAddress:(0,h.default)(e,"span:not([title])").textContent})))}finally{i&&(0,_.simulateClick)(document.body),t&&t.focus()}return I}setFromEmail(e){if(this._p.attributes.isInline)throw new Error("Can't set from value of inline compose");if(this.getFromContact().emailAddress===e)return;const{fromPicker:t}=this._els;if(!t)throw new Error("from picker element not found");const n=document.activeElement,r=this._element.parentElement.parentElement.firstElementChild;let i=r.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]');const o=0===i.length;try{o&&((0,_.simulateClick)(t),i=r.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'));const s=(0,a.default)(i,(t=>t.querySelector("span:not([title])").textContent===e));if(!s)throw new Error("Failed to find from contact to set");(0,_.simulateClick)(s)}finally{o&&(0,_.simulateClick)(t),n&&n.focus()}}focus(){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.focus();const e=document.getSelection(),t=this._lastBodySelectionRange;t&&e&&(e.removeAllRanges(),e.addRange(t))}insertBodyTextAtCursor(e){return this.insertBodyHTMLAtCursor((0,o.default)(e).replace(/\n/g,"<br>"))}insertBodyHTMLAtCursor(e){var t=(0,g.default)(this.getBodyElement(),e,this._lastBodySelectionRange);return this._informBodyChanged(),t}insertLinkIntoBody(e,t){var n=d.default`<a href="${t}">${e}</a>`;return this.insertBodyHTMLAtCursor(n)}insertLinkChipIntoBody(e){var t=(0,y.default)(this,e);return this._informBodyChanged(),t}setBodyHTML(e){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.innerHTML=e,this._informBodyChanged()}setBodyText(e){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.textContent=e,this._informBodyChanged()}_setRecipients(e,t){const n=e.parentElement;if(!n)throw new Error("Should not happen");const r=document.activeElement,i=n.querySelectorAll('[role=button][jsaction*="remove_chip"]').length;for(let e=0;e<i;e++){const e=n.querySelector('[role=button][jsaction*="remove_chip"]');if(!e)break;(0,_.simulateClick)(e)}t.forEach((t=>{e.value=t,e.dispatchEvent(new window.FocusEvent("blur"))})),r&&r.focus()}setToRecipients(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");const{toInput:t}=this._els;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e)}setCcRecipients(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");const{ccInput:t}=this._els;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e);const{toggleCcBccButton:n}=this._els;e.length&&n&&"none"!==n.style.display&&(0,_.simulateClick)(n)}setBccRecipients(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");const{bccInput:t}=this._els;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e);const{toggleCcBccButton:n}=this._els;e.length&&n&&"none"!==n.style.display&&(0,_.simulateClick)(n)}replaceSendButton(e){const{sendBtn:t}=this._p.elements;if(!t)throw new Error("Could not locate send button");t.style.display="none";const n=document.createElement("div");n.classList.add("inboxsdk__compose_customSendContainer"),n.appendChild(e),this._element.setAttribute("data-inboxsdk-send-replaced",""),t.insertAdjacentElement("afterend",n);const r=(0,u.default)();return()=>{r.destroy(),n.remove(),this._element.removeAttribute("data-inboxsdk-send-replaced"),t.style.display=""}}hideDiscardButton(){const{discardBtn:e}=this._p.elements;if(!e)throw new Error("Could not locate discard button");const t=e.previousElementSibling;if(!(t instanceof HTMLElement))throw new Error("Could not locate discard button divider");return e.style.display="none",t.style.display="none",()=>{e.style.display="",t.style.display=""}}close(){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose");const{closeBtn:e}=this._els;e&&(this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),(0,_.simulateClick)(e))}send(e){let{sendAndArchive:t}=e;if(!this._els.sendBtn)throw new Error("Compose View missing send element");(0,_.simulateClick)(this._els.sendBtn)}discard(){(0,_.simulateClick)(this.getDiscardButton())}setMinimized(e){if(e!==this.isMinimized()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");const{minimizeBtn:e}=this._els;if(!e)throw new Error("Could not find minimize button");e.click()}}setFullscreen(e){if(e!==this.isFullscreen()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");const{toggleFullscreenButton:e}=this._els;if(!e)throw new Error("Could not find fullscreen button");e.click()}}setTitleBarColor(e){const{isInline:t}=this._p.attributes;if(t)throw new Error("Cannot set title bar of inline compose");const{titleBar:n}=this._p.elements;if(!n)throw new Error("Could not locate compose title bar");return n.style.backgroundColor=e,()=>{n.style.backgroundColor=""}}setTitleBarText(e){throw new Error("Not supported in Inbox")}addButton(e,t,n){var r=new x.default(this,e,t,n);return Promise.resolve({buttonViewController:r,buttonDescriptor:{}})}getModifierButtonContainer(){if(this._modifierButtonContainer)return this._modifierButtonContainer;if(this._modifierButtonContainer=this._element.querySelector(".inboxsdk__compose_actionToolbar"),this._modifierButtonContainer)return this._modifierButtonContainer;const e=document.createElement("div");if(e.className="inboxsdk__compose_actionToolbar",!this._p.attributes.isInline){const e=this._els.attachBtn?this._els.attachBtn.nextSibling:null;e instanceof HTMLElement&&"absolute"===e.style.position?e.style.display="none":this._driver.getLogger().error(new Error("Didn't find hiddenAttachBtn"))}const t=this._els.sendBtn;if(!t)throw new Error("Compose View missing send element");const n=t.parentElement;if(!n)throw new Error("Could not find send button parent");return n.insertBefore(e,t.nextSibling),this._modifierButtonContainer=e,e}addRecipientRow(e){if(this._p.attributes.isInline)throw new Error("Cannot add recipient rows to inline compose views");return(0,k.default)(this,e)}forceRecipientRowsOpen(){return console.warn("ComposeView.forceRecipientRowsOpen() is a no-op in Inbox"),()=>{}}hideNativeRecipientRows(){if(this._p.attributes.isInline)throw new Error("Cannot hide recipient rows on inline compose views");const e=[this.getToRow(),this.getCCRow(),this.getBCCRow()];return e.forEach((e=>{e.classList.add("inboxsdk__compose_forceRecipientRowHidden")})),()=>{e.forEach((e=>{e.classList.remove("inboxsdk__compose_forceRecipientRowHidden")}))}}hideRecipientArea(){throw new Error("Not implemented")}addOuterSidebar(e){throw new Error("Not implemented")}addInnerSidebar(e){throw new Error("Not implemented")}addComposeNotice(e){throw new Error("Not implemented")}addStatusBar(e){throw new Error("Not implemented")}hideNativeStatusBar(){throw new Error("Not Implemented")}isForward(){throw new Error("Not Implemented")}isReply(){if(this._p.attributes.isInline)return!0;throw new Error("Not implemented")}isInlineReplyForm(){return this._p.attributes.isInline}popOut(){if(!this._p.attributes.isInline)throw new Error("Can only pop out inline reply compose views");if(!this._els.popOutBtn)throw new Error("Should not happen");(0,_.simulateClick)(this._els.popOutBtn)}registerRequestModifier(e){throw new Error("Not implemented")}attachFiles(e){throw new Error("Not implemented")}attachInlineFiles(e){throw new Error("Not implemented")}isFullscreen(){return this._isFullscreenMode}isMinimized(){return this._isMinimized}getSubjectInput(){return this._els.subject}getMetadataFormElement(){throw new Error("Not supported in Inbox.")}getToRow(){const{toRow:e}=this._els;if(!e)throw new Error("Could not locate To row");return e}getCCRow(){const{ccRow:e}=this._els;if(!e)throw new Error("Could not locate CC row");return e}getBCCRow(){const{bccRow:e}=this._els;if(!e)throw new Error("Could not locate BCC row");return e}getBodyElement(){if(!this._els.body)throw new Error("Compose View missing body element");return this._els.body}getHTMLContent(){return this.getBodyElement().innerHTML}getTextContent(){return this.getBodyElement().textContent}getSelectedBodyHTML(){return(0,S.getSelectedHTMLInElement)(this.getBodyElement(),this._lastBodySelectionRange)}getSelectedBodyText(){return(0,S.getSelectedTextInElement)(this.getBodyElement(),this._lastBodySelectionRange)}getSubject(){const{subject:e}=this._els;if(!e)throw new Error("InboxSDK: Could not locate subject field");return e.value}setSubject(e){if(this._p.attributes.isInline)throw new Error("setSubject is not supported for inline compose views");if(!this._els.subject)throw new Error("InboxSDK: Could not locate subject field");this._els.subject.value=e}_getRecipients(e){const t=e.parentElement;if(!t)throw new Error("Should not happen");return Array.from(t.children).filter((e=>"DIV"===e.nodeName&&e.hasAttribute("email")&&"none"!==e.style.display)).map((e=>({emailAddress:e.getAttribute("email")||"",name:e.textContent})))}getToRecipients(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");const{toInput:e}=this._els;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}getCcRecipients(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");const{ccInput:e}=this._els;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}getBccRecipients(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");const{bccInput:e}=this._els;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}getComposeID(){throw new Error("This method was discontinued")}getInitialMessageID(){throw new Error("composeView.getInitialMessageID is not implemented in Inbox")}getMessageID(){throw new Error("composeView.getMessageID is not implemented in Inbox")}getThreadID(){return null}getCurrentDraftID(){return Promise.resolve(this._draftID)}getDraftID(){return Promise.resolve(this._draftID)}addTooltipToButton(e,t,n){e.showTooltip(n)}closeButtonTooltip(e){e.closeTooltip()}getDiscardButton(){if(!this._els.discardBtn)throw new Error("Compose View missing discard button");return this._els.discardBtn}getSendButton(){if(!this._els.sendBtn)throw new Error("Compose View missing send button");return this._els.sendBtn}ensureAppButtonToolbarsAreClosed(){}ensureFormattingToolbarIsHidden(){}});n.default=A},{"../../../../common/censorHTMLstring":469,"../../../driver-common/compose/getDiscardStream":631,"../../../driver-common/compose/getPresendingStream":632,"../../../driver-common/getGmailThreadIdForRfcMessageId":635,"../../../lib/ErrorCollector":643,"../../../lib/array-to-lifetimes":646,"../../../lib/delay-asap":650,"../../../lib/dom/get-selection":655,"../../../lib/dom/insert-html-at-cursor":657,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOne":667,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/dom/simulate-key":673,"../../../lib/dom/simulate-mouse-event":674,"../../../lib/handle-compose-link-chips":680,"../../../lib/insert-link-chip-into-body":686,"../addRecipientRow":612,"./inbox-compose-button-view":620,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,"closest-ng":57,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/escape":312,"lodash/find":314,ud:454}],622:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("kefir")),r(e("kefir-stopper"))),a=r(e("kefir-bus")),s=r(e("classnames")),l=r(e("../../../lib/idMap")),u=r(e("../../../lib/parseParamsFromRouteID")),c=r(e("../getSidebarClassnames"));n.default=class{constructor(e,t){(0,i.default)(this,"_eventStream",(0,a.default)()),(0,i.default)(this,"_stopper",(0,o.default)()),this._routeID=e,this._params=(0,u.default)(e,t),this._customViewElement=document.createElement("div"),this.setFullWidth(!0)}setFullWidth(e){const t=(0,c.default)().centerList||"UNKNOWN_centerList";this._customViewElement.className=(0,s.default)((0,l.default)("custom_view_container"),{[(0,l.default)("custom_view_min_margins")]:e,[t]:!e})}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy(),this._customViewElement.remove()}getElement(){throw new Error("should not happen")}getType(){return"CUSTOM"}getRouteType(){return"CUSTOM"}getRouteID(){return this._routeID}getParams(){return this._params}getEventStream(){return this._eventStream}getCustomViewElement(){return this._customViewElement}refresh(){throw new Error("should not happen")}getHash(){throw new Error("should not happen")}addCollapsibleSection(e,t){throw new Error("should not happen")}addSection(e,t){throw new Error("should not happen")}}},{"../../../lib/idMap":682,"../../../lib/parseParamsFromRouteID":692,"../getSidebarClassnames":615,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:159,"kefir-bus":156,"kefir-stopper":158}],623:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("kefir")),s=r(e("kefir-stopper")),l=r(e("kefir-bus")),u=r(e("./inbox-backdrop")),c=r(e("../../../lib/from-event-target-capture")),d=r(e("../../../../common/find-parent"));const f="inboxSDKdrawerViewTakingOver",p=500;var h=(0,o.defn)(t,class{constructor(e){(0,i.default)(this,"_backdrop",null),(0,i.default)(this,"_closing",(0,s.default)()),(0,i.default)(this,"_closed",(0,s.default)()),(0,i.default)(this,"_composeChanges",(0,l.default)()),(0,i.default)(this,"_preAutoCloseStream",(0,l.default)()),this._chrome="boolean"!=typeof e.chrome||e.chrome;let t=document.body,n=null;const{composeView:r,closeWithCompose:o}=e;if(r){const e=this._setupComposeInsertionTarget(r,o);t=e.insertionTarget,n=e.composeRect}this._setupElement(e,t);let u=0;if(r){if(!n)throw new Error("should not happen");u=this._setupComposeAnimation(r,n,!0)}this._el.offsetHeight,this._el.classList.add("inboxsdk__active"),this._slideAnimationDone=a.default.fromEvents(this._el,"transitionend").take(1).takeUntilBy(this._closing).map((()=>null)),r&&this._positionCompose(r,u),(0,c.default)(document,"keydown").filter((e=>e.key?"Escape"===e.key:27===e.which)).takeUntilBy(this._closing).onValue((e=>{const t=e.preventDefault;e.preventDefault=function(){return this._defaultPreventedInContext=!0,t.call(this)}})),a.default.fromEvents(document,"keydown").filter((e=>e.key?"Escape"===e.key:27===e.which)).filter((e=>!e._defaultPreventedInContext)).filter((e=>{let t=!1;const n={type:"escape",cause:e,cancel:()=>{t=!0}};return this._preAutoCloseStream.emit(n),!t})).takeUntilBy(this._closing).onValue((()=>{this.close()}))}_setupComposeInsertionTarget(e,t){if(e.isMinimized())throw new Error("Can't attach DrawerView to minimized ComposeView");if(e.isInlineReplyForm())throw new Error("Can't attach DrawerView to inline ComposeView");e.isFullscreen()&&e.setFullscreen(!1);const n=[a.default.fromEvents(e,"restored"),a.default.later(10).flatMap((()=>a.default.fromEvents(e,"fullscreenChanged")))];t&&n.push(a.default.fromEvents(e,"destroy"),a.default.fromEvents(e,"minimized")),a.default.merge(n).takeUntilBy(this._closing.merge(this._composeChanges)).onValue((()=>this.close()));const r=e.getElement(),i=r.getBoundingClientRect(),o=r.offsetParent;if(!(o instanceof HTMLElement))throw new Error("should not happen");const s=(0,d.default)(o,(e=>"auto"!==window.getComputedStyle(e).getPropertyValue("z-index")&&0===e.getBoundingClientRect().left))||document.body;return r.dispatchEvent(new CustomEvent(f,{bubbles:!1,cancelable:!1,detail:null})),o.dispatchEvent(new CustomEvent(f,{bubbles:!1,cancelable:!1,detail:null})),s.dispatchEvent(new CustomEvent(f,{bubbles:!1,cancelable:!1,detail:null})),s.classList.add("inboxsdk__drawers_in_use"),s.style.zIndex=String(p),o.hasAttribute("data-drawer-old-zindex")||o.setAttribute("data-drawer-old-zindex",o.style.zIndex),o.style.zIndex=String(502),this._closed.takeUntilBy(a.default.fromEvents(s,f)).onValue((()=>{s.style.zIndex=""})),this._closed.merge(this._composeChanges).takeUntilBy(a.default.fromEvents(o,f)).onValue((()=>{o.style.zIndex=o.getAttribute("data-drawer-old-zindex")||"",o.removeAttribute("data-drawer-old-zindex")})),{composeRect:i,insertionTarget:s}}_setupElement(e,t){const n=this._backdrop=new u.default(p,t);if(this._preAutoCloseStream.plug(n.getPreAutoCloseStream()),n.getStopper().takeUntilBy(this._closing).onValue((()=>{this.close()})),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__drawer_view_container",this._containerEl.style.zIndex=String(501),this._el=document.createElement("div"),this._el.setAttribute("role","dialog"),this._el.tabIndex=0,this._el.className="inboxsdk__drawer_view",e.matchSidebarContentPanelWidth&&this._el.classList.add("inboxsdk__match_sidebar_content_panel_width"),this._containerEl.appendChild(this._el),this._chrome){const t=document.createElement("div");t.className="inboxsdk__drawer_title_bar";const n=document.createElement("button");n.type="button",n.title="Close",n.className="inboxsdk__close_button",n.addEventListener("click",(e=>{this.close()})),t.appendChild(n);const r=document.createElement("div");r.className="inboxsdk__drawer_title",r.setAttribute("role","heading"),r.textContent=e.title||"",t.appendChild(r),this._el.appendChild(t)}this._el.appendChild(e.el),t.appendChild(this._containerEl),this._closing.onValue((()=>{this._backdrop&&this._backdrop.destroy(),this._el.classList.remove("inboxsdk__active"),a.default.fromEvents(this._el,"transitionend").merge(a.default.later(200)).take(1).onValue((()=>{this._closed.destroy(),this._containerEl.remove()}))}))}_setupComposeAnimation(e,t,n){const r=e.getElement().parentElement,i=this._el.getBoundingClientRect(),o=parseInt(r.style.left)||0,a=t.right-o-(window.innerWidth-i.width-24);return a>0&&(r.style.position="relative",r.style.transition="left 150ms cubic-bezier(.4,0,.2,1)",r.style.left="0",n&&r.offsetHeight),a}_positionCompose(e,t){if(t>0){const n=e.getElement(),r=n.parentElement;r.style.left=-t+"px",this._closing.takeUntilBy(this._composeChanges).takeUntilBy(a.default.fromEvents(n,f)).onValue((()=>{r.style.left="0"})).flatMap((()=>a.default.fromEvents(r,"transitionend").merge(a.default.later(200)))).merge(this._composeChanges).take(1).takeUntilBy(a.default.fromEvents(n,f)).onValue((()=>{r.style.position="",r.style.left="",r.style.transition=""}))}}associateComposeView(e,t){this._composeChanges.emit(null);const{insertionTarget:n,composeRect:r}=this._setupComposeInsertionTarget(e,t);this._backdrop&&n.appendChild(this._backdrop.getElement()),this._containerEl.parentElement!==n&&n.appendChild(this._containerEl);const i=this._setupComposeAnimation(e,r,!1);this._positionCompose(e,i)}disassociateComposeView(){this._composeChanges.emit(null)}getSlideAnimationDone(){return this._slideAnimationDone}getClosingStream(){return this._closing}getClosedStream(){return this._closed}getPreAutoCloseStream(){return this._preAutoCloseStream}close(){this._closing.destroy()}});n.default=h},{"../../../../common/find-parent":473,"../../../lib/from-event-target-capture":678,"./inbox-backdrop":619,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158,ud:454}],624:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=class{constructor(e){this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__dropdown "+(e||""),this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__dropdown_content",this._containerEl.appendChild(this._contentEl)}getContentElement(){return this._contentEl}getContainerElement(){return this._containerEl}destroy(){this._containerEl.remove()}}},{}],625:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("kefir")),r(e("kefir-stopper"))),a=r(e("kefir-bus"));n.default=class{constructor(e){(0,i.default)(this,"_eventStream",(0,a.default)()),(0,i.default)(this,"_stopper",(0,o.default)()),this._type=e}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy()}getElement(){throw new Error("Should not happen")}getType(){return this._type}getRouteType(){return"UNKNOWN"}getRouteID(){return"UNKNOWN"}getParams(){return{}}getEventStream(){return this._eventStream}getCustomViewElement(){return null}refresh(){}getHash(){throw new Error("should not happen")}addCollapsibleSection(e,t){throw new Error("should not happen")}addSection(e,t){throw new Error("should not happen")}setFullWidth(e){throw new Error("should not happen")}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158}],626:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=(r(e("asap")),r(e("kefir"))),s=r(e("kefir-bus")),l=r(e("bignumber.js")),u=r(e("../../../lib/delay-asap")),c=r(e("../../../../common/censorHTMLtree")),d=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=r(e("./inbox-attachment-card-view")),p=r(e("../../../../common/find-parent")),h=r(e("../detection/message/parser")),m=r(e("../../../lib/safe-event-emitter"));class _ extends m.default{}var b=(0,o.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_eventStream",(0,s.default)()),(0,i.default)(this,"_attachmentCardViews",[]),this._element=e,this._driver=t,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd((()=>null)),(0,d.default)(this._element,{attributes:!0,attributeFilter:["data-msg-id"]}).toProperty((()=>null)).map((()=>this._element.getAttribute("data-msg-id"))).skipDuplicates().changes().onValue((()=>{this.destroy()})),(0,d.default)(this._element,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty((()=>null)).map((()=>"true"===this._element.getAttribute("aria-expanded"))).skipDuplicates().changes().takeUntilBy(this._stopper).onValue((e=>{e?this._reparse():this.destroy()})),this._threadViewDriver=this._findThreadView(),this._threadViewDriver&&this._threadViewDriver.addMessageViewDriver(this),this._driver.getMessageViewElementsMap().set(this._element,this),this._monitorEmailAddressHovering()}_findThreadView(){const e=this._driver.getThreadViewElementsMap(),t=(0,p.default)(this._element,(t=>e.has(t)));return t?e.get(t):null}_reparse(){const e=this._p;this._p=(0,h.default)(this._element),this._p.errors.length>0&&this._driver.getLogger().errorSite(new Error("message reparse errors"),{score:this._p.score,errors:this._p.errors,html:(0,c.default)(this._element)}),!e.attributes.loaded&&this._p.attributes.loaded&&this._eventStream.emit({type:"internal",eventName:"messageLoad"}),e.attributes.viewState!==this._p.attributes.viewState&&this._eventStream.emit({eventName:"viewStateChange",oldValue:e.attributes.viewState,newValue:this._p.attributes.viewState})}_monitorEmailAddressHovering(){this._eventStream.plug(a.default.fromEvents(this._element,"mouseover").map((e=>e.target)).filter((e=>e&&e.getAttribute("email"))).map((e=>{const t={name:e.textContent,emailAddress:e.getAttribute("email")};let n;if(this._p.elements.sender&&this._p.elements.sender.contains(e))n="sender";else{if(!this._p.attributes.recipientElements||!Array.from(this._p.attributes.recipientElements).some((t=>t.contains(e))))return null;n="recipient"}return{eventName:"contactHover",messageViewDriver:this,contact:t,contactType:n}})).filter())}addAttachmentCardViewDriver(e){this._attachmentCardViews.push(e),e.getStopper().takeUntilBy(this._stopper).onValue((()=>{this._attachmentCardViews=this._attachmentCardViews.filter((t=>t!==e))}))}getStopper(){return this._stopper}getEventStream(){return this._eventStream}isLoaded(){return this._p.attributes.loaded}hasOpenReply(){return!1}getMessageID(){const{inboxMessageId:e}=this._p.attributes;if(!e)throw new Error("Failed to find message id");/^msg-a:/.test(e)&&console.warn("MessageView.getMessageID() returned an incorrect message ID. This method will be deprecated soon. Use getMessageIDAsync() instead which does not have this problem.");const t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new l.default(t[0]).toString(16)}async getMessageIDAsync(){const{inboxMessageId:e}=this._p.attributes;if(!e)throw new Error("Failed to find message id");if(/^msg-a:/.test(e)){for(let t of this._driver.getComposeViewDriverLiveSet().values()){const n=await t.getDraftID();if(n&&`msg-a:${n}`===e){await t.getStopper().take(1).toPromise();break}}return await this._driver.getGmailMessageIdForSyncMessageId(e)}{const t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new l.default(t[0]).toString(16)}}getContentsElement(){if(!this._p.elements.body)throw new Error("Could not find body element");return this._p.elements.body}getLinks(){throw new Error("not implemented yet")}isElementInQuotedArea(e){const t=(0,p.default)(e,(e=>e.classList.contains("gmail_extra")));return null!=t}addMoreMenuItem(e){throw new Error("not implemented yet")}addAttachmentIcon(e){return console.warn("MessageView.addAttachmentIcon is not implemented yet in Inbox"),new _}getAttachmentCardViewDrivers(){return this._attachmentCardViews}addAttachmentCard(e){const{attachmentsArea:t}=this._p.elements;if(!t)throw new Error("Could not find attachments area");let n=t.lastElementChild;return n||(t.style.display="",t.style.margin="16px 0 0",t.style.paddingTop="16px",n=document.createElement("div"),t.appendChild(n)),new f.default({...e,element:null,container:n},this._driver)}addButtonToDownloadAllArea(e){}getViewState(){return this._p.attributes.viewState}getDateString(){throw new Error("not implemented yet")}getSender(){const{sender:e}=this._p.elements;if(!e)throw new Error("could not find sender element");const t=e.getAttribute("email");if(!t)throw new Error("could not find email address");return{emailAddress:t,name:e.textContent}}getRecipients(){const e=this._driver.getUserContact();return Array.prototype.map.call(this._p.attributes.recipientElements,(t=>{const n=t.getAttribute("email");return n===e.emailAddress?e:{emailAddress:n,name:t.textContent}}))}getRecipientEmailAddresses(){return this.getRecipients().map((e=>{let{emailAddress:t}=e;return t}))}async getRecipientsFull(){return this.getRecipients()}getThreadViewDriver(){if(!this._threadViewDriver)throw new Error("failed to find threadView");return this._threadViewDriver}getReadyStream(){return a.default.repeat((e=>e>10?null:(0,u.default)(null))).ignoreValues().beforeEnd((()=>null))}destroy(){this._eventStream.end(),this._attachmentCardViews.slice().forEach((e=>{e.destroy()}))}});n.default=b},{"../../../../common/censorHTMLtree":470,"../../../../common/find-parent":473,"../../../lib/delay-asap":650,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/safe-event-emitter":698,"../detection/message/parser":613,"./inbox-attachment-card-view":618,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"bignumber.js":43,kefir:159,"kefir-bus":156,ud:454}],627:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/includes")),a=(r(e("kefir")),r(e("kefir-stopper"))),s=r(e("kefir-bus")),l=e("../../../constants/router");n.default=class{constructor(e,t){(0,i.default)(this,"_eventStream",(0,s.default)()),(0,i.default)(this,"_stopper",(0,a.default)()),this._element=e,this._type=t;const n=document.location.pathname.slice(1);this._routeID=function(e){return""===e?l.NATIVE_ROUTE_IDS.INBOX:(0,o.default)(["snoozed","reminders","done","spam","trash"],e)?l.NATIVE_ROUTE_IDS[e.toUpperCase()]:/search\//.test(e)?l.NATIVE_ROUTE_IDS.SEARCH:"UNKNOWN"}(n),this._params=function(e){const t=e.split("/");return t.length<2?{}:{query:decodeURIComponent(t[1])}}(n),this._routeType="UNKNOWN"===this._routeID?"UNKNOWN":"LIST"}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy()}getElement(){return this._element}getType(){return this._type}getRouteType(){return this._routeType}getRouteID(){return this._routeID}getParams(){return this._params}getEventStream(){return this._eventStream}refresh(){}getHash(){throw new Error("should not happen")}getCustomViewElement(){throw new Error("should not happen")}addCollapsibleSection(e,t){throw new Error("not implemented yet")}addSection(e,t){throw new Error("not implemented yet")}setFullWidth(e){throw new Error("should not happen")}}},{"../../../constants/router":490,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/includes":323}],628:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("../../../driver-common/update-icon")),s=r(e("auto-html")),l=r(e("kefir")),u=r(e("kefir-bus")),c=(r(e("kefir-stopper")),r(e("kefir-cast"))),d=r(e("bignumber.js")),f=r(e("./InboxLabelView")),p=r(e("./InboxToolbarButtonView"));var h=(0,o.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_eventStream",(0,u.default)()),(0,i.default)(this,"_isDestroyed",!1),this._element=e,this._driver=t,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd((()=>null)).toProperty()}getEventStream(){return this._eventStream}getStopper(){return this._stopper}setUserView(e){this._userView=e}isSelected(){if(!this._p.elements.checkbox)throw new Error("Did not find checkbox element");return"true"===this._p.elements.checkbox.getAttribute("aria-checked")}addToolbarButton(e){const{toolbar:t}=this._p.elements;if(!t)throw new Error("could not find toolbar element");t.classList.add("inboxsdk__list_toolbar");const n=new p.default({...e,onClick:n=>{n.dropdown&&(t.classList.add("inboxsdk__thread_row_force_toolbar_visible"),n.dropdown.once("destroy",(()=>{t.classList.remove("inboxsdk__thread_row_force_toolbar_visible")}))),e.onClick&&e.onClick(n)}},this._driver.getAppId(),t);return this._stopper.takeUntilBy(n.getStopper()).onValue((()=>{n.destroy()})),n}addAttachmentIcon(e){throw new Error("Not supported in Inbox")}addButton(e){throw new Error("Not supported in Inbox")}addActionButton(e){throw new Error("not yet implemented")}addImage(e){if(this._isDestroyed)return void console.warn("addImage called on destroyed thread row");const{labelParent:t}=this._p.elements;if(!t)throw new Error("Could not find label parent element");const n=(0,c.default)(l.default,e).takeUntilBy(this._stopper).toProperty();let r=null;n.onValue((e=>{if(e){r||(r={iconSettings:{},iconWrapper:document.createElement("div"),remove(){this.iconWrapper.remove()}},r.iconWrapper.className="inboxsdk__thread_row_icon_wrapper");const{iconSettings:n,iconWrapper:i}=r;if((0,a.default)(n,i,!1,e.imageClass,e.imageUrl),e.tooltip&&i.setAttribute("title",e.tooltip),t!==i.parentElement){const e=t.querySelectorAll(".inboxsdk__inbox_thread_row_label"),n=e.length>0?e[e.length-1].nextElementSibling:t.firstChild;t.insertBefore(i,n)}}else r&&(r.remove(),r=null)})),this._stopper.onEnd((()=>{r&&r.remove()}))}addLabel(e){if(this._isDestroyed)return void console.warn("addLabel called on destroyed thread row");const t=this._p.elements.labelParent;if(!t)throw new Error("Could not find label parent element");const n=(0,c.default)(l.default,e).takeUntilBy(this._stopper).toProperty();let r=null;n.onValue((e=>{if(e){if(!r){const e=new f.default,t=e.getElement();r={inboxLabelView:e,remove:t.remove.bind(t)}}if(r.inboxLabelView.updateLabelDescriptor(e),t!==r.inboxLabelView.getElement().parentElement){const e=t.querySelectorAll(".inboxsdk__inbox_thread_row_label"),n=e.length>0?e[e.length-1].nextElementSibling:t.firstChild;t.insertBefore(r.inboxLabelView.getElement(),n)}}else r&&(r.remove(),r=null)})),this._stopper.onEnd((()=>{r&&r.remove()}))}getDateString(){throw new Error("Not supported in Inbox")}getSubject(){if(!this._p.elements.subject)throw new Error("Failed to find subject");return this._p.elements.subject.textContent}getThreadID(){throw new Error("Not supported in Inbox. Please use getThreadIDAsync() instead")}async getThreadIDAsync(){const{inboxThreadId:e}=this._p.attributes;if(!e)throw new Error("Failed to find thread id");if(/^thread-a:/.test(e)){this._driver.trackThreadRowIdCall(!1,e);const t=await this._driver.getInboxMessageIdForInboxThreadId(e),n=await this._driver.getGmailMessageIdForSyncMessageId(t);return await this._driver.getThreadIdFromMessageId(n)}{this._driver.trackThreadRowIdCall(!0,e);const t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new d.default(t[0]).toString(16)}}async getDraftID(){const{isOnlyDraft:e,inboxThreadId:t}=this._p.attributes;if(e&&t){const e=/\d+$/.exec(t);if(!e)throw new Error("Should not happen");return e[0]}return null}getVisibleDraftCount(){const{visibleDraftCount:e}=this._p.attributes;if("number"!=typeof e)throw new Error("Failed to find visible draft count");return e}getVisibleMessageCount(){const{visibleMessageCount:e}=this._p.attributes;if("number"!=typeof e)throw new Error("Failed to find visible message count");return e}getContacts(){const{contacts:e}=this._p.attributes;if(!Array.isArray(e))throw new Error("Failed to find contacts");return e}replaceDate(e){throw new Error("Not supported in Inbox")}replaceDraftLabel(e){if(this._isDestroyed)return void console.warn("addLabel called on destroyed thread row");if(0===this._p.attributes.visibleDraftCount)return;const{recipientParent:t,messageCountParent:n}=this._p.elements;if(!t||!n)throw new Error("Could not find necessary parent elements");const r=(0,c.default)(l.default,e).takeUntilBy(this._stopper).toProperty();let i=null;r.onValue((e=>{if(e){const{text:r,count:o}=e;i||(i={countEl:document.createElement("span"),draftEl:document.createElement("span"),remove(){this.countEl.remove(),this.draftEl.remove(),t.classList.remove("inboxsdk__thread_row_draft_label_replaced"),n.classList.remove("inboxsdk__thread_row_draft_count_replaced"),n.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)")||(n.style.display="none")}},i.draftEl.className="inboxsdk__thread_row_custom_draft_label",i.countEl.className="inboxsdk__thread_row_custom_draft_count",t.classList.add("inboxsdk__thread_row_draft_label_replaced")),i.draftEl.textContent=r,t!==i.draftEl.parentElement&&t.appendChild(i.draftEl);const a=n.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)");o&&o>1?(n.classList.add("inboxsdk__thread_row_draft_count_replaced"),n.style.display="inline",i.countEl.innerHTML=a?s.default`(${o})`:s.default`&nbsp;(${o})`,n!==i.countEl.parentElement&&n.appendChild(i.countEl)):(n.classList.remove("inboxsdk__thread_row_draft_count_replaced"),a||(n.style.display="none"),i.countEl.remove())}else i&&(i.remove(),i=null);this._stopper.onEnd((()=>{i&&i.remove()}))}))}destroy(){this._isDestroyed=!0,this._eventStream.end()}});n.default=h},{"../../../driver-common/update-icon":642,"./InboxLabelView":616,"./InboxToolbarButtonView":617,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,"bignumber.js":43,kefir:159,"kefir-bus":156,"kefir-cast":157,"kefir-stopper":158,ud:454}],629:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/find")),a=e("ud"),s=r(e("auto-html")),l=r(e("kefir")),u=r(e("kefir-bus")),c=r(e("kefir-stopper")),d=r(e("bignumber.js")),f=r(e("../../../lib/delay-asap")),p=r(e("../../../lib/idMap")),h=r(e("../../../lib/dom/querySelectorOrFail")),m=r(e("../../../lib/dom/make-mutation-observer-chunked-stream")),_=r(e("../../../views/SimpleElementView")),b=(r(e("../../../views/conversations/custom-message-view")),r(e("../detection/thread/parser")));var g=(0,a.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"_eventStream",(0,u.default)()),(0,i.default)(this,"_messageViews",[]),(0,i.default)(this,"_receivedMessageView",(0,c.default)()),(0,i.default)(this,"_sidebarPanels",new Set),this._element=e,this._driver=t,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd((()=>null)).toProperty(),this._driver.getThreadViewElementsMap().set(this._element,this),this._ready=this._receivedMessageView.flatMap((()=>(0,f.default)())).onValue((()=>{this._p=(0,b.default)(this._element)})).toProperty(),this.isLoadingStub()&&(0,m.default)(this._element,{attributes:!0,attributeFilter:["aria-busy"]}).takeUntilBy(this._stopper).onValue((()=>{this.isLoadingStub()||this.destroy()}))}isLoadingStub(){return"true"===this._element.getAttribute("aria-busy")}getEventStream(){return this._eventStream}getStopper(){return this._stopper}addMessageViewDriver(e){this._messageViews.push(e),this._eventStream.plug(e.getEventStream().filter((e=>"contactHover"===e.eventName))),e.getStopper().takeUntilBy(this._stopper).onValue((()=>{this._messageViews=this._messageViews.filter((t=>t!==e))})),this._receivedMessageView.destroy()}getMessageViewDrivers(){return this._messageViews}getToolbarElement(){if(!this._p.elements.toolbar)throw new Error("Failed to find toolbar");return this._p.elements.toolbar}getSubject(){if(!this._p.elements.heading)throw new Error("Failed to find subject");return this._p.elements.heading.textContent}getThreadID(){const{inboxThreadId:e}=this._p.attributes;if(!e)throw new Error("Failed to find thread id");/^msg-a:/.test(e)&&console.warn("ThreadView.getThreadID() returned an incorrect thread ID. This method will be deprecated soon. Use getThreadIDAsync() instead which does not have this problem.");const t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new d.default(t[0]).toString(16)}async getThreadIDAsync(){const{inboxThreadId:e}=this._p.attributes;if(!e)throw new Error("Failed to find message id");if(/^thread-a:/.test(e)){const e=this._messageViews[0];if(!e)throw new Error("Should not happen");const t=await e.getMessageIDAsync();return await this._driver.getThreadIdFromMessageId(t)}{const t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new d.default(t[0]).toString(16)}}registerHiddenCustomMessageNoticeProvider(e){throw new Error("not supported")}addCustomMessage(e){throw new Error("not supported")}addSidebarContentPanel(e){const t=this._driver.getAppSidebarView().addSidebarContentPanel(e);return this._sidebarPanels.add(t),t.getStopper().onValue((()=>{this._sidebarPanels.delete(t)})),this._stopper.takeUntilBy(t.getStopper()).onValue((()=>{t.remove()})),e.takeUntilBy(this._stopper).takeUntilBy(t.getStopper()).take(1).onValue((e=>{const{stickyHeading:n}=this._p.elements;if(!n)return;let r=n.querySelector("."+(0,p.default)("sidebar_iconArea"));if(!r){const e=r=document.createElement("div");r.className=(0,p.default)("sidebar_iconArea"),this._driver.getAppSidebarView().getOpenOrOpeningStream().takeUntilBy(this._stopper).onValue((t=>{e.style.display=t?"none":""})),n.appendChild(r)}const i=e.appName||this._driver.getOpts().appName||e.title,a=e.appIconUrl||this._driver.getOpts().appIconUrl||e.iconUrl,l=(0,o.default)(r.querySelectorAll("."+(0,p.default)("sidebar_button_container")),(e=>{const t=e.querySelector("button");if(!t||t.title!==i)return!1;const n=t.querySelector("img");return!(!n||n.src!==a)}));let u;if(l){const e=Number(l.getAttribute("data-count"))||1;l.setAttribute("data-count",e+1),u=l}else u=document.createElement("div"),u.className=(0,p.default)("sidebar_button_container"),u.innerHTML=s.default`
            <button class="inboxsdk__button_icon" type="button" title="${i}">
              <img class="inboxsdk__button_iconImg" src="${a}">
            </button>
          `,(0,h.default)(u,"button").addEventListener("click",(e=>{e.stopPropagation(),this._driver.getAppSidebarView().open(),t.scrollIntoView()}),!0),r.appendChild(u);t.getStopper().onValue((()=>{const e=Number(u.getAttribute("data-count"));e<=1?u.remove():2===e?u.removeAttribute("data-count"):u.setAttribute("data-count",String(e-1))}))})),t}removePanels(){this._sidebarPanels.forEach((e=>{e.remove()}))}addNoticeBar(){const e=document.createElement("div");e.className=(0,p.default)("thread_noticeBar");const{heading:t}=this._p.elements;if(!t)throw new Error("Failed to find subject");t.insertAdjacentElement("afterend",e);const n=new _.default(e);return this._stopper.takeUntilBy(l.default.fromEvents(n,"destroy")).onValue((()=>n.destroy())),n}addLabel(){throw new Error("not supported")}getReadyStream(){return this._ready}destroy(){this._driver.getThreadViewElementsMap().delete(this._element),this._eventStream.end()}});n.default=g},{"../../../lib/delay-asap":650,"../../../lib/dom/make-mutation-observer-chunked-stream":662,"../../../lib/dom/querySelectorOrFail":668,"../../../lib/idMap":682,"../../../views/SimpleElementView":721,"../../../views/conversations/custom-message-view":730,"../detection/thread/parser":614,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,"bignumber.js":43,kefir:159,"kefir-bus":156,"kefir-stopper":158,"lodash/find":314,ud:454}],630:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("kefir")),s=r(e("kefir-stopper")),l=r(e("contain-by-screen"));var u=(0,o.defn)(t,class{constructor(e,t){if((0,i.default)(this,"_stopper",(0,s.default)()),this._target=e,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow",this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__tooltip_content",this._el=document.createElement("div"),this._el.style.position="fixed",this._el.className="inboxsdk__tooltip",this._el.appendChild(this._contentEl),t.el)this._contentEl.appendChild(t.el),this._el.classList.add("inboxsdk__tooltip_chromeless");else{{const e=document.createElement("button");e.type="button",e.title="Close",e.className="inboxsdk__close_button",e.addEventListener("click",(e=>{this.destroy()})),this._el.appendChild(e)}if(t.imageUrl){const e=t.imageUrl,n=document.createElement("img");n.className="inboxsdk__tooltip_img",n.src=e,this._contentEl.appendChild(n)}if(t.title){const e=t.title,n=document.createElement("h1");n.textContent=e,this._contentEl.appendChild(n)}if(t.subtitle){const e=t.subtitle,n=document.createElement("div");n.className="inboxsdk__subtitle",n.textContent=e,this._contentEl.appendChild(n)}if(t.button){const e=t.button,n=document.createElement("input");n.type="button",n.value=e.title,n.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.onClick&&e.onClick.call(null)})),this._contentEl.appendChild(n)}}document.body.appendChild(this._el),document.body.appendChild(this._arrowEl),this._updatePosition(!0),this._el.addEventListener("load",(e=>{this._updatePosition(!0)}),!0),a.default.interval(200).takeUntilBy(this._stopper).map((()=>e.getBoundingClientRect())).skipDuplicates(((e,t)=>e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom)).onValue((()=>{this._updatePosition()}))}destroy(){this._el.remove(),this._arrowEl.remove(),this._stopper.destroy()}getStopper(){return this._stopper}_updatePosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this._el.classList.add("inboxsdk__notransition"),this._arrowEl.classList.add("inboxsdk__notransition"));const{position:t}=(0,l.default)(this._el,this._target,{position:"top",hAlign:"center",vAlign:"center",buffer:10});(0,l.default)(this._arrowEl,this._target,{position:t,forcePosition:!0,hAlign:"center",forceHAlign:!0,vAlign:"center",forceVAlign:!0,buffer:11}),["top","bottom","left","right"].forEach((e=>{this._arrowEl.classList.remove("inboxsdk__"+e)})),this._arrowEl.classList.add("inboxsdk__"+t),e&&(this._el.offsetHeight,this._arrowEl.offsetHeight,this._el.classList.remove("inboxsdk__notransition"),this._arrowEl.classList.remove("inboxsdk__notransition"))}});n.default=u},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"contain-by-screen":90,kefir:159,"kefir-stopper":158,ud:454}],631:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let{element:t,discardButton:n}=e;return o.default.merge([(0,a.default)(t,"keydown").filter((e=>[13,32].indexOf(e.which)>-1||[13,32].indexOf(e.keyCode)>-1)).filter((e=>n&&n.contains(e.target))),(0,a.default)(t,"click").filter((e=>n&&n.contains(e.target)))]).map((e=>({eventName:"discard",data:{cancel(){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),s(t)}}})))};var i=r(e("asap")),o=r(e("kefir")),a=r(e("../../lib/from-event-target-capture"));const s=e=>(0,i.default)((()=>e.dispatchEvent(new CustomEvent("inboxSDKdiscardCanceled",{bubbles:!1,cancelable:!1,detail:null}))))},{"../../lib/from-event-target-capture":678,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159}],632:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let{element:t,sendButton:n,sendAndArchive:r}=e;return o.default.merge([(0,a.default)(t,"keydown").filter((e=>e.ctrlKey||e.metaKey)).filter((e=>13===e.which||13===e.keyCode)),(0,a.default)(t,"keydown").filter((e=>[13,32].indexOf(e.which)>-1||[13,32].indexOf(e.keyCode)>-1)).filter((e=>n&&n.contains(e.target)||r&&r.contains(e.target))),(0,a.default)(t,"click").filter((e=>n&&n.contains(e.target)||r&&r.contains(e.target)))]).filter((e=>!t.hasAttribute("data-inboxsdk-send-replaced")||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1))).map((e=>({eventName:"presending",data:{cancel(){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),s(t)}}})))};var i=r(e("asap")),o=r(e("kefir")),a=r(e("../../lib/from-event-target-capture"));const s=e=>(0,i.default)((()=>e.dispatchEvent(new CustomEvent("inboxSDKsendCanceled",{bubbles:!1,cancelable:!1,detail:null}))))},{"../../lib/from-event-target-capture":678,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159}],633:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);if(e){const t=e[1];return`/u/${e[2]}/d/${t}`}{const e=document.location.pathname.match(/(\/u\/\d+)\//i);return e?e[1]:"/u/0"}}},{}],634:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("./getOriginalMessagePage"));var a=(0,i.defn)(t,(async function(e,t){const n=(await(0,o.default)(e,{syncMessageID:t})).match(/<a\b[^<>]+\bhref="\/mail[^"]*(?:\?|&(?:amp;)?)view=att&(?:amp;)?th=([a-f0-9]+)&/i);if(!n)throw new Error("Failed to find gmail message id for inbox message id");return n[1]}));n.default=a},{"./getOriginalMessagePage":636,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],635:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=e("../dom-driver/gmail/gmail-response-processor"),a=r(e("./getSyncThreadsForSearch")),s=r(e("./gmailAjax")),l=r(e("./getAccountUrlPart"));var u=(0,i.defn)(t,(async function(e,t){if(e.isUsingSyncAPI&&e.isUsingSyncAPI()){const{threads:n}=await(0,a.default)(e,"rfc822msgid:"+t);return n[0].oldGmailThreadID}return async function(e,t){const n=await(0,s.default)({method:"POST",url:`https://mail.google.com/mail${(0,l.default)()}/`,data:{ik:e.getPageCommunicator().getIkValue(),at:await e.getGmailActionToken(),ui:"2",view:"tl",start:"0",num:"1",rt:"c",search:"query",q:`rfc822msgid:${t}`},xhrFields:{withCredentials:!0},canRetry:!0,headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}}),r=(0,o.extractThreads)(n.text);if(1!==r.length)throw new Error("Failed to find gmail thread id for rfc message id. Message may not exist in user's account.");return r[0].gmailThreadId}(e,t)}));n.default=u},{"../dom-driver/gmail/gmail-response-processor":534,"./getAccountUrlPart":633,"./getSyncThreadsForSearch":637,"./gmailAjax":638,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],636:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("./gmailAjax"));var a=(0,i.defn)(t,(async function(e,t){const n={ik:e.getPageCommunicator().getIkValue(),view:"om"};let r;if(t.oldGmailMessageID?n.th=t.oldGmailMessageID:t.syncMessageID&&(n.permmsgid=t.syncMessageID),document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/))r=document.location.origin+document.location.pathname;else{const e=document.location.pathname.match(/(\/u\/\d+)\//i);r=`https://mail.google.com/mail${e?e[1]:"/u/0"}`}const{text:i}=await(0,o.default)({url:r,method:"GET",canRetry:!0,data:n});return i}));n.default=a},{"./gmailAjax":638,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],637:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=e("../dom-driver/gmail/gmail-sync-response-processor"),a=r(e("./gmailAjax")),s=r(e("./getAccountUrlPart"));var l=(0,i.defn)(t,(async function(e,t){let n=null;try{const{text:r}=await(0,a.default)({method:"POST",url:`https://mail.google.com/sync${(0,s.default)()}/i/bv`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":await e.getPageCommunicator().getXsrfToken(),"X-Gmail-BTAI":await e.getPageCommunicator().getBtaiHeader(),"X-Google-BTD":"1"},data:JSON.stringify({1:{2:1,4:t}})});n=r}catch(r){const{text:i}=await(0,a.default)({method:"POST",url:`https://mail.google.com/sync${(0,s.default)()}/i/bv?rt=r&pt=ji`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":await e.getPageCommunicator().getXsrfToken(),"X-Gmail-BTAI":await e.getPageCommunicator().getBtaiHeader(),"X-Google-BTD":"1"},data:JSON.stringify([[null,51,null,t]])});n=i}return{threads:(0,o.extractThreadsFromSearchResponse)(n),_text:n}}));n.default=l},{"../dom-driver/gmail/gmail-sync-response-processor":535,"./getAccountUrlPart":633,"./gmailAjax":638,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],638:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("kefir")),a=r(e("../lib/imageRequest")),s=r(e("../../common/rate-limit-queuer")),l=r(e("../../common/ajax"));const u=6e4,c=(0,s.default)((0,s.default)(l.default,1e3,7),1e4,50);var d=(0,i.defn)(t,(async function(e){if(!/^https:\/\/mail\.google\.com(?:$|\/)/.test(e.url))throw new Error("Should not happen: gmailAjax called with non-gmail url");if("https://mail.google.com"===document.location.origin)return await c(e);try{return await c({...e,canRetry:!1})}catch(t){if(t&&0===t.status){try{await o.default.fromPromise((0,a.default)("https://mail.google.com/mail/u/0/")).merge(o.default.later(u,void 0)).take(1).takeErrors(1).toPromise()}catch(e){}return await c(e)}if(t&&"number"==typeof t.status&&t.status>=500)return await c(e);throw t}}));n.default=d},{"../../common/ajax":467,"../../common/rate-limit-queuer":482,"../lib/imageRequest":683,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,ud:454}],639:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){let i=e.querySelector(".inboxsdk__button_icon");i||(i=document.createElement("div"),i.classList.add("inboxsdk__button_icon"),i.appendChild(t));n?e.appendChild(i):e.insertBefore(e,r||e.firstElementChild)}},{}],640:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/extends")),o=r(e("@babel/runtime/helpers/defineProperty")),a=r(e("lodash/flatMap")),s=r(e("lodash/sortBy")),l=r(e("classnames")),u=r(e("kefir")),c=r(e("kefir-stopper")),d=r(e("react")),f=r(e("react-draggable-list")),p=r(e("react-smooth-collapse")),h=(r(e("../../../common/get-or-fail")),r(e("../../lib/idMap"))),m=r(e("../../lib/react/ElementContainer"));const _={stiffness:400,damping:50};class b extends d.default.Component{constructor(e){super(e),(0,o.default)(this,"_stopper",(0,c.default)()),this.state={expansionSettings:this._readExpansionSettings()}}componentDidMount(){u.default.fromEvents(window,"storage").filter((e=>"inboxsdk__sidebar_expansion_settings"===e.key)).takeUntilBy(this._stopper).onValue((()=>{this.setState({expansionSettings:this._readExpansionSettings()})}))}componentWillUnmount(){this._stopper.destroy()}scrollPanelIntoView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._list.getItemInstance(e),r=this.props.container;n.scrollIntoView(t,r&&r())}closePanel(e){const t=this.props.panels.find((t=>t.instanceId===e));t&&this._expandedToggle(t.appId,t.id,!1)}openPanel(e){const t=this.props.panels.find((t=>t.instanceId===e));t&&this._expandedToggle(t.appId,t.id,!0)}shouldComponentUpdate(e,t){return this.props.panels!==e.panels||this.state.expansionSettings!==t.expansionSettings}_expandedToggle(e,t,n){let r=this._readExpansionSettings();Object.prototype.hasOwnProperty.call(r.apps,e)||(r.apps[e]={ids:{}});r.apps[e].ids[t]={lastUse:Date.now(),expanded:n},this.setState({expansionSettings:r},this.props.onExpandedToggle),this._saveExpansionSettings(r)}_readExpansionSettings(){let e;try{e=JSON.parse(t.localStorage.getItem("inboxsdk__sidebar_expansion_settings")||"null")}catch(e){console.error("Failed to read sidebar settings",e)}return e||{apps:{}}}_saveExpansionSettings(e){const n=(0,a.default)(Object.keys(e.apps),(t=>Object.keys(e.apps[t].ids).map((e=>[t,e]))));if(n.length>200){(0,s.default)(n,(t=>{let[n,r]=t;return e.apps[n].ids[r].lastUse})).slice(0,n.length-200).forEach((t=>{let[n,r]=t;delete e.apps[n].ids[r],0===Object.keys(e.apps[n].ids).length&&delete e.apps[n]}))}try{t.localStorage.setItem("inboxsdk__sidebar_expansion_settings",JSON.stringify(e))}catch(e){console.error("Failed to save sidebar settings",e)}}render(){const{expansionSettings:e}=this.state,{panels:t,onClose:n,onOutsideClick:r,onMoveEnd:i,container:o}=this.props,a=t.length>1,s=1===t.length&&t[0].hideTitleBar,u=t.map((t=>{const n=Object.prototype.hasOwnProperty.call(e.apps,t.appId)?e.apps[t.appId]:null,r=n?n.ids[t.id]:null,i=!r||r.expanded;return{panelDescriptor:t,showControls:a,expanded:i,onExpandedToggle:e=>{this._expandedToggle(t.appId,t.id,e)}}}));return d.default.createElement("div",{className:(0,l.default)((0,h.default)("app_sidebar"),{[(0,h.default)("hideTitleBar")]:s})},d.default.createElement("div",{className:(0,h.default)("app_sidebar_main"),ref:e=>{e&&(this._main=e)}},d.default.createElement("div",{className:(0,h.default)("app_sidebar_content_area")},d.default.createElement(f.default,{padding:0,ref:e=>{e&&(this._list=e)},itemKey:e=>e.panelDescriptor.instanceId,template:g,list:u,onMoveEnd:(e,t,n,r)=>{i(e.map((e=>e.panelDescriptor)),t.panelDescriptor,n,r)},springConfig:_,container:o||(()=>this._main)})),r&&d.default.createElement("div",{className:(0,h.default)("app_sidebar_content_area_padding"),onClick:e=>{e.preventDefault(),r()}})),n&&d.default.createElement("button",{className:"inboxsdk__close_button",type:"button",title:"Close",onClick:n}))}}n.default=b;class g extends d.default.Component{scrollIntoView(e,t){if(e&&t){const e=this._el.parentElement;e&&t.scrollTo({top:e.offsetTop,behavior:"smooth"})}else this._el.scrollIntoView({behavior:"smooth"})}getDragHeight(){return 40}componentDidMount(){(!this.props.item.showControls||this.props.item.expanded)&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}componentDidUpdate(e){const t=!e.item.showControls||e.item.expanded,n=!this.props.item.showControls||this.props.item.expanded;!t&&n?document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}})):t&&!n&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}shouldComponentUpdate(e){return this.props.itemSelected!==e.itemSelected||this.props.item.panelDescriptor!==e.item.panelDescriptor||this.props.item.showControls!==e.item.showControls||this.props.item.expanded!==e.item.expanded}render(){const{dragHandleProps:e,itemSelected:t,item:{panelDescriptor:{title:n,appName:r,iconClass:o,iconUrl:a,el:s},showControls:u,expanded:c,onExpandedToggle:f}}=this.props,_=.01*t+1,b=4*t;return d.default.createElement("div",{ref:e=>{e&&(this._el=e)},className:(0,l.default)((0,h.default)("app_sidebar_content_panel"),{[(0,h.default)("dragged")]:t>.2,[(0,h.default)("expanded")]:c,[(0,h.default)("showControls")]:u}),style:{transform:1===_?"none":`scale(${_})`,boxShadow:0===b?"none":`0px 0px ${b}px 0px rgba(0, 0, 0, 0.3)`}},d.default.createElement("div",{className:(0,h.default)("app_sidebar_content_panel_top_line"),"data-app-name":r},d.default.createElement("span",(0,i.default)({className:(0,h.default)("app_sidebar_content_panel_title")},u?e:null),d.default.createElement("div",{className:(0,h.default)("app_sidebar_content_panel_grip")}),d.default.createElement("span",{className:(0,h.default)("app_sidebar_content_panel_title_icon_container")},d.default.createElement("span",{className:(0,l.default)((0,h.default)("app_sidebar_content_panel_title_icon"),o)},a&&d.default.createElement("img",{src:a}))),d.default.createElement("span",{className:(0,h.default)("app_sidebar_content_panel_title_text")},n)),d.default.createElement("span",{className:(0,h.default)("app_sidebar_content_panel_toggle"),onClick:()=>f(!c)},d.default.createElement("button",{type:"button",className:(0,h.default)("app_sidebar_content_panel_toggle_button")}))),d.default.createElement(p.default,{expanded:!u||c,heightTransition:".15s ease"},d.default.createElement(m.default,{className:(0,h.default)("app_sidebar_content_panel_content"),el:s})))}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/get-or-fail":475,"../../lib/idMap":682,"../../lib/react/ElementContainer":695,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/extends":12,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:159,"kefir-stopper":158,"lodash/flatMap":317,"lodash/sortBy":349,react:436,"react-draggable-list":418,"react-smooth-collapse":433}],641:[function(e,t,n){(function(r){(function(){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("@babel/runtime/helpers/defineProperty")),a=e("ud"),s=(i(e("auto-html")),i(e("kefir"))),l=i(e("kefir-bus")),u=(i(e("kefir-stopper")),i(e("../../lib/delay-asap"))),c=i(e("../../lib/idMap")),d=i(e("../../lib/dom/querySelectorOrFail"));var f=(0,a.defn)(t,class{constructor(e,t,n,i){(0,o.default)(this,"_eventStream",(0,l.default)()),(0,o.default)(this,"_isActive",!1),(0,o.default)(this,"_instanceId",`${Date.now()}-${Math.random()}`),this._driver=e,this._sidebarId=n,this._isGlobal=Boolean(i),this._stopper=this._eventStream.ignoreValues().beforeEnd((()=>null)).toProperty();const a=r.document;this._eventStream.plug(s.default.fromEvents(a.body,"inboxsdkSidebarPanelActivated").filter((e=>e.detail.instanceId===this._instanceId)).map((()=>(this._isActive=!0,{eventName:"activate"})))),this._eventStream.plug(s.default.fromEvents(a.body,"inboxsdkSidebarPanelDeactivated").filter((e=>e.detail.instanceId===this._instanceId)).map((()=>(this._isActive=!1,{eventName:"deactivate"}))));const f=(0,u.default)().toProperty().onValue((()=>{}));let p,h=!1;const m=(0,d.default)(a.body,"."+(0,c.default)("app_sidebar_waiting_platform"));t.flatMap((e=>f.map((()=>e)))).takeUntilBy(this._stopper).onValue((t=>{const{el:n,iconUrl:r,iconClass:o,title:s,orderHint:l,id:u,hideTitleBar:c,appIconUrl:d,primaryColor:f,secondaryColor:_}=t;p=t.appName||e.getOpts().appName||t.title,a.body.contains(n)||m.appendChild(n);const b=h?"inboxsdkUpdateSidebarPanel":"inboxsdkNewSidebarPanel";h=!0,n.dispatchEvent(new CustomEvent(b,{bubbles:!0,cancelable:!1,detail:{appIconUrl:d||this._driver.getOpts().appIconUrl||r,appId:this._driver.getAppId(),appName:p,hideTitleBar:Boolean(c),iconClass:o,iconUrl:r,id:String(u||s),instanceId:this._instanceId,isGlobal:i,orderHint:"number"==typeof l?l:0,primaryColor:f||this._driver.getOpts().primaryColor,secondaryColor:_||this._driver.getOpts().secondaryColor,sidebarId:this._sidebarId,title:s}}))})),this._stopper.onValue((()=>{h&&a.body.dispatchEvent(new CustomEvent("inboxsdkRemoveSidebarPanel",{bubbles:!0,cancelable:!1,detail:{appName:p,sidebarId:this._sidebarId,instanceId:this._instanceId}}))}))}getStopper(){return this._stopper}getEventStream(){return this._eventStream}scrollIntoView(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelScrollIntoView",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,sidebarId:this._sidebarId}}))}close(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelClose",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}open(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelOpen",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}isActive(){return this._isActive}remove(){this._eventStream.end()}});n.default=f}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/delay-asap":650,"../../lib/dom/querySelectorOrFail":668,"../../lib/idMap":682,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:159,"kefir-bus":156,"kefir-stopper":158,ud:454}],642:[function(e,t,n){"use strict";function r(e,t,n){const r=document.createElement("div");return r.classList.add("inboxsdk__button_icon"),r.innerHTML="&nbsp;",t?e.appendChild(r):e.insertBefore(r,n||e.firstElementChild),r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,i,o,a,s){if(n&&a)throw new Error("append and insertBeforeEl should not be used together");if(s&&(i||o))throw new Error("iconHtml can not be used together with iconClass or iconUrl");s?(e.iconHtmlElement||(e.iconHtmlElement=r(t,n,a)),e.iconHtmlElement.innerHTML=s,e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null),e.iconElement&&(e.iconElement.remove(),e.iconElement=null)):o?(e.iconImgElement?e.iconImgElement.firstElementChild.src=o:e.iconImgElement=function(e,t,n,i){const o=r(t,n,i);o.innerHTML="";const a=document.createElement("img");return a.classList.add("inboxsdk__button_iconImg"),a.src=e,o.appendChild(a),o}(o,t,n,a),e.iconImgElement.setAttribute("class",`inboxsdk__button_icon ${i||""}`),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconElement&&(e.iconElement.remove(),e.iconElement=null)):i?(e.iconElement||(e.iconElement=r(t,n,a)),e.iconElement.setAttribute("class","inboxsdk__button_icon "+i),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null)):(e.iconElement&&(e.iconElement.remove(),e.iconElement=null),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null))}},{}],643:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("./logger"));n.default=class{constructor(e){(0,i.default)(this,"_runCount",0),(0,i.default)(this,"_errorLogs",[]),(0,i.default)(this,"_hasReported",!1),this._name=e}run(e,t){if(this._hasReported)throw new Error("Has already reported");this._runCount++;try{return t()}catch(t){return this._errorLogs.push({name:e,message:t.message}),null}}report(e){if(this._hasReported)throw new Error("Has already reported");this._hasReported=!0,this._errorLogs.length&&o.default.error(new Error(`Error Collector: ${this._name}`),{errorLogs:this._errorLogs,extra:e()})}getErrorLogs(){return this._errorLogs}runCount(){return this._runCount}errorCount(){return this._errorLogs.length}}},{"./logger":691,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],644:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty"));n.default=class{constructor(e){(0,i.default)(this,"_map",new WeakMap),this._mappers=new Map(e)}get(e){let t=this._map.get(e);if(!t){const n=this._mappers.get(e.constructor);if(!n)throw new Error(`Unknown class ${e.constructor.name}`);t=n(e),this._map.set(e,t)}return t}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],645:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("contain-by-screen")),a=r(e("kefir")),s=r(e("kefir-bus")),l=r(e("kefir-stopper")),u=r(e("./fromEventsWithOptions"));n.default=class{constructor(e,t,n){(0,i.default)(this,"_manualRepositions",(0,s.default)()),(0,i.default)(this,"_stopper",(0,l.default)()),a.default.merge([this._manualRepositions,a.default.fromEvents(window,"resize"),(0,u.default)(window,"scroll",{capture:!0,passive:!0}).filter((e=>e.target.contains(t)))]).toProperty((()=>null)).takeUntilBy(this._stopper).onValue((()=>{(0,o.default)(e,t,n)}))}reposition(){this._manualRepositions.emit(null)}destroy(){this._stopper.destroy()}}},{"./fromEventsWithOptions":679,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"contain-by-screen":90,kefir:159,"kefir-bus":156,"kefir-stopper":158}],646:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return i.default.stream((n=>{const r=new Map;function i(e){switch(e.type){case"value":{const i=e.value,a=t?Array.prototype.map.call(i,t):i;r.forEach(((e,t)=>{let{el:n,removalStream:i}=e;Array.prototype.indexOf.call(a,t)<0&&(r.delete(t),i.destroy())}));for(let e=0,t=i.length;e<t;e++){const t=i[e],s=a[e];if(!r.has(s)){const e={el:t,removalStream:(0,o.default)()};r.set(s,e),n.emit(e)}}break}case"error":n.error(e.value);break;case"end":n.end()}}return e.onAny(i),()=>{r.forEach((e=>{let{removalStream:t}=e;t.destroy()})),e.offAny(i)}}))};var i=r(e("kefir")),o=r(e("kefir-stopper"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158}],647:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("asap")),o=r(e("lodash/once")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),s=r(e("./logger"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=class{constructor(){this.ajaxInterceptStream=a.fromEvents(document,"inboxSDKajaxIntercept").map((e=>e.detail))}getUserEmailAddress(){const e=document.head.getAttribute("data-inboxsdk-user-email-address");if("string"!=typeof e)throw new Error("should not happen");return e}getUserLanguage(){const e=document.head.getAttribute("data-inboxsdk-user-language");if("string"!=typeof e)throw new Error("should not happen");return e}getIkValue(){const e=document.head.getAttribute("data-inboxsdk-ik-value");if(e)return e;if(window.opener){const e=window.opener.document.head.getAttribute("data-inboxsdk-ik-value");if(e)return e;throw new Error("Failed to look up parent window 'ik' value")}throw new Error("Failed to look up 'ik' value")}isUsingSyncAPI(){return!1}async getXsrfToken(){const e=document.head.getAttribute("data-inboxsdk-xsrf-token");if(e)return e;{await this.ajaxInterceptStream.filter((e=>{let{type:t}=e;return"xsrfTokenHeaderReceived"===t})).take(1).toPromise();const e=document.head.getAttribute("data-inboxsdk-xsrf-token");if(!e)throw new Error("Failed to look up XSRF token");return e}}async getBtaiHeader(){const e=document.head.getAttribute("data-inboxsdk-btai-header");if(e)return e;{await this.ajaxInterceptStream.filter((e=>{let{type:t}=e;return"btaiHeaderReceived"===t})).take(1).toPromise();const e=document.head.getAttribute("data-inboxsdk-btai-header");if(!e)throw new Error("Failed to look up BTAI header");return e}}resolveUrlRedirects(e){return this.pageAjax({url:e,method:"HEAD"}).then((e=>e.responseURL))}pageAjax(e){const t=`${Date.now()}-${Math.random()}`,n=a.fromEvents(document,"inboxSDKpageAjaxDone").filter((e=>e.detail&&e.detail.id===t)).take(1).flatMap((e=>{if(e.detail.error){const t=Object.assign(new Error(e.detail.message||"Connection error"),{status:e.detail.status});return e.detail.stack&&(t.stack=e.detail.stack),a.constantError(t)}return a.constant({text:e.detail.text,responseURL:e.detail.responseURL})})).toPromise();return document.dispatchEvent(new CustomEvent("inboxSDKpageAjax",{bubbles:!1,cancelable:!1,detail:Object.assign({},e,{id:t})})),n}silenceGmailErrorsForAMoment(){document.dispatchEvent(new CustomEvent("inboxSDKsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}));const e=new Error("Forgot to unsilence page errors");let t=!1;const n=(0,o.default)((()=>{t=!0,document.dispatchEvent(new CustomEvent("inboxSDKunsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}))}));return(0,i.default)((()=>{t||(s.default.error(e),n())})),n}registerAllowedHashLinkStartTerm(e){document.dispatchEvent(new CustomEvent("inboxSDKregisterAllowedHashLinkStartTerm",{bubbles:!1,cancelable:!1,detail:{term:e}}))}}},{"./logger":691,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159,"lodash/once":346}],648:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(!Array.isArray(t))throw new Error("suggestions must be an array");return t.map((t=>{const n={...t};if("string"!=typeof n.name&&"string"!=typeof n.nameHTML)throw new Error("suggestion must have name or nameHTML property");if("string"!=typeof n.routeName&&"string"!=typeof n.externalURL&&"string"!=typeof n.searchTerm&&"function"!=typeof n.onClick)throw new Error("suggestion must have routeName, externalURL, searchTerm, or onClick property");if("string"==typeof n.iconURL){const t=n.iconURL;e.getLogger().deprecationWarning('AutocompleteSearchResult "iconURL" property',"AutocompleteSearchResult.iconUrl"),n.iconUrl||(1===e.getOpts().REQUESTED_API_VERSION?n.iconUrl=t:console.error("Support for iconURL property was dropped after API version 1")),delete n.iconURL}return n}))}},{}],649:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(0===e.length||/^-?[0-9]/.test(e))throw new Error("Invalid CSS selector");return e.replace(/[^a-z0-9]/g,"\\$&")}},{}],650:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return o.stream((t=>{(0,i.default)((()=>{t.emit(e),t.end()}))}))};var i=r(e("asap")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}},{"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159}],651:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){i.default.merge([i.default.fromEvents(e,"keypress"),i.default.fromEvents(e,"keydown"),i.default.fromEvents(e,"keyup")]).onValue((e=>{e.stopPropagation();const t=new KeyboardEvent(e.type,{bubbles:!0});Object.defineProperties(t,{cancelable:{value:e.cancelable},bubbles:{value:e.bubbles},target:{value:e.target},detail:{value:e.detail},key:{value:e.key},code:{value:e.code},location:{value:e.location},ctrlKey:{value:e.ctrlKey},shiftKey:{value:e.shiftKey},altKey:{value:e.altKey},metaKey:{value:e.metaKey},repeat:{value:e.repeat},isComposing:{value:e.isComposing},charCode:{value:e.charCode},keyCode:{value:e.keyCode},which:{value:e.which}}),document.dispatchEvent(t)}))};var i=r(e("kefir"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],652:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return t=>{const n=e(t.el);return t.removalStream.take(1).onValue((()=>{n.destroy()})),n}}},{}],653:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("kefir-bus"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}n.default=class{constructor(e){(0,i.default)(this,"_eventStream",(0,a.default)()),this._element=e,this._setupEventStream()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){}deactivate(){}_setupEventStream(){const e=o.fromEvents(this._element,"click");e.onValue((e=>{e.stopPropagation(),e.preventDefault()})),this._eventStream.plug(e.map((e=>({eventName:"click",domEvent:e}))))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156}],654:[function(e,t,n){"use strict";function r(e,t,n){for(let r=0;r<n.length;r++){const o=n[r],a=t.getAttribute(o),s=null==a?null:i(a)??a;if(s>e[o])return!0;if(s<e[o])return!1}return!1}function i(e){const t=parseFloat(e);return!isNaN(t)&&isFinite(t)?t:null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){const o={};n.forEach((function(t){const n=e.getAttribute(t);o[t]=null==n?null:i(n)??n}));for(let e=0;e<t.length;e++){const i=t[e];if(r(o,i,n))return i}return null}},{}],655:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getSelectedHTMLInElement=function(e,t){const n=document.getSelection();return i.default.toArray([n&&n.rangeCount?n.getRangeAt(0):null,t],i.default.compose(i.default.keep(),i.default.filter((t=>o(t,e))),i.default.map((e=>{const t=document.createElement("div");return t.appendChild(e.cloneContents()),t.innerHTML})),i.default.take(1)))[0]},n.getSelectedTextInElement=function(e,t){const n=document.getSelection();return i.default.toArray([n&&n.rangeCount?n.getRangeAt(0):null,t],i.default.compose(i.default.keep(),i.default.filter((t=>o(t,e))),i.default.map((e=>e.toString())),i.default.take(1)))[0]};var i=r(e("transducers.js"));function o(e,t){return!function(e){return e.startContainer===e.endContainer&&e.startOffset===e.endOffset}(e)&&function(e,t){return t.contains(e.startContainer)||t.contains(e.endContainer)}(e,t)}},{"@babel/runtime/helpers/interopRequireDefault":15,"transducers.js":452}],656:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=i.default.toArray(Array.prototype.slice.call(e.children),i.default.compose(i.default.filter((e=>{let i=!1;for(const r of n){const n=t.getAttribute(r),o=e.getAttribute(r);if(null==n||null==o)continue;let a;if(i=!0,a=isNaN(parseFloat(n))||isNaN(parseFloat(o))?o.localeCompare(n):parseFloat(o)-parseFloat(n),a>0)return!0;if(a<0)return!1}return!!r&&!i})),i.default.take(1)))[0];e.insertBefore(t,a)};var i=r(e("transducers.js"));const o=["data-group-order-hint","data-order-hint","data-insertion-order-hint"]},{"@babel/runtime/helpers/interopRequireDefault":15,"transducers.js":452}],657:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),o=r(e("kefir"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var s=i.defn(t,(function(e,t,n){if(e.focus(),e instanceof HTMLTextAreaElement){var r=e.selectionStart;e.selectionStart<e.selectionEnd&&(e.value=e.value.substring(0,e.selectionStart)+e.value.substring(e.selectionEnd)),e.value=e.value.substring(0,r)+t+e.value.substring(r),e.selectionStart=r+t.length,e.selectionEnd=r+t.length}else{var i=null;if(e.getSelection?i=e:e.ownerDocument&&e.ownerDocument.getSelection&&(i=e.ownerDocument),i){var a=i.getSelection();if(a.getRangeAt&&a.rangeCount){var s,l=n||a.getRangeAt(0);if(l.deleteContents(),t instanceof DocumentFragment)s=t;else if(s=document.createDocumentFragment(),t instanceof HTMLElement)s.appendChild(t);else{var u,c=document.createElement("div");for(c.innerHTML=t;u=c.firstChild;)s.appendChild(u)}var d=s.firstElementChild;l.insertNode(s);var f=document.createEvent("MouseEvents");f.initMouseEvent("mousedown",!1,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),f.preventDefault(),e.dispatchEvent(f),l.collapse(!1),a.removeAllRanges(),a.addRange(l);var p=o.default.merge([o.default.fromEvents(e,"mousedown"),o.default.fromEvents(e,"keypress")]);o.default.fromEvents(e,"focus").takeUntilBy(p).onValue((function(){a.removeAllRanges(),a.addRange(l)}));return d}}}}));n.default=s},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,ud:454}],658:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i.stream((t=>s&&s.bind(e,(function(e){return t.emit(e),!1}),"keydown")))};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),o=r(e("combokeys-capture"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}const s="undefined"!=typeof document&&new o.default(document.body,!0)},{"@babel/runtime/helpers/interopRequireDefault":15,"combokeys-capture":89,kefir:159}],659:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!e||!e.nodeType)throw new Error("Expected element, got "+String(e));return o.stream((t=>{const n=new Map;let r=!1;function o(e){if(1!==e.nodeType)return;n.has(e)&&l(new Error("Already had removalStream for element with class "+e.className));const r=(0,a.default)();n.set(e,r);try{t.emit({el:e,removalStream:r})}catch(e){l(e)}}function s(e){if(1!==e.nodeType)return;const t=n.get(e);if(n.delete(e),t)try{t.destroy()}catch(e){l(e)}else l(new Error("Could not find removalStream for element with class "+e.className))}const u=new MutationObserver((function(e){e.forEach((e=>{Array.prototype.forEach.call(e.addedNodes,o),Array.prototype.forEach.call(e.removedNodes,s)}))}));return(0,i.default)((()=>{r||(u.observe(e,{childList:!0}),Array.prototype.slice.call(e.children).forEach(o))})),function(){r=!0,u.disconnect(),(0,i.default)((()=>{n.forEach((e=>{e.destroy()}))}))}}))};var i=r(e("asap")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),a=r(e("kefir-stopper"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e){setTimeout((()=>{throw e}),1)}},{"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159,"kefir-stopper":158}],660:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=new Map;return t=>{let n=e.get(t.el);return n?(n.getSize()>1&&console.warn("element is part of multiple element streams",n.getSize(),t.el),n.add(t.removalStream.flatMap(a.default)),i.never()):(n=new o.default(t.removalStream.flatMap(a.default)),n.stream.onValue((function(){e.delete(t.el)})),e.set(t.el,n),i.constant({el:t.el,removalStream:n.stream}))}};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),o=r(e("../stopper-pool")),a=r(e("../delay-asap"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"../delay-asap":650,"../stopper-pool":700,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],661:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return t=>{const n=e(t.el);return n?(t.removalStream.take(1).onValue((()=>{n.destroy()})),r.constant(n)):r.never()}};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(e("kefir"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}},{kefir:159}],662:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return r.stream((n=>{const r=new MutationObserver((e=>{n.emit(e instanceof Array?e:Array.from(e))}));return r.observe(e,t),()=>{r.disconnect()}}))};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(e("kefir"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}},{kefir:159}],663:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,i.default)(e,t).flatten()};var i=r(e("./make-mutation-observer-chunked-stream"))},{"./make-mutation-observer-chunked-stream":662,"@babel/runtime/helpers/interopRequireDefault":15}],664:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../from-event-target-capture")),o=e("ud");const a=(0,i.default)(document.body,"mouseup");var s=(0,o.defn)(t,(function(e){return(0,i.default)(e,"mousedown").flatMapLatest((()=>a.take(1).filter((t=>e.contains(t.target)))))}));n.default=s},{"../from-event-target-capture":678,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],665:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i.merge([(0,o.default)(document,"click"),(0,o.default)(document.body,"focus")]).filter((t=>!t.shouldIgnore&&(t.isTrusted||!1)&&e.every((e=>{for(const n of(0,a.default)(t.target))if(n===e)return!1;return!0})))).map((e=>({type:"outsideInteraction",cause:e}))).merge(i.fromEvents(document,"keydown").filter((e=>e.key?"Escape"===e.key:27===e.which)).map((e=>(e.preventDefault(),e.stopPropagation(),{type:"escape",cause:e})))).map((e=>e))};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),o=r(e("../from-event-target-capture")),a=r(e("./parentNodes"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},{"../from-event-target-capture":678,"./parentNodes":666,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],666:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function*(e){do{yield e}while(e=e.rfaAnchor||e._logicalParent||e.parentNode)}},{}],667:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=e.querySelectorAll(t);if(1!==n.length)throw new Error(`Found ${n.length} elements when expecting 1 using selector ${JSON.stringify(t)}`);return n[0]}},{}],668:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=e.querySelector(t);if(!n)throw new Error(`Failed to find element with selector: ${t}`);return n}},{}],669:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=new MouseEvent("click");Object.defineProperties(t,{target:{value:e.target},detail:{value:e.detail},screenX:{value:e.screenX},screenY:{value:e.screenY},clientX:{value:e.clientX},clientY:{value:e.clientY},button:{value:e.button},buttons:{value:e.buttons},ctrlKey:{value:e.ctrlKey},shiftKey:{value:e.shiftKey},altKey:{value:e.altKey},metaKey:{value:e.metaKey}}),document.dispatchEvent(t)}},{}],670:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=`inboxsdk__${e}`;let r=document.getElementById(n);if(!t)return void(r&&r.remove());if(!r){if(r=document.createElement("style"),r.className="inboxsdk__custom",r.id=n,!document.head)throw new Error("missing head");document.head.appendChild(r)}r.textContent=t}},{}],671:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){e.value=t;const r=document.createEvent("Event");r.initEvent(n),e.dispatchEvent(r)}},{}],672:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.simulateDragEnd=function(e,t){const n=o(t),r={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,i.default)(e,{type:"dragleave",bubbles:!0,cancelable:!1,props:r,dataTransfer:n}),(0,i.default)(e,{type:"dragend",bubbles:!0,cancelable:!1,props:r,dataTransfer:n})},n.simulateDragOver=function(e,t){const n=o(t),r={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,i.default)(e,{type:"dragenter",bubbles:!0,cancelable:!1,props:r,dataTransfer:n}),(0,i.default)(e,{type:"dragover",bubbles:!0,cancelable:!1,props:r,dataTransfer:n})},n.simulateDrop=function(e,t){const n=o(t);(0,i.default)(e,{type:"drop",bubbles:!0,cancelable:!1,props:{screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0},dataTransfer:n})};var i=r(e("./trigger-relay-event"));function o(e){return{files:e,fileNames:Array.from(e).map((e=>"string"==typeof e.name?e.name:void 0))}}},{"./trigger-relay-event":675,"@babel/runtime/helpers/interopRequireDefault":15}],673:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){const r=!1,o=!1,a=!1,s=!1;(0,i.default)(e,{type:"keydown",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:n,ctrlKey:r,metaKey:o,altKey:a,shiftKey:s}}),(0,i.default)(e,{type:"keypress",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:n,ctrlKey:r,metaKey:o,altKey:a,shiftKey:s}}),(0,i.default)(e,{type:"keyup",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:n,ctrlKey:r,metaKey:o,altKey:a,shiftKey:s}})};var i=r(e("./trigger-relay-event"))},{"./trigger-relay-event":675,"@babel/runtime/helpers/interopRequireDefault":15}],674:[function(e,t,n){"use strict";function r(e,t){const n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,0,e.offsetLeft,e.offsetTop,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,n.simulateClick=function(e){r(e,"mousedown"),r(e,"mouseup"),r(e,"click"),r(e,"mouseleave"),r(e,"mouseout"),e.blur()},n.simulateHover=function(e){r(e,"mouseover")}},{}],675:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){e.dispatchEvent(new CustomEvent("inboxsdk_event_relay",{bubbles:!0,cancelable:!1,detail:t}))}},{}],676:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let t=null,n=null;const r=e.split("<"),o=r[0].replace(/\u202c/g,"").trim();if(r.length>1)t=o,n=r[1].split(">")[0].replace(/\u202c/g,"").trim();else{if(!(0,i.default)(o))throw Object.assign(new Error("Invalid email address"),{firstPartTrimmed:o});n=o}return{name:t,emailAddress:n}};var i=r(e("./is-valid-email"))},{"./is-valid-email":688,"@babel/runtime/helpers/interopRequireDefault":15}],677:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}},{}],678:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return r.stream((n=>{function r(e){n.value(e)}return e.addEventListener(t,r,!0),()=>{e.removeEventListener(t,r,!0)}}))};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(e("kefir"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}},{kefir:159}],679:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){return r.stream((r=>((0,i.addEventListener)(e,t,r.emit,n),()=>{(0,i.removeEventListener)(e,t,r.emit,n)})))};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),i=e("event-listener-with-options");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}},{"event-listener-with-options":135,kefir:159}],680:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;r(e("lodash/once"));var i=r(e("kefir")),o=e("ud"),a=r(e("./dom/querySelectorOrFail")),s=r(e("./dom/make-mutation-observer-chunked-stream"));const l=""+Math.random(),u="https://ssl.gstatic.com/ui/v1/icons/common/x_8px.png";var c=(0,o.defn)(t,(function(e){try{e.getBodyElement()}catch(e){return}const t=e.getElement();var n;(n=t,i.default.later(0).merge((0,s.default)(n,{attributes:!0,attributeFilter:["class"]})).map((()=>!n.classList.contains("inboxsdk__ensure_link_active"))).filter(Boolean).take(1)).takeUntilBy(e.getStopper()).onValue((()=>{t.classList.add("inboxsdk__ensure_link_active"),e.getStopper().onValue((()=>{t.classList.remove("inboxsdk__ensure_link_active")})),e.getEventStream().filter((e=>"bodyChanged"===e.eventName)).toProperty((()=>null)).debounce(100,{immediate:!0}).takeUntilBy(e.getStopper()).onValue((()=>{d(e)})),e.getEventStream().filter((e=>"presending"===e.eventName)).onValue((()=>{f(e)}))}))}));n.default=c;const d=(0,o.defn)(t,(function(e){p(e.getBodyElement()).filter(h).forEach(_)}),"doFixing"),f=(0,o.defn)(t,(function(e){p(e.getBodyElement()).filter(m).forEach((e=>{const t=e.querySelector(`img[src="${u}"]`);t&&t.remove();const n=e.querySelector("a > span");n&&(n.style.textDecoration="none")}))}),"doPresendFixing");function p(e){const t=e.querySelectorAll("[hspace=inboxsdk__chip]");return[...Array.from(t).map((e=>e.parentElement)),...Array.from(e.querySelectorAll("[hspace=inboxsdk__chip_main]"))]}function h(e){var t=e.getAttribute("data-sdk-linkchip-claimed");return l===t?!e._linkChipEnhancedByThisExtension:null==t}function m(e){return!!e._linkChipEnhancedByThisExtension}function _(e){const t=e.querySelector("a");t&&(t.addEventListener("mousedown",(function(e){e.stopImmediatePropagation()}),!0),t.addEventListener("click",(function(e){e.stopImmediatePropagation()}),!0));const n=document.createElement("img");n.src=u,n.setAttribute("style","opacity: 0.55; cursor: pointer; float: right; position: relative; top: -1px;"),n.addEventListener("mousedown",(function(t){e.remove()}),!0),n.addEventListener("click",(function(e){e.stopImmediatePropagation(),e.preventDefault()}),!0),e.addEventListener("mouseenter",(function(){e.appendChild(n),(0,a.default)(e,"a > span").style.textDecoration="underline"})),e.addEventListener("mouseleave",(function(){n.remove(),(0,a.default)(e,"a > span").style.textDecoration="none"})),e.addEventListener("mousedown",(function(e){e.preventDefault()})),e.contentEditable="false",e.setAttribute("data-sdk-linkchip-claimed",l),e._linkChipEnhancedByThisExtension=!0}},{"./dom/make-mutation-observer-chunked-stream":662,"./dom/querySelectorOrFail":668,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/once":346,ud:454}],681:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/remove")),a=r(e("asap")),s=r(e("./logger"));function l(e,t){try{e(t)}catch(e){s.default.error(e)}}n.default=class{constructor(){(0,i.default)(this,"_targets",[]),(0,i.default)(this,"_pendingHandlers",[]),(0,i.default)(this,"_handlers",[])}registerHandler(e){return-1===this._pendingHandlers.indexOf(e)&&(this._pendingHandlers.push(e),(0,a.default)((()=>{const e=this._pendingHandlers.slice();for(let t=e.length-1;t>=0;t--){const n=e[t];-1===this._handlers.indexOf(n)&&(this._handlers.push(n),this._informHandlerOfTargets(n))}this._pendingHandlers=[]}))),()=>{(0,o.default)(this._pendingHandlers,(t=>t===e)),(0,o.default)(this._handlers,(t=>t===e))}}addTarget(e){this._targets.push(e),e&&"object"==typeof e&&"function"==typeof e.on&&e.on("destroy",(()=>{this.removeTarget(e)})),this._informHandlersOfTarget(e)}removeTarget(e){(0,o.default)(this._targets,(t=>t===e))}dumpHandlers(){this._pendingHandlers=[],this._handlers=[]}_informHandlerOfTargets(e){const t=this._targets.slice();for(let n=0;n<t.length;n++)l(e,t[n])}_informHandlersOfTarget(e){const t=this._handlers.slice();for(let n=0;n<t.length;n++)l(t[n],e)}}},{"./logger":691,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"lodash/remove":348}],682:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n._reset=function(){o.clear(),a=null},n.default=function(e){const t=o.get(e);if(null!=t)return t;if(null==a){if(a=document.documentElement.getAttribute("data-map-id"),null==a){const e=new i.default;e.update("PWVe"+Math.floor(Date.now()/36e5)+"PYiE0"),a=e.digest("hex").slice(0,16)+"",document.documentElement.setAttribute("data-map-id",a)}s=/x$/.test(a)}let n;if(s){n=`idm${String(a.charCodeAt(0)%10)}_${e}`}else{const t=new i.default;t.update("4iYi29W"+e+":"+a+"jn2mPvTG"),n=t.digest("hex").slice(0,16).replace(/[0-9]/g,(e=>String.fromCharCode("A".charCodeAt(0)+Number(e))))}return o.set(e,n),n};var i=r(e("sha.js/sha256"));const o=new Map;let a=null,s=!1},{"@babel/runtime/helpers/interopRequireDefault":15,"sha.js/sha256":446}],683:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new Promise(((t,n)=>{const r=new Image;r.addEventListener("load",(()=>t(r))),r.addEventListener("error",n),r.src=e}))}},{}],684:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=/ (\d+)$/.exec(e);if(t)return e.slice(0,e.length-t[0].length)+" "+(Number(t[1])+1);return e+" 2"}},{}],685:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.injectScript=void 0,n.setInjectScriptImplementation=function(e){s=e};var i=r(e("lodash/once")),o=r(e("kefir")),a=r(e("./dom/make-mutation-observer-chunked-stream"));let s=()=>{window.chrome.runtime.sendMessage({type:"inboxsdk__injectPageWorld"},(e=>{if(!e){const e=document.createElement("script");e.type="text/javascript",e.src=window.chrome.runtime.getURL("pageWorld.js"),document.documentElement.appendChild(e)}}))};const l=(0,i.default)((()=>(document.head.hasAttribute("data-inboxsdk-script-injected")||(document.head.setAttribute("data-inboxsdk-script-injected","true"),s()),o.default.later(0,null).merge((0,a.default)(document.head,{attributes:!0})).filter((()=>document.head.hasAttribute("data-inboxsdk-user-email-address"))).take(1).map((()=>null)).toPromise())));n.injectScript=l},{"./dom/make-mutation-observer-chunked-stream":662,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"lodash/once":346}],686:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),o=r(e("auto-html"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var s=i.defn(t,(function(e,t){e.focus();var n=function(e){var t=document.createElement("div"),n=e.iconUrl?o.default`
<img style="height:16px; width:16px; vertical-align: bottom; border: none;" height="16px" width="16px" src="${e.iconUrl}">&nbsp;
`:"",r=o.default`
<div contenteditable="false" class="inboxsdk__compose_linkChip"
style="width: 396px; height: 18px; max-height: 18px; padding: 5px; color: rgb(34, 34, 34); font-family: arial; font-style: normal; font-weight: bold; font-size: 13px; cursor: default; border: 1px solid rgb(221, 221, 221); line-height: 1; background-color: rgb(245, 245, 245);" hspace="inboxsdk__chip_main">
  <a href="${e.url}" target="_blank" style=" display:inline-block; max-width: 366px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-height: 1.2em; text-decoration: none; cursor: pointer; padding: 1px 0; border: none; ">
    ${{__html:n}}
    <span dir="ltr" style="color: rgb(17, 85, 204); text-decoration: none; vertical-align: bottom;">${e.text}</span>
  </a>
</div>
`;return t.innerHTML=r,t.children[0]}(t),r=document.createDocumentFragment();return r.appendChild(document.createTextNode("​")),r.appendChild(n),r.appendChild(document.createTextNode("​")),e.insertBodyHTMLAtCursor(r),e.isFullscreen()||e.isInlineReplyForm()||document.activeElement===e.getBodyElement()||(e.setMinimized(!0),e.setMinimized(!1)),e.focus(),n}));n.default=s},{"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,ud:454}],687:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(o.has(function(e){const t=new i.default;return t.update("YlEHtGl72+c"+e),t.digest("hex")}(e)))return!0;const t=a.exec(e);if(!t)return!1;const n=t[1],r=t[2],s=new i.default;return s.update(n),s.digest("hex").slice(0,10)===r};var i=r(e("sha.js/sha1"));const o=new Set(["b540a2819e4b26823288046869e5577852178d69","1e9084cb394369dcdfd43cfcd84d17b78b0903dd","a9b816b86b6085eb0b80315da6b2297ff30cf7b6","5140e277522fd95ece3d540c94b97f443bcc3256","b56a2d6e6f650ed6eae78774d3b1f02d969d8485","bc6308648a588258f31f8f4b64f7c4652b6fcaac","4cb8e6bd1aab0b4b05c7f07fbe8332b842009358"]),a=/^sdk_(.{5,15})_([0-9a-f]{10})$/},{"@babel/runtime/helpers/interopRequireDefault":15,"sha.js/sha1":445}],688:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(null==e)return!1;return r.test(e)};const r=/^([^<>()[\]\\,;:\s"]+|".+")@[^\s<>]+$/},{}],689:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return null!=e}},{}],690:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"f471fe7b7343b47a202437c3962cc335"===function(e){const t=new i.default;return t.update("bdnanNrDjv"+e),t.digest("hex").slice(0,32)}(e)};var i=r(e("sha.js/sha256"))},{"@babel/runtime/helpers/interopRequireDefault":15,"sha.js/sha256":446}],691:[function(e,t,n){(function(t){(function(){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.hashEmail=T;var i=r(e("sha.js/sha256")),o=r(e("../../common/ajax")),a=r(e("../../common/get-extension-id")),s=r(e("../../common/get-session-id")),l=r(e("../../common/log-error")),u=r(e("./persistent-queue")),c=r(e("./dom/make-mutation-observer-stream")),d=e("ext-corb-workaround"),f=r(e("./isStreakAppId"));const p=[];let h,m,_,b,g=!1;const v=(0,s.default)(),y=new Set,w="undefined"==typeof document||!document.documentElement.hasAttribute("data-inboxsdk-master-claimed")&&(document.documentElement.setAttribute("data-inboxsdk-master-claimed","true"),!0);function E(){const e="undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-active-app-ids")||"[]";return JSON.parse(e)}const k=new u.default("events"),x=Date.now();class S{constructor(e,t,n,r){!function(e,t,n,r){if(p.push(Object.freeze({appId:e,version:t.appVersion||void 0})),document.documentElement.setAttribute("data-inboxsdk-active-app-ids",JSON.stringify(E().concat([{appId:e,version:t.appVersion||void 0}]))),h)return;if(h=n,m=r,g=t.eventTracking,t.globalErrorLogging){Error.stackTraceLimit<40&&(Error.stackTraceLimit=40),window.addEventListener("error",(function(e){e.error&&S.error(e.error,"Uncaught exception")})),D(window,"setTimeout",(function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[0]&&(n[0]=A(n[0],"setTimeout callback")),e.apply(this,n)}})),D(window,"setInterval",(function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[0]&&(n[0]=A(n[0],"setInterval callback")),e.apply(this,n)}}));const e=window.EventTarget&&window.EventTarget.prototype||window.Node.prototype;D(e,"addEventListener",(function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("function"==typeof n[1])try{let e=n[1].__inboxsdk_logged;e||(e=A(n[1],"event listener"),n[1].__inboxsdk_logged=e),n[1]=e}catch(e){console.error("Failed to error wrap function",e)}return e.apply(this,n)}})),D(e,"removeEventListener",(function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[1]&&n[1].__inboxsdk_logged&&(n[1]=n[1].__inboxsdk_logged),e.apply(this,n)}})),D(window,"MutationObserver",(function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[0]&&(n[0]=A(n[0],"MutationObserver callback")),e.bind&&e.bind.apply?new(e.bind.apply(e,[null].concat(n))):new e(n[0])}return e=e||window.WebKitMutationObserver,t.prototype=e.prototype,t}))}}(e,t,n,r),this._appId=e,this._isMaster=!(!g||"undefined"!=typeof document&&document.documentElement.hasAttribute("data-inboxsdk-app-logger-master-chosen")||(document.documentElement.setAttribute("data-inboxsdk-app-logger-master-chosen","true"),0)),this._isMaster&&"undefined"!=typeof document&&(document.addEventListener("inboxSDKinjectedError",(e=>{if(!(e instanceof CustomEvent&&null!=e&&e.detail))return void this.error(new Error("Invalid inboxSDKinjectedError event"),e);const t=e.detail;this.error(Object.assign(new Error(t.message),{stack:t.stack}),t.details)})),document.addEventListener("inboxSDKinjectedEventSdkPassive",(e=>{const t=e.detail;this.eventSdkPassive(t.name,t.details,t.sensitive)})))}setUserEmailAddress(e){_=T(e)}shouldTrackEverything(){return"ca05afe92819df590a4196c31814fdb24050e8f49d8a41613f3d6cfb5729c785"===_}setIsUsingSyncAPI(e){b=e}static run(e,t){try{return e()}catch(e){throw S.error(e,t),e}}run(e,t){try{return e()}catch(e){throw this.error(e,t),e}}static error(e,t){I(e,t,void 0,!1)}error(e,t){I(e,t,this._appId,!1)}errorApp(e,t){I(e,t,this._appId,!0)}errorSite(e,t){this._isMaster&&this.error(e,t)}eventApp(e,t){M(this._appId,"app",e,t)}eventSdkActive(e,t){g&&M(this._appId,"sdkActive",e,t)}eventSdkPassive(e,t,n){n&&!(0,f.default)(this._appId)||M(this._appId,"sdkPassive",e,t)}eventSite(e,t){this._isMaster&&M(this._appId,"gmail",e,t)}deprecationWarning(e,t){console.warn(`InboxSDK: ${e} is deprecated.`+(t?` Please use ${t} instead.`:""));const n=e+(t?":"+t:"");y.has(n)||(this.eventSdkPassive(`deprecated.${e}`),y.add(n))}getAppLogger(){return{error:(e,t)=>this.errorApp(e,t),event:(e,t)=>this.eventApp(e,t)}}trackFunctionPerformance(e,t,n){if(Math.random()<t&&"visible"===document.visibilityState&&this._isMaster){const t=Date.now();e(),setTimeout((()=>{const e=Date.now();this.eventSdkPassive("function performance result",{value:e-t,timeSinceFirstLoad:e-x,...n})}),10)}else e()}}function C(e){const t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?p:E();if(e){const n=t.slice();let r=!1;return n.forEach(((t,i)=>{r||t.appId!==e||(r=!0,n[i]={...t,causedBy:!0}),Object.freeze(n[i])})),Object.freeze(n)}return t}function I(e,t,n,r){(0,l.default)(e,t,{appId:n,sentByApp:r,appIds:C(n),loaderVersion:h,implVersion:m,userEmailHash:_,isUsingSyncAPI:b})}function A(e,t){const n=t?"Uncaught error in "+t:"Uncaught error";return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return S.run((()=>e.apply(this,r)),n)}}function D(e,t,n){const r=n(e[t]);r.__original=e[t],e[t]=r}function T(e){const t=new i.default;return t.update("inboxsdk:"+e),t.digest("hex")}function M(e,t,n,r){if(r&&"object"!=typeof r)throw new Error("properties must be object or null: "+r);const i={type:t,event:n,timestamp:1e3*Date.now(),origin:document.location.origin,sessionId:v,emailHash:_,loaderVersion:h,implementationVersion:m,isUsingSyncAPI:b,properties:r};"gmail"!=t?Object.assign(i,{extensionId:(0,a.default)(),appIds:C(e)}):Object.assign(i,{appIds:C(null,!1)}),"undefined"!=typeof document&&(k.add(i),document.documentElement.setAttribute("data-inboxsdk-last-event",""+Date.now()))}n.default=S;let O=null;function P(e){return Date.now()+6e5>e}async function R(){const e=O;return e&&!P(e.expirationDate)?e:(O=await async function(){const{text:e}=await(0,o.default)({url:"https://api.inboxsdk.com/api/v2/events/oauth",XMLHttpRequest:(0,d.getXMLHttpRequest)()}),t=JSON.parse(e);return P(t.expirationDate)&&(console.warn("Got an apparently already expired token. Assuming our clock is busted..."),t.expirationDate=Date.now()+18e5),t}(),O)}w&&"undefined"!=typeof document&&"undefined"!=typeof MutationObserver&&(0,c.default)(document.documentElement,{attributes:!0,attributeFilter:["data-inboxsdk-last-event"]}).map((()=>null)).throttle(12e4).onValue((function(){const e=k.removeAll();0!==e.length&&async function(){const{oauthToken:n}=await R();await(0,o.default)({url:`https://pubsub.googleapis.com/v1/projects/mailfoogae/topics/events:publish?key=${encodeURIComponent("AIzaSyAwlvUR2x3OnCeas8hW8NDzVMswL5hZGg8")}`,method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},data:JSON.stringify({messages:[{data:t.from(JSON.stringify({data:e,timestamp:1e3*Date.now()})).toString("base64")}]})})}().catch((e=>{S.error(e,{type:"Failed to log events"})}))}))}).call(this)}).call(this,e("buffer").Buffer)},{"../../common/ajax":467,"../../common/get-extension-id":474,"../../common/get-session-id":476,"../../common/log-error":481,"./dom/make-mutation-observer-stream":663,"./isStreakAppId":690,"./persistent-queue":693,"@babel/runtime/helpers/interopRequireDefault":15,buffer:46,"ext-corb-workaround":138,"sha.js/sha256":446}],692:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=Object.create(null);return(0,i.default)(e.split("/"),t.split("/")).forEach(((e,t)=>{let[r,i]=e;":"===r[0]&&(n[r.slice(1)]=decodeURIComponent(i.replace(/\+/g," ")))})),Object.freeze(n)};var i=r(e("lodash/zip"))},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/zip":362}],693:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty"));n.default=class{constructor(e){(0,i.default)(this,"_fallbackQueue",[]),this._sid="inboxsdk__persistentqueue_"+e}_getSavedQueue(){let e=JSON.parse(localStorage.getItem(this._sid));return null==e&&(e=[]),e}_putSavedQueue(e){localStorage.setItem(this._sid,JSON.stringify(e))}_clearSavedQueue(){localStorage.removeItem(this._sid)}add(e){let t=!1;if("undefined"!=typeof localStorage)try{const n=this._getSavedQueue();n.push(e),this._putSavedQueue(n),t=!0}catch(e){}t||this._fallbackQueue.push(e)}remove(){let e;if("undefined"!=typeof localStorage)try{const t=this._getSavedQueue(),n=t.shift();this._putSavedQueue(t),e=n}catch(e){}return void 0===e&&(e=this._fallbackQueue.shift()),e}removeAll(){let e;if("undefined"!=typeof localStorage)try{const t=this._getSavedQueue();this._clearSavedQueue(),e=t}catch(e){}return void 0===e&&(e=[]),e=e.concat(this._fallbackQueue),this._fallbackQueue=[],e}peekAll(){let e;if("undefined"!=typeof localStorage)try{e=this._getSavedQueue()}catch(e){}return void 0===e&&(e=[]),e=e.concat(this._fallbackQueue),e}clear(){if("undefined"!=typeof localStorage)try{this._clearSavedQueue()}catch(e){}this._fallbackQueue.length=0}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],694:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=t||{},r=new Set,i=e.replace(/:([^/]+)/g,((e,t)=>{if(t in n)return r.add(t),encodeURIComponent(String(n[t]));throw new Error(`Missing param: ${t}`)}));if(Object.keys(n).length!==r.size)throw new Error("Extra parameters given");return i}},{}],695:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("react"));class a extends o.default.Component{constructor(){super(...arguments),(0,i.default)(this,"_contentRefCb",(e=>{e&&(this._content=e)}))}componentDidMount(){this._content.appendChild(this.props.el)}componentDidUpdate(e){if(e.el!==this.props.el){for(;this._content.lastElementChild;)this._content.lastElementChild.remove();this._content.appendChild(this.props.el)}}shouldComponentUpdate(e){return this.props.className!==e.className||this.props.el!==e.el}render(){return o.default.createElement("div",{className:this.props.className,ref:this._contentRefCb})}}n.default=a},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,react:436}],696:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.replace(/\.IDMAP_([-a-zA-Z0-9_]+)/g,((e,t)=>`.${(0,i.default)(t)}`))};var i=r(e("./idMap"))},{"./idMap":682,"@babel/runtime/helpers/interopRequireDefault":15}],697:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){const n=Array.isArray(e)?e:[e];return(0,o.default)(n,(e=>t.match(s(e))))};var i=r(e("lodash/memoize")),o=r(e("lodash/find")),a=r(e("lodash/escapeRegExp"));const s=(0,i.default)((e=>new RegExp("^"+(0,a.default)(e).replace(/\/:[^/]+/g,"/([^/]+)")+"/?$")))},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/escapeRegExp":313,"lodash/find":314,"lodash/memoize":343}],698:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("events")),o=r(e("./logger"));class a extends i.default{emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{return super.emit.apply(this,arguments)}catch(e){return o.default.error(e),!0}}}n.default=a},{"./logger":691,"@babel/runtime/helpers/interopRequireDefault":15,events:137}],699:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!e.getElementById("inboxsdk__shared_style")){const t=e.createElement("style");if(t.id="inboxsdk__shared_style",a.onValue((e=>{t.textContent=(0,o.default)(e)})),!e.head)throw new Error("missing head");e.head.appendChild(t)}};var i=r(e("ud-kefir")),o=r(e("./rewriteCssWithIdMap")),a=(0,i.default)(t,".inboxsdk__notransition {\n  -webkit-transition: none !important;\n  -moz-transition: none !important;\n  -o-transition: none !important;\n  -ms-transition: none !important;\n  transition: none !important;\n}\n\n.inboxsdk__close_button {\n  height: 24px;\n  width: 24px;\n  opacity: 0.7;\n  position: relative;\n  background: none;\n  border: none;\n  padding: 0;\n  box-sizing: content-box;\n  outline: none;\n  cursor: pointer;\n}\n.inboxsdk__close_button:focus,\n.inboxsdk__close_button:hover {\n  opacity: 1;\n}\n.inboxsdk__close_button:focus::before {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n.inboxsdk__close_button::before {\n  border-radius: 50%;\n  position: absolute;\n  top: -4px;\n  bottom: -4px;\n  left: -4px;\n  right: -4px;\n  padding: 4px;\n  content: ' ';\n}\n.inboxsdk__close_button::after {\n  content: ' ';\n  background: url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);\n  position: absolute;\n  height: 24px;\n  width: 24px;\n  top: 0;\n  left: 0;\n}\n\n.IDMAP_app_sidebar_waiting_platform {\n  display: none;\n}\n\n/* drawer */\n\n.inboxsdk__drawer_view_container {\n  visibility: visible;\n  direction: initial;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n  z-index: 51;\n  pointer-events: none;\n}\n.inboxsdk__drawer_view {\n  position: absolute;\n  pointer-events: auto;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 452px;\n  font: normal normal normal normal 13px / normal 'Helvetica Neue', Helvetica,\n    Arial, sans-serif;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  background-color: #fff;\n  outline: none;\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.18), 0 8px 16px rgba(0, 0, 0, 0.36);\n  -webkit-transform: translateX(100%);\n  transform: translateX(100%);\n  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width {\n  width: 300px;\n}\n\n.inboxsdk__drawer_view.inboxsdk__active {\n  -webkit-transform: none;\n  transform: none;\n}\n.inboxsdk__drawer_title_bar {\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #e0e0e0;\n  padding: 16px 20px;\n  white-space: nowrap;\n  display: -webkit-flex;\n  display: flex;\n  flex: 0 0 auto;\n  -webkit-flex: 0 0 auto;\n}\n.inboxsdk__drawer_title_bar .inboxsdk__close_button {\n  margin-right: 20px;\n  -webkit-flex-shrink: 0;\n  flex-shrink: 0;\n}\n.inboxsdk__drawer_title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font: normal normal normal normal 20px / 24px 'Helvetica Neue', Helvetica,\n    Arial, sans-serif;\n}\n\n/* backdrop */\n\n.inboxsdk__inbox_backdrop {\n  visibility: visible;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n  z-index: 50;\n  background-color: transparent;\n  transition: background-color 150ms cubic-bezier(0.4, 0, 1, 1);\n}\n.inboxsdk__inbox_backdrop.inboxsdk__active {\n  background-color: rgba(10, 10, 10, 0.6);\n  transition: background-color 70ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n.inboxsdk__inbox_backdrop ~ .inboxsdk__inbox_backdrop {\n  opacity: 0.6;\n}\n\n/* sidebar */\n\n.IDMAP_app_sidebar_main {\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\n.IDMAP_app_sidebar > .inboxsdk__close_button {\n  position: absolute;\n  bottom: 10px;\n  right: 20px;\n}\n\n.IDMAP_app_sidebar_content_area {\n  width: 216px;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  overflow: hidden;\n  font: 12px Arial, sans-serif;\n  max-height: 100%;\n  box-sizing: border-box;\n}\n\n.IDMAP_app_sidebar_content_panel_top_line {\n  white-space: nowrap;\n  display: -webkit-flex;\n  display: flex;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n\n.IDMAP_app_sidebar_content_panel:not(.IDMAP_expanded)\n  .IDMAP_app_sidebar_content_panel_top_line {\n  border-bottom: 1px solid #ddd;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_top_line:hover,\n.IDMAP_app_sidebar_content_panel.IDMAP_dragged\n  .IDMAP_app_sidebar_content_panel_top_line {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n.IDMAP_app_sidebar_content_panel_title {\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_title {\n  cursor: move;\n}\n\n.IDMAP_app_sidebar_content_panel_title_text {\n  padding-left: 6px;\n  vertical-align: middle;\n  font: bold 13px / 40px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  color: rgba(0, 0, 0, 0.87);\n}\n\n.IDMAP_app_sidebar.IDMAP_hideTitleBar\n  .IDMAP_app_sidebar_content_panel_top_line {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_top_line:hover\n  .IDMAP_app_sidebar_content_panel_grip {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 10px;\n  height: 40px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==)\n    50% center no-repeat;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon_container {\n  width: 20px;\n  height: 20px;\n  vertical-align: middle;\n  margin-left: 6px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: -1px;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon,\n.IDMAP_app_sidebar_content_panel_title_icon > img {\n  width: 13px;\n  height: 13px;\n}\n\n.IDMAP_app_sidebar_content_panel_toggle {\n  -webkit-flex: 1;\n  flex: 1;\n  text-align: right;\n  visibility: hidden;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_toggle {\n  visibility: visible;\n  cursor: pointer;\n}\n\n.IDMAP_app_sidebar_content_panel_toggle_button {\n  margin-top: 12px;\n  margin-right: 4px;\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==)\n    center / 20px no-repeat;\n  border: none;\n  width: 14px;\n  height: 14px;\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n  transition: -webkit-transform 0.15s, transform 0.15s;\n  outline: none;\n  opacity: 0.6;\n  cursor: pointer;\n}\n\n.IDMAP_app_sidebar_content_panel_top_line:hover\n  .IDMAP_app_sidebar_content_panel_toggle_button,\n.IDMAP_app_sidebar_content_panel.IDMAP_dragged\n  .IDMAP_app_sidebar_content_panel_top_line\n  .IDMAP_app_sidebar_content_panel_toggle_button {\n  opacity: 0.9;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_expanded\n  .IDMAP_app_sidebar_content_panel_toggle_button {\n  -webkit-transform: rotate(0);\n  transform: rotate(0);\n}\n\n.IDMAP_app_sidebar_content_panel_content {\n  margin-bottom: 25px;\n}\n\n.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {\n  outline: none;\n}\n\n/* end sidebar */\n\n/* shared parts of app id warning */\n\n.inboxsdk__appid_warning {\n  margin: 0;\n  padding: 9px;\n  color: #4b4b4b;\n  background: #ff6c6c;\n  font-size: 10pt;\n}\n\n.inboxsdk__appid_warning_main {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.inboxsdk__appid_warning .topline {\n  font-weight: bold;\n  font-size: 11pt;\n}\n\na.inboxsdk__appid_register {\n  color: white;\n  display: inline-block;\n  background: #1989ff;\n  border-radius: 3px;\n  text-decoration: none;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n  padding: 7px;\n  font-size: 10pt;\n  vertical-align: middle;\n  margin-left: 1em;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  display: inline-block;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  margin-top: 0px;\n}\n\n.IDMAP_thread_noticeBar {\n  background: #f8ebc0;\n  margin-bottom: 10px;\n  padding: 12px 4px 6px 12px;\n}\n")},{"./rewriteCssWithIdMap":696,"@babel/runtime/helpers/interopRequireDefault":15,"ud-kefir":453}],700:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}n.default=class{constructor(e){(0,i.default)(this,"_streamCount",0),(0,i.default)(this,"_ended",!1),(0,i.default)(this,"_pool",o.pool()),this.stream=this._pool.filter((()=>(this._streamCount--,0===this._streamCount&&(this._ended=!0,!0)))).take(1).toProperty(),this.stream.onValue((()=>{})),this.add(e)}add(e){if(this._ended)throw new Error("Tried to add a stream to a stopped StopperPool");const t=Array.isArray(e)?e:[e];this._streamCount+=t.length,this._pool.plug(o.merge(t.map((e=>e.take(1)))))}getSize(){return this._streamCount}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],701:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;const i=new Error("waitFor timeout"),o=r.later(t,null).flatMap((()=>{const t=e();return t?r.constant(t):(setTimeout((()=>{throw i}),0),r.constantError(i))})),a=Boolean;return r.later(0,null).merge(r.interval(n,null)).map((()=>e())).filter(a).merge(o).take(1).takeErrors(1)};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(e("kefir"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}},{kefir:159}],702:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return o.default.fromESObservable((0,i.default)(e).map((e=>{const t=e.removal,n=o.default.fromPromise(t);return{el:e.value,removalStream:n}})))};var i=r(e("live-set/toValueObservable")),o=r(e("kefir"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"live-set/toValueObservable":165}],703:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return new i.default({read(){throw new Error("should not happen; liveset was inactive")},listen(t,n){t(new Set);const r=e.observe({value(e){let{el:t,removalStream:r}=e;n.add(t),r.take(1).onValue((()=>{n.remove(t)}))}});return()=>{r.unsubscribe()}}})};var i=r(e("live-set"))},{"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],704:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;const r=new Error("waitFor timeout");return new Promise((function(i,o){let a=0;setTimeout((function s(){try{const l=e();l?i(l):a>=t?o(r):(a+=n,setTimeout(s,n))}catch(e){o(e)}}),1)}))}},{}],705:[function(t,n,r){(function(n){(function(){"use strict";if(!n.__InboxSDKImpLoader){var r,i=Date.now(),o=!!document.querySelector('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."], [role=banner]+div div[aria-label] div div a[href^="https://myaccount.google."]');try{void 0!==e&&e&&e.amd&&(r=e,e=null);var a=t("kefir"),s=new Promise(((e,t)=>{"complete"===document.readyState||"interactive"===document.readyState?e():e(a.merge([a.fromEvents(document,"DOMContentLoaded"),a.fromEvents(window,"load")]).take(1).map((()=>null)).toPromise())}));n.__InboxSDKImpLoader={load:function(n,r,a){if("0.1"!==n)throw new Error("Unsupported InboxSDK version");if("dropbox"===r)throw new Error("No longer supported");var l=Date.now();return s.then((()=>{var n;try{void 0!==e&&e&&e.amd&&(n=e,e=null);const{makePlatformImplementation:s}=t("./platform-implementation");return s(r,a,{piMainStarted:i,piLoadStarted:l,wasAccountSwitcherReadyAtStart:o})}finally{n&&(e=n)}}))}}}finally{r&&(e=r)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./platform-implementation":720,kefir:159}],706:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/classPrivateFieldGet")),o=r(e("@babel/runtime/helpers/classPrivateFieldSet")),a=r(e("../dom-driver/gmail/gmail-element-getter")),s=e("../views/app-menu-item-view");function l(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var u=new WeakMap;n.default=class{constructor(e){l(this,u,{writable:!0,value:void 0}),(0,o.default)(this,u,e)}addMenuItem(e){return new s.AppMenuItemView((0,i.default)(this,u),e)}async isShown(){return!!await a.default.getAppMenuAsync()}}},{"../dom-driver/gmail/gmail-element-getter":530,"../views/app-menu-item-view":722,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/interopRequireDefault":15}],707:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/defaults")),o=r(e("lodash/sortBy")),a=r(e("lodash/find")),s=r(e("kefir")),l=r(e("kefir-bus")),u=r(e("../../common/defer")),c=r(e("../../common/get-or-fail"));const d=Object.freeze({destroy:Object.freeze((function(){}))}),f=new WeakMap;n.default=class{constructor(e,t){const n={driver:t,messagesByKey:new Map,queuedPackets:[]};f.set(this,n)}showMessage(e){(0,i.default)(e,{priority:0,time:15e3,hideOnViewChanged:!0,persistent:!1}),this.hideMessage(e.messageKey);const t=(0,c.default)(f,this),n=t.driver.getButterBarDriver(),r=Date.now()+"-"+Math.random();{let t=n.getSharedMessageQueue();if(t.unshift({messageId:r,priority:e.priority,persistent:e.persistent}),t=(0,o.default)(t,(e=>-e.priority)),t=t.filter(((e,t)=>0===t||e.persistent)),n.setSharedMessageQueue(t),!(0,a.default)(t,(e=>e.messageId===r)))return d}const u=(0,l.default)();e.hideOnViewChanged&&u.plug(s.default.later(0,null).flatMap((()=>t.driver.getRouteViewDriverStream().changes())).map((()=>null))),isFinite(e.time)&&u.plug(s.default.later(e.time,null));const p=new Error("Butter bar message timed out");u.plug(s.default.later(12e4,null).map((e=>(t.driver.getLogger().errorApp(p),e)))),u.take(1).onValue((()=>{e.messageKey&&t.messagesByKey.delete(e.messageKey);const i=n.getSharedMessageQueue();n.setSharedMessageQueue(i.filter((e=>e.messageId!==r)))})),n.getNoticeAvailableStream().toProperty((()=>null)).takeUntilBy(u).filter((()=>{const e=n.getSharedMessageQueue();return e[0]||u.value(void 0),e[0]&&e[0].messageId===r})).onValue((()=>{const t=n.showMessage(e);u.take(1).onValue((()=>{t.destroy()}))}));const h={destroy(){u.value(void 0)}};return e.messageKey&&t.messagesByKey.set(e.messageKey,h),h}showLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)(e,{text:"Loading...",priority:-3,time:1/0,persistent:!0,hideOnViewChanged:!0}),e.time=1/0,this.showMessage(e)}showError(e){return(0,i.default)(e,{priority:100,className:"inboxsdk__butterbar_error"}),this.showMessage(e)}showSaving(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(e,{text:"Saving...",confirmationText:"Saved",confirmationTime:1e3,priority:-2,time:1/0,persistent:!0,hideOnViewChanged:!1,showConfirmation:!0});const t=this.showMessage(e),n=(0,u.default)();return n.promise.then((()=>{t.destroy(),e.showConfirmation&&this.showMessage({text:e.confirmationText,messageKey:e.messageKey,time:e.confirmationTime,priority:200})}),(()=>{t.destroy()})),n}hideMessage(e){if(e){const t=(0,c.default)(f,this).messagesByKey.get(e);t&&t.destroy()}}hideGmailMessage(){(0,c.default)(f,this).driver.getButterBarDriver().hideGmailMessage()}}},{"../../common/defer":472,"../../common/get-or-fail":475,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"lodash/defaults":309,"lodash/find":314,"lodash/sortBy":349}],708:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),o=r(e("kefir")),a=r(e("../../common/get-or-fail")),s=(r(e("../views/compose-view")),r(e("../lib/handler-registry")));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=i.defonce(t,(()=>new WeakMap));var c=i.defn(t,class{constructor(e,t){const n={driver:e,membrane:t,handlerRegistry:new s.default,composeViewStream:e.getComposeViewDriverStream().map((e=>t.get(e)))};u.set(this,n),e.getStopper().onValue((()=>{n.handlerRegistry.dumpHandlers()})),n.composeViewStream.onValue((t=>{e.getLogger().trackFunctionPerformance((()=>{n.handlerRegistry.addTarget(t)}),.01,{type:"composeViewHandler",isInlineReplyForm:t.isInlineReplyForm()})}))}registerComposeViewHandler(e){return(0,a.default)(u,this).handlerRegistry.registerHandler(e)}async openNewComposeView(){const e=(0,a.default)(u,this),t=await e.driver.openNewComposeViewDriver();return e.membrane.get(t)}async openDraftByMessageID(e){const t=(0,a.default)(u,this),n=t.composeViewStream.take(1).toPromise();return await t.driver.openDraftByMessageID(e),o.default.fromPromise(n).merge(o.default.later(15e3,null).flatMap((()=>o.default.constantError(new Error("draft did not open in time"))))).take(1).takeErrors(1).toPromise()}getComposeView(){const{driver:e}=(0,a.default)(u,this);if(e.getLogger().deprecationWarning("Compose.getComposeView","Compose.openNewComposeView"),1!==e.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.openNewComposeView()}});n.default=c},{"../../common/get-or-fail":475,"../lib/handler-registry":681,"../views/compose-view":727,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,ud:454}],709:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.MessageViewViewStates=n.MessageViewToolbarSectionNames=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=r(e("../../common/get-or-fail")),s=r(e("../views/conversations/thread-view")),l=r(e("../views/conversations/message-view")),u=(r(e("../views/conversations/attachment-card-view")),r(e("../lib/handler-registry")));const c=new WeakMap,d=Object.freeze({HIDDEN:"HIDDEN",COLLAPSED:"COLLAPSED",EXPANDED:"EXPANDED"});n.MessageViewViewStates=d;const f=Object.freeze({MORE:"MORE"});n.MessageViewToolbarSectionNames=f;function p(e,t,n,r,i,a,s){t.map((function(e){return{viewDriver:e,view:a.get(e)}})).flatMap((e=>e.viewDriver.getReadyStream().map((()=>e)).takeUntilBy(o.default.fromEvents(e.view,"destroy")))).onValue((function(e){r.addTarget(e.view)}))}var h=class{constructor(e,t,n){(0,i.default)(this,"MessageViewViewStates",d),(0,i.default)(this,"MessageViewToolbarSectionNames",f);const r={appId:e,driver:t,threadViewHandlerRegistry:new u.default,messageViewHandlerRegistries:{all:new u.default,loaded:new u.default},attachmentCardViewHandlerRegistry:new u.default};c.set(this,r),t.getStopper().onValue((()=>{r.threadViewHandlerRegistry.dumpHandlers(),r.messageViewHandlerRegistries.all.dumpHandlers(),r.messageViewHandlerRegistries.loaded.dumpHandlers()})),t.getAttachmentCardViewDriverStream().filter((e=>"FILE"===e.getAttachmentType())).onValue((e=>{const t=n.get(e);r.attachmentCardViewHandlerRegistry.addTarget(t)})),p(e,t.getThreadViewDriverStream().filter((e=>!e.isLoadingStub())),s.default,r.threadViewHandlerRegistry,this,n,t),p(e,t.getMessageViewDriverStream(),l.default,r.messageViewHandlerRegistries.all,this,n,t),p(e,t.getMessageViewDriverStream().flatMap((e=>e.isLoaded()?o.default.constant(e):e.getEventStream().filter((e=>"messageLoad"===e.eventName)).map((()=>e)).take(1))),l.default,r.messageViewHandlerRegistries.loaded,this,n,t)}registerThreadViewHandler(e){return(0,a.default)(c,this).threadViewHandlerRegistry.registerHandler(e)}registerMessageViewHandler(e){return(0,a.default)(c,this).messageViewHandlerRegistries.loaded.registerHandler(e)}registerMessageViewHandlerAll(e){return(0,a.default)(c,this).messageViewHandlerRegistries.all.registerHandler(e)}registerFileAttachmentCardViewHandler(e){return(0,a.default)(c,this).attachmentCardViewHandlerRegistry.registerHandler(e)}};n.default=h},{"../../common/get-or-fail":475,"../lib/handler-registry":681,"../views/conversations/attachment-card-view":729,"../views/conversations/message-view":731,"../views/conversations/thread-view":732,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],710:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("kefir")),o=r(e("kefir-cast")),a=r(e("../views/content-panel-view")),s=r(e("../../common/get-or-fail"));r(e("../dom-driver/gmail/views/gmail-support-item-view"));const l=new WeakMap;n.default=class{constructor(e,t,n){const r={appId:e,driver:t,piOpts:n};l.set(this,r)}async addSidebarContentPanel(e){const t=(0,o.default)(i.default,e).toProperty(),n=(0,s.default)(l,this);n.driver.getLogger().eventSdkPassive("global.addSidebarContentPanel");const r=await n.driver.addGlobalSidebarContentPanel(t);return r?new a.default(r):null}addSupportItem(e){const t=(0,s.default)(l,this);return t.driver.getLogger().eventSdkPassive("global.addSupportItem"),t.driver.addSupportItem(e)}}},{"../../common/get-or-fail":475,"../dom-driver/gmail/views/gmail-support-item-view":589,"../views/content-panel-view":728,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157}],711:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),o=r(e("../../common/get-or-fail")),a=r(e("../views/keyboard-shortcut-handle"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const l=i.defonce(t,(()=>new WeakMap));var u=i.defn(t,class{constructor(e,t,n,r){const i={appId:e,appName:t,appIconUrl:n,driver:r};l.set(this,i)}createShortcutHandle(e){const t=(0,o.default)(l,this);let{chord:n,description:r}=e;if(!n)throw new Error("Keyboard.createShortcutHandle chord missing");null==r&&(console.error("Keyboard.createShortcutHandle chord missing"),r="");const i=new a.default(n,r);return t.driver.activateShortcut(i,t.appName,t.appIconUrl),i}});n.default=u},{"../../common/get-or-fail":475,"../views/keyboard-shortcut-handle":733,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],712:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../../common/get-or-fail")),a=r(e("../lib/handler-registry"));r(e("../views/thread-row-view"));const s=new WeakMap;n.default=class{constructor(e,t,n){(0,i.default)(this,"ActionButtonTypes",l);const r={appId:e,driver:t,membrane:n,threadRowViewRegistry:new a.default};s.set(this,r),t.getStopper().onValue((()=>{r.threadRowViewRegistry.dumpHandlers()})),r.driver.getThreadRowViewDriverStream().onValue((e=>{const t=n.get(e);r.threadRowViewRegistry.addTarget(t)}))}registerThreadRowViewHandler(e){return(0,o.default)(s,this).threadRowViewRegistry.registerHandler(e)}getSelectedThreadRowViews(){const e=(0,o.default)(s,this);return e.driver.getSelectedThreadRowViewDrivers().map((t=>e.membrane.get(t)))}registerThreadRowViewSelectionHandler(e){return(0,o.default)(s,this).driver.registerThreadRowViewSelectionHandler(e)}};const l=Object.freeze({LINK:"LINK",DROPDOWN:"DROPDOWN",ACTION:"ACTION"})},{"../../common/get-or-fail":475,"../lib/handler-registry":681,"../views/thread-row-view":741,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],713:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("../widgets/modal-view")),a=r(e("../../common/get-or-fail"));const s=(0,i.defonce)(t,(()=>new WeakMap));var l=(0,i.defn)(t,class{constructor(e,t,n){const r={appId:e,driver:t,piOpts:n};s.set(this,r)}show(e){const t=(0,a.default)(s,this).driver;(0,a.default)(s,this).piOpts.inboxBeta&&t.getLogger().deprecationWarning("Modal.show","Widgets.showModalView");const n=t.createModalViewDriver(e),r=new o.default({driver:t,modalViewDriver:n});return r.show(),r}createModalView(e){const t=(0,a.default)(s,this).driver;t.getLogger().deprecationWarning("Modal.createModalView","Widgets.showModalView");const n=t.createModalViewDriver(e);return new o.default({driver:t,modalViewDriver:n})}});n.default=l},{"../../common/get-or-fail":475,"../widgets/modal-view":746,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],714:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=r(e("kefir-cast")),s=r(e("../../common/get-or-fail")),l=r(e("../views/nav-item-view")),u=r(e("../views/native-nav-item-view")),c=r(e("../constants/nav-item-types"));const d=new WeakMap;class f{constructor(e,t){(0,i.default)(this,"NavItemTypes",c.default);const n={appId:e,driver:t,navItemViews:[]};d.set(this,n),this.SENT_MAIL=function(e,t){const n=new u.default(e,t,"sent",t.getSentMailNativeNavItem());return n}(e,t)}addNavItem(e){const t=(0,s.default)(d,this),n=(0,a.default)(o.default,e).toProperty(),r=new l.default(t.appId,t.driver,n,t.driver.addNavItem(t.appId,n));return t.navItemViews.push(r),r}}n.default=f,(0,i.default)(f,"SENT_MAIL",null)},{"../../common/get-or-fail":475,"../constants/nav-item-types":489,"../views/native-nav-item-view":734,"../views/nav-item-view":735,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157}],715:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/find")),a=r(e("lodash/intersection")),s=e("ud"),l=r(e("../lib/handler-registry")),u=r(e("../../common/get-or-fail")),c=(r(e("../views/route-view/route-view")),r(e("../views/route-view/list-route-view"))),d=r(e("../views/route-view/custom-route-view")),f=r(e("../views/route-view/dummy-route-view-driver")),p=e("../constants/router");const h=(0,s.defonce)(t,(()=>new WeakMap));var m=(0,s.defn)(t,class{constructor(e,t,n){(0,i.default)(this,"NativeRouteIDs",p.NATIVE_ROUTE_IDS),(0,i.default)(this,"NativeListRouteIDs",p.NATIVE_LIST_ROUTE_IDS),(0,i.default)(this,"RouteTypes",p.ROUTE_TYPES);const r={appId:e,driver:t,currentRouteViewDriver:new f.default,allRoutesHandlerRegistry:new l.default,customRoutes:[],membrane:n,listRouteHandlerRegistries:{}};Object.values(p.NATIVE_LIST_ROUTE_IDS).forEach((e=>{r.listRouteHandlerRegistries[e]=new l.default})),h.set(this,r),t.getRouteViewDriverStream().onValue((e=>{t.getLogger().trackFunctionPerformance((()=>function(e,t,n){t.currentRouteViewDriver instanceof f.default&&t.currentRouteViewDriver.destroy();t.currentRouteViewDriver=n;const r=t.membrane.get(n);(function(e,t){e.driver.setShowNativeNavMarker(t.getType()!==p.ROUTE_TYPES.CUSTOM),e.driver.setShowNativeAddonSidebar(t.getType()!==p.ROUTE_TYPES.CUSTOM)})(t,n),r.getRouteType()===p.ROUTE_TYPES.CUSTOM&&function(e,t,n){const r=n.getRouteID(),i=Array.isArray(r)?r:[r],s=(0,o.default)(e.customRoutes,(e=>(0,a.default)(Array.isArray(e.routeID)?e.routeID:[e.routeID],i).length));if(s){const n=new d.default(t),r=t.getCustomViewElement();if(!r)throw new Error("should not happen");e.driver.showCustomRouteView(r);try{s.onActivate(n)}catch(t){e.driver.getLogger().error(t)}}}(t,n,r);if(t.allRoutesHandlerRegistry.addTarget(r),r.getRouteType()===p.ROUTE_TYPES.LIST){const e=new c.default(n,t.driver,t.appId),i=t.listRouteHandlerRegistries[r.getRouteID()];i&&i.addTarget(e),t.listRouteHandlerRegistries[p.NATIVE_ROUTE_IDS.ANY_LIST].addTarget(e)}}(0,r,e)),.01,{type:"handleRouteViewChange",routeID:e.getRouteID()})})),t.getStopper().onValue((function(){r.allRoutesHandlerRegistry.dumpHandlers(),Object.values(r.listRouteHandlerRegistries).forEach((e=>{e.dumpHandlers()}))}))}createLink(e,t){return(0,u.default)(h,this).driver.createLink(e,t)}goto(e,t){if("string"!=typeof e)throw new Error("routeID must be a string");const{driver:n}=(0,u.default)(h,this);return"string"==typeof t&&n.getLogger().deprecationWarning("Router.goto param string","param object (e.g. {param: value})"),n.goto(e,t)}handleCustomRoute(e,t){const n={routeID:e,onActivate:t},r=(0,u.default)(h,this).driver.addCustomRouteID(e),{customRoutes:i,driver:o}=(0,u.default)(h,this);return i.push(n),o.getLogger().eventSdkPassive("Router.handleCustomRoute"),function(){r();const e=i.indexOf(n);e>-1&&i.splice(e,1)}}handleAllRoutes(e){return(0,u.default)(h,this).allRoutesHandlerRegistry.registerHandler(e)}handleListRoute(e,t){const{listRouteHandlerRegistries:n}=(0,u.default)(h,this);if(!n[e])throw new Error("Invalid routeID specified");return n[e].registerHandler(t)}handleCustomListRoute(e,t){return(0,u.default)(h,this).driver.addCustomListRouteID(e,t)}getCurrentRouteView(){const e=(0,u.default)(h,this);return e.membrane.get(e.currentRouteViewDriver)}});n.default=m},{"../../common/get-or-fail":475,"../constants/router":490,"../lib/handler-registry":681,"../views/route-view/custom-route-view":736,"../views/route-view/dummy-route-view-driver":737,"../views/route-view/list-route-view":738,"../views/route-view/route-view":739,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":314,"lodash/intersection":324,ud:454}],716:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../common/get-or-fail"));const o=new WeakMap;n.default=class{constructor(e,t){const n={appId:e,driver:t};o.set(this,n)}registerSearchSuggestionsProvider(e){if("function"!=typeof e)throw new Error("Incorrect arguments");(0,i.default)(o,this).driver.registerSearchSuggestionsProvider(e)}registerSearchQueryRewriter(e){if("function"!=typeof e.termReplacer||"string"!=typeof e.term)throw new Error("Incorrect arguments");if(!e.term.match(/^(app|has):/))throw new Error("Custom search term must begin with 'app:'");(0,i.default)(o,this).driver.registerSearchQueryRewriter(e)}}},{"../../common/get-or-fail":475,"@babel/runtime/helpers/interopRequireDefault":15}],717:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=r(e("kefir-cast")),s=r(e("kefir-stopper")),l=r(e("../lib/safe-event-emitter")),u=r(e("../../common/get-or-fail")),c=r(e("../views/app-toolbar-button-view")),d=e("../constants/toolbars");const f=new WeakMap;class p extends l.default{constructor(e,t,n,r){super(),(0,i.default)(this,"SectionNames",d.SECTION_NAMES);const o={appId:e,driver:t,membrane:n,piOpts:r};f.set(this,o)}registerThreadButton(e){const t=(0,u.default)(f,this);"OTHER"!==e.listSection&&"OTHER"!==e.threadSection||!e.hasDropdown||(t.driver.getLogger().errorApp(new Error("registerThreadButton does not support listSection=OTHER or threadSection=OTHER and hasDropdown=true together")),e={...e,hasDropdown:!1});const{hideFor:n,...r}=e,i=()=>t.driver.registerThreadButton({...r,onClick:e=>{r.onClick&&r.onClick({position:e.position,dropdown:e.dropdown,selectedThreadViews:e.selectedThreadViewDrivers.map((e=>t.membrane.get(e))),selectedThreadRowViews:e.selectedThreadRowViewDrivers.map((e=>t.membrane.get(e)))})}});if(n){const e=(0,s.default)();let r=null;t.driver.getRouteViewDriverStream().takeUntilBy(e).onValue((e=>{const o=t.membrane.get(e);n(o)?r&&(r(),r=null):r||(r=i())}));return()=>{e.destroy(),r&&(r(),r=null)}}return i()}registerToolbarButtonForList(e){const t=(0,u.default)(f,this);return this.registerThreadButton({positions:["LIST"],listSection:e.section,title:e.title,iconUrl:e.iconUrl,iconClass:e.iconClass,onClick:n=>{e.onClick&&e.onClick({dropdown:n.dropdown,selectedThreadRowViews:n.selectedThreadRowViews,get threadRowViews(){return t.driver.getLogger().deprecationWarning("Toolbars.registerToolbarButtonForList onClick event.threadRowViews"),n.selectedThreadRowViews}})},hasDropdown:e.hasDropdown,orderHint:e.orderHint,hideFor:e.hideFor,keyboardShortcutHandle:e.keyboardShortcutHandle})}registerToolbarButtonForThreadView(e){return this.registerThreadButton({positions:["THREAD"],threadSection:e.section,title:e.title,iconUrl:e.iconUrl,iconClass:e.iconClass,onClick:t=>{if(1!==t.selectedThreadViews.length)throw new Error("should not happen");e.onClick&&e.onClick({dropdown:t.dropdown,threadView:t.selectedThreadViews[0]})},hasDropdown:e.hasDropdown,orderHint:e.orderHint,hideFor:e.hideFor,keyboardShortcutHandle:e.keyboardShortcutHandle})}setAppToolbarButton(e){const{driver:t,piOpts:n}=(0,u.default)(f,this);if(t.getLogger().deprecationWarning("Toolbars.setAppToolbarButton","Toolbars.addToolbarButtonForApp"),1!==n.REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.addToolbarButtonForApp(e)}addToolbarButtonForApp(e){const t=(0,a.default)(o.default,e),n=(0,u.default)(f,this).driver.addToolbarButtonForApp(t);return new c.default((0,u.default)(f,this).driver,n)}}n.default=p},{"../../common/get-or-fail":475,"../constants/toolbars":491,"../lib/safe-event-emitter":698,"../views/app-toolbar-button-view":723,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157,"kefir-stopper":158}],718:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("lodash/find")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),a=r(e("../../common/get-or-fail"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const l=o.defonce(t,(()=>new WeakMap));var u=o.defn(t,class{constructor(e,t){l.set(this,{driver:e,piOpts:t})}getEmailAddress(){return(0,a.default)(l,this).driver.getUserEmailAddress()}isConversationViewDisabled(){return(0,a.default)(l,this).driver.isConversationViewDisabled()}isUsingGmailMaterialUI(){return(0,a.default)(l,this).driver.getLogger().deprecationWarning("User.isUsingGmailMaterialUI"),!0}getLanguage(){return(0,a.default)(l,this).driver.getUserLanguage()}getUserContact(){const{driver:e,piOpts:t}=(0,a.default)(l,this);if(e.getLogger().deprecationWarning("User.getUserContact","User.getEmailAddress"),1!==t.REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return e.getUserContact()}getAccountSwitcherContactList(){const{driver:e}=(0,a.default)(l,this);e.getLogger().deprecationWarning("User.getAccountSwitcherContactList","User.getEmailAddress");let t=e.getAccountSwitcherContactList();const n=this.getEmailAddress();return!!(0,i.default)(t,(e=>e.emailAddress===n))||(t=t.concat([{name:n,emailAddress:n}])),t}});n.default=u},{"../../common/get-or-fail":475,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":314,ud:454}],719:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("kefir")),o=r(e("kefir-cast")),a=e("ud"),s=r(e("../widgets/modal-view")),l=r(e("../widgets/mole-view")),u=r(e("../widgets/drawer-view")),c=r(e("../widgets/top-message-bar-view")),d=r(e("../views/compose-view")),f=r(e("../../common/get-or-fail")),p=r(e("../dom-driver/gmail/is-compose-titlebar-light-color"));const h=new Map;var m=(0,a.defn)(t,class{constructor(e,t){const n={driver:t};h.set(this,n)}showModalView(e){e.buttons&&(e.buttons=e.buttons.map((e=>{if(e.onClick){const t=e.onClick;return{...e,onClick(){t({modalView:r})}}}return e})));const{driver:t}=(0,f.default)(h,this),n=t.createModalViewDriver(e),r=new s.default({driver:t,modalViewDriver:n});return r.show(),r}showMoleView(e){const t=(0,f.default)(h,this).driver.createMoleViewDriver(e),n=new l.default({moleViewDriver:t});return t.show(),n}showTopMessageBarView(e){const t=(0,f.default)(h,this).driver.createTopMessageBarDriver((0,o.default)(i.default,e));return new c.default({topMessageBarViewDriver:t})}showDrawerView(e){if((0,f.default)(h,this).driver.getLogger().eventSdkActive("Widgets.showDrawerView used",{keys:Object.keys(e)}),e.composeView&&!(e.composeView instanceof d.default))throw new Error("composeView option was not a ComposeView");const t=(0,f.default)(h,this).driver.createDrawerViewDriver(e);return new u.default(t)}isMoleViewTitleBarLightColor(){return(0,p.default)()}});n.default=m},{"../../common/get-or-fail":475,"../dom-driver/gmail/is-compose-titlebar-light-color":536,"../views/compose-view":727,"../widgets/drawer-view":745,"../widgets/modal-view":746,"../widgets/mole-view":747,"../widgets/top-message-bar-view":748,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157,ud:454}],720:[function(e,t,n){(function(t){(function(){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformImplementation=void 0,n.makePlatformImplementation=function(e,t,n){if("string"!=typeof e)throw new Error("appId must be a string");const r={globalErrorLogging:!0,eventTracking:!0,inboxBeta:!1,...t};switch(r.REQUESTED_API_VERSION=+r.REQUESTED_API_VERSION,r.REQUESTED_API_VERSION){case 2:r.inboxBeta=!0;break;case 1:break;default:throw new Error("InboxSDK: Unsupported API version "+r.REQUESTED_API_VERSION)}const o=r.VERSION,s=i.BUILD_VERSION,l=new z.default(e,r,o,s),u=document.location.origin;if("https://mail.google.com"!==u)return new Promise(((e,t)=>{}));(0,a.default)();const c=new H.default(e,o,s,l,r,n);return c.onready.then((()=>{(0,W.default)(e)||(console.error(`\n===========================================================\nInboxSDK: You have loaded InboxSDK with an invalid appId:\n${e}\nRegistering an appId is free. Please see\nhttps://www.inboxsdk.com/docs/#RequiredSetup\n===========================================================\n`),c.showAppIdWarning()),c.isRunningInPageContext()&&console.warn("Running the InboxSDK outside of an extension content script is not recommended!"),l.eventSdkPassive("instantiate");const t=new K(c,e,r);return"https://inbox.google.com"!==u||r.inboxBeta?($.has(e)||($.add(e),l.eventSdkPassive("load")),t):(console.log("InboxSDK: Unsupported origin",u),$.has(e)||($.add(e),l.eventSdkPassive("not load")),new Promise(((e,t)=>{})))}))};var r=t(e("./lib/safe-event-emitter")),i=e("../common/version"),o=t(e("../common/get-or-fail")),a=t(e("./lib/shared-style")),s=t(e("./lib/Membrane")),l=t(e("./views/conversations/attachment-card-view")),u=t(e("./dom-driver/gmail/views/gmail-attachment-card-view")),c=t(e("./dom-driver/inbox/views/inbox-attachment-card-view")),d=t(e("./views/conversations/message-view")),f=t(e("./dom-driver/gmail/views/gmail-message-view")),p=t(e("./dom-driver/inbox/views/inbox-message-view")),h=t(e("./views/conversations/thread-view")),m=t(e("./dom-driver/gmail/views/gmail-thread-view")),_=t(e("./dom-driver/inbox/views/inbox-thread-view")),b=t(e("./views/thread-row-view")),g=t(e("./dom-driver/gmail/views/gmail-thread-row-view")),v=t(e("./dom-driver/inbox/views/inbox-thread-row-view")),y=t(e("./views/compose-view")),w=t(e("./dom-driver/gmail/views/gmail-compose-view")),E=t(e("./dom-driver/inbox/views/inbox-compose-view")),k=t(e("./views/route-view/dummy-route-view-driver")),x=t(e("./views/route-view/route-view")),S=t(e("./dom-driver/gmail/views/gmail-route-view/gmail-route-view")),C=t(e("./dom-driver/inbox/views/inbox-route-view")),I=t(e("./dom-driver/inbox/views/inbox-dummy-route-view")),A=t(e("./dom-driver/inbox/views/inbox-custom-route-view")),D=t(e("./namespaces/butter-bar")),T=t(e("./namespaces/compose")),M=t(e("./namespaces/conversations")),O=t(e("./namespaces/keyboard")),P=t(e("./namespaces/widgets")),R=t(e("./namespaces/modal")),L=t(e("./namespaces/lists")),j=t(e("./namespaces/nav-menu")),N=t(e("./namespaces/app-menu")),V=t(e("./namespaces/router")),B=t(e("./namespaces/search")),q=t(e("./namespaces/toolbars")),U=t(e("./namespaces/user")),F=t(e("./namespaces/global")),H=t(e("./dom-driver/gmail/gmail-driver")),z=t(e("./lib/logger")),W=t(e("./lib/is-valid-app-id"));const $=new Set,G=new WeakMap;class K extends r.default{constructor(e,t,n){super();const{appName:r,appIconUrl:o,VERSION:a}=n,H={driver:e};G.set(this,H);const z=new s.default([[w.default,t=>new y.default(e,t,z)],[E.default,t=>new y.default(e,t,z)],[u.default,t=>new l.default(t,e,z)],[c.default,t=>new l.default(t,e,z)],[f.default,n=>new d.default(n,t,z,this.Conversations,e)],[p.default,n=>new d.default(n,t,z,this.Conversations,e)],[m.default,n=>new h.default(n,t,e,z)],[_.default,n=>new h.default(n,t,e,z)],[g.default,e=>new b.default(e)],[v.default,e=>new b.default(e)],[S.default,e=>new x.default(e)],[C.default,e=>new x.default(e)],[I.default,e=>new x.default(e)],[A.default,e=>new x.default(e)],[k.default,e=>new x.default(e)]]);this.destroyed=!1,this.LOADER_VERSION=a,this.IMPL_VERSION=i.BUILD_VERSION,this.ButterBar=new D.default(t,e),e.setButterBar(this.ButterBar),this.Compose=new T.default(e,z),this.Conversations=new M.default(t,e,z),this.Keyboard=new O.default(t,r,o,e),this.User=new U.default(e,n),this.Lists=new L.default(t,e,z),this.NavMenu=new j.default(t,e),this.AppMenu=new N.default(e),this.Router=new V.default(t,e,z),this.Search=new B.default(t,e),this.Toolbars=new q.default(t,e,z,n),this.Widgets=new P.default(t,e),1===n.REQUESTED_API_VERSION&&(this.Modal=new R.default(t,e,n)),n.REQUESTED_API_VERSION>=2&&(this.Global=new F.default(t,e,n)),this.Logger=e.getLogger().getAppLogger()}destroy(){this.destroyed||(this.destroyed=!0,(0,o.default)(G,this).driver.destroy(),this.emit("destroy"))}}n.PlatformImplementation=K}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/get-or-fail":475,"../common/version":484,"./dom-driver/gmail/gmail-driver":494,"./dom-driver/gmail/views/gmail-attachment-card-view":549,"./dom-driver/gmail/views/gmail-compose-view":552,"./dom-driver/gmail/views/gmail-message-view":582,"./dom-driver/gmail/views/gmail-route-view/gmail-route-view":587,"./dom-driver/gmail/views/gmail-thread-row-view":590,"./dom-driver/gmail/views/gmail-thread-view":593,"./dom-driver/inbox/views/inbox-attachment-card-view":618,"./dom-driver/inbox/views/inbox-compose-view":621,"./dom-driver/inbox/views/inbox-custom-route-view":622,"./dom-driver/inbox/views/inbox-dummy-route-view":625,"./dom-driver/inbox/views/inbox-message-view":626,"./dom-driver/inbox/views/inbox-route-view":627,"./dom-driver/inbox/views/inbox-thread-row-view":628,"./dom-driver/inbox/views/inbox-thread-view":629,"./lib/Membrane":644,"./lib/is-valid-app-id":687,"./lib/logger":691,"./lib/safe-event-emitter":698,"./lib/shared-style":699,"./namespaces/app-menu":706,"./namespaces/butter-bar":707,"./namespaces/compose":708,"./namespaces/conversations":709,"./namespaces/global":710,"./namespaces/keyboard":711,"./namespaces/lists":712,"./namespaces/modal":713,"./namespaces/nav-menu":714,"./namespaces/router":715,"./namespaces/search":716,"./namespaces/toolbars":717,"./namespaces/user":718,"./namespaces/widgets":719,"./views/compose-view":727,"./views/conversations/attachment-card-view":729,"./views/conversations/message-view":731,"./views/conversations/thread-view":732,"./views/route-view/dummy-route-view-driver":737,"./views/route-view/route-view":739,"./views/thread-row-view":741,"@babel/runtime/helpers/interopRequireDefault":15}],721:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../lib/safe-event-emitter"));class a extends o.default{constructor(e){super(),(0,i.default)(this,"destroyed",!1),this.el=e}destroy(){this.destroyed||(this.destroyed=!0,this.emit("destroy"),this.el.remove())}}n.default=a},{"../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],722:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.AppMenuItemView=void 0;var i,o=r(e("@babel/runtime/helpers/classPrivateFieldSet")),a=r(e("@babel/runtime/helpers/classPrivateFieldGet")),s=r(e("kefir")),l=r(e("kefir-bus")),u=r(e("classnames")),c=r(e("../lib/safe-event-emitter")),d=e("../dom-driver/gmail/views/gmail-app-menu-item-view"),f=e("./collapsible-panel-view"),p=e("../dom-driver/gmail/gmail-driver/add-collapsible-panel"),h=r(e("../dom-driver/gmail/gmail-element-getter")),m=r(e("../../common/defer"));function _(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function b(e,t,n,r){return w(e,t),v(n,"set"),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,n,r),r}function g(e,t,n){return w(e,t),v(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function v(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function y(e,t,n){return w(e,t),n}function w(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}!function(e){e.MAIL="XJ",e.CHAT="ao4",e.SPACES="aIt",e.MEET="adZ"}(i||(i={}));const E=new Map([[i.MAIL,"aIH"],[i.CHAT,"arL"],[i.SPACES,"arM"],[i.MEET,void 0]]),k=Object.fromEntries([...["inbox/:page"].map((e=>[e,i.MAIL])),...["chat/welcome","chat/dm/:chatID"].map((e=>[e,i.CHAT])),...["rooms/welcome","chat/space/:spaceID"].map((e=>[e,i.SPACES])),...["calls"].map((e=>[e,i.MEET]))]);var x=new WeakMap,S=new WeakMap,C=new WeakMap,I=new WeakMap,A=new WeakMap;class D extends c.default{get menuItemDescriptor(){return(0,a.default)(this,A)}constructor(e,t){super(),_(this,x,{writable:!0,value:void 0}),_(this,S,{writable:!0,value:!1}),_(this,C,{writable:!0,value:void 0}),_(this,I,{writable:!0,value:void 0}),_(this,A,{writable:!0,value:void 0}),(0,o.default)(this,x,e),(0,o.default)(this,A,t);const n=(0,a.default)(this,x).addAppMenuItem(t);(0,o.default)(this,C,n),n.then((e=>{if((0,a.default)(this,S)||!e)return;const t=e.element;t&&(g(D,D,q).set(t,void 0),y(D,D,P).call(D)),e.on("destroy",(()=>{this.remove()})),e.on("click",(()=>{g(D,D,N).emit(["click",t]),this.emit("click")})),e.on("hover",(e=>{g(D,D,N).emit(["mouseenter",t,e]),this.emit("hover")})),e.on("blur",(e=>{g(D,D,N).emit(["mouseleave",t,e]),this.emit("blur")}))})),y(D,D,L).call(D,e),g(D,D,V).resolve(void 0),g(D,D,U).add(this)}async addCollapsiblePanel(e){const t={...e,className:(0,u.default)(e.className,{[f.CollapsiblePanelView.elementCss.COLLAPSED]:!h.default.isAppBurgerMenuOpen(),[f.CollapsiblePanelView.elementCss.PANEL_LESS]:y(D,D,O).call(D)})},n=await(0,p.addCollapsiblePanel)((0,a.default)(this,x),t,this.menuItemDescriptor.insertIndex);return n&&(0,a.default)(this,C).then((e=>{const t=e.element;t&&(n.on("blur",(e=>{g(D,D,N).value(["mouseleave",t,e])})),g(D,D,q).set(t,n.element),y(D,D,P).call(D))})),(0,o.default)(this,I,n),n}async update(e){(await(0,a.default)(this,C)).menuItemDescriptor=e,(0,o.default)(this,A,e)}remove(){var e;(0,a.default)(this,S)||((0,o.default)(this,S,!0),this.emit("destroy"),null===(e=(0,a.default)(this,I))||void 0===e||e.remove(),(0,a.default)(this,C).then((e=>{e.element&&g(D,D,q).delete(e.element),e.remove(),y(D,D,P).call(D)})),g(D,D,U).delete(this))}}function T(){const e=h.default.getAppMenuContainer(),{ACTIVE:t}=f.CollapsiblePanelView.elementCss;return null==e?void 0:e.querySelector(`.${f.NATIVE_CLASS}.${t}`)}function M(){const e=h.default.getAppMenuContainer(),{ACTIVE:t}=d.GmailAppMenuItemView.elementCss;return null==e?void 0:e.querySelector(`.${d.NATIVE_CLASS}.${t}`)}function O(){return!y(D,D,T).call(D)}function P(){const e=h.default.getAppMenu();for(const t of(null==e?void 0:e.querySelectorAll(`.${d.NATIVE_CLASS}`))??[]){const e=g(D,D,q).get(t);if(!e)continue;const n=null==e?void 0:e.querySelector("* > .aTV"),r=null==t?void 0:t.querySelector(".V6"),i=null==r?void 0:r.getBoundingClientRect(),o=((null==r?void 0:r.offsetTop)??0)+.5*((null==i?void 0:i.height)??0)-17*Math.sqrt(2)/4;n&&o&&(n.style.top=`${o}px`)}}function R(){if(document.querySelector(".inboxsdk__menu"))return!0;const e=document.querySelector(".JM");if(e&&"none"!==e.style.display)return!0;const t=document.querySelector(".tP");return!(!t||"none"===t.style.display)}function L(e){g(D,D,B)||(b(D,D,B,e.getRouteViewDriverStream()),g(D,D,B).onValue((async e=>{const t=e.getRouteID(),n=e.getRouteType(),r=Array.from(g(D,D,U),(async e=>{const t=await(0,a.default)(e,C);return[t.menuItemDescriptor,t]})),o=await Promise.all(r),[,s]=o.find((t=>{let[n]=t;return null==n?void 0:n.isRouteActive(e)}))??[];if(null!=s&&s.element)return void g(D,D,N).emit(["route-activated",s.element]);let l="";t&&(l=k[t]),t&&l||"CUSTOM"===n||(l=i.MAIL);const u=l&&document.querySelector(`.${l}`);u&&g(D,D,N).emit(["route-activated",u])})))}n.AppMenuItemView=D;var j={writable:!0,value:s.default.pool()},N={writable:!0,value:(0,l.default)()},V={writable:!0,value:(0,m.default)()},B={writable:!0,value:void 0},q={writable:!0,value:new Map},U={writable:!0,value:new Set};!async function(){if(await h.default.getAppMenuAsync()){g(D,D,j).plug(g(D,D,N));for(const[e,t]of E){const n=document.querySelector(`.${d.NATIVE_CLASS}.${e}`),r=t?document.querySelector(`.${f.NATIVE_CLASS}.${t}`):null;n&&g(D,D,q).set(n,r??void 0)}}}(),g(D,D,V).promise.then((()=>{const e=h.default.getAppMenuContainer();for(const t of(null==e?void 0:e.querySelectorAll(`.${d.NATIVE_CLASS}:not(.${d.INBOXSDK_CLASS})`))??[]){const e=t.querySelector(".V6.CL");null==e||e.addEventListener("mouseenter",(e=>{e.stopImmediatePropagation(),g(D,D,N).emit(["mouseenter",t,e])}),!0),t.addEventListener("mouseleave",(e=>{e.stopImmediatePropagation(),g(D,D,N).emit(["mouseleave",t,e])}),!0),t.addEventListener("click",(()=>{g(D,D,N).emit(["click",t])}));const n=g(D,D,q).get(t);null==n||n.addEventListener("mouseleave",(e=>{e.stopImmediatePropagation(),g(D,D,N).emit(["mouseleave",t,e])}))}})),g(D,D,j).onValue((async e=>{const[t,n,r]=e,{ACTIVE:i,HOVER:o}=d.GmailAppMenuItemView.elementCss;function a(){const e=h.default.getAppMenuContainer(),t=y(D,D,T).call(D);t&&(t.style.removeProperty("height"),t.classList.remove(f.CollapsiblePanelView.elementCss.ACTIVE),t.classList.remove(f.CollapsiblePanelView.elementCss.HOVER));for(const t of(null==e?void 0:e.querySelectorAll(`.${d.NATIVE_CLASS}`))??[]){t.classList.remove(i),t.classList.remove(o);const e=t.querySelector(d.ICON_ELEMENT_SELECTOR);e&&(e.tabIndex=t===n?0:-1)}n.classList.add(i);const r=g(D,D,q).get(n);r&&r.classList.add(f.CollapsiblePanelView.elementCss.ACTIVE)}switch(t){case"mouseenter":{const e=g(D,D,q).get(n),t=y(D,D,M).call(D),r=y(D,D,T).call(D),i=h.default.isAppBurgerMenuOpen();if(t===n&&r===e&&i)return;if(r&&(r.style.removeProperty("height"),r.classList.remove(f.CollapsiblePanelView.elementCss.ACTIVE),r.classList.remove(f.CollapsiblePanelView.elementCss.HOVER)),e){const t=window.innerHeight-e.getBoundingClientRect().top;if(e.style.cssText=`height: ${t}px;`,e.classList.add(f.CollapsiblePanelView.elementCss.ACTIVE),e.classList.add(f.CollapsiblePanelView.elementCss.HOVER),n.classList.add(o),!i)for(const e of document.querySelectorAll(f.CollapsiblePanelView.elementSelectors.NATIVE)??[])e.classList.add(f.CollapsiblePanelView.elementCss.COLLAPSED_HOVER)}else{const e=t&&g(D,D,q).get(t);null==e||e.classList.add(f.CollapsiblePanelView.elementCss.ACTIVE)}break}case"mouseleave":{if(y(D,D,R).call(D))return;const e=y(D,D,M).call(D),t=y(D,D,T).call(D),i=e&&g(D,D,q).get(e);if(r.relatedTarget instanceof Node&&(n.contains(r.relatedTarget)||null!=t&&t.contains(r.relatedTarget)))return;const a=h.default.isAppBurgerMenuOpen();if(t===i&&a)return;n.classList.remove(o);for(const e of document.querySelectorAll(f.CollapsiblePanelView.elementSelectors.NATIVE)??[])e.classList.remove(f.CollapsiblePanelView.elementCss.COLLAPSED_HOVER);t&&(t.style.removeProperty("height"),t.classList.remove(f.CollapsiblePanelView.elementCss.ACTIVE),t.classList.remove(f.CollapsiblePanelView.elementCss.HOVER)),i&&i.classList.add(f.CollapsiblePanelView.elementCss.ACTIVE);break}case"click":{var s,l;a();const e=y(D,D,O).call(D);for(const t of document.querySelectorAll(f.CollapsiblePanelView.elementSelectors.NATIVE)??[])t.classList.toggle(f.CollapsiblePanelView.elementCss.PANEL_LESS,e);null===(s=h.default.getAppMenu())||void 0===s||s.classList.toggle("aTO",e),null===(l=h.default.getAppHeader())||void 0===l||l.classList.toggle("aTO",e);break}case"route-activated":a()}}))},{"../../common/defer":472,"../dom-driver/gmail/gmail-driver/add-collapsible-panel":496,"../dom-driver/gmail/gmail-element-getter":530,"../dom-driver/gmail/views/gmail-app-menu-item-view":540,"../lib/safe-event-emitter":698,"./collapsible-panel-view":724,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:159,"kefir-bus":156}],723:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../lib/safe-event-emitter")),o=r(e("../../common/get-or-fail"));const a=new WeakMap;class s extends i.default{constructor(e,t){super();const n={appToolbarButtonViewDriverPromise:t,appToolbarButtonViewDriver:null};a.set(this,n),this.destroyed=!1,n.appToolbarButtonViewDriverPromise.then((e=>{n.appToolbarButtonViewDriver=e,e.getStopper().onValue((()=>{this.destroyed=!0,this.emit("destroy")}))})),e.getStopper().onValue((()=>{this.remove()}))}open(){(0,o.default)(a,this).appToolbarButtonViewDriverPromise.then((function(e){e.open()}))}close(){(0,o.default)(a,this).appToolbarButtonViewDriverPromise.then((function(e){e.close()}))}remove(){(0,o.default)(a,this).appToolbarButtonViewDriverPromise.then((function(e){e.destroy()}))}}n.default=s},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15}],724:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.NATIVE_CLASS=n.INBOXSDK_CLASS=n.CollapsiblePanelView=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("@babel/runtime/helpers/classPrivateFieldSet")),a=r(e("@babel/runtime/helpers/classPrivateFieldGet")),s=r(e("classnames")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("kefir")),u=r(e("kefir-cast")),c=r(e("../lib/safe-event-emitter")),d=r(e("auto-html")),f=r(e("../lib/dom/querySelectorOrFail")),p=r(e("../dom-driver/gmail/gmail-element-getter")),h=r(e("./nav-item-view")),m=e("../dom-driver/gmail/gmail-driver/track-gmail-styles"),_=r(e("fast-deep-equal"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function g(e,t){y(e,t),t.add(e)}function v(e,t,n){y(e,t),t.set(e,n)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function E(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}n.NATIVE_CLASS="aqn";const k="inboxsdk__collapsiblePanel";n.INBOXSDK_CLASS=k;const x=`aqn ${k} oy8Mbf`,S="T-I T-I-KE L3",C=".T-I.T-I-KE.L3",I="at9",A=`.${I}`,D="inboxsdk__collapsiblePanel_loading_container",T=`${D}--active`,M=`.${D}`;var O=new WeakMap,P=new WeakMap,R=new WeakMap,L=new WeakMap,j=new WeakMap,N=new WeakMap,V=new WeakMap,B=new WeakSet,q=new WeakSet,U=new WeakMap,F=new WeakSet,H=new WeakSet,z=new WeakSet,W=new WeakSet;class $ extends c.default{get loading(){return(0,a.default)(this,V)}setLoading(e){const t=(0,a.default)(this,V)!==e;(0,o.default)(this,V,e),t&&E(this,F,J).call(this)}get panelDescriptor(){return(0,a.default)(this,O)}set panelDescriptor(e){(0,o.default)(this,O,e),E(this,F,J).call(this)}get element(){return(0,a.default)(this,P)}get scrollablePaneElement(){return this.element.querySelector(A)}constructor(e,t){super(),g(this,W),g(this,z),g(this,H),g(this,F),g(this,q),g(this,B),v(this,O,{writable:!0,value:void 0}),v(this,P,{writable:!0,value:void 0}),v(this,R,{writable:!0,value:!1}),v(this,L,{writable:!0,value:Math.random().toFixed(3)}),v(this,j,{writable:!0,value:Math.random().toFixed(3)}),v(this,N,{writable:!0,value:void 0}),v(this,V,{writable:!0,value:void 0}),v(this,U,{writable:!0,value:e=>{var t,n;null===(t=this.panelDescriptor.primaryButton)||void 0===t||null===(n=t.onClick)||void 0===n||n.call(t,e)}}),(0,o.default)(this,N,e),(0,o.default)(this,O,t),(0,o.default)(this,V,null!=t.loadingIcon),(0,o.default)(this,P,E(this,q,K).call(this)),(0,a.default)(this,P).addEventListener("mouseleave",(e=>{this.emit("blur",e)})),m.stylesStream.skipDuplicates(((e,t)=>(0,_.default)(e,t))).onValue((e=>{let{type:t}=e;"theme"===t&&E(this,F,J).call(this)}))}remove(){(0,a.default)(this,R)||((0,o.default)(this,R,!0),this.element.remove(),this.emit("destroy"))}addNavItem(e){this.setLoading(!1);const{element:t}=this,n=(0,f.default)(t,".at9 .n3 .TK"),r=`collapsible-panel-${(0,a.default)(this,L)}`,i=(0,u.default)(l,e).toProperty(),o=(0,a.default)(this,N).addNavItem(r,i,n);return new h.default(r,(0,a.default)(this,N),i,o)}}function G(){const{iconUrl:e}=this.panelDescriptor.primaryButton??{};if(!e)return;const t=p.default.isDarkTheme()?e.darkTheme:e.lightTheme;return t?"string"==typeof t?{panelHovered:t,panelDefault:t}:{panelDefault:t.panelDefault,panelHovered:t.panelHovered}:void 0}function K(){const{panelDescriptor:e}=this,{loadingIcon:t}=e,{className:n,name:r=""}=(null==e?void 0:e.primaryButton)??{},i=document.createElement("div");i.className=(0,s.default)(x,this.panelDescriptor.className);const o=(0,s.default)(S,n),l=(0,s.default)(D,{[T]:(0,a.default)(this,V)}),{panelDefault:u,panelHovered:c}=E(this,B,G).call(this)??{};i.innerHTML=d.default`
      <div class="aBO">
        <div class="aic">
          <div class="z0">
            <div class="${o}" style="user-select: none" role="button" tabindex="0">
              ${r}
            </div>
          </div>
        </div>
        <div class="${I}">
          <div class="${l}">${t?{__html:t}:""}</div>
          <div class="Ls77Lb aZ6">
            <div class="pp" style="user-select: none;">
              <div>
                <div class="nM">
                  <div class="aic"></div>
                  <div class="yJ">
                    <div class="ajl aib aZ6" aria-labelledby="${(0,a.default)(this,j)}">
                      <h2 class="aWk" id="${(0,a.default)(this,j)}">Labels</h2>
                      <div class="wT">
                        <div class="n3">
                          <div class="byl">
                            <div class="TK"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="aTV"></div>
    `.trim();const p=(0,f.default)(i,C);return p.style.setProperty("--background-image",u?`url(${u})`:"unset"),p.style.setProperty("--background-image--hover",c?`url(${c})`:"unset"),p.addEventListener("click",(0,a.default)(this,U)),i}function J(){const e=this.element;if(!e)return;const t=Object.values($.elementCss).filter((t=>e.classList.contains(t)));e.className=(0,s.default)(x,this.panelDescriptor.className,...t),E(this,z,Q).call(this,e),E(this,H,Y).call(this,e),E(this,W,Z).call(this,e)}function Y(e){const t=(0,f.default)(e,C),{panelDefault:n,panelHovered:r}=E(this,B,G).call(this)??{};for(const e of[r,n])if(e&&!w($,$,X).has(e)){w($,$,X).add(e);var i=document.createElement("link");i.rel="preload",i.as="image",i.href=e,document.head.appendChild(i)}for(const[e,i]of Object.entries({"--background-image--hover":r,"--background-image":n}))i?t.style.setProperty(e,`url(${i})`):t.style.removeProperty(e);const{className:o}=this.panelDescriptor.primaryButton??{};t.className=(0,s.default)(S,o)}function Q(e){var t;const n=e.querySelector(C);n&&(n.textContent=(null===(t=this.panelDescriptor.primaryButton)||void 0===t?void 0:t.name)??"")}function Z(e){const t=e.querySelector(M);t&&(this.loading?t.classList.add(T):t.classList.remove(T))}n.CollapsiblePanelView=$,(0,i.default)($,"elementSelectors",{NATIVE:".aqn.oy8Mbf",CUSTOM:".inboxsdk__collapsiblePanel"}),(0,i.default)($,"elementCss",{ACTIVE:"apV",COLLAPSED:"aBA",HOVER:"aJu",COLLAPSED_HOVER:"bym",PANEL_LESS:"a3W"});var X={writable:!0,value:new Set}},{"../dom-driver/gmail/gmail-driver/track-gmail-styles":528,"../dom-driver/gmail/gmail-element-getter":530,"../lib/dom/querySelectorOrFail":668,"../lib/safe-event-emitter":698,"./nav-item-view":735,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,classnames:56,"fast-deep-equal":141,kefir:159,"kefir-cast":157}],725:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("../lib/safe-event-emitter")),a=r(e("../../common/get-or-fail"));const s=new WeakMap;class l extends o.default{constructor(e,t){super();const n={collapsibleSectionViewDriver:e};s.set(this,n),this.destroyed=!1,function(e,t,n){t.getEventStream().onValue((t=>{let{eventName:n}=t;e.emit(n)})),t.getEventStream().filter((e=>{let{eventName:t}=e;return"rowClicked"===t})).onValue((e=>{let{rowDescriptor:t}=e;t.routeID&&n.goto(t.routeID,t.routeParams),"function"==typeof t.onClick&&t.onClick()})),t.getEventStream().filter((e=>{let{eventName:t}=e;return"titleLinkClicked"===t})).onValue((t=>{let{sectionDescriptor:n}=t;n.onTitleLinkClick&&n.onTitleLinkClick(e)})),t.getEventStream().filter((e=>{let{eventName:t}=e;return"footerClicked"===t})).onValue((t=>{let{sectionDescriptor:n}=t;n.onFooterLinkClick&&n.onFooterLinkClick(e)})),t.getEventStream().onEnd((()=>{e.destroyed=!0,e.emit("destroy")}))}(this,e,t)}setCollapsed(e){(0,a.default)(s,this).collapsibleSectionViewDriver.setCollapsed(e)}remove(){this.destroy()}destroy(){(0,a.default)(s,this).collapsibleSectionViewDriver.destroy(),this.removeAllListeners()}}var u=(0,i.defn)(t,l);n.default=u},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],726:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../lib/safe-event-emitter")),a=r(e("../../common/get-or-fail"));const s=new WeakMap;class l extends o.default{constructor(e,t,n){super(),(0,i.default)(this,"destroyed",!1);const r={optionsPromise:e,composeViewDriver:t,driver:n};s.set(this,r),r.optionsPromise.then((e=>{e?r.composeViewDriver.getStopper().onValue((()=>{u(this)})):u(this)}))}showTooltip(e){const t=(0,a.default)(s,this);t.driver.getLogger().eventSdkPassive("ComposeButtonView.showTooltip",{keys:Object.keys(e)}),t.optionsPromise.then((n=>{n&&t.composeViewDriver.addTooltipToButton(n.buttonViewController,n.buttonDescriptor,e)}))}closeTooltip(){const e=(0,a.default)(s,this);e.optionsPromise.then((t=>{t&&e.composeViewDriver.closeButtonTooltip(t.buttonViewController)}))}}function u(e){e.destroyed=!0,e.emit("destroy")}n.default=l},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],727:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../lib/safe-event-emitter")),a=r(e("kefir")),s=r(e("kefir-cast")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ud")),u=r(e("../../common/get-or-fail")),c=r(e("./compose-button-view"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const f=l.defonce(t,(()=>new WeakMap));class p extends o.default{constructor(e,t,n){super(),(0,i.default)(this,"destroyed",!1);const r={driver:e,membrane:n,composeViewImplementation:t};f.set(this,r),this.on("newListener",(n=>{"close"===n?(e.getLogger().deprecationWarning("composeView close event","composeView destroy event"),1!==e.getOpts().REQUESTED_API_VERSION&&console.error("The composeView close event was removed after API version 1")):"messageIDChange"===n?(e.getLogger().deprecationWarning("composeView messageIDChange event","composeView.getDraftID"),1!==e.getOpts().REQUESTED_API_VERSION&&console.error("The composeView messageIDChange event was removed after API version 1")):"linkPopOver"===n&&t.setupLinkPopOvers()})),r.composeViewImplementation.getEventStream().onValue((t=>{if("destroy"===t.eventName)this.destroyed=!0,1===e.getOpts().REQUESTED_API_VERSION&&this.emit("close");else if("messageIDChange"===t.eventName&&1!==e.getOpts().REQUESTED_API_VERSION)return;this.emit(t.eventName,t.data)}))}addButton(e){const t=(0,u.default)(f,this),n=(0,s.default)(a.default,e),r=t.composeViewImplementation.addButton(n,t.driver.getAppId(),{composeView:this});return new c.default(r,t.composeViewImplementation,t.driver)}addComposeNotice(e){return(0,u.default)(f,this).composeViewImplementation.addComposeNotice(e)}addStatusBar(e){return(0,u.default)(f,this).composeViewImplementation.addStatusBar(e)}hideNativeStatusBar(){return(0,u.default)(f,this).composeViewImplementation.hideNativeStatusBar()}addRecipientRow(e){return{destroy:(0,u.default)(f,this).composeViewImplementation.addRecipientRow((0,s.default)(a.default,e))}}forceRecipientRowsOpen(){return(0,u.default)(f,this).composeViewImplementation.forceRecipientRowsOpen()}hideNativeRecipientRows(){return(0,u.default)(f,this).composeViewImplementation.hideNativeRecipientRows()}hideRecipientArea(){return(0,u.default)(f,this).composeViewImplementation.hideRecipientArea()}close(){(0,u.default)(f,this).composeViewImplementation.close()}send(){let{sendAndArchive:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sendAndArchive:!1};(0,u.default)(f,this).composeViewImplementation.send({sendAndArchive:e})}discard(){(0,u.default)(f,this).composeViewImplementation.discard()}getMetadataForm(){return(0,u.default)(f,this).composeViewImplementation.getMetadataFormElement()}getSubjectInput(){return(0,u.default)(f,this).composeViewImplementation.getSubjectInput()}getBodyElement(){return(0,u.default)(f,this).composeViewImplementation.getBodyElement()}getComposeID(){const{driver:e,composeViewImplementation:t}=(0,u.default)(f,this);if(e.getLogger().deprecationWarning("composeView.getComposeID"),1!==e.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return t.getComposeID()}getInitialMessageID(){return(0,u.default)(f,this).composeViewImplementation.getInitialMessageID()}getMessageID(){const{driver:e,composeViewImplementation:t}=(0,u.default)(f,this);if(e.getLogger().deprecationWarning("composeView.getMessageID","composeView.getDraftID"),1!==e.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return t.getMessageID()}getThreadID(){return(0,u.default)(f,this).composeViewImplementation.getThreadID()}getDraftID(){return(0,u.default)(f,this).composeViewImplementation.getDraftID()}getCurrentDraftID(){return(0,u.default)(f,this).composeViewImplementation.getCurrentDraftID()}getHTMLContent(){return(0,u.default)(f,this).composeViewImplementation.getHTMLContent()}getSelectedBodyHTML(){return(0,u.default)(f,this).composeViewImplementation.getSelectedBodyHTML()||""}getSelectedBodyText(){return(0,u.default)(f,this).composeViewImplementation.getSelectedBodyText()||""}getSubject(){return(0,u.default)(f,this).composeViewImplementation.getSubject()}getTextContent(){return(0,u.default)(f,this).composeViewImplementation.getTextContent()}getToRecipients(){return(0,u.default)(f,this).composeViewImplementation.getToRecipients()}getCcRecipients(){return(0,u.default)(f,this).composeViewImplementation.getCcRecipients()}getBccRecipients(){return(0,u.default)(f,this).composeViewImplementation.getBccRecipients()}insertTextIntoBodyAtCursor(e){return(0,u.default)(f,this).composeViewImplementation.insertBodyTextAtCursor(e)}insertHTMLIntoBodyAtCursor(e){return(0,u.default)(f,this).composeViewImplementation.insertBodyHTMLAtCursor(e)}insertLinkChipIntoBodyAtCursor(e,t,n){if(n&&"string"==typeof n&&0===n.indexOf("http"))return(0,u.default)(f,this).composeViewImplementation.insertLinkChipIntoBody({text:e,url:t,iconUrl:n});console.warn("You must provide a publicly accessible iconUrl")}insertLinkIntoBodyAtCursor(e,t){return(0,u.default)(f,this).composeViewImplementation.insertLinkIntoBody(e,t)}isForward(){return(0,u.default)(f,this).composeViewImplementation.isForward()}isInlineReplyForm(){return(0,u.default)(f,this).composeViewImplementation.isInlineReplyForm()}isFullscreen(){return(0,u.default)(f,this).composeViewImplementation.isFullscreen()}setFullscreen(e){(0,u.default)(f,this).composeViewImplementation.setFullscreen(e)}isMinimized(){return(0,u.default)(f,this).composeViewImplementation.isMinimized()}setMinimized(e){(0,u.default)(f,this).composeViewImplementation.setMinimized(e)}setTitleBarColor(e){return(0,u.default)(f,this).composeViewImplementation.setTitleBarColor(e)}setTitleBarText(e){return(0,u.default)(f,this).composeViewImplementation.setTitleBarText(e)}async popOut(){const e=(0,u.default)(f,this).driver.getNextComposeViewDriver();(0,u.default)(f,this).composeViewImplementation.popOut();const t=await e;return(0,u.default)(f,this).membrane.get(t)}isReply(){return(0,u.default)(f,this).composeViewImplementation.isReply()}setToRecipients(e){(0,u.default)(f,this).composeViewImplementation.setToRecipients(e)}setCcRecipients(e){(0,u.default)(f,this).composeViewImplementation.setCcRecipients(e)}setBccRecipients(e){(0,u.default)(f,this).composeViewImplementation.setBccRecipients(e)}getFromContact(){return(0,u.default)(f,this).composeViewImplementation.getFromContact()}getFromContactChoices(){return(0,u.default)(f,this).composeViewImplementation.getFromContactChoices()}setFromEmail(e){(0,u.default)(f,this).composeViewImplementation.setFromEmail(e)}setSubject(e){(0,u.default)(f,this).composeViewImplementation.setSubject(e)}setBodyHTML(e){(0,u.default)(f,this).composeViewImplementation.setBodyHTML(e)}setBodyText(e){(0,u.default)(f,this).composeViewImplementation.setBodyText(e)}async attachFiles(e){if(0!==e.length){if(!(e[0]instanceof Blob))throw new Error("parameter must be an array of Blob objects");return(0,u.default)(f,this).composeViewImplementation.attachFiles(Array.from(e))}}async attachInlineFiles(e){if(0!==e.length){if(!(e[0]instanceof Blob))throw new Error("parameter must be an array of Blob objects");return(0,u.default)(f,this).composeViewImplementation.attachInlineFiles(Array.from(e))}}dragFilesIntoCompose(e){const{driver:t}=(0,u.default)(f,this);if(t.getLogger().deprecationWarning("ComposeView.dragFilesIntoCompose","ComposeView.attachInlineFiles"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.attachInlineFiles(e)}getElement(){return(0,u.default)(f,this).composeViewImplementation.getElement()}registerRequestModifier(e){(0,u.default)(f,this).composeViewImplementation.registerRequestModifier(e)}replaceSendButton(e){let{el:t}=e;return(0,u.default)(f,this).composeViewImplementation.replaceSendButton(t)}hideDiscardButton(){return(0,u.default)(f,this).composeViewImplementation.hideDiscardButton()}ensureFormattingToolbarIsHidden(){(0,u.default)(f,this).composeViewImplementation.ensureFormattingToolbarIsHidden()}ensureAppButtonToolbarsAreClosed(){(0,u.default)(f,this).composeViewImplementation.ensureAppButtonToolbarsAreClosed()}overrideEditSubject(){const{driver:e,composeViewImplementation:t}=(0,u.default)(f,this);if(e.getLogger().deprecationWarning("composeView.overrideEditSubject"),1!==e.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");"function"==typeof t.overrideEditSubject&&t.overrideEditSubject()}}n.default=p},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"./compose-button-view":726,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157,ud:454}],728:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("kefir")),r(e("../lib/safe-event-emitter"))),a=r(e("../../common/get-or-fail"));const s=new WeakMap;class l extends o.default{constructor(e){super(),(0,i.default)(this,"destroyed",!1);const t={contentPanelViewImplementation:e};s.set(this,t),this._bindToStreamEvents()}remove(){(0,a.default)(s,this).contentPanelViewImplementation.remove()}close(){(0,a.default)(s,this).contentPanelViewImplementation.close()}open(){(0,a.default)(s,this).contentPanelViewImplementation.open()}isActive(){return(0,a.default)(s,this).contentPanelViewImplementation.isActive()}_bindToStreamEvents(){const e=(0,a.default)(s,this).contentPanelViewImplementation.getEventStream();e.onValue((e=>{let{eventName:t}=e;this.emit(t)})),e.onEnd((()=>{this.destroyed=!0,this.emit("destroy")}))}}n.default=l},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159}],729:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=(r(e("util")),r(e("../../lib/safe-event-emitter")));class a extends o.default{constructor(e,t,n){super(),this.destroyed=!1,this._driver=t,this._membrane=n,this._attachmentCardImplementation=e,this._attachmentCardImplementation.getStopper().onValue((()=>{this.destroyed=!0,this.emit("destroy")}))}getAttachmentType(){return this._attachmentCardImplementation.getAttachmentType()}addButton(e){this._attachmentCardImplementation.addButton(e)}getTitle(){return this._attachmentCardImplementation.getTitle()}getDownloadURL(){if(this._driver.getLogger().deprecationWarning("AttachmentCardView.getDownloadURL","AttachmentCardView.addButton -> onClick -> AttachmentCardClickEvent"),1!==this._driver.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this._attachmentCardImplementation.getDownloadURL()}getMessageView(){const e=this._attachmentCardImplementation.getMessageViewDriver();return e?this._membrane.get(e):null}}var s=(0,i.defn)(t,a);n.default=s},{"../../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15,ud:454,util:52}],730:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("kefir")),r(e("kefir-stopper"))),a=(r(e("lodash/once")),r(e("../../lib/safe-event-emitter")));class s extends a.default{constructor(e,t){super(),(0,i.default)(this,"_destroyed",!1),(0,i.default)(this,"_stopper",(0,o.default)()),(0,i.default)(this,"_isCollapsed",!0),this._setupElement(),e.takeUntilBy(this._stopper).onValue((e=>{this._el.setAttribute("data-inboxsdk-sortdate",String(e.sortDate.getTime()));const t=this._lastDescriptor;if(this._lastDescriptor=e,!t||t.iconUrl!==e.iconUrl){const t=document.createElement("img");t.src=e.iconUrl,this._iconEl.innerHTML="",this._iconEl.appendChild(t)}t&&t.collapsedEl===e.collapsedEl||!this._isCollapsed||(t&&t.collapsedEl.remove(),this._contentEl.appendChild(e.collapsedEl)),t&&t.headerEl===e.headerEl||(t&&t.headerEl.remove(),this._contentHeaderEl.appendChild(e.headerEl)),t&&t.bodyEl===e.bodyEl||(t&&t.bodyEl.remove(),this._contentBodyEl.appendChild(e.bodyEl))})).take(1).onValue(t)}destroy(){this._destroyed||(this._destroyed=!0,this._stopper.destroy(),this.emit("destroy"),this._el.remove())}expand(){this._isCollapsed=!1;const e=this._lastDescriptor;e&&e.collapsedEl.remove(),this._contentEl.appendChild(this._contentHeaderEl),this._contentEl.appendChild(this._contentBodyEl),this._el.classList.remove("inboxsdk__custom_message_view_collapsed"),this.emit("expanded")}collapse(){this._isCollapsed=!0,this._contentHeaderEl.remove(),this._contentBodyEl.remove();const e=this._lastDescriptor;e&&this._contentEl.appendChild(e.collapsedEl),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this.emit("collapsed")}getElement(){return this._el}getSortDate(){return this._lastDescriptor?this._lastDescriptor.sortDate:null}_setupElement(){this._el=document.createElement("div"),this._el.classList.add("inboxsdk__custom_message_view"),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this._iconEl=document.createElement("div"),this._iconEl.classList.add("inboxsdk__custom_message_view_icon"),this._contentEl=document.createElement("div"),this._contentEl.classList.add("inboxsdk__custom_message_view_content"),this._contentHeaderEl=document.createElement("div"),this._contentHeaderEl.classList.add("inboxsdk__custom_message_view_header"),this._contentBodyEl=document.createElement("div"),this._contentBodyEl.classList.add("inboxsdk__custom_message_view_body"),this._el.appendChild(this._iconEl),this._el.appendChild(this._contentEl),this._el.addEventListener("click",(e=>{this._isCollapsed&&(this.expand(),e.preventDefault(),e.stopPropagation())})),this._contentHeaderEl.addEventListener("click",(e=>{this.collapse(),e.preventDefault(),e.stopPropagation()}))}}n.default=s},{"../../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-stopper":158,"lodash/once":346}],731:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("asap")),s=r(e("../../lib/safe-event-emitter")),l=r(e("../../../common/get-or-fail")),u=(r(e("./attachment-card-view")),e("../../namespaces/conversations"));const c=(0,o.defonce)(t,(()=>new WeakMap));class d extends s.default{constructor(e,t,n,r,o){super(),(0,i.default)(this,"destroyed",!1);const s={messageViewImplementation:e,membrane:n,Conversations:r,driver:o,linksInBody:null};c.set(this,s),function(e,t,n){n.onEnd((function(){e.destroyed=!0,e.emit("destroy"),e.removeAllListeners()})),n.filter((function(e){return"internal"!==e.type&&"contactHover"===e.eventName})).onValue((function(t){e.emit(t.eventName,{contactType:t.contactType,contact:t.contact,messageView:e,threadView:e.getThreadView()})})),e.isLoaded()?(0,a.default)((()=>{e.emit("load",{messageView:e})})):n.filter((e=>"messageLoad"===e.eventName)).onValue((t=>{e.emit("load",{messageView:e})}));n.filter((function(e){return"viewStateChange"===e.eventName})).onValue((function(n){e.emit("viewStateChange",{oldViewState:t.Conversations.MessageViewViewStates[n.oldValue],newViewState:t.Conversations.MessageViewViewStates[n.newValue],messageView:e})}))}(this,s,e.getEventStream())}addAttachmentCardView(e){const{messageViewImplementation:t,membrane:n}=(0,l.default)(c,this),r=t.addAttachmentCard(e),i=n.get(r);return r.getPreviewClicks().onValue((t=>{e.previewOnClick&&e.previewOnClick({attachmentCardView:i,preventDefault:()=>t.preventDefault()})})),i}addAttachmentCardViewNoPreview(e){return this.addAttachmentCardView(e)}addAttachmentsToolbarButton(e){const{messageViewImplementation:t,membrane:n}=(0,l.default)(c,this);t.addButtonToDownloadAllArea({tooltip:e.tooltip,iconUrl:e.iconUrl,onClick:()=>{const r=t.getAttachmentCardViewDrivers().map((e=>n.get(e)));e.onClick({attachmentCardViews:r})}})}addToolbarButton(e){if("function"!=typeof e.onClick||"string"!=typeof e.title||!Object.prototype.hasOwnProperty.call(u.MessageViewToolbarSectionNames,e.section))throw new Error("Missing required properties on MessageViewToolbarButtonDescriptor object");const{messageViewImplementation:t}=(0,l.default)(c,this);t.addMoreMenuItem(e)}getBodyElement(){return(0,l.default)(c,this).messageViewImplementation.getContentsElement()}getMessageID(){return(0,l.default)(c,this).driver.getLogger().deprecationWarning("messageView.getMessageID","messageView.getMessageIDAsync"),(0,l.default)(c,this).messageViewImplementation.getMessageID()}getMessageIDAsync(){return(0,l.default)(c,this).messageViewImplementation.getMessageIDAsync()}getFileAttachmentCardViews(){const{messageViewImplementation:e,membrane:t}=(0,l.default)(c,this);return e.getAttachmentCardViewDrivers().filter((e=>"FILE"===e.getAttachmentType())).map((e=>t.get(e)))}getAttachmentCardViews(){const{driver:e}=(0,l.default)(c,this);if(e.getLogger().deprecationWarning("MessageView.getAttachmentCardViews","MessageView.getFileAttachmentCardViews"),1!==e.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.getFileAttachmentCardViews()}isElementInQuotedArea(e){return(0,l.default)(c,this).messageViewImplementation.isElementInQuotedArea(e)}isLoaded(){return(0,l.default)(c,this).messageViewImplementation.isLoaded()}getLinksInBody(){const e=(0,l.default)(c,this);if(!e.linksInBody){const t=this.getBodyElement().querySelectorAll("a");e.linksInBody=Array.from(t).map((e=>({text:e.textContent,html:e.innerHTML,href:e.href,element:e,isInQuotedArea:this.isElementInQuotedArea(e)})))}return e.linksInBody}getSender(){return(0,l.default)(c,this).messageViewImplementation.getSender()}getRecipients(){return(0,l.default)(c,this).driver.getLogger().deprecationWarning("MessageView.getRecipients","MessageView.getRecipientEmailAddresses() or MessageView.getRecipientsFull()"),this.getRecipientEmailAddresses().map((e=>({emailAddress:e,name:null})))}getRecipientEmailAddresses(){return(0,l.default)(c,this).messageViewImplementation.getRecipientEmailAddresses()}getRecipientsFull(){return(0,l.default)(c,this).messageViewImplementation.getRecipientsFull()}getThreadView(){const{messageViewImplementation:e,membrane:t}=(0,l.default)(c,this);return t.get(e.getThreadViewDriver())}getDateString(){return(0,l.default)(c,this).messageViewImplementation.getDateString()}addAttachmentIcon(e){return(0,l.default)(c,this).messageViewImplementation.addAttachmentIcon(e)}getViewState(){const e=(0,l.default)(c,this);return e.Conversations.MessageViewViewStates[e.messageViewImplementation.getViewState()]}hasOpenReply(){const{driver:e,messageViewImplementation:t}=(0,l.default)(c,this);if(e.getLogger().deprecationWarning("MessageView.hasOpenReply"),1!==e.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return(0,l.default)(c,this).messageViewImplementation.hasOpenReply()}}var f=(0,o.defn)(t,d);n.default=f},{"../../../common/get-or-fail":475,"../../lib/safe-event-emitter":698,"../../namespaces/conversations":709,"./attachment-card-view":729,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,ud:454}],732:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=e("ud"),a=r(e("../../lib/safe-event-emitter")),s=r(e("kefir-cast")),l=r(e("kefir")),u=r(e("../content-panel-view")),c=r(e("../../../common/get-or-fail"));const d=(0,o.defonce)(t,(()=>new WeakMap));class f extends a.default{constructor(e,t,n,r){super(),(0,i.default)(this,"destroyed",!1);const o={threadViewImplementation:e,appId:t,driver:n,membrane:r};d.set(this,o),function(e,t){t.getEventStream().onEnd((function(){e.destroyed=!0,e.emit("destroy"),e.removeAllListeners()})),t.getEventStream().filter((function(e){return"internal"!==e.type&&"contactHover"===e.eventName})).onValue((function(t){const{membrane:n}=(0,c.default)(d,e);e.emit(t.eventName,{contactType:t.contactType,messageView:n.get(t.messageViewDriver),contact:t.contact,threadView:e})}))}(this,e)}addSidebarContentPanel(e){const t=(0,s.default)(l.default,e).toProperty(),n=(0,c.default)(d,this);n.driver.getLogger().eventSdkPassive("threadView.addSidebarContentPanel");const r=n.threadViewImplementation.addSidebarContentPanel(t);return r?new u.default(r):null}addNoticeBar(){return(0,c.default)(d,this).threadViewImplementation.addNoticeBar()}registerHiddenCustomMessageNoticeProvider(e){return(0,c.default)(d,this).threadViewImplementation.registerHiddenCustomMessageNoticeProvider(e)}addCustomMessage(e){const t=(0,s.default)(l.default,e).toProperty(),n=(0,c.default)(d,this);return n.driver.getLogger().eventSdkPassive("threadView.addCustomMessage"),n.threadViewImplementation.addCustomMessage(t)}getMessageViews(){const{threadViewImplementation:e,membrane:t}=(0,c.default)(d,this);return e.getMessageViewDrivers().filter((e=>e.isLoaded())).map((e=>t.get(e)))}getMessageViewsAll(){const{threadViewImplementation:e,membrane:t}=(0,c.default)(d,this);return e.getMessageViewDrivers().map((e=>t.get(e)))}getSubject(){return(0,c.default)(d,this).threadViewImplementation.getSubject()}getThreadID(){return(0,c.default)(d,this).driver.getLogger().deprecationWarning("threadView.getThreadID","threadView.getThreadIDAsync"),(0,c.default)(d,this).threadViewImplementation.getThreadID()}getThreadIDAsync(){return(0,c.default)(d,this).threadViewImplementation.getThreadIDAsync()}addLabel(){return(0,c.default)(d,this).threadViewImplementation.addLabel()}}var p=(0,o.defn)(t,f);n.default=p},{"../../../common/get-or-fail":475,"../../lib/safe-event-emitter":698,"../content-panel-view":728,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157,ud:454}],733:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../lib/safe-event-emitter"));class o extends i.default{constructor(e,t){super(),this.chord=e,this.description=t}remove(){this.emit("destroy")}}n.default=o},{"../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15}],734:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../lib/safe-event-emitter")),o=r(e("kefir")),a=r(e("kefir-cast")),s=(r(e("../../common/defer")),r(e("../../common/get-or-fail"))),l=r(e("./nav-item-view"));const u=new WeakMap;class c extends i.default{constructor(e,t,n,r){super();const i={appId:e,driver:t,labelName:n,navItemViews:[],navItemViewDriver:null,navItemViewDriverPromise:r};u.set(this,i),r.then((e=>{e&&(i.navItemViewDriver=e,e.getEventStream().onValue((e=>function(e,t){switch(t.eventName){case"expanded":case"collapsed":e.emit(t.eventName)}}(this,e))))}))}addNavItem(e){const t=(0,s.default)(u,this),n=(0,a.default)(o.default,e).toProperty(),r=new l.default(t.appId,t.driver,n,t.navItemViewDriverPromise.then((e=>e.addNavItem(t.appId,n))));return t.navItemViews.push(r),r}isCollapsed(){return"collapsed"===localStorage.getItem("inboxsdk__nativeNavItem__state_"+(0,s.default)(u,this).labelName)}setCollapsed(e){const t=(0,s.default)(u,this);t.navItemViewDriver?t.navItemViewDriver.setCollapsed(e):localStorage.setItem("inboxsdk__nativeNavItem__state_"+t.labelName,e?"collapsed":"expanded")}}n.default=c},{"../../common/defer":472,"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"./nav-item-view":735,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157}],735:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("lodash/isEqual")),a=r(e("kefir")),s=r(e("kefir-cast")),l=(r(e("../../common/defer")),r(e("../../common/get-or-fail"))),u=r(e("../lib/safe-event-emitter")),c=r(e("../constants/nav-item-types"));const d=new WeakMap;class f extends u.default{constructor(e,t,n,r){super(),(0,i.default)(this,"destroyed",!1);const s={appId:e,driver:t,navItemDescriptorPropertyStream:n,navItemViews:[],navItemViewDriver:null,navItemViewDriverPromise:r};d.set(this,s),t.getStopper().onValue(this.remove.bind(this)),r.then((e=>{if(this.destroyed||!e)return;const t=s.driver;s.navItemViewDriver=e,s.navItemDescriptorPropertyStream.sampledBy(e.getEventStream(),((e,t)=>[e,t])).onValue((n=>function(e,t,n,r){let[i,o]=r;switch(o.eventName){case"click":if(i.type===c.default.GROUPER)return;if("function"==typeof i.onClick){let e=!1;const t={preventDefault(){e=!0}};if(i.onClick(t),e)break}i.routeID?n.goto(i.routeID,i.routeParams):t.toggleCollapse();break;case"expanded":case"collapsed":e.emit(o.eventName)}}(this,e,t,n))),a.default.combine([s.navItemDescriptorPropertyStream,t.getRouteViewDriverStream()]).takeUntilBy(e.getEventStream().filter((()=>!1)).beforeEnd((()=>null))).onValue((t=>{!function(e,t){let[n,r]=t;e.setActive(n&&r.getRouteID()===n.routeID&&(0,o.default)(n.routeParams||{},r.getParams()))}(e,t)}))}))}addNavItem(e){if(this.destroyed)throw new Error("this nav item view does not exist");const t=(0,l.default)(d,this),n=t.driver,r=t.appId,i=t.navItemViews,o=(0,s.default)(a.default,e).toProperty(),u=new f(r,n,o,t.navItemViewDriverPromise.then((e=>e.addNavItem(t.appId,o))));return i.push(u),u}remove(){if(this.destroyed)return;const e=(0,l.default)(d,this),{navItemViews:t}=e;this.destroyed=!0,this.emit("destroy"),t.forEach((function(e){e.remove()})),e.navItemViewDriverPromise.then((e=>{e.destroy()}))}isCollapsed(){const e=(0,l.default)(d,this).navItemViewDriver;return!!e&&e.isCollapsed()}setCollapsed(e){(0,l.default)(d,this).navItemViewDriverPromise.then((t=>{t.setCollapsed(e)}))}}n.default=f},{"../../common/defer":472,"../../common/get-or-fail":475,"../constants/nav-item-types":489,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157,"lodash/isEqual":331}],736:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("./route-view")),a=r(e("../../../common/get-or-fail"));class s extends o.default{constructor(e){super(e);const t={routeViewDriver:e};l.set(this,t)}setFullWidth(e){const{routeViewDriver:t}=(0,a.default)(l,this);t.setFullWidth(e)}getElement(){const{routeViewDriver:e}=(0,a.default)(l,this),t=e.getCustomViewElement();if(!t)throw new Error("Should not happen");return t}}const l=(0,i.defonce)(t,(()=>new WeakMap));var u=(0,i.defn)(t,s);n.default=u},{"../../../common/get-or-fail":475,"./route-view":739,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],737:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=(r(e("kefir")),r(e("kefir-bus"))),a=r(e("kefir-stopper")),s=e("ud");var l=(0,s.defn)(t,class{constructor(){(0,i.default)(this,"_eventStream",(0,o.default)()),(0,i.default)(this,"_stopper",(0,a.default)())}getRouteType(){return"UNKNOWN"}getRouteID(){return"UNKNOWN"}getParams(){return{}}getEventStream(){return this._eventStream}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy()}});n.default=l},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,"kefir-stopper":158,ud:454}],738:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("./route-view")),a=r(e("kefir")),s=r(e("kefir-cast")),l=r(e("../collapsible-section-view")),u=r(e("../section-view")),c=r(e("../../../common/get-or-fail"));class d extends o.default{constructor(e,t,n){super(e);const r={routeViewDriver:e,driver:t,appId:n,sectionViews:[]};f.set(this,r),function(e,t){e.getEventStream().onEnd((()=>{(0,c.default)(f,t).sectionViews.forEach((e=>{e.destroy()}))}))}(e,this)}addCollapsibleSection(e){const t=(0,c.default)(f,this),n=t.routeViewDriver.addCollapsibleSection((0,s.default)(a.default,e).toProperty(),t.appId),r=new l.default(n,t.driver);return t.sectionViews.push(r),r}addSection(e){const t=(0,c.default)(f,this),n=t.routeViewDriver.addSection((0,s.default)(a.default,e).toProperty(),t.appId),r=new u.default(n,t.driver);return t.sectionViews.push(r),r}refresh(){(0,c.default)(f,this).routeViewDriver.refresh()}}const f=new WeakMap;var p=(0,i.defn)(t,d);n.default=p},{"../../../common/get-or-fail":475,"../collapsible-section-view":725,"../section-view":740,"./route-view":739,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-cast":157,ud:454}],739:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../lib/safe-event-emitter")),o=e("ud"),a=r(e("../../../common/get-or-fail"));const s=new WeakMap;class l extends i.default{constructor(e){super();const t={routeID:null,routeType:null,params:null,routeViewDriver:e};s.set(this,t),this.destroyed=!1,function(e,t){e.getEventStream().onEnd((()=>{t.destroyed=!0,t.emit("destroy"),t.removeAllListeners()}))}(e,this)}getRouteID(){const e=(0,a.default)(s,this);return e.routeID||(e.routeID=e.routeViewDriver.getRouteID()),e.routeID}getRouteType(){const e=(0,a.default)(s,this);return e.routeType||(e.routeType=e.routeViewDriver.getRouteType()),e.routeType}getParams(){const e=(0,a.default)(s,this);return e.params||(e.params=e.routeViewDriver.getParams()),e.params}}var u=(0,o.defn)(t,l);n.default=u},{"../../../common/get-or-fail":475,"../../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],740:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("ud"),o=r(e("../lib/safe-event-emitter")),a=r(e("../../common/get-or-fail"));const s=new WeakMap;class l extends o.default{constructor(e,t){super();const n={sectionViewDriver:e};s.set(this,n),this.destroyed=!1,function(e,t,n){t.getEventStream().onValue((t=>{e.emit(t.eventName)})),t.getEventStream().filter((e=>{let{eventName:t}=e;return"rowClicked"===t})).onValue((e=>{let{rowDescriptor:t}=e;t.routeID&&n.goto(t.routeID,t.routeParams),"function"==typeof t.onClick&&t.onClick()})),t.getEventStream().filter((e=>{let{eventName:t}=e;return"summaryClicked"===t})).onValue((t=>{let{sectionDescriptor:n}=t;n.onTitleLinkClick&&n.onTitleLinkClick(e)})),t.getEventStream().filter((e=>{let{eventName:t}=e;return"footerClicked"===t})).onValue((t=>{let{sectionDescriptor:n}=t;n.onFooterLinkClick&&n.onFooterLinkClick(e)})),t.getEventStream().onEnd((()=>{e.destroyed=!0,e.emit("destroy")}))}(this,e,t)}remove(){this.destroy()}destroy(){(0,a.default)(s,this).sectionViewDriver.destroy(),this.removeAllListeners()}}var u=(0,i.defn)(t,l);n.default=u},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15,ud:454}],741:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../lib/safe-event-emitter")),o=r(e("../../common/get-or-fail"));const a=new WeakMap;class s extends i.default{constructor(e){super();const t={threadRowViewDriver:e};a.set(this,t),this.destroyed=!1,e.getEventStream().onEnd((()=>{this.destroyed=!0,this.emit("destroy")})),e.setUserView(this)}addLabel(e){(0,o.default)(a,this).threadRowViewDriver.addLabel(e)}addImage(e){(0,o.default)(a,this).threadRowViewDriver.addImage(e)}addButton(e){(0,o.default)(a,this).threadRowViewDriver.addButton(e)}addActionButton(e){(0,o.default)(a,this).threadRowViewDriver.addActionButton(e)}addAttachmentIcon(e){(0,o.default)(a,this).threadRowViewDriver.addAttachmentIcon(e)}replaceDate(e){(0,o.default)(a,this).threadRowViewDriver.replaceDate(e)}replaceDraftLabel(e){(0,o.default)(a,this).threadRowViewDriver.replaceDraftLabel(e)}getElement(){return(0,o.default)(a,this).threadRowViewDriver.getElement()}getSubject(){return(0,o.default)(a,this).threadRowViewDriver.getSubject()}getDateString(){return(0,o.default)(a,this).threadRowViewDriver.getDateString()}getThreadID(){return(0,o.default)(a,this).threadRowViewDriver.getThreadID()}getThreadIDAsync(){return(0,o.default)(a,this).threadRowViewDriver.getThreadIDAsync()}getThreadIDIfStable(){return this.getVisibleMessageCount()>0?this.getThreadID():null}getThreadIDIfStableAsync(){return this.getVisibleMessageCount()>0?this.getThreadIDAsync():Promise.resolve(null)}getDraftID(){return(0,o.default)(a,this).threadRowViewDriver.getDraftID()}getVisibleDraftCount(){return(0,o.default)(a,this).threadRowViewDriver.getVisibleDraftCount()}getVisibleMessageCount(){return(0,o.default)(a,this).threadRowViewDriver.getVisibleMessageCount()}getContacts(){return(0,o.default)(a,this).threadRowViewDriver.getContacts()}}n.default=s},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15}],742:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir-stopper"));n.default=class{constructor(e){(0,i.default)(this,"_stopper",(0,o.default)()),this._activateFunction=e.activateFunction||e.onClick,this._view=e.buttonView,this._view.getEventStream().filter((e=>"click"===e.eventName)).onValue((()=>{this.activate()}))}getStopper(){return this._stopper}destroy(){this._activateFunction=null,this._view.destroy(),this._stopper.destroy()}update(e){this.getView().update(e),this.setActivateFunction(e&&(e.activateFunction||e.onClick))}getView(){return this._view}setActivateFunction(e){this._activateFunction=e}activate(){this._activateFunction&&this._activateFunction({})}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":158}],743:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir-stopper")),a=r(e("./dropdown-view"));n.default=class{constructor(e){(0,i.default)(this,"_dropdownView",null),(0,i.default)(this,"_stopper",(0,o.default)()),this._dropdownShowFunction=e.dropdownShowFunction,this._DropdownViewDriverClass=e.dropdownViewDriverClass;const t=this._view=e.buttonView;this._dropdownPositionOptions=e.dropdownPositionOptions,t.getElement().setAttribute("aria-haspopup","true"),t.getElement().setAttribute("aria-pressed","false"),t.getElement().setAttribute("aria-expanded","false"),this._bindToViewEvents()}getStopper(){return this._stopper}destroy(){this._view&&(this._view.destroy(),this._view=null),this._dropdownView&&(this._dropdownView.close(),this._dropdownView=null),this._stopper.destroy()}update(e){this.getView().update(e),this.setDropdownShowFunction(e&&e.dropdownShowFunction)}getView(){if(!this._view)throw new Error("Already destroyed");return this._view}setDropdownShowFunction(e){this._dropdownShowFunction=e}showDropdown(){this.hideDropdown();const e=this._view;if(!e)throw new Error("Already destroyed");e.activate();const t=this._dropdownView=new a.default(new this._DropdownViewDriverClass,e.getElement(),void 0);this._dropdownPositionOptions&&t.setPlacementOptions(this._dropdownPositionOptions),t.on("destroy",this._dropdownClosed.bind(this)),this._dropdownShowFunction&&this._dropdownShowFunction({dropdown:this._dropdownView}),e.getElement().setAttribute("aria-pressed","true"),e.getElement().setAttribute("aria-expanded","true")}hideDropdown(){this._dropdownView&&this._dropdownView.close()}isDropdownVisible(){return!!this._dropdownView}_bindToViewEvents(){if(!this._view)throw new Error("Already destroyed");this._view.getEventStream().filter((e=>"click"===e.eventName)).onValue((()=>{this._toggleDropdownState()}))}_toggleDropdownState(){this._dropdownView?this._dropdownView.close():this.showDropdown()}_dropdownClosed(){const e=this._view;e&&(e.deactivate(),this._dropdownView=null,e.getElement().setAttribute("aria-pressed","false"),e.getElement().setAttribute("aria-expanded","false"))}}},{"./dropdown-view":744,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":158}],744:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("asap")),a=r(e("../../lib/safe-event-emitter")),s=r(e("kefir")),l=r(e("../../lib/dom/make-mutation-observer-chunked-stream")),u=r(e("../../lib/ScrollableContainByScreen")),c=r(e("../../lib/dom/outsideClicksAndEscape"));class d extends a.default{constructor(e,t,n){super(),(0,i.default)(this,"destroyed",!1),(0,i.default)(this,"closed",!1),(0,i.default)(this,"_userPlacementOptions",{hAlign:"left"}),(0,i.default)(this,"_scrollableContainByScreen",null),this._dropdownViewDriver=e,this._options={...e.getDropdownOptions&&e.getDropdownOptions(),...n},this.el=e.getContentElement();const r=e.getContainerElement();document.contains(r)?this._didInsertContainerEl=!1:(document.body.insertBefore(r,document.body.firstElementChild),this._didInsertContainerEl=!0),r.hasAttribute("tabindex")||r.setAttribute("tabindex","-1");const a=s.default.fromEvents(this,"destroy"),d=[t,r];this._options.extraElementsToIgnore&&d.push(...this._options.extraElementsToIgnore),(0,c.default)(d).takeUntilBy(a).filter((e=>{let t=!1;const n={type:e.type,cause:e.cause,cancel:()=>{t=!0}};return this.emit("preautoclose",n),!t})).onValue((()=>{this.close()})),this._options.manualPosition||(r.style.position="fixed",(0,o.default)((()=>{this.closed||(s.default.fromEvents(this,"_placementOptionsUpdated").toProperty((()=>null)).takeUntilBy(a).onValue((()=>{this._scrollableContainByScreen&&this._scrollableContainByScreen.destroy(),this._scrollableContainByScreen=new u.default(r,t,this._userPlacementOptions)})),(0,l.default)(e.getContentElement(),{childList:!0,attributes:!0,characterData:!0,subtree:!0}).throttle(200).takeUntilBy(a).onValue((()=>this.reposition())))})));const f=document.activeElement;(0,o.default)((()=>{this.closed||document.activeElement===f&&r.focus()}))}setPlacementOptions(e){this._options.manualPosition?console.error("DropdownView.setPlacementOptions() was called on a manually-positioned DropdownView."):(this._userPlacementOptions={...this._userPlacementOptions,...e},this.emit("_placementOptionsUpdated"))}close(){this.destroyed||(this.destroyed=this.closed=!0,this._scrollableContainByScreen&&this._scrollableContainByScreen.destroy(),this.emit("destroy"),this._didInsertContainerEl&&this._dropdownViewDriver.getContainerElement().remove(),this._dropdownViewDriver.destroy())}reposition(){this._scrollableContainByScreen&&this._scrollableContainByScreen.reposition()}}n.default=d},{"../../lib/ScrollableContainByScreen":645,"../../lib/dom/make-mutation-observer-chunked-stream":662,"../../lib/dom/outsideClicksAndEscape":665,"../../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:159}],745:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=(r(e("kefir-bus")),e("ud")),s=r(e("../lib/safe-event-emitter")),l=r(e("../views/compose-view"));class u extends s.default{constructor(e){super(),(0,i.default)(this,"destroyed",!1),this._driver=e,this._driver.getSlideAnimationDone().onValue((()=>{this.emit("slideAnimationDone")})),this._driver.getClosingStream().onValue((()=>{this.emit("closing")})),this._driver.getClosedStream().onValue((()=>{this.destroyed=!0,this.emit("destroy")})),this._driver.getPreAutoCloseStream().onValue((e=>{this.emit("preautoclose",e)})),document.dispatchEvent(new CustomEvent("inboxSDKcloseDrawers",{bubbles:!1,cancelable:!1,detail:null})),o.default.fromEvents(document,"inboxSDKcloseDrawers").takeUntilBy(o.default.fromEvents(this,"closing")).onValue((()=>{this.close()}))}close(){this._driver.close()}associateComposeView(e,t){if(!(e instanceof l.default))throw new Error("argument was not a ComposeView");this._driver.associateComposeView(e,t)}disassociateComposeView(){this._driver.disassociateComposeView()}}var c=(0,a.defn)(t,u);n.default=c},{"../lib/safe-event-emitter":698,"../views/compose-view":727,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,ud:454}],746:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("kefir")),a=r(e("kefir-bus")),s=e("ud"),l=r(e("../lib/safe-event-emitter"));class u extends l.default{constructor(e){super(),(0,i.default)(this,"destroyed",!1),this._driver=e.driver,this._modalViewDriver=e.modalViewDriver,e.modalViewDriver.getEventStream().filter((e=>"closeClick"===e.eventName)).onValue((()=>{this.close()})),e.modalViewDriver.getEventStream().onEnd((()=>{var e;this._modalViewDriver=null,this.destroyed=!0,e=this,d&&d.modalView===e?(d=null,p.length>0?p.pop().show():c&&c.destroy()):p.indexOf(e)>-1&&p.splice(p.indexOf(e),1),this.emit("destroy")}))}show(){const e=this._modalViewDriver;if(!e)throw new Error("Modal can not be shown after being hidden");const t=o.default.merge([o.default.fromEvents(this,"destroy"),f.filter((e=>e===this))]);document.body.appendChild(e.getModalContainerElement()),e.getModalContainerElement().focus(),o.default.fromEvents(document.body,"keydown").filter((e=>27===e.keyCode)).takeUntilBy(t).onValue((e=>{e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),this.close()})),function(e,t){d?(f.emit(d.modalView),p.push(d.modalView),d.modalViewDriver.getModalContainerElement().remove()):c||(c=e._driver.createBackdrop(502),c.getStopper().onValue((()=>{c=null,p.slice().forEach((e=>{e.close()})),d&&d.modalView.close()})));d={modalView:e,modalViewDriver:t}}(this,e)}setTitle(e){if(!this._modalViewDriver)throw new Error("Modal can not be shown after being hidden");this._modalViewDriver.setTitle(e)}close(){this._modalViewDriver&&this._modalViewDriver.destroy()}addButton(e){throw new Error("not implemented")}}let c=null,d=null;const f=(0,a.default)(),p=[];var h=(0,s.defn)(t,u);n.default=h},{"../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:159,"kefir-bus":156,ud:454}],747:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("@babel/runtime/helpers/defineProperty")),o=r(e("../../common/get-or-fail")),a=r(e("../lib/safe-event-emitter"));const s=new WeakMap;class l extends a.default{constructor(e){super(),(0,i.default)(this,"destroyed",!1);const t={driver:e.moleViewDriver};s.set(this,t),t.driver.getEventStream().onValue((e=>{this.emit(e.eventName,e.detail)})),t.driver.getEventStream().onEnd((()=>{this.destroyed=!0,this.emit("destroy")}))}close(){(0,o.default)(s,this).driver.destroy()}setTitle(e){(0,o.default)(s,this).driver.setTitle(e)}setMinimized(e){(0,o.default)(s,this).driver.setMinimized(e)}getMinimized(){return(0,o.default)(s,this).driver.getMinimized()}}n.default=l},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],748:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("../../common/get-or-fail")),o=r(e("../lib/safe-event-emitter"));const a=new WeakMap;class s extends o.default{constructor(e){super();const t={driver:e.topMessageBarViewDriver};a.set(this,t)}remove(){(0,i.default)(a,this).driver.remove()}}n.default=s},{"../../common/get-or-fail":475,"../lib/safe-event-emitter":698,"@babel/runtime/helpers/interopRequireDefault":15}]},{},[485])(485)}));
//# sourceMappingURL=inboxsdk.js.map
