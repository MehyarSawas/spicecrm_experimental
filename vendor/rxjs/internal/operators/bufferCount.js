"use strict";var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");function bufferCount(e,r){return void 0===r&&(r=null),function(t){return t.lift(new BufferCountOperator(e,r))}}exports.bufferCount=bufferCount;var BufferCountOperator=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?BufferSkipCountSubscriber:BufferCountSubscriber}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),BufferCountSubscriber=function(r){function t(t,e){t=r.call(this,t)||this;return t.bufferSize=e,t.buffer=[],t}return __extends(t,r),t.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),r.prototype._complete.call(this)},t}(Subscriber_1.Subscriber),BufferSkipCountSubscriber=function(n){function t(t,e,r){t=n.call(this,t)||this;return t.bufferSize=e,t.startBufferEvery=r,t.buffers=[],t.count=0,t}return __extends(t,n),t.prototype._next=function(t){var e=this,r=e.bufferSize,n=e.startBufferEvery,u=e.buffers,e=e.count;this.count++,e%n==0&&u.push([]);for(var i=u.length;i--;){var f=u[i];f.push(t),f.length===r&&(u.splice(i,1),this.destination.next(f))}},t.prototype._complete=function(){for(var t=this.buffers,e=this.destination;0<t.length;){var r=t.shift();0<r.length&&e.next(r)}n.prototype._complete.call(this)},t}(Subscriber_1.Subscriber);