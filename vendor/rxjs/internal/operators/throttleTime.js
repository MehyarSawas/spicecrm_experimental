"use strict";var __extends=this&&this.__extends||function(){var r=function(t,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};return function(t,i){function e(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async"),throttle_1=require("./throttle");function throttleTime(i,e,r){return void 0===e&&(e=async_1.async),void 0===r&&(r=throttle_1.defaultThrottleConfig),function(t){return t.lift(new ThrottleTimeOperator(i,e,r.leading,r.trailing))}}exports.throttleTime=throttleTime;var ThrottleTimeOperator=function(){function t(t,i,e,r){this.duration=t,this.scheduler=i,this.leading=e,this.trailing=r}return t.prototype.call=function(t,i){return i.subscribe(new ThrottleTimeSubscriber(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),ThrottleTimeSubscriber=function(s){function t(t,i,e,r,n){t=s.call(this,t)||this;return t.duration=i,t.scheduler=e,t.leading=r,t.trailing=n,t._hasTrailingValue=!1,t._trailingValue=null,t}return __extends(t,s),t.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},t}(Subscriber_1.Subscriber);function dispatchNext(t){t.subscriber.clearThrottle()}