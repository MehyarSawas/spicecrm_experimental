/*!
 * 
 *                     aacService
 *
 *                     release: 2022.01.001
 *
 *                     date: 2022-04-13 22:38:49
 *
 *                     build: 2022.01.001.1649882329485
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_sendinblue_sendinbluemodule_ts"],{1887:(e,t,n)=>{n.r(t),n.d(t,{SendinBlueModule:()=>Z});var s=n(9808),l=n(2382),o=n(9769),i=n(1549),a=n(1706),d=n(4518),u=n(6472),c=n(4893),r=n(5329),m=n(4154),b=n(5710),h=n(4044),g=n(4505),S=n(3278),B=n(3463);let p=(()=>{class SendinBlueButton{constructor(e,t,n,s,l,o,i){this.language=e,this.metadata=t,this.model=n,this.modal=s,this.injector=l,this.backend=o,this.toast=i}get disabled(){return"0"==this.model.getFieldValue("entry_count")}execute(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest(`channels/emarketing/sendinblue/${this.model.module}/${this.model.id}`).subscribe((t=>{e.emit(!0),t?this.modal.openModal("SendinBlueModal",!0,this.injector).subscribe((e=>{e.instance.contacts=t.synced})):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}}return SendinBlueButton.ɵfac=function(e){return new(e||SendinBlueButton)(c.Y36(r.d),c.Y36(m.Pu),c.Y36(b.o),c.Y36(h.o),c.Y36(c.zs3),c.Y36(g.y),c.Y36(S.A))},SendinBlueButton.ɵcmp=c.Xpm({type:SendinBlueButton,selectors:[["sendinblue-button"]],decls:2,vars:2,consts:[["label","LBL_SENDINBLUE"]],template:function(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA()),2&e&&c.ekj("disabled",t.disabled)},directives:[B._],encapsulation:2}),SendinBlueButton})();var L=n(2480),E=n(9621),y=n(1916),f=n(3499),M=n(5767);function T(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c._UZ(2,"system-label",1)(3,"system-label",1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" ",e.contacts.length," "),c.xp6(1),c.Q6J("label","MSG_SENDINBLUE_FOUND"),c.xp6(1),c.Q6J("label","MSG_SENDINBLUE_UPDATE_LIST")}}function U(e,t){1&e&&(c.TgZ(0,"div"),c._UZ(1,"system-label",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("label","MSG_SENDINBLUE_UPDATE_LIST"))}let N=(()=>{class SendinBlueModal{constructor(e,t,n,s,l,o,i){this.language=e,this.router=t,this.metadata=n,this.backend=s,this.model=l,this.modal=o,this.toast=i,this.contacts=[],this.self={}}updateSendInBlueList(){const e=this.model.getFieldValue("ext_id");_.isEmpty(e)?(this.toast.sendToast(this.language.getLabel("MSG_NO_EXT_ID"),"error"),this.close()):this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_UPDATING",this.backend.postRequest(`channels/emarketing/sendinblue/${this.model.module}/${this.model.id}/${e}`,{}).subscribe((e=>{e?(t.instance.self.destroy(),this.close(),this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success")):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}))}close(){this.self.destroy()}}return SendinBlueModal.ɵfac=function(e){return new(e||SendinBlueModal)(c.Y36(r.d),c.Y36(L.F0),c.Y36(m.Pu),c.Y36(g.y),c.Y36(b.o),c.Y36(h.o),c.Y36(S.A))},SendinBlueModal.ɵcmp=c.Xpm({type:SendinBlueModal,selectors:[["sendinblue-modal"]],decls:11,vars:5,consts:[[3,"close"],[3,"label"],[4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content"),c.YNc(4,T,4,3,"div",2),c.YNc(5,U,2,1,"div",2),c.qZA(),c.TgZ(6,"system-modal-footer")(7,"button",3),c.NdJ("click",(function(){return t.close()})),c._UZ(8,"system-label",1),c.qZA(),c.TgZ(9,"button",3),c.NdJ("click",(function(){return t.updateSendInBlueList()})),c._UZ(10,"system-label",1),c.qZA()()()),2&e&&(c.xp6(2),c.Q6J("label","LBL_SENDINBLUE"),c.xp6(2),c.Q6J("ngIf",t.contacts.length>0),c.xp6(1),c.Q6J("ngIf",0==t.contacts.length),c.xp6(3),c.Q6J("label","LBL_CANCEL"),c.xp6(2),c.Q6J("label","LBL_UPDATE"))},directives:[E.j,y.y,B._,f.x,s.O5,M.p],encapsulation:2}),SendinBlueModal})(),Z=(()=>{class SendinBlueModule{}return SendinBlueModule.ɵfac=function(e){return new(e||SendinBlueModule)},SendinBlueModule.ɵmod=c.oAB({type:SendinBlueModule}),SendinBlueModule.ɵinj=c.cJS({imports:[[s.ez,l.u5,i.ObjectFields,a.GlobalComponents,d.ObjectComponents,u.SystemComponents,o.o,l.UX]]}),SendinBlueModule})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT(Z,{declarations:[p,N],imports:[s.ez,l.u5,i.ObjectFields,a.GlobalComponents,d.ObjectComponents,u.SystemComponents,o.o,l.UX]})}}]);