<div class="slds-grid" [system-overlay-loading-spinner]="isLoading">
    <div class="slds-p-around--medium" style="width:100%">
        <div class="slds-grid slds-grid--align-spread">
            <div class="slds-text-heading_small"><system-label label="LBL_USER_RESTRICTION"></system-label></div>
            <system-checkbox-toggle [(ngModel)]="restrictions.user.enabled" label="LBL_ACTIVE" class="slds-m-bottom--xx-small spice-display-block"></system-checkbox-toggle>
        </div>
        <div class="slds-grid">
            <div class="slds-form-element">
                <label class="slds-form-element__label" for="user-number-attempts">
                    <abbr class="slds-required" title="required">* </abbr><system-label label="LBL_MAX_LOGIN_ATTEMPTS"></system-label></label>
                <div class="slds-form-element__control">
                    <system-input-number [disabled]="!restrictions.user.enabled" [(ngModel)]="restrictions.user.number_attempts" [onlyField]="true" id="user-number-attempts" [precision]="0" [asNumber]="true"></system-input-number>
                </div>
            </div>
            <div class="slds-form-element slds-m-left--medium">
                <label class="slds-form-element__label" for="user-monitored-period">
                    <abbr class="slds-required" title="required">* </abbr><system-label label="LBL_MONITORED_PERIOD"></system-label> (<system-label label="LBL_MINUTES" length="short" style="display:inline-block"></system-label>)</label>
                <div class="slds-form-element__control">
                    <system-input-number [disabled]="!restrictions.user.enabled" [(ngModel)]="restrictions.user.monitored_period" [onlyField]="true" id="user-monitored-period" [precision]="0" [asNumber]="true"></system-input-number>
                </div>
            </div>
            <fieldset class="slds-form-element slds-m-left--medium">
                <legend class="slds-form-element__legend slds-form-element__label" style="font-weight:normal"><system-label label="LBL_LOCK_TYPE"></system-label></legend>
                <div class="slds-form-element__control">
                    <span class="slds-radio">
                      <input type="radio" id="user-lock-type-time" value="time" [(ngModel)]="restrictions.user.blocking_type" [disabled]="!restrictions.user.enabled" />
                      <label class="slds-radio__label" for="user-lock-type-time">
                        <span class="slds-radio_faux"></span>
                          <span class="slds-form-element__label"><system-label label="LBL_TIME"></system-label></span>
                      </label>
                    </span>
                    <span class="slds-radio">
                      <input type="radio" id="user-lock-type-perm" value="permanent" [(ngModel)]="restrictions.user.blocking_type" [disabled]="!restrictions.user.enabled" />
                      <label class="slds-radio__label" for="user-lock-type-perm">
                        <span class="slds-radio_faux"></span>
                        <span class="slds-form-element__label"><system-label label="LBL_PERMANENT"></system-label></span>
                      </label>
                    </span>
                </div>
            </fieldset>
            <div class="slds-form-element slds-m-left--x-small">
                <label class="slds-form-element__label" for="user-blocking-duration">
                    <abbr class="slds-required" title="required">* </abbr><system-label label="LBL_BLOCKING_DURATION"></system-label> (<system-label label="LBL_MINUTES" length="short" style="display:inline-block"></system-label>)</label>
                <div class="slds-form-element__control" [ngClass]="{'slds-has-error':restrictions.user.blocking_type === 'time' && restrictions.user.blocking_duration === 0}">
                    <system-input-number [disabled]="!restrictions.user.enabled || restrictions.user.blocking_type === 'permanent'" [(ngModel)]="restrictions.user.blocking_duration" [onlyField]="true" id="user-blocking-duration" [precision]="0" [asNumber]="true" (ngModelChange)="restrictions.user.blocking_type = ( restrictions.user.blocking_duration === 0 ? 'permanent':'time')"></system-input-number>
                </div>
            </div>
        </div>
    </div>
    <div class="slds-border--left slds-p-around--medium slds-border--right" style="width:100%">
        <div class="slds-grid slds-grid--align-spread">
            <div class="slds-text-heading_small"><system-label label="LBL_IP_RESTRICTION"></system-label></div>
            <system-checkbox-toggle [(ngModel)]="restrictions.ip.enabled" label="LBL_ACTIVE" class="slds-m-bottom--xx-small spice-display-block"></system-checkbox-toggle>
        </div>
        <div class="slds-grid">
            <div class="slds-form-element">
                <label class="slds-form-element__label" for="ip-number-attempts">
                    <abbr class="slds-required" title="required">* </abbr><system-label label="LBL_MAX_LOGIN_ATTEMPTS"></system-label></label>
                <div class="slds-form-element__control">
                    <system-input-number [disabled]="!restrictions.ip.enabled" [(ngModel)]="restrictions.ip.number_attempts" [onlyField]="true" id="ip-number-attempts" [precision]="0" [asNumber]="true"></system-input-number>
                </div>
            </div>
            <div class="slds-form-element slds-m-left--medium">
                <label class="slds-form-element__label" for="ip-monitored-period">
                    <abbr class="slds-required" title="required">* </abbr><system-label label="LBL_MONITORED_PERIOD"></system-label> (<system-label label="LBL_MINUTES" length="short" style="display:inline-block"></system-label>)</label>
                <div class="slds-form-element__control">
                    <system-input-number [disabled]="!restrictions.ip.enabled" [(ngModel)]="restrictions.ip.monitored_period" [onlyField]="true" id="ip-monitored-period" [precision]="0" [asNumber]="true"></system-input-number>
                </div>
            </div>
        </div>
    </div>
    <div class="slds-p-around--medium slds-align-bottom" style="white-space:nowrap">
        <button class="slds-button slds-button--icon slds-button_neutral slds-button--icon-border" [disabled]="isLoading" (click)="cancelEditing()">
            <system-button-icon icon="close"></system-button-icon>
        </button><button class="slds-button slds-button--icon slds-button_brand slds-button--icon-border slds-m-left--small" [disabled]="isLoading" (click)="saveConfig()">
            <system-button-icon icon="check"></system-button-icon>
        </button>
    </div>
</div>
