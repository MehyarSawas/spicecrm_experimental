<div class="slds-p-around--x-small slds-grid">
    <div class="slds-form-element__control slds-col--bump-right">
        <div class="slds-select_container">
            <select class="slds-select" [(ngModel)]="cs.selectedSchema">
                <option value=""><system-label label="LBL_SELECT"/></option>
                <option *ngFor="let schewma of calculationSchemes" [ngValue]="schewma.id">{{schewma.name}}</option>
            </select>
        </div>
    </div>
    <button class="slds-button slds-button--icon slds-button--icon-border" [disabled]="!cs.selectedSchema" (click)="deleteSchema()">
        <system-button-icon icon="delete"></system-button-icon>
    </button>
    <button class="slds-button slds-button--icon slds-button--icon-border" [disabled]="!cs.selectedSchema">
        <system-button-icon icon="edit"></system-button-icon>
    </button>
    <button class="slds-button slds-button--icon slds-button--icon-border" (click)="addSchema()">
        <system-button-icon icon="add"></system-button-icon>
    </button>
    <button class="slds-button slds-button--icon slds-button--icon-border" [disabled]="!cs.selectedSchema" (click)="addSchema(true)">
        <system-button-icon icon="copy"></system-button-icon>
    </button>
</div>
<div style="height: calc(100% - 50px)" class="slds-scrollable--y">
    <table *ngIf="cs.selectedSchema" class="slds-table slds-table_bordered slds-table--header-fixed" >
        <thead>
            <tr class="slds-line-height_reset slds-text-title--caps">
                <th style="width: 2em;"></th>
                <th style="width: 2em;">
                    <button class="slds-button slds-button--icon" (click)="renumberElements()">
                        <system-button-icon icon="loop"></system-button-icon>
                    </button>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_NAME"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_CONDITION"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-utility-icon icon="edit" size="x-small"></system-utility-icon></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_ELEMENTCALCULATION"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_ELEMENTBASE"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_ELEMENTBASETYPE"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_VISIBILITY"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_PRINT"></system-label></div>
                </th>
                <th scope="col">
                    <div class="slds-truncate slds-p-around--x-small"><system-label label="LBL_DISPLAYSTYLE"></system-label></div>
                </th>
                <th style="width: 2em;"></th>
            </tr>
        </thead>
        <tbody class="dragboundary" cdkDropList (cdkDropListDropped)="drop($event)">
            <tr class="slds-hint-parent" *ngFor="let element of schemaElements" cdkDrag cdkDragBoundary=".dragboundary" (cdkDragStarted)="dragStarted($event)" (cdkDragEnded)="dragEnded($event)">
                <td>
                    <system-utility-icon cdkDragHandle *ngIf="element.elementdeterminationtype=='M'" style="cursor:move" icon="advanced_function" size="x-small"></system-utility-icon>
                    <system-utility-icon cdkDragHandle *ngIf="element.elementdeterminationtype=='C'" style="cursor:move" icon="table" size="x-small"></system-utility-icon>
                </td>
                <td>
                    {{element.elementindex}}
                </td>
                <td>
                    <system-input-label *ngIf="element.elementdeterminationtype=='M'" hideTechnicalName [(ngModel)]="element.elementname"></system-input-label>
                    <spice-price-determination-configurator-inout-conitiontype *ngIf="element.elementdeterminationtype=='C'" [ngModel]="element.syspriceconditiontype_id" (ngModelChange)="setConditionType(element, $event)"></spice-price-determination-configurator-inout-conitiontype>
                </td>
                <td>
                    <system-input-text  [(ngModel)]="element.elementtype"></system-input-text>
                </td>
                <td>
                    <system-checkbox [asinteger]="true" [disabled]="element.elementdeterminationtype=='M'" [(ngModel)]="element.editable"></system-checkbox>
                </td>
                <td>
                    <system-input-text [disabled]="element.elementdeterminationtype=='C'" [(ngModel)]="element.elementcalculation"></system-input-text>
                </td>
                <td>
                    <system-input-text [disabled]="!(getValueType(element.syspriceconditiontype_id) == 'P' || getValueType(element.syspriceconditiontype_id) == 'T')" [(ngModel)]="element.elementbase"></system-input-text>
                </td>
                <td>
                    <div class="slds-form-element__control">
                        <div class="slds-select_container">
                            <select class="slds-select" [disabled]="getValueType(element.syspriceconditiontype_id) != 'T'" [(ngModel)]="element.elementbasetype">
                                <option value="A"><system-label label="LBL_BASETYPE_A"/></option>
                                <option value="I"><system-label label="LBL_BASETYPE_I"/></option>
                            </select>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="slds-form-element__control">
                        <div class="slds-select_container">
                            <select class="slds-select" [(ngModel)]="element.hidden">
                                <option value="0"><system-label label="LBL_PRICEELEMENT_ALWAYYS"/></option>
                                <option value="1"><system-label label="LBL_PRICEELEMENT_HIDDEN"/></option>
                                <option value="2"><system-label label="LBL_PRICEELEMENT_HIDDENWHENEMPTY"/></option>
                            </select>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="slds-form-element__control">
                        <div class="slds-select_container">
                            <select class="slds-select" [(ngModel)]="element.print">
                                <option value="0"><system-label label="LBL_PRICEELEMENT_ALWAYYS"/></option>
                                <option value="1"><system-label label="LBL_PRICEELEMENT_HIDDEN"/></option>
                                <option value="2"><system-label label="LBL_PRICEELEMENT_HIDDENWHENEMPTY"/></option>
                            </select>
                        </div>
                    </div>
                </td>
                <td>
                    <system-input-text [(ngModel)]="element.displaystyles"></system-input-text>
                </td>
                <td>
                    <button class="slds-button slds-button--icon" (click)="deleteElement(element)">
                        <system-button-icon icon="delete"></system-button-icon>
                    </button>
                </td>
            </tr>
            <tr>
                <td colspan="99">
                    <div class="slds-align_absolute-center slds-p-around--small">
                        <button class="slds-button slds-button--icon" (click)="add()"><system-button-icon icon="new"></system-button-icon></button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>