<div *ngIf="!hidden" class="slds-tabs--default slds-grid slds-grid--vertical">
    <ul class="slds-tabs--default__nav" role="tablist">
        <li (click)="setActiveTab('details')" [class.slds-active]="activeTab == 'details'" class="slds-tabs--default__item slds-text-title--caps" role="presentation">
            <a class="slds-tabs--default__link" href="javascript:void(0);" role="tab"  aria-selected="false">
                <system-label label="LBL_DETAILS"></system-label>
            </a>
        </li>
        <li (click)="setActiveTab('preview')" [class.slds-active]="activeTab == 'preview'" class="slds-tabs--default__item slds-text-title--caps" role="presentation">
            <a class="slds-tabs--default__link" href="javascript:void(0);" role="tab"  aria-selected="false">
                <system-label label="LBL_PREVIEW"></system-label>
            </a>
        </li>
    </ul>
    <div class="slds-grow">
        <div class="slds-p-around--x-small slds-height_full" [class.slds-hide]="activeTab != 'details'">
            <field-container field="mailbox_id" [fieldconfig]="{fieldtype: 'mailboxes', scope: 'outboundmass'}" fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"></field-container>
            <div class="slds-grid">
                <field-container field="email_subject" class="slds-grow"  fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"></field-container>
                <div class="slds-align-bottom slds-col--bump-left slds-m-left--small slds-p-bottom--xx-small">
                    <button [disabled]="!view.isEditMode()" (click)="copyFromTemplate()" class="slds-button slds-button--neutral">
                        <system-button-icon icon="copy" position="left"></system-button-icon>
                        <system-label label="LBL_COPY_TEMPLATE"></system-label>
                    </button>
                </div>
            </div>
            <field-container field="email_body" [fieldconfig]="{fieldtype: 'html', asiframe:true, 'simplemode': false, height: '250px'}" fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"></field-container>
        </div>
        <div [class.slds-hide]="activeTab != 'preview'" class="slds-height_full">
            <iframe *ngIf="sanitizedHTML" class="slds-size--1-of-1" style="height: 400px; border: 0; resize: vertical;" [srcdoc]="sanitizedHTML" sandbox></iframe>
        </div>
    </div>
</div>
