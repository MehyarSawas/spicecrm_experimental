<div class="slds-grid slds-grid--vertical slds-p-around--xxx-small" style="height: 100%">
    <div *ngIf="properties.dims == '21N'" class="slds-form-element slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small slds-p-left--medium slds-p-right--x-small slds-size--1-of-2">
        <label class="slds-form-element__label slds-text-heading--label">
            <system-label label="LBL_DIMENSION"></system-label> 1
        </label>
        <div class="slds-form-element__control slds-grow">
            <div class="slds-select_container">
                <select class="slds-select" [(ngModel)]="properties.dimensions.dimension1">
                    <option *ngFor="let listField of listFields; trackBy: trackByFn" [value]="listField.fieldid">
                        <system-label [label]="listField.name"></system-label>
                    </option>
                </select>
            </div>
        </div>
    </div>
    <div cdkDropListGroup class="slds-border--bottom slds-border--left slds-border--right slds-border--top slds-grid slds-grow" style="min-height: 100px">
        <div class="slds-size--1-of-4 slds-scrollable--y slds-border--right" style="height: 100%">
            <table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover">
                <thead>
                <tr class="slds-text-title--caps slds-theme--shade">
                    <th scope="col" class="slds-cell-shrink"></th>
                    <th scope="col">
                        <div class="slds-truncate" [title]="language.getLabel('LBL_FIELDS')">
                            <system-label label="LBL_FIELDS"></system-label>
                        </div>
                    </th>
                </tr>
                </thead>
                <tbody cdkDropList cdkDropListSortingDisabled [cdkDropListData]="listFields">
                <tr *ngFor="let listField of availableListFields; trackBy: trackByFn" cdkDrag [cdkDragData]="listField" class="slds-border--bottom slds-drag--preview" style="height: 41px">
                    <td class="slds-p-around--none">
                        <system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon>
                    </td>
                    <td>
                        <div [title]="listField.name" class="slds-truncate">
                            <system-label [label]="listField.name"></system-label>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div cdkDropList [cdkDropListData]="properties.dataseries" (cdkDropListDropped)="onDrop($event)" class="slds-scrollable--y slds-size--3-of-4" style="height: inherit">
            <table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover">
                <thead>
                    <tr class="slds-text-title--caps slds-theme--shade">
                        <th scope="col">
                            <div class="slds-truncate" [title]="language.getLabel('LBL_NAME')">
                                <system-label label="LBL_NAME"></system-label>
                            </div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" [title]="language.getLabel('LBL_FUNCTION')">
                                <system-label label="LBL_FUNCTION"></system-label>
                            </div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" [title]="language.getLabel('LBL_AXIS')">
                                <system-label label="LBL_AXIS"></system-label>
                            </div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" [title]="language.getLabel('LBL_RENDER_AS')">
                                <system-label label="LBL_RENDER_AS"></system-label>
                            </div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" [title]="language.getLabel('LBL_COLOR')">
                                <system-label label="LBL_COLOR"></system-label>
                            </div>
                        </th>
                        <th scope="col" class="slds-cell-shrink"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dataSeriesItem of properties.dataseries; trackBy: trackByFn" cdkDrag cdkDragDisabled class="slds-border--bottom">
                        <td>
                            <div [title]="dataSeriesItem.name" class="slds-truncate">
                                <system-label [label]="dataSeriesItem.name"></system-label>
                            </div>
                        </td>
                        <td>
                            <div class="slds-form-element">
                                <div class="slds-form-element__control">
                                    <div class="slds-select_container">
                                        <select class="slds-select" [(ngModel)]="dataSeriesItem.chartfunction">
                                            <option value="-">-</option>
                                            <option value="SUM"><system-label label="LBL_SUM"></system-label></option>
                                            <option value="AVG"><system-label label="LBL_AVERAGE"></system-label></option>
                                            <option value="CUMSUM"><system-label label="LBL_SUM_CUMULATED"></system-label></option>
                                            <option value="COUNT"><system-label label="LBL_COUNT"></system-label></option>
                                            <option value="MAX"><system-label label="LBL_MAXIMUM"></system-label></option>
                                            <option value="MIN"><system-label label="LBL_MINIMUM"></system-label></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="slds-form-element">
                                <div class="slds-form-element__control">
                                    <div class="slds-select_container">
                                        <!--suppress JSDeprecatedSymbols -->
                                        <select class="slds-select" [(ngModel)]="dataSeriesItem.axis">
                                            <option value="-">-</option>
                                            <option value="P"><system-label label="LBL_PRIMARY"></system-label></option>
                                            <option value="S"><system-label label="LBL_SECONDARY"></system-label></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="slds-form-element">
                                <div class="slds-form-element__control">
                                    <div class="slds-select_container">
                                        <select class="slds-select" [(ngModel)]="dataSeriesItem.renderer">
                                            <option value="-">-</option>
                                            <option value="bars"><system-label label="LBL_BAR"></system-label></option>
                                            <option value="line"><system-label label="LBL_LINE"></system-label></option>
                                            <option value="area"><system-label label="LBL_AREA"></system-label></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="slds-form-element">
                                <div class="slds-form-element__control">
                                    <input type="text" [(ngModel)]="dataSeriesItem.color" class="slds-input">
                                </div>
                            </div>
                        </td>
                        <td>
                            <button class="slds-button slds-button--icon" (click)="deleteSeries(dataSeriesItem.fieldid)">
                                <system-button-icon icon="delete"></system-button-icon>
                            </button>
                        </td>
                    </tr>
                    <tr *ngIf="properties.dataseries?.length == 0">
                        <td colspan="6" class="slds-text-align_center" style="padding: 1rem;">
                            <system-label label="MSG_DROP_FIELD_HERE"></system-label>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
